<!DOCTYPE html>
<!-- saved from url=(0055)https://html-classic.itch.zone/html/12957119/index.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>Type Help</title>
<meta name="viewport" content="width=device-width,initial-scale=1">
<!--

SugarCube (v2.36.1): A free (gratis and libre) story format.

Copyright © 2013–2021 Thomas Michael Edwards <thomasmedwards@gmail.com>.
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

1. Redistributions of source code must retain the above copyright notice, this
   list of conditions and the following disclaimer.
2. Redistributions in binary form must reproduce the above copyright notice,
   this list of conditions and the following disclaimer in the documentation
   and/or other materials provided with the distribution.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR
ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
(INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

-->
<script id="script-libraries" type="text/javascript">
if(document.head&&document.addEventListener&&document.querySelector&&Object.create&&Object.freeze&&JSON){document.documentElement.setAttribute("data-init", "loading");
/*! @source http://purl.eligrey.com/github/classList.js/blob/1.2.20171210/classList.js */
"document"in self&&("classList"in document.createElement("_")&&(!document.createElementNS||"classList"in document.createElementNS("http://www.w3.org/2000/svg","g"))||!function(t){"use strict";if("Element"in t){var e="classList",n="prototype",i=t.Element[n],s=Object,r=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},o=Array[n].indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(e in this&&this[e]===t)return e;return-1},c=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},a=function(t,e){if(""===e)throw new c("SYNTAX_ERR","The token must not be empty.");if(/\s/.test(e))throw new c("INVALID_CHARACTER_ERR","The token must not contain space characters.");return o.call(t,e)},l=function(t){for(var e=r.call(t.getAttribute("class")||""),n=e?e.split(/\s+/):[],i=0,s=n.length;s>i;i++)this.push(n[i]);this._updateClassName=function(){t.setAttribute("class",this.toString())}},u=l[n]=[],h=function(){return new l(this)};if(c[n]=Error[n],u.item=function(t){return this[t]||null},u.contains=function(t){return~a(this,t+"")},u.add=function(){var t,e=arguments,n=0,i=e.length,s=!1;do t=e[n]+"",~a(this,t)||(this.push(t),s=!0);while(++n<i);s&&this._updateClassName()},u.remove=function(){var t,e,n=arguments,i=0,s=n.length,r=!1;do for(t=n[i]+"",e=a(this,t);~e;)this.splice(e,1),r=!0,e=a(this,t);while(++i<s);r&&this._updateClassName()},u.toggle=function(t,e){var n=this.contains(t),i=n?e!==!0&&"remove":e!==!1&&"add";return i&&this[i](t),e===!0||e===!1?e:!n},u.replace=function(t,e){var n=a(t+"");~n&&(this.splice(n,1,e),this._updateClassName())},u.toString=function(){return this.join(" ")},s.defineProperty){var f={get:h,enumerable:!0,configurable:!0};try{s.defineProperty(i,e,f)}catch(p){void 0!==p.number&&-2146823252!==p.number||(f.enumerable=!1,s.defineProperty(i,e,f))}}else s[n].__defineGetter__&&i.__defineGetter__(e,h)}}(self),function(){"use strict";var t=document.createElement("_");if(t.classList.add("c1","c2"),!t.classList.contains("c2")){var e=function(t){var e=DOMTokenList.prototype[t];DOMTokenList.prototype[t]=function(t){var n,i=arguments.length;for(n=0;i>n;n++)t=arguments[n],e.call(this,t)}};e("add"),e("remove")}if(t.classList.toggle("c3",!1),t.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return 1 in arguments&&!this.contains(t)==!e?e:n.call(this,t)}}"replace"in document.createElement("_").classList||(DOMTokenList.prototype.replace=function(t,e){var n=this.toString().split(" "),i=n.indexOf(t+"");~i&&(n=n.slice(i),this.remove.apply(this,n),this.add(e),this.add.apply(this,n.slice(1)))}),t=null}());
/*!
 * https://github.com/es-shims/es5-shim
 * @license es5-shim Copyright 2009-2020 by contributors, MIT License
 * see https://github.com/es-shims/es5-shim/blob/v4.5.14/LICENSE
 */
(function(t,r){"use strict";if(typeof define==="function"&&define.amd){define(r)}else if(typeof exports==="object"){module.exports=r()}else{t.returnExports=r()}})(this,function(){var t=Array;var r=t.prototype;var e=Object;var n=e.prototype;var i=Function;var a=i.prototype;var o=String;var f=o.prototype;var u=Number;var l=u.prototype;var s=r.slice;var c=r.splice;var v=r.push;var h=r.unshift;var p=r.concat;var y=r.join;var d=a.call;var g=a.apply;var w=Math.max;var b=Math.min;var T=n.toString;var m=typeof Symbol==="function"&&typeof Symbol.toStringTag==="symbol";var D;var S=Function.prototype.toString,x=/^\s*class /,O=function isES6ClassFn(t){try{var r=S.call(t);var e=r.replace(/\/\/.*\n/g,"");var n=e.replace(/\/\*[.\s\S]*\*\//g,"");var i=n.replace(/\n/gm," ").replace(/ {2}/g," ");return x.test(i)}catch(a){return false}},E=function tryFunctionObject(t){try{if(O(t)){return false}S.call(t);return true}catch(r){return false}},j="[object Function]",I="[object GeneratorFunction]",D=function isCallable(t){if(!t){return false}if(typeof t!=="function"&&typeof t!=="object"){return false}if(m){return E(t)}if(O(t)){return false}var r=T.call(t);return r===j||r===I};var M;var U=RegExp.prototype.exec,$=function tryRegexExec(t){try{U.call(t);return true}catch(r){return false}},F="[object RegExp]";M=function isRegex(t){if(typeof t!=="object"){return false}return m?$(t):T.call(t)===F};var N;var C=String.prototype.valueOf,k=function tryStringObject(t){try{C.call(t);return true}catch(r){return false}},A="[object String]";N=function isString(t){if(typeof t==="string"){return true}if(typeof t!=="object"){return false}return m?k(t):T.call(t)===A};var R=e.defineProperty&&function(){try{var t={};e.defineProperty(t,"x",{enumerable:false,value:t});for(var r in t){return false}return t.x===t}catch(n){return false}}();var P=function(t){var r;if(R){r=function(t,r,n,i){if(!i&&r in t){return}e.defineProperty(t,r,{configurable:true,enumerable:false,writable:true,value:n})}}else{r=function(t,r,e,n){if(!n&&r in t){return}t[r]=e}}return function defineProperties(e,n,i){for(var a in n){if(t.call(n,a)){r(e,a,n[a],i)}}}}(n.hasOwnProperty);var J=function isPrimitive(t){var r=typeof t;return t===null||r!=="object"&&r!=="function"};var Y=u.isNaN||function isActualNaN(t){return t!==t};var z={ToInteger:function ToInteger(t){var r=+t;if(Y(r)){r=0}else if(r!==0&&r!==1/0&&r!==-(1/0)){r=(r>0||-1)*Math.floor(Math.abs(r))}return r},ToPrimitive:function ToPrimitive(t){var r,e,n;if(J(t)){return t}e=t.valueOf;if(D(e)){r=e.call(t);if(J(r)){return r}}n=t.toString;if(D(n)){r=n.call(t);if(J(r)){return r}}throw new TypeError},ToObject:function(t){if(t==null){throw new TypeError("can't convert "+t+" to object")}return e(t)},ToUint32:function ToUint32(t){return t>>>0}};var Z=function Empty(){};P(a,{bind:function bind(t){var r=this;if(!D(r)){throw new TypeError("Function.prototype.bind called on incompatible "+r)}var n=s.call(arguments,1);var a;var o=function(){if(this instanceof a){var i=g.call(r,this,p.call(n,s.call(arguments)));if(e(i)===i){return i}return this}else{return g.call(r,t,p.call(n,s.call(arguments)))}};var f=w(0,r.length-n.length);var u=[];for(var l=0;l<f;l++){v.call(u,"$"+l)}a=i("binder","return function ("+y.call(u,",")+"){ return binder.apply(this, arguments); }")(o);if(r.prototype){Z.prototype=r.prototype;a.prototype=new Z;Z.prototype=null}return a}});var G=d.bind(n.hasOwnProperty);var H=d.bind(n.toString);var W=d.bind(s);var B=g.bind(s);if(typeof document==="object"&&document&&document.documentElement){try{W(document.documentElement.childNodes)}catch(X){var L=W;var q=B;W=function arraySliceIE(t){var r=[];var e=t.length;while(e-- >0){r[e]=t[e]}return q(r,L(arguments,1))};B=function arraySliceApplyIE(t,r){return q(W(t),r)}}}var K=d.bind(f.slice);var Q=d.bind(f.split);var V=d.bind(f.indexOf);var _=d.bind(v);var tt=d.bind(n.propertyIsEnumerable);var rt=d.bind(r.sort);var et=t.isArray||function isArray(t){return H(t)==="[object Array]"};var nt=[].unshift(0)!==1;P(r,{unshift:function(){h.apply(this,arguments);return this.length}},nt);P(t,{isArray:et});var it=e("a");var at=it[0]!=="a"||!(0 in it);var ot=function properlyBoxed(t){var r=true;var e=true;var n=false;if(t){try{t.call("foo",function(t,e,n){if(typeof n!=="object"){r=false}});t.call([1],function(){"use strict";e=typeof this==="string"},"x")}catch(i){n=true}}return!!t&&!n&&r&&e};P(r,{forEach:function forEach(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=-1;var i=z.ToUint32(e.length);var a;if(arguments.length>1){a=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.forEach callback must be a function")}while(++n<i){if(n in e){if(typeof a==="undefined"){t(e[n],n,r)}else{t.call(a,e[n],n,r)}}}}},!ot(r.forEach));P(r,{map:function map(r){var e=z.ToObject(this);var n=at&&N(this)?Q(this,""):e;var i=z.ToUint32(n.length);var a=t(i);var o;if(arguments.length>1){o=arguments[1]}if(!D(r)){throw new TypeError("Array.prototype.map callback must be a function")}for(var f=0;f<i;f++){if(f in n){if(typeof o==="undefined"){a[f]=r(n[f],f,e)}else{a[f]=r.call(o,n[f],f,e)}}}return a}},!ot(r.map));P(r,{filter:function filter(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i=[];var a;var o;if(arguments.length>1){o=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.filter callback must be a function")}for(var f=0;f<n;f++){if(f in e){a=e[f];if(typeof o==="undefined"?t(a,f,r):t.call(o,a,f,r)){_(i,a)}}}return i}},!ot(r.filter));P(r,{every:function every(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.every callback must be a function")}for(var a=0;a<n;a++){if(a in e&&!(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return false}}return true}},!ot(r.every));P(r,{some:function some(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);var i;if(arguments.length>1){i=arguments[1]}if(!D(t)){throw new TypeError("Array.prototype.some callback must be a function")}for(var a=0;a<n;a++){if(a in e&&(typeof i==="undefined"?t(e[a],a,r):t.call(i,e[a],a,r))){return true}}return false}},!ot(r.some));var ft=false;if(r.reduce){ft=typeof r.reduce.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduce:function reduce(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduce callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduce of empty array with no initial value")}var i=0;var a;if(arguments.length>=2){a=arguments[1]}else{do{if(i in e){a=e[i++];break}if(++i>=n){throw new TypeError("reduce of empty array with no initial value")}}while(true)}for(;i<n;i++){if(i in e){a=t(a,e[i],i,r)}}return a}},!ft);var ut=false;if(r.reduceRight){ut=typeof r.reduceRight.call("es5",function(t,r,e,n){return n})==="object"}P(r,{reduceRight:function reduceRight(t){var r=z.ToObject(this);var e=at&&N(this)?Q(this,""):r;var n=z.ToUint32(e.length);if(!D(t)){throw new TypeError("Array.prototype.reduceRight callback must be a function")}if(n===0&&arguments.length===1){throw new TypeError("reduceRight of empty array with no initial value")}var i;var a=n-1;if(arguments.length>=2){i=arguments[1]}else{do{if(a in e){i=e[a--];break}if(--a<0){throw new TypeError("reduceRight of empty array with no initial value")}}while(true)}if(a<0){return i}do{if(a in e){i=t(i,e[a],a,r)}}while(a--);return i}},!ut);var lt=r.indexOf&&[0,1].indexOf(1,2)!==-1;P(r,{indexOf:function indexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=0;if(arguments.length>1){n=z.ToInteger(arguments[1])}n=n>=0?n:w(0,e+n);for(;n<e;n++){if(n in r&&r[n]===t){return n}}return-1}},lt);var st=r.lastIndexOf&&[0,1].lastIndexOf(0,-3)!==-1;P(r,{lastIndexOf:function lastIndexOf(t){var r=at&&N(this)?Q(this,""):z.ToObject(this);var e=z.ToUint32(r.length);if(e===0){return-1}var n=e-1;if(arguments.length>1){n=b(n,z.ToInteger(arguments[1]))}n=n>=0?n:e-Math.abs(n);for(;n>=0;n--){if(n in r&&t===r[n]){return n}}return-1}},st);var ct=function(){var t=[1,2];var r=t.splice();return t.length===2&&et(r)&&r.length===0}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}else{return c.apply(this,arguments)}}},!ct);var vt=function(){var t={};r.splice.call(t,0,0,1);return t.length===1}();P(r,{splice:function splice(t,r){if(arguments.length===0){return[]}var e=arguments;this.length=w(z.ToInteger(this.length),0);if(arguments.length>0&&typeof r!=="number"){e=W(arguments);if(e.length<2){_(e,this.length-t)}else{e[1]=z.ToInteger(r)}}return c.apply(this,e)}},!vt);var ht=function(){var r=new t(1e5);r[8]="x";r.splice(1,1);return r.indexOf("x")===7}();var pt=function(){var t=256;var r=[];r[t]="a";r.splice(t+1,0,"b");return r[t]==="a"}();P(r,{splice:function splice(t,r){var e=z.ToObject(this);var n=[];var i=z.ToUint32(e.length);var a=z.ToInteger(t);var f=a<0?w(i+a,0):b(a,i);var u=arguments.length===0?0:arguments.length===1?i-f:b(w(z.ToInteger(r),0),i-f);var l=0;var s;while(l<u){s=o(f+l);if(G(e,s)){n[l]=e[s]}l+=1}var c=W(arguments,2);var v=c.length;var h;if(v<u){l=f;var p=i-u;while(l<p){s=o(l+u);h=o(l+v);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l+=1}l=i;var y=i-u+v;while(l>y){delete e[l-1];l-=1}}else if(v>u){l=i-u;while(l>f){s=o(l+u-1);h=o(l+v-1);if(G(e,s)){e[h]=e[s]}else{delete e[h]}l-=1}}l=f;for(var d=0;d<c.length;++d){e[l]=c[d];l+=1}e.length=i-u+v;return n}},!ht||!pt);var yt=r.join;var dt;try{dt=Array.prototype.join.call("123",",")!=="1,2,3"}catch(X){dt=true}if(dt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(N(this)?Q(this,""):this,r)}},dt)}var gt=[1,2].join(undefined)!=="1,2";if(gt){P(r,{join:function join(t){var r=typeof t==="undefined"?",":t;return yt.call(this,r)}},gt)}var wt=function push(t){var r=z.ToObject(this);var e=z.ToUint32(r.length);var n=0;while(n<arguments.length){r[e+n]=arguments[n];n+=1}r.length=e+n;return e+n};var bt=function(){var t={};var r=Array.prototype.push.call(t,undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:function push(t){if(et(this)){return v.apply(this,arguments)}return wt.apply(this,arguments)}},bt);var Tt=function(){var t=[];var r=t.push(undefined);return r!==1||t.length!==1||typeof t[0]!=="undefined"||!G(t,0)}();P(r,{push:wt},Tt);P(r,{slice:function(t,r){var e=N(this)?Q(this,""):this;return B(e,arguments)}},at);var mt=function(){try{[1,2].sort(null)}catch(t){try{[1,2].sort({})}catch(r){return false}}return true}();var Dt=function(){try{[1,2].sort(/a/);return false}catch(t){}return true}();var St=function(){try{[1,2].sort(undefined);return true}catch(t){}return false}();P(r,{sort:function sort(t){if(typeof t==="undefined"){return rt(this)}if(!D(t)){throw new TypeError("Array.prototype.sort callback must be a function")}return rt(this,t)}},mt||!St||!Dt);var xt=!tt({toString:null},"toString");var Ot=tt(function(){},"prototype");var Et=!G("x","0");var jt=function(t){var r=t.constructor;return r&&r.prototype===t};var It={$applicationCache:true,$console:true,$external:true,$frame:true,$frameElement:true,$frames:true,$innerHeight:true,$innerWidth:true,$onmozfullscreenchange:true,$onmozfullscreenerror:true,$outerHeight:true,$outerWidth:true,$pageXOffset:true,$pageYOffset:true,$parent:true,$scrollLeft:true,$scrollTop:true,$scrollX:true,$scrollY:true,$self:true,$webkitIndexedDB:true,$webkitStorageInfo:true,$window:true,$width:true,$height:true,$top:true,$localStorage:true};var Mt=function(){if(typeof window==="undefined"){return false}for(var t in window){try{if(!It["$"+t]&&G(window,t)&&window[t]!==null&&typeof window[t]==="object"){jt(window[t])}}catch(r){return true}}return false}();var Ut=function(t){if(typeof window==="undefined"||!Mt){return jt(t)}try{return jt(t)}catch(r){return false}};var $t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"];var Ft=$t.length;var Nt=function isArguments(t){return H(t)==="[object Arguments]"};var Ct=function isArguments(t){return t!==null&&typeof t==="object"&&typeof t.length==="number"&&t.length>=0&&!et(t)&&D(t.callee)};var kt=Nt(arguments)?Nt:Ct;P(e,{keys:function keys(t){var r=D(t);var e=kt(t);var n=t!==null&&typeof t==="object";var i=n&&N(t);if(!n&&!r&&!e){throw new TypeError("Object.keys called on a non-object")}var a=[];var f=Ot&&r;if(i&&Et||e){for(var u=0;u<t.length;++u){_(a,o(u))}}if(!e){for(var l in t){if(!(f&&l==="prototype")&&G(t,l)){_(a,o(l))}}}if(xt){var s=Ut(t);for(var c=0;c<Ft;c++){var v=$t[c];if(!(s&&v==="constructor")&&G(t,v)){_(a,v)}}}return a}});var At=e.keys&&function(){return e.keys(arguments).length===2}(1,2);var Rt=e.keys&&function(){var t=e.keys(arguments);return arguments.length!==1||t.length!==1||t[0]!==1}(1);var Pt=e.keys;P(e,{keys:function keys(t){if(kt(t)){return Pt(W(t))}else{return Pt(t)}}},!At||Rt);var Jt=new Date(-0xc782b5b342b24).getUTCMonth()!==0;var Yt=new Date(-0x55d318d56a724);var zt=new Date(14496624e5);var Zt=Yt.toUTCString()!=="Mon, 01 Jan -45875 11:59:59 GMT";var Gt;var Ht;var Wt=Yt.getTimezoneOffset();if(Wt<-720){Gt=Yt.toDateString()!=="Tue Jan 02 -45875";Ht=!/^Thu Dec 10 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}else{Gt=Yt.toDateString()!=="Mon Jan 01 -45875";Ht=!/^Wed Dec 09 2015 \d\d:\d\d:\d\d GMT[-+]\d\d\d\d(?: |$)/.test(String(zt))}var Bt=d.bind(Date.prototype.getFullYear);var Xt=d.bind(Date.prototype.getMonth);var Lt=d.bind(Date.prototype.getDate);var qt=d.bind(Date.prototype.getUTCFullYear);var Kt=d.bind(Date.prototype.getUTCMonth);var Qt=d.bind(Date.prototype.getUTCDate);var Vt=d.bind(Date.prototype.getUTCDay);var _t=d.bind(Date.prototype.getUTCHours);var tr=d.bind(Date.prototype.getUTCMinutes);var rr=d.bind(Date.prototype.getUTCSeconds);var er=d.bind(Date.prototype.getUTCMilliseconds);var nr=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];var ir=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var ar=function daysInMonth(t,r){return Lt(new Date(r,t,0))};P(Date.prototype,{getFullYear:function getFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);if(t<0&&Xt(this)>11){return t+1}return t},getMonth:function getMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);if(t<0&&r>11){return 0}return r},getDate:function getDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Bt(this);var r=Xt(this);var e=Lt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e},getUTCFullYear:function getUTCFullYear(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);if(t<0&&Kt(this)>11){return t+1}return t},getUTCMonth:function getUTCMonth(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);if(t<0&&r>11){return 0}return r},getUTCDate:function getUTCDate(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=qt(this);var r=Kt(this);var e=Qt(this);if(t<0&&r>11){if(r===12){return e}var n=ar(0,t+1);return n-e+1}return e}},Jt);P(Date.prototype,{toUTCString:function toUTCString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=Vt(this);var r=Qt(this);var e=Kt(this);var n=qt(this);var i=_t(this);var a=tr(this);var o=rr(this);return nr[t]+", "+(r<10?"0"+r:r)+" "+ir[e]+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"}},Jt||Zt);P(Date.prototype,{toDateString:function toDateString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n}},Jt||Gt);if(Jt||Ht){Date.prototype.toString=function toString(){if(!this||!(this instanceof Date)){throw new TypeError("this is not a Date object.")}var t=this.getDay();var r=this.getDate();var e=this.getMonth();var n=this.getFullYear();var i=this.getHours();var a=this.getMinutes();var o=this.getSeconds();var f=this.getTimezoneOffset();var u=Math.floor(Math.abs(f)/60);var l=Math.floor(Math.abs(f)%60);return nr[t]+" "+ir[e]+" "+(r<10?"0"+r:r)+" "+n+" "+(i<10?"0"+i:i)+":"+(a<10?"0"+a:a)+":"+(o<10?"0"+o:o)+" GMT"+(f>0?"-":"+")+(u<10?"0"+u:u)+(l<10?"0"+l:l)};if(R){e.defineProperty(Date.prototype,"toString",{configurable:true,enumerable:false,writable:true})}}var or=-621987552e5;var fr="-000001";var ur=Date.prototype.toISOString&&new Date(or).toISOString().indexOf(fr)===-1;var lr=Date.prototype.toISOString&&new Date(-1).toISOString()!=="1969-12-31T23:59:59.999Z";var sr=d.bind(Date.prototype.getTime);P(Date.prototype,{toISOString:function toISOString(){if(!isFinite(this)||!isFinite(sr(this))){throw new RangeError("Date.prototype.toISOString called on non-finite value.")}var t=qt(this);var r=Kt(this);t+=Math.floor(r/12);r=(r%12+12)%12;var e=[r+1,Qt(this),_t(this),tr(this),rr(this)];t=(t<0?"-":t>9999?"+":"")+K("00000"+Math.abs(t),0<=t&&t<=9999?-4:-6);for(var n=0;n<e.length;++n){e[n]=K("00"+e[n],-2)}return t+"-"+W(e,0,2).join("-")+"T"+W(e,2).join(":")+"."+K("000"+er(this),-3)+"Z"}},ur||lr);var cr=function(){try{return Date.prototype.toJSON&&new Date(NaN).toJSON()===null&&new Date(or).toJSON().indexOf(fr)!==-1&&Date.prototype.toJSON.call({toISOString:function(){return true}})}catch(t){return false}}();if(!cr){Date.prototype.toJSON=function toJSON(t){var r=e(this);var n=z.ToPrimitive(r);if(typeof n==="number"&&!isFinite(n)){return null}var i=r.toISOString;if(!D(i)){throw new TypeError("toISOString property is not callable")}return i.call(r)}}var vr=Date.parse("+033658-09-27T01:46:40.000Z")===1e15;var hr=!isNaN(Date.parse("2012-04-04T24:00:00.500Z"))||!isNaN(Date.parse("2012-11-31T23:59:59.000Z"))||!isNaN(Date.parse("2012-12-31T23:59:60.000Z"));var pr=isNaN(Date.parse("2000-01-01T00:00:00.000Z"));if(pr||hr||!vr){var yr=Math.pow(2,31)-1;var dr=Y(new Date(1970,0,1,0,0,0,yr+1).getTime());Date=function(t){var r=function Date(e,n,i,a,f,u,l){var s=arguments.length;var c;if(this instanceof t){var v=u;var h=l;if(dr&&s>=7&&l>yr){var p=Math.floor(l/yr)*yr;var y=Math.floor(p/1e3);v+=y;h-=y*1e3}c=s===1&&o(e)===e?new t(r.parse(e)):s>=7?new t(e,n,i,a,f,v,h):s>=6?new t(e,n,i,a,f,v):s>=5?new t(e,n,i,a,f):s>=4?new t(e,n,i,a):s>=3?new t(e,n,i):s>=2?new t(e,n):s>=1?new t(e instanceof t?+e:e):new t}else{c=t.apply(this,arguments)}if(!J(c)){P(c,{constructor:r},true)}return c};var e=new RegExp("^"+"(\\d{4}|[+-]\\d{6})"+"(?:-(\\d{2})"+"(?:-(\\d{2})"+"(?:"+"T(\\d{2})"+":(\\d{2})"+"(?:"+":(\\d{2})"+"(?:(\\.\\d{1,}))?"+")?"+"("+"Z|"+"(?:"+"([-+])"+"(\\d{2})"+":(\\d{2})"+")"+")?)?)?)?"+"$");var n=[0,31,59,90,120,151,181,212,243,273,304,334,365];var i=function dayFromMonth(t,r){var e=r>1?1:0;return n[r]+Math.floor((t-1969+e)/4)-Math.floor((t-1901+e)/100)+Math.floor((t-1601+e)/400)+365*(t-1970)};var a=function toUTC(r){var e=0;var n=r;if(dr&&n>yr){var i=Math.floor(n/yr)*yr;var a=Math.floor(i/1e3);e+=a;n-=a*1e3}return u(new t(1970,0,1,0,0,e,n))};for(var f in t){if(G(t,f)){r[f]=t[f]}}P(r,{now:t.now,UTC:t.UTC},true);r.prototype=t.prototype;P(r.prototype,{constructor:r},true);var l=function parse(r){var n=e.exec(r);if(n){var o=u(n[1]),f=u(n[2]||1)-1,l=u(n[3]||1)-1,s=u(n[4]||0),c=u(n[5]||0),v=u(n[6]||0),h=Math.floor(u(n[7]||0)*1e3),p=Boolean(n[4]&&!n[8]),y=n[9]==="-"?1:-1,d=u(n[10]||0),g=u(n[11]||0),w;var b=c>0||v>0||h>0;if(s<(b?24:25)&&c<60&&v<60&&h<1e3&&f>-1&&f<12&&d<24&&g<60&&l>-1&&l<i(o,f+1)-i(o,f)){w=((i(o,f)+l)*24+s+d*y)*60;w=((w+c+g*y)*60+v)*1e3+h;if(p){w=a(w)}if(-864e13<=w&&w<=864e13){return w}}return NaN}return t.parse.apply(this,arguments)};P(r,{parse:l});return r}(Date)}if(!Date.now){Date.now=function now(){return(new Date).getTime()}}var gr=l.toFixed&&(8e-5.toFixed(3)!=="0.000"||.9.toFixed(0)!=="1"||1.255.toFixed(2)!=="1.25"||(1000000000000000128).toFixed(0)!=="1000000000000000128");var wr={base:1e7,size:6,data:[0,0,0,0,0,0],multiply:function multiply(t,r){var e=-1;var n=r;while(++e<wr.size){n+=t*wr.data[e];wr.data[e]=n%wr.base;n=Math.floor(n/wr.base)}},divide:function divide(t){var r=wr.size;var e=0;while(--r>=0){e+=wr.data[r];wr.data[r]=Math.floor(e/t);e=e%t*wr.base}},numToString:function numToString(){var t=wr.size;var r="";while(--t>=0){if(r!==""||t===0||wr.data[t]!==0){var e=o(wr.data[t]);if(r===""){r=e}else{r+=K("0000000",0,7-e.length)+e}}}return r},pow:function pow(t,r,e){return r===0?e:r%2===1?pow(t,r-1,e*t):pow(t*t,r/2,e)},log:function log(t){var r=0;var e=t;while(e>=4096){r+=12;e/=4096}while(e>=2){r+=1;e/=2}return r}};var br=function toFixed(t){var r,e,n,i,a,f,l,s;r=u(t);r=Y(r)?0:Math.floor(r);if(r<0||r>20){throw new RangeError("Number.toFixed called with invalid number of decimals")}e=u(this);if(Y(e)){return"NaN"}if(e<=-1e21||e>=1e21){return o(e)}n="";if(e<0){n="-";e=-e}i="0";if(e>1e-21){a=wr.log(e*wr.pow(2,69,1))-69;f=a<0?e*wr.pow(2,-a,1):e/wr.pow(2,a,1);f*=4503599627370496;a=52-a;if(a>0){wr.multiply(0,f);l=r;while(l>=7){wr.multiply(1e7,0);l-=7}wr.multiply(wr.pow(10,l,1),0);l=a-1;while(l>=23){wr.divide(1<<23);l-=23}wr.divide(1<<l);wr.multiply(1,1);wr.divide(2);i=wr.numToString()}else{wr.multiply(0,f);wr.multiply(1<<-a,0);i=wr.numToString()+K("0.00000000000000000000",2,2+r)}}if(r>0){s=i.length;if(s<=r){i=n+K("0.0000000000000000000",0,r-s+2)+i}else{i=n+K(i,0,s-r)+"."+K(i,s-r)}}else{i=n+i}return i};P(l,{toFixed:br},gr);var Tr=function(){try{return 1..toPrecision(undefined)==="1"}catch(t){return true}}();var mr=l.toPrecision;P(l,{toPrecision:function toPrecision(t){return typeof t==="undefined"?mr.call(this):mr.call(this,t)}},Tr);if("ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1){(function(){var t=typeof/()??/.exec("")[1]==="undefined";var r=Math.pow(2,32)-1;f.split=function(e,n){var i=String(this);if(typeof e==="undefined"&&n===0){return[]}if(!M(e)){return Q(this,e,n)}var a=[];var o=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),f=0,u,l,s,c;var h=new RegExp(e.source,o+"g");if(!t){u=new RegExp("^"+h.source+"$(?!\\s)",o)}var p=typeof n==="undefined"?r:z.ToUint32(n);l=h.exec(i);while(l){s=l.index+l[0].length;if(s>f){_(a,K(i,f,l.index));if(!t&&l.length>1){l[0].replace(u,function(){for(var t=1;t<arguments.length-2;t++){if(typeof arguments[t]==="undefined"){l[t]=void 0}}})}if(l.length>1&&l.index<i.length){v.apply(a,W(l,1))}c=l[0].length;f=s;if(a.length>=p){break}}if(h.lastIndex===l.index){h.lastIndex++}l=h.exec(i)}if(f===i.length){if(c||!h.test("")){_(a,"")}}else{_(a,K(i,f))}return a.length>p?W(a,0,p):a}})()}else if("0".split(void 0,0).length){f.split=function split(t,r){if(typeof t==="undefined"&&r===0){return[]}return Q(this,t,r)}}var Dr=f.replace;var Sr=function(){var t=[];"x".replace(/x(.)?/g,function(r,e){_(t,e)});return t.length===1&&typeof t[0]==="undefined"}();if(!Sr){f.replace=function replace(t,r){var e=D(r);var n=M(t)&&/\)[*?]/.test(t.source);if(!e||!n){return Dr.call(this,t,r)}else{var i=function(e){var n=arguments.length;var i=t.lastIndex;t.lastIndex=0;var a=t.exec(e)||[];t.lastIndex=i;_(a,arguments[n-2],arguments[n-1]);return r.apply(this,a)};return Dr.call(this,t,i)}}}var xr=f.substr;var Or="".substr&&"0b".substr(-1)!=="b";P(f,{substr:function substr(t,r){var e=t;if(t<0){e=w(this.length+t,0)}return xr.call(this,e,r)}},Or);var Er="\t\n\x0B\f\r \xa0\u1680\u2000\u2001\u2002\u2003"+"\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028"+"\u2029\ufeff";var jr="\u200b";var Ir="["+Er+"]";var Mr=new RegExp("^"+Ir+Ir+"*");var Ur=new RegExp(Ir+Ir+"*$");var $r=f.trim&&(Er.trim()||!jr.trim());P(f,{trim:function trim(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}return o(this).replace(Mr,"").replace(Ur,"")}},$r);var Fr=d.bind(String.prototype.trim);var Nr=f.lastIndexOf&&"abc\u3042\u3044".lastIndexOf("\u3042\u3044",2)!==-1;P(f,{lastIndexOf:function lastIndexOf(t){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var r=o(this);var e=o(t);var n=arguments.length>1?u(arguments[1]):NaN;var i=Y(n)?Infinity:z.ToInteger(n);var a=b(w(i,0),r.length);var f=e.length;var l=a+f;while(l>0){l=w(0,l-f);var s=V(K(r,l,a+f),e);if(s!==-1){return l+s}}return-1}},Nr);var Cr=f.lastIndexOf;P(f,{lastIndexOf:function lastIndexOf(t){return Cr.apply(this,arguments)}},f.lastIndexOf.length!==1);if(parseInt(Er+"08")!==8||parseInt(Er+"0x16")!==22){parseInt=function(t){var r=/^[-+]?0[xX]/;return function parseInt(e,n){if(typeof e==="symbol"){""+e}var i=Fr(String(e));var a=u(n)||(r.test(i)?16:10);return t(i,a)}}(parseInt)}if(1/parseFloat("-0")!==-Infinity){parseFloat=function(t){return function parseFloat(r){var e=Fr(String(r));var n=t(e);return n===0&&K(e,0,1)==="-"?-0:n}}(parseFloat)}if(String(new RangeError("test"))!=="RangeError: test"){var kr=function toString(){if(typeof this==="undefined"||this===null){throw new TypeError("can't convert "+this+" to object")}var t=this.name;if(typeof t==="undefined"){t="Error"}else if(typeof t!=="string"){t=o(t)}var r=this.message;if(typeof r==="undefined"){r=""}else if(typeof r!=="string"){r=o(r)}if(!t){return r}if(!r){return t}return t+": "+r};Error.prototype.toString=kr}if(R){var Ar=function(t,r){if(tt(t,r)){var e=Object.getOwnPropertyDescriptor(t,r);if(e.configurable){e.enumerable=false;Object.defineProperty(t,r,e)}}};Ar(Error.prototype,"message");if(Error.prototype.message!==""){Error.prototype.message=""}Ar(Error.prototype,"name")}if(String(/a/gim)!=="/a/gim"){var Rr=function toString(){var t="/"+this.source+"/";if(this.global){t+="g"}if(this.ignoreCase){t+="i"}if(this.multiline){t+="m"}return t};RegExp.prototype.toString=Rr}});
/*!
 * https://github.com/paulmillr/es6-shim
 * @license es6-shim Copyright 2013-2016 by Paul Miller (http://paulmillr.com)
 *   and contributors,  MIT License
 * es6-shim: v0.35.4
 * see https://github.com/paulmillr/es6-shim/blob/0.35.4/LICENSE
 * Details and documentation:
 * https://github.com/paulmillr/es6-shim/
 */
(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){module.exports=t()}else{e.returnExports=t()}})(this,function(){"use strict";var e=Function.call.bind(Function.apply);var t=Function.call.bind(Function.call);var r=Array.isArray;var n=Object.keys;var o=function notThunker(t){return function notThunk(){return!e(t,this,arguments)}};var i=function(e){try{e();return false}catch(t){return true}};var a=function valueOrFalseIfThrows(e){try{return e()}catch(t){return false}};var u=o(i);var f=function(){return!i(function(){return Object.defineProperty({},"x",{get:function(){}})})};var s=!!Object.defineProperty&&f();var c=function foo(){}.name==="foo";var l=Function.call.bind(Array.prototype.forEach);var p=Function.call.bind(Array.prototype.reduce);var v=Function.call.bind(Array.prototype.filter);var y=Function.call.bind(Array.prototype.some);var h=function(e,t,r,n){if(!n&&t in e){return}if(s){Object.defineProperty(e,t,{configurable:true,enumerable:false,writable:true,value:r})}else{e[t]=r}};var b=function(e,t,r){l(n(t),function(n){var o=t[n];h(e,n,o,!!r)})};var g=Function.call.bind(Object.prototype.toString);var d=typeof/abc/==="function"?function IsCallableSlow(e){return typeof e==="function"&&g(e)==="[object Function]"}:function IsCallableFast(e){return typeof e==="function"};var m={getter:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}Object.defineProperty(e,t,{configurable:true,enumerable:false,get:r})},proxy:function(e,t,r){if(!s){throw new TypeError("getters require true ES5 support")}var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,{configurable:n.configurable,enumerable:n.enumerable,get:function getKey(){return e[t]},set:function setKey(r){e[t]=r}})},redefine:function(e,t,r){if(s){var n=Object.getOwnPropertyDescriptor(e,t);n.value=r;Object.defineProperty(e,t,n)}else{e[t]=r}},defineByDescriptor:function(e,t,r){if(s){Object.defineProperty(e,t,r)}else if("value"in r){e[t]=r.value}},preserveToString:function(e,t){if(t&&d(t.toString)){h(e,"toString",t.toString.bind(t),true)}}};var O=Object.create||function(e,t){var r=function Prototype(){};r.prototype=e;var o=new r;if(typeof t!=="undefined"){n(t).forEach(function(e){m.defineByDescriptor(o,e,t[e])})}return o};var w=function(e,t){if(!Object.setPrototypeOf){return false}return a(function(){var r=function Subclass(t){var r=new e(t);Object.setPrototypeOf(r,Subclass.prototype);return r};Object.setPrototypeOf(r,e);r.prototype=O(e.prototype,{constructor:{value:r}});return t(r)})};var j=function(){if(typeof self!=="undefined"){return self}if(typeof window!=="undefined"){return window}if(typeof global!=="undefined"){return global}throw new Error("unable to locate global object")};var S=j();var T=S.isFinite;var I=Function.call.bind(String.prototype.indexOf);var E=Function.apply.bind(Array.prototype.indexOf);var P=Function.call.bind(Array.prototype.concat);var C=Function.call.bind(String.prototype.slice);var M=Function.call.bind(Array.prototype.push);var x=Function.apply.bind(Array.prototype.push);var N=Function.call.bind(Array.prototype.shift);var A=Math.max;var R=Math.min;var _=Math.floor;var k=Math.abs;var L=Math.exp;var F=Math.log;var D=Math.sqrt;var z=Function.call.bind(Object.prototype.hasOwnProperty);var q;var W=function(){};var G=S.Map;var H=G&&G.prototype["delete"];var V=G&&G.prototype.get;var B=G&&G.prototype.has;var U=G&&G.prototype.set;var $=S.Symbol||{};var J=$.species||"@@species";var X=Number.isNaN||function isNaN(e){return e!==e};var K=Number.isFinite||function isFinite(e){return typeof e==="number"&&T(e)};var Z=d(Math.sign)?Math.sign:function sign(e){var t=Number(e);if(t===0){return t}if(X(t)){return t}return t<0?-1:1};var Y=function log1p(e){var t=Number(e);if(t<-1||X(t)){return NaN}if(t===0||t===Infinity){return t}if(t===-1){return-Infinity}return 1+t-1===0?t:t*(F(1+t)/(1+t-1))};var Q=function isArguments(e){return g(e)==="[object Arguments]"};var ee=function isArguments(e){return e!==null&&typeof e==="object"&&typeof e.length==="number"&&e.length>=0&&g(e)!=="[object Array]"&&g(e.callee)==="[object Function]"};var te=Q(arguments)?Q:ee;var re={primitive:function(e){return e===null||typeof e!=="function"&&typeof e!=="object"},string:function(e){return g(e)==="[object String]"},regex:function(e){return g(e)==="[object RegExp]"},symbol:function(e){return typeof S.Symbol==="function"&&typeof e==="symbol"}};var ne=function overrideNative(e,t,r){var n=e[t];h(e,t,r,true);m.preserveToString(e[t],n)};var oe=typeof $==="function"&&typeof $["for"]==="function"&&re.symbol($());var ie=re.symbol($.iterator)?$.iterator:"_es6-shim iterator_";if(S.Set&&typeof(new S.Set)["@@iterator"]==="function"){ie="@@iterator"}if(!S.Reflect){h(S,"Reflect",{},true)}var ae=S.Reflect;var ue=String;var fe=typeof document==="undefined"||!document?null:document.all;var se=fe==null?function isNullOrUndefined(e){return e==null}:function isNullOrUndefinedAndNotDocumentAll(e){return e==null&&e!==fe};var ce={Call:function Call(t,r){var n=arguments.length>2?arguments[2]:[];if(!ce.IsCallable(t)){throw new TypeError(t+" is not a function")}return e(t,r,n)},RequireObjectCoercible:function(e,t){if(se(e)){throw new TypeError(t||"Cannot call method on "+e)}return e},TypeIsObject:function(e){if(e===void 0||e===null||e===true||e===false){return false}return typeof e==="function"||typeof e==="object"||e===fe},ToObject:function(e,t){return Object(ce.RequireObjectCoercible(e,t))},IsCallable:d,IsConstructor:function(e){return ce.IsCallable(e)},ToInt32:function(e){return ce.ToNumber(e)>>0},ToUint32:function(e){return ce.ToNumber(e)>>>0},ToNumber:function(e){if(g(e)==="[object Symbol]"){throw new TypeError("Cannot convert a Symbol value to a number")}return+e},ToInteger:function(e){var t=ce.ToNumber(e);if(X(t)){return 0}if(t===0||!K(t)){return t}return(t>0?1:-1)*_(k(t))},ToLength:function(e){var t=ce.ToInteger(e);if(t<=0){return 0}if(t>Number.MAX_SAFE_INTEGER){return Number.MAX_SAFE_INTEGER}return t},SameValue:function(e,t){if(e===t){if(e===0){return 1/e===1/t}return true}return X(e)&&X(t)},SameValueZero:function(e,t){return e===t||X(e)&&X(t)},IsIterable:function(e){return ce.TypeIsObject(e)&&(typeof e[ie]!=="undefined"||te(e))},GetIterator:function(e){if(te(e)){return new q(e,"value")}var t=ce.GetMethod(e,ie);if(!ce.IsCallable(t)){throw new TypeError("value is not an iterable")}var r=ce.Call(t,e);if(!ce.TypeIsObject(r)){throw new TypeError("bad iterator")}return r},GetMethod:function(e,t){var r=ce.ToObject(e)[t];if(se(r)){return void 0}if(!ce.IsCallable(r)){throw new TypeError("Method not callable: "+t)}return r},IteratorComplete:function(e){return!!e.done},IteratorClose:function(e,t){var r=ce.GetMethod(e,"return");if(r===void 0){return}var n,o;try{n=ce.Call(r,e)}catch(i){o=i}if(t){return}if(o){throw o}if(!ce.TypeIsObject(n)){throw new TypeError("Iterator's return method returned a non-object.")}},IteratorNext:function(e){var t=arguments.length>1?e.next(arguments[1]):e.next();if(!ce.TypeIsObject(t)){throw new TypeError("bad iterator")}return t},IteratorStep:function(e){var t=ce.IteratorNext(e);var r=ce.IteratorComplete(t);return r?false:t},Construct:function(e,t,r,n){var o=typeof r==="undefined"?e:r;if(!n&&ae.construct){return ae.construct(e,t,o)}var i=o.prototype;if(!ce.TypeIsObject(i)){i=Object.prototype}var a=O(i);var u=ce.Call(e,a,t);return ce.TypeIsObject(u)?u:a},SpeciesConstructor:function(e,t){var r=e.constructor;if(r===void 0){return t}if(!ce.TypeIsObject(r)){throw new TypeError("Bad constructor")}var n=r[J];if(se(n)){return t}if(!ce.IsConstructor(n)){throw new TypeError("Bad @@species")}return n},CreateHTML:function(e,t,r,n){var o=ce.ToString(e);var i="<"+t;if(r!==""){var a=ce.ToString(n);var u=a.replace(/"/g,"&quot;");i+=" "+r+'="'+u+'"'}var f=i+">";var s=f+o;return s+"</"+t+">"},IsRegExp:function IsRegExp(e){if(!ce.TypeIsObject(e)){return false}var t=e[$.match];if(typeof t!=="undefined"){return!!t}return re.regex(e)},ToString:function ToString(e){return ue(e)}};if(s&&oe){var le=function defineWellKnownSymbol(e){if(re.symbol($[e])){return $[e]}var t=$["for"]("Symbol."+e);Object.defineProperty($,e,{configurable:false,enumerable:false,writable:false,value:t});return t};if(!re.symbol($.search)){var pe=le("search");var ve=String.prototype.search;h(RegExp.prototype,pe,function search(e){return ce.Call(ve,e,[this])});var ye=function search(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,pe);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(ve,t,[ce.ToString(e)])};ne(String.prototype,"search",ye)}if(!re.symbol($.replace)){var he=le("replace");var be=String.prototype.replace;h(RegExp.prototype,he,function replace(e,t){return ce.Call(be,e,[this,t])});var ge=function replace(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,he);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(be,r,[ce.ToString(e),t])};ne(String.prototype,"replace",ge)}if(!re.symbol($.split)){var de=le("split");var me=String.prototype.split;h(RegExp.prototype,de,function split(e,t){return ce.Call(me,e,[this,t])});var Oe=function split(e,t){var r=ce.RequireObjectCoercible(this);if(!se(e)){var n=ce.GetMethod(e,de);if(typeof n!=="undefined"){return ce.Call(n,e,[r,t])}}return ce.Call(me,r,[ce.ToString(e),t])};ne(String.prototype,"split",Oe)}var we=re.symbol($.match);var je=we&&function(){var e={};e[$.match]=function(){return 42};return"a".match(e)!==42}();if(!we||je){var Se=le("match");var Te=String.prototype.match;h(RegExp.prototype,Se,function match(e){return ce.Call(Te,e,[this])});var Ie=function match(e){var t=ce.RequireObjectCoercible(this);if(!se(e)){var r=ce.GetMethod(e,Se);if(typeof r!=="undefined"){return ce.Call(r,e,[t])}}return ce.Call(Te,t,[ce.ToString(e)])};ne(String.prototype,"match",Ie)}}var Ee=function wrapConstructor(e,t,r){m.preserveToString(t,e);if(Object.setPrototypeOf){Object.setPrototypeOf(e,t)}if(s){l(Object.getOwnPropertyNames(e),function(n){if(n in W||r[n]){return}m.proxy(e,n,t)})}else{l(Object.keys(e),function(n){if(n in W||r[n]){return}t[n]=e[n]})}t.prototype=e.prototype;m.redefine(e.prototype,"constructor",t)};var Pe=function(){return this};var Ce=function(e){if(s&&!z(e,J)){m.getter(e,J,Pe)}};var Me=function(e,t){var r=t||function iterator(){return this};h(e,ie,r);if(!e[ie]&&re.symbol(ie)){e[ie]=r}};var xe=function createDataProperty(e,t,r){if(s){Object.defineProperty(e,t,{configurable:true,enumerable:true,writable:true,value:r})}else{e[t]=r}};var Ne=function createDataPropertyOrThrow(e,t,r){xe(e,t,r);if(!ce.SameValue(e[t],r)){throw new TypeError("property is nonconfigurable")}};var Ae=function(e,t,r,n){if(!ce.TypeIsObject(e)){throw new TypeError("Constructor requires `new`: "+t.name)}var o=t.prototype;if(!ce.TypeIsObject(o)){o=r}var i=O(o);for(var a in n){if(z(n,a)){var u=n[a];h(i,a,u,true)}}return i};if(String.fromCodePoint&&String.fromCodePoint.length!==1){var Re=String.fromCodePoint;ne(String,"fromCodePoint",function fromCodePoint(e){return ce.Call(Re,this,arguments)})}var _e={fromCodePoint:function fromCodePoint(e){var t=[];var r;for(var n=0,o=arguments.length;n<o;n++){r=Number(arguments[n]);if(!ce.SameValue(r,ce.ToInteger(r))||r<0||r>1114111){throw new RangeError("Invalid code point "+r)}if(r<65536){M(t,String.fromCharCode(r))}else{r-=65536;M(t,String.fromCharCode((r>>10)+55296));M(t,String.fromCharCode(r%1024+56320))}}return t.join("")},raw:function raw(e){var t=ce.ToObject(e,"bad callSite");var r=ce.ToObject(t.raw,"bad raw value");var n=r.length;var o=ce.ToLength(n);if(o<=0){return""}var i=[];var a=0;var u,f,s,c;while(a<o){u=ce.ToString(a);s=ce.ToString(r[u]);M(i,s);if(a+1>=o){break}f=a+1<arguments.length?arguments[a+1]:"";c=ce.ToString(f);M(i,c);a+=1}return i.join("")}};if(String.raw&&String.raw({raw:{0:"x",1:"y",length:2}})!=="xy"){ne(String,"raw",_e.raw)}b(String,_e);var ke=function repeat(e,t){if(t<1){return""}if(t%2){return repeat(e,t-1)+e}var r=repeat(e,t/2);return r+r};var Le=Infinity;var Fe={repeat:function repeat(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);if(r<0||r>=Le){throw new RangeError("repeat count must be less than infinity and not overflow maximum string size")}return ke(t,r)},startsWith:function startsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "startsWith" with a regex')}var r=ce.ToString(e);var n;if(arguments.length>1){n=arguments[1]}var o=A(ce.ToInteger(n),0);return C(t,o,o+r.length)===r},endsWith:function endsWith(e){var t=ce.ToString(ce.RequireObjectCoercible(this));if(ce.IsRegExp(e)){throw new TypeError('Cannot call method "endsWith" with a regex')}var r=ce.ToString(e);var n=t.length;var o;if(arguments.length>1){o=arguments[1]}var i=typeof o==="undefined"?n:ce.ToInteger(o);var a=R(A(i,0),n);return C(t,a-r.length,a)===r},includes:function includes(e){if(ce.IsRegExp(e)){throw new TypeError('"includes" does not accept a RegExp')}var t=ce.ToString(e);var r;if(arguments.length>1){r=arguments[1]}return I(this,t,r)!==-1},codePointAt:function codePointAt(e){var t=ce.ToString(ce.RequireObjectCoercible(this));var r=ce.ToInteger(e);var n=t.length;if(r>=0&&r<n){var o=t.charCodeAt(r);var i=r+1===n;if(o<55296||o>56319||i){return o}var a=t.charCodeAt(r+1);if(a<56320||a>57343){return o}return(o-55296)*1024+(a-56320)+65536}}};if(String.prototype.includes&&"a".includes("a",Infinity)!==false){ne(String.prototype,"includes",Fe.includes)}if(String.prototype.startsWith&&String.prototype.endsWith){var De=i(function(){return"/a/".startsWith(/a/)});var ze=a(function(){return"abc".startsWith("a",Infinity)===false});if(!De||!ze){ne(String.prototype,"startsWith",Fe.startsWith);ne(String.prototype,"endsWith",Fe.endsWith)}}if(oe){var qe=a(function(){var e=/a/;e[$.match]=false;return"/a/".startsWith(e)});if(!qe){ne(String.prototype,"startsWith",Fe.startsWith)}var We=a(function(){var e=/a/;e[$.match]=false;return"/a/".endsWith(e)});if(!We){ne(String.prototype,"endsWith",Fe.endsWith)}var Ge=a(function(){var e=/a/;e[$.match]=false;return"/a/".includes(e)});if(!Ge){ne(String.prototype,"includes",Fe.includes)}}b(String.prototype,Fe);var He=["\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003","\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028","\u2029\ufeff"].join("");var Ve=new RegExp("(^["+He+"]+)|(["+He+"]+$)","g");var Be=function trim(){return ce.ToString(ce.RequireObjectCoercible(this)).replace(Ve,"")};var Ue=["\x85","\u200b","\ufffe"].join("");var $e=new RegExp("["+Ue+"]","g");var Je=/^[-+]0x[0-9a-f]+$/i;var Xe=Ue.trim().length!==Ue.length;h(String.prototype,"trim",Be,Xe);var Ke=function(e){return{value:e,done:arguments.length===0}};var Ze=function(e){ce.RequireObjectCoercible(e);this._s=ce.ToString(e);this._i=0};Ze.prototype.next=function(){var e=this._s;var t=this._i;if(typeof e==="undefined"||t>=e.length){this._s=void 0;return Ke()}var r=e.charCodeAt(t);var n,o;if(r<55296||r>56319||t+1===e.length){o=1}else{n=e.charCodeAt(t+1);o=n<56320||n>57343?1:2}this._i=t+o;return Ke(e.substr(t,o))};Me(Ze.prototype);Me(String.prototype,function(){return new Ze(this)});var Ye={from:function from(e){var r=this;var n;if(arguments.length>1){n=arguments[1]}var o,i;if(typeof n==="undefined"){o=false}else{if(!ce.IsCallable(n)){throw new TypeError("Array.from: when provided, the second argument must be a function")}if(arguments.length>2){i=arguments[2]}o=true}var a=typeof(te(e)||ce.GetMethod(e,ie))!=="undefined";var u,f,s;if(a){f=ce.IsConstructor(r)?Object(new r):[];var c=ce.GetIterator(e);var l,p;s=0;while(true){l=ce.IteratorStep(c);if(l===false){break}p=l.value;try{if(o){p=typeof i==="undefined"?n(p,s):t(n,i,p,s)}f[s]=p}catch(v){ce.IteratorClose(c,true);throw v}s+=1}u=s}else{var y=ce.ToObject(e);u=ce.ToLength(y.length);f=ce.IsConstructor(r)?Object(new r(u)):new Array(u);var h;for(s=0;s<u;++s){h=y[s];if(o){h=typeof i==="undefined"?n(h,s):t(n,i,h,s)}Ne(f,s,h)}}f.length=u;return f},of:function of(){var e=arguments.length;var t=this;var n=r(t)||!ce.IsCallable(t)?new Array(e):ce.Construct(t,[e]);for(var o=0;o<e;++o){Ne(n,o,arguments[o])}n.length=e;return n}};b(Array,Ye);Ce(Array);q=function(e,t){this.i=0;this.array=e;this.kind=t};b(q.prototype,{next:function(){var e=this.i;var t=this.array;if(!(this instanceof q)){throw new TypeError("Not an ArrayIterator")}if(typeof t!=="undefined"){var r=ce.ToLength(t.length);for(;e<r;e++){var n=this.kind;var o;if(n==="key"){o=e}else if(n==="value"){o=t[e]}else if(n==="entry"){o=[e,t[e]]}this.i=e+1;return Ke(o)}}this.array=void 0;return Ke()}});Me(q.prototype);var Qe=Array.of===Ye.of||function(){var e=function Foo(e){this.length=e};e.prototype=[];var t=Array.of.apply(e,[1,2]);return t instanceof e&&t.length===2}();if(!Qe){ne(Array,"of",Ye.of)}var et={copyWithin:function copyWithin(e,t){var r=ce.ToObject(this);var n=ce.ToLength(r.length);var o=ce.ToInteger(e);var i=ce.ToInteger(t);var a=o<0?A(n+o,0):R(o,n);var u=i<0?A(n+i,0):R(i,n);var f;if(arguments.length>2){f=arguments[2]}var s=typeof f==="undefined"?n:ce.ToInteger(f);var c=s<0?A(n+s,0):R(s,n);var l=R(c-u,n-a);var p=1;if(u<a&&a<u+l){p=-1;u+=l-1;a+=l-1}while(l>0){if(u in r){r[a]=r[u]}else{delete r[a]}u+=p;a+=p;l-=1}return r},fill:function fill(e){var t;if(arguments.length>1){t=arguments[1]}var r;if(arguments.length>2){r=arguments[2]}var n=ce.ToObject(this);var o=ce.ToLength(n.length);t=ce.ToInteger(typeof t==="undefined"?0:t);r=ce.ToInteger(typeof r==="undefined"?o:r);var i=t<0?A(o+t,0):R(t,o);var a=r<0?o+r:r;for(var u=i;u<o&&u<a;++u){n[u]=e}return n},find:function find(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#find: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0,a;i<n;i++){a=r[i];if(o){if(t(e,o,a,i,r)){return a}}else if(e(a,i,r)){return a}}},findIndex:function findIndex(e){var r=ce.ToObject(this);var n=ce.ToLength(r.length);if(!ce.IsCallable(e)){throw new TypeError("Array#findIndex: predicate must be a function")}var o=arguments.length>1?arguments[1]:null;for(var i=0;i<n;i++){if(o){if(t(e,o,r[i],i,r)){return i}}else if(e(r[i],i,r)){return i}}return-1},keys:function keys(){return new q(this,"key")},values:function values(){return new q(this,"value")},entries:function entries(){return new q(this,"entry")}};if(Array.prototype.keys&&!ce.IsCallable([1].keys().next)){delete Array.prototype.keys}if(Array.prototype.entries&&!ce.IsCallable([1].entries().next)){delete Array.prototype.entries}if(Array.prototype.keys&&Array.prototype.entries&&!Array.prototype.values&&Array.prototype[ie]){b(Array.prototype,{values:Array.prototype[ie]});if(re.symbol($.unscopables)){Array.prototype[$.unscopables].values=true}}if(c&&Array.prototype.values&&Array.prototype.values.name!=="values"){var tt=Array.prototype.values;ne(Array.prototype,"values",function values(){return ce.Call(tt,this,arguments)});h(Array.prototype,ie,Array.prototype.values,true)}b(Array.prototype,et);if(1/[true].indexOf(true,-0)<0){h(Array.prototype,"indexOf",function indexOf(e){var t=E(this,arguments);if(t===0&&1/t<0){return 0}return t},true)}Me(Array.prototype,function(){return this.values()});if(Object.getPrototypeOf){Me(Object.getPrototypeOf([].values()))}var rt=function(){return a(function(){return Array.from({length:-1}).length===0})}();var nt=function(){var e=Array.from([0].entries());return e.length===1&&r(e[0])&&e[0][0]===0&&e[0][1]===0}();if(!rt||!nt){ne(Array,"from",Ye.from)}var ot=function(){return a(function(){return Array.from([0],void 0)})}();if(!ot){var it=Array.from;ne(Array,"from",function from(e){if(arguments.length>1&&typeof arguments[1]!=="undefined"){return ce.Call(it,this,arguments)}else{return t(it,this,e)}})}var at=-(Math.pow(2,32)-1);var ut=function(e,r){var n={length:at};n[r?(n.length>>>0)-1:0]=true;return a(function(){t(e,n,function(){throw new RangeError("should not reach here")},[]);return true})};if(!ut(Array.prototype.forEach)){var ft=Array.prototype.forEach;ne(Array.prototype,"forEach",function forEach(e){return ce.Call(ft,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.map)){var st=Array.prototype.map;ne(Array.prototype,"map",function map(e){return ce.Call(st,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.filter)){var ct=Array.prototype.filter;ne(Array.prototype,"filter",function filter(e){return ce.Call(ct,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.some)){var lt=Array.prototype.some;ne(Array.prototype,"some",function some(e){return ce.Call(lt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.every)){var pt=Array.prototype.every;ne(Array.prototype,"every",function every(e){return ce.Call(pt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduce)){var vt=Array.prototype.reduce;ne(Array.prototype,"reduce",function reduce(e){return ce.Call(vt,this.length>=0?this:[],arguments)},true)}if(!ut(Array.prototype.reduceRight,true)){var yt=Array.prototype.reduceRight;ne(Array.prototype,"reduceRight",function reduceRight(e){return ce.Call(yt,this.length>=0?this:[],arguments)},true)}var ht=Number("0o10")!==8;var bt=Number("0b10")!==2;var gt=y(Ue,function(e){return Number(e+0+e)===0});if(ht||bt||gt){var dt=Number;var mt=/^0b[01]+$/i;var Ot=/^0o[0-7]+$/i;var wt=mt.test.bind(mt);var jt=Ot.test.bind(Ot);var St=function(e){var t;if(typeof e.valueOf==="function"){t=e.valueOf();if(re.primitive(t)){return t}}if(typeof e.toString==="function"){t=e.toString();if(re.primitive(t)){return t}}throw new TypeError("No default value")};var Tt=$e.test.bind($e);var It=Je.test.bind(Je);var Et=function(){var e=function Number(t){var r;if(arguments.length>0){r=re.primitive(t)?t:St(t,"number")}else{r=0}if(typeof r==="string"){r=ce.Call(Be,r);if(wt(r)){r=parseInt(C(r,2),2)}else if(jt(r)){r=parseInt(C(r,2),8)}else if(Tt(r)||It(r)){r=NaN}}var n=this;var o=a(function(){dt.prototype.valueOf.call(n);return true});if(n instanceof e&&!o){return new dt(r)}return dt(r)};return e}();Ee(dt,Et,{});b(Et,{NaN:dt.NaN,MAX_VALUE:dt.MAX_VALUE,MIN_VALUE:dt.MIN_VALUE,NEGATIVE_INFINITY:dt.NEGATIVE_INFINITY,POSITIVE_INFINITY:dt.POSITIVE_INFINITY});Number=Et;m.redefine(S,"Number",Et)}var Pt=Math.pow(2,53)-1;b(Number,{MAX_SAFE_INTEGER:Pt,MIN_SAFE_INTEGER:-Pt,EPSILON:2.220446049250313e-16,parseInt:S.parseInt,parseFloat:S.parseFloat,isFinite:K,isInteger:function isInteger(e){return K(e)&&ce.ToInteger(e)===e},isSafeInteger:function isSafeInteger(e){return Number.isInteger(e)&&k(e)<=Number.MAX_SAFE_INTEGER},isNaN:X});h(Number,"parseInt",S.parseInt,Number.parseInt!==S.parseInt);if([,1].find(function(){return true})===1){ne(Array.prototype,"find",et.find)}if([,1].findIndex(function(){return true})!==0){ne(Array.prototype,"findIndex",et.findIndex)}var Ct=Function.bind.call(Function.bind,Object.prototype.propertyIsEnumerable);var Mt=function ensureEnumerable(e,t){if(s&&Ct(e,t)){Object.defineProperty(e,t,{enumerable:false})}};var xt=function sliceArgs(){var e=Number(this);var t=arguments.length;var r=t-e;var n=new Array(r<0?0:r);for(var o=e;o<t;++o){n[o-e]=arguments[o]}return n};var Nt=function assignTo(e){return function assignToSource(t,r){t[r]=e[r];return t}};var At=function(e,t){var r=n(Object(t));var o;if(ce.IsCallable(Object.getOwnPropertySymbols)){o=v(Object.getOwnPropertySymbols(Object(t)),Ct(t))}return p(P(r,o||[]),Nt(t),e)};var Rt={assign:function(e,t){var r=ce.ToObject(e,"Cannot convert undefined or null to object");return p(ce.Call(xt,1,arguments),At,r)},is:function is(e,t){return ce.SameValue(e,t)}};var _t=Object.assign&&Object.preventExtensions&&function(){var e=Object.preventExtensions({1:2});try{Object.assign(e,"xy")}catch(t){return e[1]==="y"}}();if(_t){ne(Object,"assign",Rt.assign)}b(Object,Rt);if(s){var kt={setPrototypeOf:function(e,r){var n;var o=function(e,t){if(!ce.TypeIsObject(e)){throw new TypeError("cannot set prototype on a non-object")}if(!(t===null||ce.TypeIsObject(t))){throw new TypeError("can only set prototype to an object or null"+t)}};var i=function(e,r){o(e,r);t(n,e,r);return e};try{n=e.getOwnPropertyDescriptor(e.prototype,r).set;t(n,{},null)}catch(a){if(e.prototype!=={}[r]){return}n=function(e){this[r]=e};i.polyfill=i(i({},null),e.prototype)instanceof e}return i}(Object,"__proto__")};b(Object,kt)}if(Object.setPrototypeOf&&Object.getPrototypeOf&&Object.getPrototypeOf(Object.setPrototypeOf({},null))!==null&&Object.getPrototypeOf(Object.create(null))===null){(function(){var e=Object.create(null);var t=Object.getPrototypeOf;var r=Object.setPrototypeOf;Object.getPrototypeOf=function(r){var n=t(r);return n===e?null:n};Object.setPrototypeOf=function(t,n){var o=n===null?e:n;return r(t,o)};Object.setPrototypeOf.polyfill=false})()}var Lt=!i(function(){return Object.keys("foo")});if(!Lt){var Ft=Object.keys;ne(Object,"keys",function keys(e){return Ft(ce.ToObject(e))});n=Object.keys}var Dt=i(function(){return Object.keys(/a/g)});if(Dt){var zt=Object.keys;ne(Object,"keys",function keys(e){if(re.regex(e)){var t=[];for(var r in e){if(z(e,r)){M(t,r)}}return t}return zt(e)});n=Object.keys}if(Object.getOwnPropertyNames){var qt=!i(function(){return Object.getOwnPropertyNames("foo")});if(!qt){var Wt=typeof window==="object"?Object.getOwnPropertyNames(window):[];var Gt=Object.getOwnPropertyNames;ne(Object,"getOwnPropertyNames",function getOwnPropertyNames(e){var t=ce.ToObject(e);if(g(t)==="[object Window]"){try{return Gt(t)}catch(r){return P([],Wt)}}return Gt(t)})}}if(Object.getOwnPropertyDescriptor){var Ht=!i(function(){return Object.getOwnPropertyDescriptor("foo","bar")});if(!Ht){var Vt=Object.getOwnPropertyDescriptor;ne(Object,"getOwnPropertyDescriptor",function getOwnPropertyDescriptor(e,t){return Vt(ce.ToObject(e),t)})}}if(Object.seal){var Bt=!i(function(){return Object.seal("foo")});if(!Bt){var Ut=Object.seal;ne(Object,"seal",function seal(e){if(!ce.TypeIsObject(e)){return e}return Ut(e)})}}if(Object.isSealed){var $t=!i(function(){return Object.isSealed("foo")});if(!$t){var Jt=Object.isSealed;ne(Object,"isSealed",function isSealed(e){if(!ce.TypeIsObject(e)){return true}return Jt(e)})}}if(Object.freeze){var Xt=!i(function(){return Object.freeze("foo")});if(!Xt){var Kt=Object.freeze;ne(Object,"freeze",function freeze(e){if(!ce.TypeIsObject(e)){return e}return Kt(e)})}}if(Object.isFrozen){var Zt=!i(function(){return Object.isFrozen("foo")});if(!Zt){var Yt=Object.isFrozen;ne(Object,"isFrozen",function isFrozen(e){if(!ce.TypeIsObject(e)){return true}return Yt(e)})}}if(Object.preventExtensions){var Qt=!i(function(){return Object.preventExtensions("foo")});if(!Qt){var er=Object.preventExtensions;ne(Object,"preventExtensions",function preventExtensions(e){if(!ce.TypeIsObject(e)){return e}return er(e)})}}if(Object.isExtensible){var tr=!i(function(){return Object.isExtensible("foo")});if(!tr){var rr=Object.isExtensible;ne(Object,"isExtensible",function isExtensible(e){if(!ce.TypeIsObject(e)){return false}return rr(e)})}}if(Object.getPrototypeOf){var nr=!i(function(){return Object.getPrototypeOf("foo")});if(!nr){var or=Object.getPrototypeOf;ne(Object,"getPrototypeOf",function getPrototypeOf(e){return or(ce.ToObject(e))})}}var ir=s&&function(){var e=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags");return e&&ce.IsCallable(e.get)}();if(s&&!ir){var ar=function flags(){if(!ce.TypeIsObject(this)){throw new TypeError("Method called on incompatible type: must be an object.")}var e="";if(this.global){e+="g"}if(this.ignoreCase){e+="i"}if(this.multiline){e+="m"}if(this.unicode){e+="u"}if(this.sticky){e+="y"}return e};m.getter(RegExp.prototype,"flags",ar)}var ur=s&&a(function(){return String(new RegExp(/a/g,"i"))==="/a/i"});var fr=oe&&s&&function(){var e=/./;e[$.match]=false;return RegExp(e)===e}();var sr=a(function(){return RegExp.prototype.toString.call({source:"abc"})==="/abc/"});var cr=sr&&a(function(){return RegExp.prototype.toString.call({source:"a",flags:"b"})==="/a/b"});if(!sr||!cr){var lr=RegExp.prototype.toString;h(RegExp.prototype,"toString",function toString(){var e=ce.RequireObjectCoercible(this);if(re.regex(e)){return t(lr,e)}var r=ue(e.source);var n=ue(e.flags);return"/"+r+"/"+n},true);m.preserveToString(RegExp.prototype.toString,lr)}if(s&&(!ur||fr)){var pr=Object.getOwnPropertyDescriptor(RegExp.prototype,"flags").get;var vr=Object.getOwnPropertyDescriptor(RegExp.prototype,"source")||{};var yr=function(){return this.source};var hr=ce.IsCallable(vr.get)?vr.get:yr;var br=RegExp;var gr=function(){return function RegExp(e,t){var r=ce.IsRegExp(e);var n=this instanceof RegExp;if(!n&&r&&typeof t==="undefined"&&e.constructor===RegExp){return e}var o=e;var i=t;if(re.regex(e)){o=ce.Call(hr,e);i=typeof t==="undefined"?ce.Call(pr,e):t;return new RegExp(o,i)}else if(r){o=e.source;i=typeof t==="undefined"?e.flags:t}return new br(e,t)}}();Ee(br,gr,{$input:true});RegExp=gr;m.redefine(S,"RegExp",gr)}if(s){var dr={input:"$_",lastMatch:"$&",lastParen:"$+",leftContext:"$`",rightContext:"$'"};l(n(dr),function(e){if(e in RegExp&&!(dr[e]in RegExp)){m.getter(RegExp,dr[e],function get(){return RegExp[e]})}})}Ce(RegExp);var mr=1/Number.EPSILON;var Or=function roundTiesToEven(e){return e+mr-mr};var wr=Math.pow(2,-23);var jr=Math.pow(2,127)*(2-wr);var Sr=Math.pow(2,-126);var Tr=Math.E;var Ir=Math.LOG2E;var Er=Math.LOG10E;var Pr=Number.prototype.clz;delete Number.prototype.clz;var Cr={acosh:function acosh(e){var t=Number(e);if(X(t)||e<1){return NaN}if(t===1){return 0}if(t===Infinity){return t}var r=1/(t*t);if(t<2){return Y(t-1+D(1-r)*t)}var n=t/2;return Y(n+D(1-r)*n-1)+1/Ir},asinh:function asinh(e){var t=Number(e);if(t===0||!T(t)){return t}var r=k(t);var n=r*r;var o=Z(t);if(r<1){return o*Y(r+n/(D(n+1)+1))}return o*(Y(r/2+D(1+1/n)*r/2-1)+1/Ir)},atanh:function atanh(e){var t=Number(e);if(t===0){return t}if(t===-1){return-Infinity}if(t===1){return Infinity}if(X(t)||t<-1||t>1){return NaN}var r=k(t);return Z(t)*Y(2*r/(1-r))/2},cbrt:function cbrt(e){var t=Number(e);if(t===0){return t}var r=t<0;var n;if(r){t=-t}if(t===Infinity){n=Infinity}else{n=L(F(t)/3);n=(t/(n*n)+2*n)/3}return r?-n:n},clz32:function clz32(e){var t=Number(e);var r=ce.ToUint32(t);if(r===0){return 32}return Pr?ce.Call(Pr,r):31-_(F(r+.5)*Ir)},cosh:function cosh(e){var t=Number(e);if(t===0){return 1}if(X(t)){return NaN}if(!T(t)){return Infinity}var r=L(k(t)-1);return(r+1/(r*Tr*Tr))*(Tr/2)},expm1:function expm1(e){var t=Number(e);if(t===-Infinity){return-1}if(!T(t)||t===0){return t}if(k(t)>.5){return L(t)-1}var r=t;var n=0;var o=1;while(n+r!==n){n+=r;o+=1;r*=t/o}return n},hypot:function hypot(e,t){var r=0;var n=0;for(var o=0;o<arguments.length;++o){var i=k(Number(arguments[o]));if(n<i){r*=n/i*(n/i);r+=1;n=i}else{r+=i>0?i/n*(i/n):i}}return n===Infinity?Infinity:n*D(r)},log2:function log2(e){return F(e)*Ir},log10:function log10(e){return F(e)*Er},log1p:Y,sign:Z,sinh:function sinh(e){var t=Number(e);if(!T(t)||t===0){return t}var r=k(t);if(r<1){var n=Math.expm1(r);return Z(t)*n*(1+1/(n+1))/2}var o=L(r-1);return Z(t)*(o-1/(o*Tr*Tr))*(Tr/2)},tanh:function tanh(e){var t=Number(e);if(X(t)||t===0){return t}if(t>=20){return 1}if(t<=-20){return-1}return(Math.expm1(t)-Math.expm1(-t))/(L(t)+L(-t))},trunc:function trunc(e){var t=Number(e);return t<0?-_(-t):_(t)},imul:function imul(e,t){var r=ce.ToUint32(e);var n=ce.ToUint32(t);var o=r>>>16&65535;var i=r&65535;var a=n>>>16&65535;var u=n&65535;return i*u+(o*u+i*a<<16>>>0)|0},fround:function fround(e){var t=Number(e);if(t===0||t===Infinity||t===-Infinity||X(t)){return t}var r=Z(t);var n=k(t);if(n<Sr){return r*Or(n/Sr/wr)*Sr*wr}var o=(1+wr/Number.EPSILON)*n;var i=o-(o-n);if(i>jr||X(i)){return r*Infinity}return r*i}};var Mr=function withinULPDistance(e,t,r){return k(1-e/t)/Number.EPSILON<(r||8)};b(Math,Cr);h(Math,"sinh",Cr.sinh,Math.sinh(710)===Infinity);h(Math,"cosh",Cr.cosh,Math.cosh(710)===Infinity);h(Math,"log1p",Cr.log1p,Math.log1p(-1e-17)!==-1e-17);h(Math,"asinh",Cr.asinh,Math.asinh(-1e7)!==-Math.asinh(1e7));h(Math,"asinh",Cr.asinh,Math.asinh(1e300)===Infinity);h(Math,"atanh",Cr.atanh,Math.atanh(1e-300)===0);h(Math,"tanh",Cr.tanh,Math.tanh(-2e-17)!==-2e-17);
h(Math,"acosh",Cr.acosh,Math.acosh(Number.MAX_VALUE)===Infinity);h(Math,"acosh",Cr.acosh,!Mr(Math.acosh(1+Number.EPSILON),Math.sqrt(2*Number.EPSILON)));h(Math,"cbrt",Cr.cbrt,!Mr(Math.cbrt(1e-300),1e-100));h(Math,"sinh",Cr.sinh,Math.sinh(-2e-17)!==-2e-17);var xr=Math.expm1(10);h(Math,"expm1",Cr.expm1,xr>22025.465794806718||xr<22025.465794806718);var Nr=Math.round;var Ar=Math.round(.5-Number.EPSILON/4)===0&&Math.round(-.5+Number.EPSILON/3.99)===1;var Rr=mr+1;var _r=2*mr-1;var kr=[Rr,_r].every(function(e){return Math.round(e)===e});h(Math,"round",function round(e){var t=_(e);var r=t===-1?-0:t+1;return e-t<.5?t:r},!Ar||!kr);m.preserveToString(Math.round,Nr);var Lr=Math.imul;if(Math.imul(4294967295,5)!==-5){Math.imul=Cr.imul;m.preserveToString(Math.imul,Lr)}if(Math.imul.length!==2){ne(Math,"imul",function imul(e,t){return ce.Call(Lr,Math,arguments)})}var Fr=function(){var e=S.setTimeout;if(typeof e!=="function"&&typeof e!=="object"){return}ce.IsPromise=function(e){if(!ce.TypeIsObject(e)){return false}if(typeof e._promise==="undefined"){return false}return true};var r=function(e){if(!ce.IsConstructor(e)){throw new TypeError("Bad promise constructor")}var t=this;var r=function(e,r){if(t.resolve!==void 0||t.reject!==void 0){throw new TypeError("Bad Promise implementation!")}t.resolve=e;t.reject=r};t.resolve=void 0;t.reject=void 0;t.promise=new e(r);if(!(ce.IsCallable(t.resolve)&&ce.IsCallable(t.reject))){throw new TypeError("Bad promise constructor")}};var n;if(typeof window!=="undefined"&&ce.IsCallable(window.postMessage)){n=function(){var e=[];var t="zero-timeout-message";var r=function(r){M(e,r);window.postMessage(t,"*")};var n=function(r){if(r.source===window&&r.data===t){r.stopPropagation();if(e.length===0){return}var n=N(e);n()}};window.addEventListener("message",n,true);return r}}var o=function(){var e=S.Promise;var t=e&&e.resolve&&e.resolve();return t&&function(e){return t.then(e)}};var i=ce.IsCallable(S.setImmediate)?S.setImmediate:typeof process==="object"&&process.nextTick?process.nextTick:o()||(ce.IsCallable(n)?n():function(t){e(t,0)});var a=function(e){return e};var u=function(e){throw e};var f=0;var s=1;var c=2;var l=0;var p=1;var v=2;var y={};var h=function(e,t,r){i(function(){g(e,t,r)})};var g=function(e,t,r){var n,o;if(t===y){return e(r)}try{n=e(r);o=t.resolve}catch(i){n=i;o=t.reject}o(n)};var d=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.fulfillReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+l],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=s;r.reactionLength=0};var m=function(e,t){var r=e._promise;var n=r.reactionLength;if(n>0){h(r.rejectReactionHandler0,r.reactionCapability0,t);r.fulfillReactionHandler0=void 0;r.rejectReactions0=void 0;r.reactionCapability0=void 0;if(n>1){for(var o=1,i=0;o<n;o++,i+=3){h(r[i+p],r[i+v],t);e[i+l]=void 0;e[i+p]=void 0;e[i+v]=void 0}}}r.result=t;r.state=c;r.reactionLength=0};var O=function(e){var t=false;var r=function(r){var n;if(t){return}t=true;if(r===e){return m(e,new TypeError("Self resolution"))}if(!ce.TypeIsObject(r)){return d(e,r)}try{n=r.then}catch(o){return m(e,o)}if(!ce.IsCallable(n)){return d(e,r)}i(function(){j(e,r,n)})};var n=function(r){if(t){return}t=true;return m(e,r)};return{resolve:r,reject:n}};var w=function(e,r,n,o){if(e===I){t(e,r,n,o,y)}else{t(e,r,n,o)}};var j=function(e,t,r){var n=O(e);var o=n.resolve;var i=n.reject;try{w(r,t,o,i)}catch(a){i(a)}};var T,I;var E=function(){var e=function Promise(t){if(!(this instanceof e)){throw new TypeError('Constructor Promise requires "new"')}if(this&&this._promise){throw new TypeError("Bad construction")}if(!ce.IsCallable(t)){throw new TypeError("not a valid resolver")}var r=Ae(this,e,T,{_promise:{result:void 0,state:f,reactionLength:0,fulfillReactionHandler0:void 0,rejectReactionHandler0:void 0,reactionCapability0:void 0}});var n=O(r);var o=n.reject;try{t(n.resolve,o)}catch(i){o(i)}return r};return e}();T=E.prototype;var P=function(e,t,r,n){var o=false;return function(i){if(o){return}o=true;t[e]=i;if(--n.count===0){var a=r.resolve;a(t)}}};var C=function(e,t,r){var n=e.iterator;var o=[];var i={count:1};var a,u;var f=0;while(true){try{a=ce.IteratorStep(n);if(a===false){e.done=true;break}u=a.value}catch(s){e.done=true;throw s}o[f]=void 0;var c=t.resolve(u);var l=P(f,o,r,i);i.count+=1;w(c.then,c,l,r.reject);f+=1}if(--i.count===0){var p=r.resolve;p(o)}return r.promise};var x=function(e,t,r){var n=e.iterator;var o,i,a;while(true){try{o=ce.IteratorStep(n);if(o===false){e.done=true;break}i=o.value}catch(u){e.done=true;throw u}a=t.resolve(i);w(a.then,a,r.resolve,r.reject)}return r.promise};b(E,{all:function all(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return C(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},race:function race(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Promise is not object")}var n=new r(t);var o,i;try{o=ce.GetIterator(e);i={iterator:o,done:false};return x(i,t,n)}catch(a){var u=a;if(i&&!i.done){try{ce.IteratorClose(o,true)}catch(f){u=f}}var s=n.reject;s(u);return n.promise}},reject:function reject(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}var n=new r(t);var o=n.reject;o(e);return n.promise},resolve:function resolve(e){var t=this;if(!ce.TypeIsObject(t)){throw new TypeError("Bad promise constructor")}if(ce.IsPromise(e)){var n=e.constructor;if(n===t){return e}}var o=new r(t);var i=o.resolve;i(e);return o.promise}});b(T,{"catch":function(e){return this.then(null,e)},then:function then(e,t){var n=this;if(!ce.IsPromise(n)){throw new TypeError("not a promise")}var o=ce.SpeciesConstructor(n,E);var i;var b=arguments.length>2&&arguments[2]===y;if(b&&o===E){i=y}else{i=new r(o)}var g=ce.IsCallable(e)?e:a;var d=ce.IsCallable(t)?t:u;var m=n._promise;var O;if(m.state===f){if(m.reactionLength===0){m.fulfillReactionHandler0=g;m.rejectReactionHandler0=d;m.reactionCapability0=i}else{var w=3*(m.reactionLength-1);m[w+l]=g;m[w+p]=d;m[w+v]=i}m.reactionLength+=1}else if(m.state===s){O=m.result;h(g,i,O)}else if(m.state===c){O=m.result;h(d,i,O)}else{throw new TypeError("unexpected Promise state")}return i.promise}});y=new r(E);I=T.then;return E}();if(S.Promise){delete S.Promise.accept;delete S.Promise.defer;delete S.Promise.prototype.chain}if(typeof Fr==="function"){b(S,{Promise:Fr});var Dr=w(S.Promise,function(e){return e.resolve(42).then(function(){})instanceof e});var zr=!i(function(){return S.Promise.reject(42).then(null,5).then(null,W)});var qr=i(function(){return S.Promise.call(3,W)});var Wr=function(e){var t=e.resolve(5);t.constructor={};var r=e.resolve(t);try{r.then(null,W).then(null,W)}catch(n){return true}return t===r}(S.Promise);var Gr=s&&function(){var e=0;var t=Object.defineProperty({},"then",{get:function(){e+=1}});Promise.resolve(t);return e===1}();var Hr=function BadResolverPromise(e){var t=new Promise(e);e(3,function(){});this.then=t.then;this.constructor=BadResolverPromise};Hr.prototype=Promise.prototype;Hr.all=Promise.all;var Vr=a(function(){return!!Hr.all([1,2])});if(!Dr||!zr||!qr||Wr||!Gr||Vr){Promise=Fr;ne(S,"Promise",Fr)}if(Promise.all.length!==1){var Br=Promise.all;ne(Promise,"all",function all(e){return ce.Call(Br,this,arguments)})}if(Promise.race.length!==1){var Ur=Promise.race;ne(Promise,"race",function race(e){return ce.Call(Ur,this,arguments)})}if(Promise.resolve.length!==1){var $r=Promise.resolve;ne(Promise,"resolve",function resolve(e){return ce.Call($r,this,arguments)})}if(Promise.reject.length!==1){var Jr=Promise.reject;ne(Promise,"reject",function reject(e){return ce.Call(Jr,this,arguments)})}Mt(Promise,"all");Mt(Promise,"race");Mt(Promise,"resolve");Mt(Promise,"reject");Ce(Promise)}var Xr=function(e){var t=n(p(e,function(e,t){e[t]=true;return e},{}));return e.join(":")===t.join(":")};var Kr=Xr(["z","a","bb"]);var Zr=Xr(["z",1,"a","3",2]);if(s){var Yr=function fastkey(e,t){if(!t&&!Kr){return null}if(se(e)){return"^"+ce.ToString(e)}else if(typeof e==="string"){return"$"+e}else if(typeof e==="number"){if(!Zr){return"n"+e}return e}else if(typeof e==="boolean"){return"b"+e}return null};var Qr=function emptyObject(){return Object.create?Object.create(null):{}};var en=function addIterableToMap(e,n,o){if(r(o)||re.string(o)){l(o,function(e){if(!ce.TypeIsObject(e)){throw new TypeError("Iterator value "+e+" is not an entry object")}n.set(e[0],e[1])})}else if(o instanceof e){t(e.prototype.forEach,o,function(e,t){n.set(t,e)})}else{var i,a;if(!se(o)){a=n.set;if(!ce.IsCallable(a)){throw new TypeError("bad map")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{if(!ce.TypeIsObject(f)){throw new TypeError("Iterator value "+f+" is not an entry object")}t(a,n,f[0],f[1])}catch(s){ce.IteratorClose(i,true);throw s}}}}};var tn=function addIterableToSet(e,n,o){if(r(o)||re.string(o)){l(o,function(e){n.add(e)})}else if(o instanceof e){t(e.prototype.forEach,o,function(e){n.add(e)})}else{var i,a;if(!se(o)){a=n.add;if(!ce.IsCallable(a)){throw new TypeError("bad set")}i=ce.GetIterator(o)}if(typeof i!=="undefined"){while(true){var u=ce.IteratorStep(i);if(u===false){break}var f=u.value;try{t(a,n,f)}catch(s){ce.IteratorClose(i,true);throw s}}}}};var rn={Map:function(){var e={};var r=function MapEntry(e,t){this.key=e;this.value=t;this.next=null;this.prev=null};r.prototype.isRemoved=function isRemoved(){return this.key===e};var n=function isMap(e){return!!e._es6map};var o=function requireMapSlot(e,t){if(!ce.TypeIsObject(e)||!n(e)){throw new TypeError("Method Map.prototype."+t+" called on incompatible receiver "+ce.ToString(e))}};var i=function MapIterator(e,t){o(e,"[[MapIterator]]");this.head=e._head;this.i=this.head;this.kind=t};i.prototype={isMapIterator:true,next:function next(){if(!this.isMapIterator){throw new TypeError("Not a MapIterator")}var e=this.i;var t=this.kind;var r=this.head;if(typeof this.i==="undefined"){return Ke()}while(e.isRemoved()&&e!==r){e=e.prev}var n;while(e.next!==r){e=e.next;if(!e.isRemoved()){if(t==="key"){n=e.key}else if(t==="value"){n=e.value}else{n=[e.key,e.value]}this.i=e;return Ke(n)}}this.i=void 0;return Ke()}};Me(i.prototype);var a;var u=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}if(this&&this._es6map){throw new TypeError("Bad construction")}var e=Ae(this,Map,a,{_es6map:true,_head:null,_map:G?new G:null,_size:0,_storage:Qr()});var t=new r(null,null);t.next=t.prev=t;e._head=t;if(arguments.length>0){en(Map,e,arguments[0])}return e};a=u.prototype;m.getter(a,"size",function(){if(typeof this._size==="undefined"){throw new TypeError("size method called on incompatible Map")}return this._size});b(a,{get:function get(e){o(this,"get");var t;var r=Yr(e,true);if(r!==null){t=this._storage[r];if(t){return t.value}else{return}}if(this._map){t=V.call(this._map,e);if(t){return t.value}else{return}}var n=this._head;var i=n;while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){return i.value}}},has:function has(e){o(this,"has");var t=Yr(e,true);if(t!==null){return typeof this._storage[t]!=="undefined"}if(this._map){return B.call(this._map,e)}var r=this._head;var n=r;while((n=n.next)!==r){if(ce.SameValueZero(n.key,e)){return true}}return false},set:function set(e,t){o(this,"set");var n=this._head;var i=n;var a;var u=Yr(e,true);if(u!==null){if(typeof this._storage[u]!=="undefined"){this._storage[u].value=t;return this}else{a=this._storage[u]=new r(e,t);i=n.prev}}else if(this._map){if(B.call(this._map,e)){V.call(this._map,e).value=t}else{a=new r(e,t);U.call(this._map,e,a);i=n.prev}}while((i=i.next)!==n){if(ce.SameValueZero(i.key,e)){i.value=t;return this}}a=a||new r(e,t);if(ce.SameValue(-0,e)){a.key=+0}a.next=this._head;a.prev=this._head.prev;a.prev.next=a;a.next.prev=a;this._size+=1;return this},"delete":function(t){o(this,"delete");var r=this._head;var n=r;var i=Yr(t,true);if(i!==null){if(typeof this._storage[i]==="undefined"){return false}n=this._storage[i].prev;delete this._storage[i]}else if(this._map){if(!B.call(this._map,t)){return false}n=V.call(this._map,t).prev;H.call(this._map,t)}while((n=n.next)!==r){if(ce.SameValueZero(n.key,t)){n.key=e;n.value=e;n.prev.next=n.next;n.next.prev=n.prev;this._size-=1;return true}}return false},clear:function clear(){o(this,"clear");this._map=G?new G:null;this._size=0;this._storage=Qr();var t=this._head;var r=t;var n=r.next;while((r=n)!==t){r.key=e;r.value=e;n=r.next;r.next=r.prev=t}t.next=t.prev=t},keys:function keys(){o(this,"keys");return new i(this,"key")},values:function values(){o(this,"values");return new i(this,"value")},entries:function entries(){o(this,"entries");return new i(this,"key+value")},forEach:function forEach(e){o(this,"forEach");var r=arguments.length>1?arguments[1]:null;var n=this.entries();for(var i=n.next();!i.done;i=n.next()){if(r){t(e,r,i.value[1],i.value[0],this)}else{e(i.value[1],i.value[0],this)}}}});Me(a,a.entries);return u}(),Set:function(){var e=function isSet(e){return e._es6set&&typeof e._storage!=="undefined"};var r=function requireSetSlot(t,r){if(!ce.TypeIsObject(t)||!e(t)){throw new TypeError("Set.prototype."+r+" called on incompatible receiver "+ce.ToString(t))}};var o;var i=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}if(this&&this._es6set){throw new TypeError("Bad construction")}var e=Ae(this,Set,o,{_es6set:true,"[[SetData]]":null,_storage:Qr()});if(!e._es6set){throw new TypeError("bad set")}if(arguments.length>0){tn(Set,e,arguments[0])}return e};o=i.prototype;var a=function(e){var t=e;if(t==="^null"){return null}else if(t==="^undefined"){return void 0}else{var r=t.charAt(0);if(r==="$"){return C(t,1)}else if(r==="n"){return+C(t,1)}else if(r==="b"){return t==="btrue"}}return+t};var u=function ensureMap(e){if(!e["[[SetData]]"]){var t=new rn.Map;e["[[SetData]]"]=t;l(n(e._storage),function(e){var r=a(e);t.set(r,r)});e["[[SetData]]"]=t}e._storage=null};m.getter(i.prototype,"size",function(){r(this,"size");if(this._storage){return n(this._storage).length}u(this);return this["[[SetData]]"].size});b(i.prototype,{has:function has(e){r(this,"has");var t;if(this._storage&&(t=Yr(e))!==null){return!!this._storage[t]}u(this);return this["[[SetData]]"].has(e)},add:function add(e){r(this,"add");var t;if(this._storage&&(t=Yr(e))!==null){this._storage[t]=true;return this}u(this);this["[[SetData]]"].set(e,e);return this},"delete":function(e){r(this,"delete");var t;if(this._storage&&(t=Yr(e))!==null){var n=z(this._storage,t);return delete this._storage[t]&&n}u(this);return this["[[SetData]]"]["delete"](e)},clear:function clear(){r(this,"clear");if(this._storage){this._storage=Qr()}if(this["[[SetData]]"]){this["[[SetData]]"].clear()}},values:function values(){r(this,"values");u(this);return new f(this["[[SetData]]"].values())},entries:function entries(){r(this,"entries");u(this);return new f(this["[[SetData]]"].entries())},forEach:function forEach(e){r(this,"forEach");var n=arguments.length>1?arguments[1]:null;var o=this;u(o);this["[[SetData]]"].forEach(function(r,i){if(n){t(e,n,i,i,o)}else{e(i,i,o)}})}});h(i.prototype,"keys",i.prototype.values,true);Me(i.prototype,i.prototype.values);var f=function SetIterator(e){this.it=e};f.prototype={isSetIterator:true,next:function next(){if(!this.isSetIterator){throw new TypeError("Not a SetIterator")}return this.it.next()}};Me(f.prototype);return i}()};var nn=S.Set&&!Set.prototype["delete"]&&Set.prototype.remove&&Set.prototype.items&&Set.prototype.map&&Array.isArray((new Set).keys);if(nn){S.Set=rn.Set}if(S.Map||S.Set){var on=a(function(){return new Map([[1,2]]).get(1)===2});if(!on){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,S.Map.prototype);return e};S.Map.prototype=O(G.prototype);h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var an=new Map;var un=function(){var e=new Map([[1,0],[2,0],[3,0],[4,0]]);e.set(-0,e);return e.get(0)===e&&e.get(-0)===e&&e.has(0)&&e.has(-0)}();var fn=an.set(1,2)===an;if(!un||!fn){ne(Map.prototype,"set",function set(e,r){t(U,this,e===0?0:e,r);return this})}if(!un){b(Map.prototype,{get:function get(e){return t(V,this,e===0?0:e)},has:function has(e){return t(B,this,e===0?0:e)}},true);m.preserveToString(Map.prototype.get,V);m.preserveToString(Map.prototype.has,B)}var sn=new Set;var cn=Set.prototype["delete"]&&Set.prototype.add&&Set.prototype.has&&function(e){e["delete"](0);e.add(-0);return!e.has(0)}(sn);var ln=sn.add(1)===sn;if(!cn||!ln){var pn=Set.prototype.add;Set.prototype.add=function add(e){t(pn,this,e===0?0:e);return this};m.preserveToString(Set.prototype.add,pn)}if(!cn){var vn=Set.prototype.has;Set.prototype.has=function has(e){return t(vn,this,e===0?0:e)};m.preserveToString(Set.prototype.has,vn);var yn=Set.prototype["delete"];Set.prototype["delete"]=function SetDelete(e){return t(yn,this,e===0?0:e)};m.preserveToString(Set.prototype["delete"],yn)}var hn=w(S.Map,function(e){var t=new e([]);t.set(42,42);return t instanceof e});var bn=Object.setPrototypeOf&&!hn;var gn=function(){try{return!(S.Map()instanceof S.Map)}catch(e){return e instanceof TypeError}}();if(S.Map.length!==0||bn||!gn){S.Map=function Map(){if(!(this instanceof Map)){throw new TypeError('Constructor Map requires "new"')}var e=new G;if(arguments.length>0){en(Map,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Map.prototype);return e};S.Map.prototype=G.prototype;h(S.Map.prototype,"constructor",S.Map,true);m.preserveToString(S.Map,G)}var dn=w(S.Set,function(e){var t=new e([]);t.add(42,42);return t instanceof e});var mn=Object.setPrototypeOf&&!dn;var On=function(){try{return!(S.Set()instanceof S.Set)}catch(e){return e instanceof TypeError}}();if(S.Set.length!==0||mn||!On){var wn=S.Set;S.Set=function Set(){if(!(this instanceof Set)){throw new TypeError('Constructor Set requires "new"')}var e=new wn;if(arguments.length>0){tn(Set,e,arguments[0])}delete e.constructor;Object.setPrototypeOf(e,Set.prototype);return e};S.Set.prototype=wn.prototype;h(S.Set.prototype,"constructor",S.Set,true);m.preserveToString(S.Set,wn)}var jn=new S.Map;var Sn=!a(function(){return jn.keys().next().done});if(typeof S.Map.prototype.clear!=="function"||(new S.Set).size!==0||jn.size!==0||typeof S.Map.prototype.keys!=="function"||typeof S.Set.prototype.keys!=="function"||typeof S.Map.prototype.forEach!=="function"||typeof S.Set.prototype.forEach!=="function"||u(S.Map)||u(S.Set)||typeof jn.keys().next!=="function"||Sn||!hn){b(S,{Map:rn.Map,Set:rn.Set},true)}if(S.Set.prototype.keys!==S.Set.prototype.values){h(S.Set.prototype,"keys",S.Set.prototype.values,true)}Me(Object.getPrototypeOf((new S.Map).keys()));Me(Object.getPrototypeOf((new S.Set).keys()));if(c&&S.Set.prototype.has.name!=="has"){var Tn=S.Set.prototype.has;ne(S.Set.prototype,"has",function has(e){return t(Tn,this,e)})}}b(S,rn);Ce(S.Map);Ce(S.Set)}var In=function throwUnlessTargetIsObject(e){if(!ce.TypeIsObject(e)){throw new TypeError("target must be an object")}};var En={apply:function apply(){return ce.Call(ce.Call,null,arguments)},construct:function construct(e,t){if(!ce.IsConstructor(e)){throw new TypeError("First argument must be a constructor.")}var r=arguments.length>2?arguments[2]:e;if(!ce.IsConstructor(r)){throw new TypeError("new.target must be a constructor.")}return ce.Construct(e,t,r,"internal")},deleteProperty:function deleteProperty(e,t){In(e);if(s){var r=Object.getOwnPropertyDescriptor(e,t);if(r&&!r.configurable){return false}}return delete e[t]},has:function has(e,t){In(e);return t in e}};if(Object.getOwnPropertyNames){Object.assign(En,{ownKeys:function ownKeys(e){In(e);var t=Object.getOwnPropertyNames(e);if(ce.IsCallable(Object.getOwnPropertySymbols)){x(t,Object.getOwnPropertySymbols(e))}return t}})}var Pn=function ConvertExceptionToBoolean(e){return!i(e)};if(Object.preventExtensions){Object.assign(En,{isExtensible:function isExtensible(e){In(e);return Object.isExtensible(e)},preventExtensions:function preventExtensions(e){In(e);return Pn(function(){return Object.preventExtensions(e)})}})}if(s){var Cn=function get(e,t,r){var n=Object.getOwnPropertyDescriptor(e,t);if(!n){var o=Object.getPrototypeOf(e);if(o===null){return void 0}return Cn(o,t,r)}if("value"in n){return n.value}if(n.get){return ce.Call(n.get,r)}return void 0};var Mn=function set(e,r,n,o){var i=Object.getOwnPropertyDescriptor(e,r);if(!i){var a=Object.getPrototypeOf(e);if(a!==null){return Mn(a,r,n,o)}i={value:void 0,writable:true,enumerable:true,configurable:true}}if("value"in i){if(!i.writable){return false}if(!ce.TypeIsObject(o)){return false}var u=Object.getOwnPropertyDescriptor(o,r);if(u){return ae.defineProperty(o,r,{value:n})}else{return ae.defineProperty(o,r,{value:n,writable:true,enumerable:true,configurable:true})}}if(i.set){t(i.set,o,n);return true}return false};Object.assign(En,{defineProperty:function defineProperty(e,t,r){In(e);return Pn(function(){return Object.defineProperty(e,t,r)})},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(e,t){In(e);return Object.getOwnPropertyDescriptor(e,t)},get:function get(e,t){In(e);var r=arguments.length>2?arguments[2]:e;return Cn(e,t,r)},set:function set(e,t,r){In(e);var n=arguments.length>3?arguments[3]:e;return Mn(e,t,r,n)}})}if(Object.getPrototypeOf){var xn=Object.getPrototypeOf;En.getPrototypeOf=function getPrototypeOf(e){In(e);return xn(e)}}if(Object.setPrototypeOf&&En.getPrototypeOf){var Nn=function(e,t){var r=t;while(r){if(e===r){return true}r=En.getPrototypeOf(r)}return false};Object.assign(En,{setPrototypeOf:function setPrototypeOf(e,t){In(e);if(t!==null&&!ce.TypeIsObject(t)){throw new TypeError("proto must be an object or null")}if(t===ae.getPrototypeOf(e)){return true}if(ae.isExtensible&&!ae.isExtensible(e)){return false}if(Nn(e,t)){return false}Object.setPrototypeOf(e,t);return true}})}var An=function(e,t){if(!ce.IsCallable(S.Reflect[e])){h(S.Reflect,e,t)}else{var r=a(function(){S.Reflect[e](1);S.Reflect[e](NaN);S.Reflect[e](true);return true});if(r){ne(S.Reflect,e,t)}}};Object.keys(En).forEach(function(e){An(e,En[e])});var Rn=S.Reflect.getPrototypeOf;if(c&&Rn&&Rn.name!=="getPrototypeOf"){ne(S.Reflect,"getPrototypeOf",function getPrototypeOf(e){return t(Rn,S.Reflect,e)})}if(S.Reflect.setPrototypeOf){if(a(function(){S.Reflect.setPrototypeOf(1,{});return true})){ne(S.Reflect,"setPrototypeOf",En.setPrototypeOf)}}if(S.Reflect.defineProperty){if(!a(function(){var e=!S.Reflect.defineProperty(1,"test",{value:1});var t=typeof Object.preventExtensions!=="function"||!S.Reflect.defineProperty(Object.preventExtensions({}),"test",{});return e&&t})){ne(S.Reflect,"defineProperty",En.defineProperty)}}if(S.Reflect.construct){if(!a(function(){var e=function F(){};return S.Reflect.construct(function(){},[],e)instanceof e})){ne(S.Reflect,"construct",En.construct)}}if(String(new Date(NaN))!=="Invalid Date"){var _n=Date.prototype.toString;var kn=function toString(){var e=+this;if(e!==e){return"Invalid Date"}return ce.Call(_n,this)};ne(Date.prototype,"toString",kn)}var Ln={anchor:function anchor(e){return ce.CreateHTML(this,"a","name",e)},big:function big(){return ce.CreateHTML(this,"big","","")},blink:function blink(){return ce.CreateHTML(this,"blink","","")},bold:function bold(){return ce.CreateHTML(this,"b","","")},fixed:function fixed(){return ce.CreateHTML(this,"tt","","")},fontcolor:function fontcolor(e){return ce.CreateHTML(this,"font","color",e)},fontsize:function fontsize(e){return ce.CreateHTML(this,"font","size",e)},italics:function italics(){return ce.CreateHTML(this,"i","","")},link:function link(e){return ce.CreateHTML(this,"a","href",e)},small:function small(){return ce.CreateHTML(this,"small","","")},strike:function strike(){return ce.CreateHTML(this,"strike","","")},sub:function sub(){return ce.CreateHTML(this,"sub","","")},sup:function sub(){return ce.CreateHTML(this,"sup","","")}};l(Object.keys(Ln),function(e){var r=String.prototype[e];var n=false;if(ce.IsCallable(r)){var o=t(r,"",' " ');var i=P([],o.match(/"/g)).length;n=o!==o.toLowerCase()||i>2}else{n=true}if(n){ne(String.prototype,e,Ln[e])}});var Fn=function(){if(!oe){return false}var e=typeof JSON==="object"&&typeof JSON.stringify==="function"?JSON.stringify:null;if(!e){return false}if(typeof e($())!=="undefined"){return true}if(e([$()])!=="[null]"){return true}var t={a:$()};t[$()]=true;if(e(t)!=="{}"){return true}return false}();var Dn=a(function(){if(!oe){return true}return JSON.stringify(Object($()))==="{}"&&JSON.stringify([Object($())])==="[{}]"});if(Fn||!Dn){var zn=JSON.stringify;ne(JSON,"stringify",function stringify(e){if(typeof e==="symbol"){return}var n;if(arguments.length>1){n=arguments[1]}var o=[e];if(!r(n)){var i=ce.IsCallable(n)?n:null;var a=function(e,r){var n=i?t(i,this,e,r):r;if(typeof n!=="symbol"){if(re.symbol(n)){return Nt({})(n)}else{return n}}};o.push(a)}else{o.push(n)}if(arguments.length>2){o.push(arguments[2])}return zn.apply(this,o)})}return S});
/*! jQuery v3.6.0 | (c) OpenJS Foundation and other contributors | jquery.org/license */
!function(e,t){"use strict";"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(C,e){"use strict";var t=[],r=Object.getPrototypeOf,s=t.slice,g=t.flat?function(e){return t.flat.call(e)}:function(e){return t.concat.apply([],e)},u=t.push,i=t.indexOf,n={},o=n.toString,v=n.hasOwnProperty,a=v.toString,l=a.call(Object),y={},m=function(e){return"function"==typeof e&&"number"!=typeof e.nodeType&&"function"!=typeof e.item},x=function(e){return null!=e&&e===e.window},E=C.document,c={type:!0,src:!0,nonce:!0,noModule:!0};function b(e,t,n){var r,i,o=(n=n||E).createElement("script");if(o.text=e,t)for(r in c)(i=t[r]||t.getAttribute&&t.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?n[o.call(e)]||"object":typeof e}var f="3.6.0",S=function(e,t){return new S.fn.init(e,t)};function p(e){var t=!!e&&"length"in e&&e.length,n=w(e);return!m(e)&&!x(e)&&("array"===n||0===t||"number"==typeof t&&0<t&&t-1 in e)}S.fn=S.prototype={jquery:f,constructor:S,length:0,toArray:function(){return s.call(this)},get:function(e){return null==e?s.call(this):e<0?this[e+this.length]:this[e]},pushStack:function(e){var t=S.merge(this.constructor(),e);return t.prevObject=this,t},each:function(e){return S.each(this,e)},map:function(n){return this.pushStack(S.map(this,function(e,t){return n.call(e,t,e)}))},slice:function(){return this.pushStack(s.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(S.grep(this,function(e,t){return(t+1)%2}))},odd:function(){return this.pushStack(S.grep(this,function(e,t){return t%2}))},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(0<=n&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:t.sort,splice:t.splice},S.extend=S.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,u=arguments.length,l=!1;for("boolean"==typeof a&&(l=a,a=arguments[s]||{},s++),"object"==typeof a||m(a)||(a={}),s===u&&(a=this,s--);s<u;s++)if(null!=(e=arguments[s]))for(t in e)r=e[t],"__proto__"!==t&&a!==r&&(l&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=a[t],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,a[t]=S.extend(l,o,r)):void 0!==r&&(a[t]=r));return a},S.extend({expando:"jQuery"+(f+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isPlainObject:function(e){var t,n;return!(!e||"[object Object]"!==o.call(e))&&(!(t=r(e))||"function"==typeof(n=v.call(t,"constructor")&&t.constructor)&&a.call(n)===l)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},globalEval:function(e,t,n){b(e,{nonce:t&&t.nonce},n)},each:function(e,t){var n,r=0;if(p(e)){for(n=e.length;r<n;r++)if(!1===t.call(e[r],r,e[r]))break}else for(r in e)if(!1===t.call(e[r],r,e[r]))break;return e},makeArray:function(e,t){var n=t||[];return null!=e&&(p(Object(e))?S.merge(n,"string"==typeof e?[e]:e):u.call(n,e)),n},inArray:function(e,t,n){return null==t?-1:i.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;r<n;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;i<o;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=0,a=[];if(p(e))for(r=e.length;o<r;o++)null!=(i=t(e[o],o,n))&&a.push(i);else for(o in e)null!=(i=t(e[o],o,n))&&a.push(i);return g(a)},guid:1,support:y}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=t[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){n["[object "+t+"]"]=t.toLowerCase()});var d=function(n){var e,d,b,o,i,h,f,g,w,u,l,T,C,a,E,v,s,c,y,S="sizzle"+1*new Date,p=n.document,k=0,r=0,m=ue(),x=ue(),A=ue(),N=ue(),j=function(e,t){return e===t&&(l=!0),0},D={}.hasOwnProperty,t=[],q=t.pop,L=t.push,H=t.push,O=t.slice,P=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},R="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",I="(?:\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",W="\\["+M+"*("+I+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+I+"))|)"+M+"*\\]",F=":("+I+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+W+")*)|.*)\\)|)",B=new RegExp(M+"+","g"),$=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),_=new RegExp("^"+M+"*,"+M+"*"),z=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp(M+"|>"),X=new RegExp(F),V=new RegExp("^"+I+"$"),G={ID:new RegExp("^#("+I+")"),CLASS:new RegExp("^\\.("+I+")"),TAG:new RegExp("^("+I+"|[*])"),ATTR:new RegExp("^"+W),PSEUDO:new RegExp("^"+F),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+R+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/HTML$/i,Q=/^(?:input|select|textarea|button)$/i,J=/^h\d$/i,K=/^[^{]+\{\s*\[native \w/,Z=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ee=/[+~]/,te=new RegExp("\\\\[\\da-fA-F]{1,6}"+M+"?|\\\\([^\\r\\n\\f])","g"),ne=function(e,t){var n="0x"+e.slice(1)-65536;return t||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},re=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ie=function(e,t){return t?"\0"===e?"\ufffd":e.slice(0,-1)+"\\"+e.charCodeAt(e.length-1).toString(16)+" ":"\\"+e},oe=function(){T()},ae=be(function(e){return!0===e.disabled&&"fieldset"===e.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{H.apply(t=O.call(p.childNodes),p.childNodes),t[p.childNodes.length].nodeType}catch(e){H={apply:t.length?function(e,t){L.apply(e,O.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}function se(t,e,n,r){var i,o,a,s,u,l,c,f=e&&e.ownerDocument,p=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==p&&9!==p&&11!==p)return n;if(!r&&(T(e),e=e||C,E)){if(11!==p&&(u=Z.exec(t)))if(i=u[1]){if(9===p){if(!(a=e.getElementById(i)))return n;if(a.id===i)return n.push(a),n}else if(f&&(a=f.getElementById(i))&&y(e,a)&&a.id===i)return n.push(a),n}else{if(u[2])return H.apply(n,e.getElementsByTagName(t)),n;if((i=u[3])&&d.getElementsByClassName&&e.getElementsByClassName)return H.apply(n,e.getElementsByClassName(i)),n}if(d.qsa&&!N[t+" "]&&(!v||!v.test(t))&&(1!==p||"object"!==e.nodeName.toLowerCase())){if(c=t,f=e,1===p&&(U.test(t)||z.test(t))){(f=ee.test(t)&&ye(e.parentNode)||e)===e&&d.scope||((s=e.getAttribute("id"))?s=s.replace(re,ie):e.setAttribute("id",s=S)),o=(l=h(t)).length;while(o--)l[o]=(s?"#"+s:":scope")+" "+xe(l[o]);c=l.join(",")}try{return H.apply(n,f.querySelectorAll(c)),n}catch(e){N(t,!0)}finally{s===S&&e.removeAttribute("id")}}}return g(t.replace($,"$1"),e,n,r)}function ue(){var r=[];return function e(t,n){return r.push(t+" ")>b.cacheLength&&delete e[r.shift()],e[t+" "]=n}}function le(e){return e[S]=!0,e}function ce(e){var t=C.createElement("fieldset");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function fe(e,t){var n=e.split("|"),r=n.length;while(r--)b.attrHandle[n[r]]=t}function pe(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&e.sourceIndex-t.sourceIndex;if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function de(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function he(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function ge(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&ae(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ve(a){return le(function(o){return o=+o,le(function(e,t){var n,r=a([],e.length,o),i=r.length;while(i--)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function ye(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}for(e in d=se.support={},i=se.isXML=function(e){var t=e&&e.namespaceURI,n=e&&(e.ownerDocument||e).documentElement;return!Y.test(t||n&&n.nodeName||"HTML")},T=se.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:p;return r!=C&&9===r.nodeType&&r.documentElement&&(a=(C=r).documentElement,E=!i(C),p!=C&&(n=C.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",oe,!1):n.attachEvent&&n.attachEvent("onunload",oe)),d.scope=ce(function(e){return a.appendChild(e).appendChild(C.createElement("div")),"undefined"!=typeof e.querySelectorAll&&!e.querySelectorAll(":scope fieldset div").length}),d.attributes=ce(function(e){return e.className="i",!e.getAttribute("className")}),d.getElementsByTagName=ce(function(e){return e.appendChild(C.createComment("")),!e.getElementsByTagName("*").length}),d.getElementsByClassName=K.test(C.getElementsByClassName),d.getById=ce(function(e){return a.appendChild(e).id=S,!C.getElementsByName||!C.getElementsByName(S).length}),d.getById?(b.filter.ID=function(e){var t=e.replace(te,ne);return function(e){return e.getAttribute("id")===t}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n=t.getElementById(e);return n?[n]:[]}}):(b.filter.ID=function(e){var n=e.replace(te,ne);return function(e){var t="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return t&&t.value===n}},b.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&E){var n,r,i,o=t.getElementById(e);if(o){if((n=o.getAttributeNode("id"))&&n.value===e)return[o];i=t.getElementsByName(e),r=0;while(o=i[r++])if((n=o.getAttributeNode("id"))&&n.value===e)return[o]}return[]}}),b.find.TAG=d.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):d.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){while(n=o[i++])1===n.nodeType&&r.push(n);return r}return o},b.find.CLASS=d.getElementsByClassName&&function(e,t){if("undefined"!=typeof t.getElementsByClassName&&E)return t.getElementsByClassName(e)},s=[],v=[],(d.qsa=K.test(C.querySelectorAll))&&(ce(function(e){var t;a.appendChild(e).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&v.push("[*^$]="+M+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||v.push("\\["+M+"*(?:value|"+R+")"),e.querySelectorAll("[id~="+S+"-]").length||v.push("~="),(t=C.createElement("input")).setAttribute("name",""),e.appendChild(t),e.querySelectorAll("[name='']").length||v.push("\\["+M+"*name"+M+"*="+M+"*(?:''|\"\")"),e.querySelectorAll(":checked").length||v.push(":checked"),e.querySelectorAll("a#"+S+"+*").length||v.push(".#.+[+~]"),e.querySelectorAll("\\\f"),v.push("[\\r\\n\\f]")}),ce(function(e){e.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var t=C.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&v.push("name"+M+"*[*^$|!~]?="),2!==e.querySelectorAll(":enabled").length&&v.push(":enabled",":disabled"),a.appendChild(e).disabled=!0,2!==e.querySelectorAll(":disabled").length&&v.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),v.push(",.*:")})),(d.matchesSelector=K.test(c=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ce(function(e){d.disconnectedMatch=c.call(e,"*"),c.call(e,"[s!='']:x"),s.push("!=",F)}),v=v.length&&new RegExp(v.join("|")),s=s.length&&new RegExp(s.join("|")),t=K.test(a.compareDocumentPosition),y=t||K.test(a.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},j=t?function(e,t){if(e===t)return l=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(1&(n=(e.ownerDocument||e)==(t.ownerDocument||t)?e.compareDocumentPosition(t):1)||!d.sortDetached&&t.compareDocumentPosition(e)===n?e==C||e.ownerDocument==p&&y(p,e)?-1:t==C||t.ownerDocument==p&&y(p,t)?1:u?P(u,e)-P(u,t):0:4&n?-1:1)}:function(e,t){if(e===t)return l=!0,0;var n,r=0,i=e.parentNode,o=t.parentNode,a=[e],s=[t];if(!i||!o)return e==C?-1:t==C?1:i?-1:o?1:u?P(u,e)-P(u,t):0;if(i===o)return pe(e,t);n=e;while(n=n.parentNode)a.unshift(n);n=t;while(n=n.parentNode)s.unshift(n);while(a[r]===s[r])r++;return r?pe(a[r],s[r]):a[r]==p?-1:s[r]==p?1:0}),C},se.matches=function(e,t){return se(e,null,null,t)},se.matchesSelector=function(e,t){if(T(e),d.matchesSelector&&E&&!N[t+" "]&&(!s||!s.test(t))&&(!v||!v.test(t)))try{var n=c.call(e,t);if(n||d.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(e){N(t,!0)}return 0<se(t,C,null,[e]).length},se.contains=function(e,t){return(e.ownerDocument||e)!=C&&T(e),y(e,t)},se.attr=function(e,t){(e.ownerDocument||e)!=C&&T(e);var n=b.attrHandle[t.toLowerCase()],r=n&&D.call(b.attrHandle,t.toLowerCase())?n(e,t,!E):void 0;return void 0!==r?r:d.attributes||!E?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},se.escape=function(e){return(e+"").replace(re,ie)},se.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},se.uniqueSort=function(e){var t,n=[],r=0,i=0;if(l=!d.detectDuplicates,u=!d.sortStable&&e.slice(0),e.sort(j),l){while(t=e[i++])t===e[i]&&(r=n.push(i));while(r--)e.splice(n[r],1)}return u=null,e},o=se.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else while(t=e[r++])n+=o(t);return n},(b=se.selectors={cacheLength:50,createPseudo:le,match:G,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(te,ne),e[3]=(e[3]||e[4]||e[5]||"").replace(te,ne),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||se.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&se.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return G.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&X.test(n)&&(t=h(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(te,ne).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=m[e+" "];return t||(t=new RegExp("(^|"+M+")"+e+"("+M+"|$)"))&&m(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(e){var t=se.attr(e,n);return null==t?"!="===r:!r||(t+="","="===r?t===i:"!="===r?t!==i:"^="===r?i&&0===t.indexOf(i):"*="===r?i&&-1<t.indexOf(i):"$="===r?i&&t.slice(-i.length)===i:"~="===r?-1<(" "+t.replace(B," ")+" ").indexOf(i):"|="===r&&(t===i||t.slice(0,i.length+1)===i+"-"))}},CHILD:function(h,e,t,g,v){var y="nth"!==h.slice(0,3),m="last"!==h.slice(-4),x="of-type"===e;return 1===g&&0===v?function(e){return!!e.parentNode}:function(e,t,n){var r,i,o,a,s,u,l=y!==m?"nextSibling":"previousSibling",c=e.parentNode,f=x&&e.nodeName.toLowerCase(),p=!n&&!x,d=!1;if(c){if(y){while(l){a=e;while(a=a[l])if(x?a.nodeName.toLowerCase()===f:1===a.nodeType)return!1;u=l="only"===h&&!u&&"nextSibling"}return!0}if(u=[m?c.firstChild:c.lastChild],m&&p){d=(s=(r=(i=(o=(a=c)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1])&&r[2],a=s&&c.childNodes[s];while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if(1===a.nodeType&&++d&&a===e){i[h]=[k,s,d];break}}else if(p&&(d=s=(r=(i=(o=(a=e)[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]||[])[0]===k&&r[1]),!1===d)while(a=++s&&a&&a[l]||(d=s=0)||u.pop())if((x?a.nodeName.toLowerCase()===f:1===a.nodeType)&&++d&&(p&&((i=(o=a[S]||(a[S]={}))[a.uniqueID]||(o[a.uniqueID]={}))[h]=[k,d]),a===e))break;return(d-=v)===g||d%g==0&&0<=d/g}}},PSEUDO:function(e,o){var t,a=b.pseudos[e]||b.setFilters[e.toLowerCase()]||se.error("unsupported pseudo: "+e);return a[S]?a(o):1<a.length?(t=[e,e,"",o],b.setFilters.hasOwnProperty(e.toLowerCase())?le(function(e,t){var n,r=a(e,o),i=r.length;while(i--)e[n=P(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:le(function(e){var r=[],i=[],s=f(e.replace($,"$1"));return s[S]?le(function(e,t,n,r){var i,o=s(e,null,r,[]),a=e.length;while(a--)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),r[0]=null,!i.pop()}}),has:le(function(t){return function(e){return 0<se(t,e).length}}),contains:le(function(t){return t=t.replace(te,ne),function(e){return-1<(e.textContent||o(e)).indexOf(t)}}),lang:le(function(n){return V.test(n||"")||se.error("unsupported lang: "+n),n=n.replace(te,ne).toLowerCase(),function(e){var t;do{if(t=E?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(t=t.toLowerCase())===n||0===t.indexOf(n+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=n.location&&n.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===a},focus:function(e){return e===C.activeElement&&(!C.hasFocus||C.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:ge(!1),disabled:ge(!0),checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!b.pseudos.empty(e)},header:function(e){return J.test(e.nodeName)},input:function(e){return Q.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:ve(function(){return[0]}),last:ve(function(e,t){return[t-1]}),eq:ve(function(e,t,n){return[n<0?n+t:n]}),even:ve(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:ve(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:ve(function(e,t,n){for(var r=n<0?n+t:t<n?t:n;0<=--r;)e.push(r);return e}),gt:ve(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[e]=de(e);for(e in{submit:!0,reset:!0})b.pseudos[e]=he(e);function me(){}function xe(e){for(var t=0,n=e.length,r="";t<n;t++)r+=e[t].value;return r}function be(s,e,t){var u=e.dir,l=e.next,c=l||u,f=t&&"parentNode"===c,p=r++;return e.first?function(e,t,n){while(e=e[u])if(1===e.nodeType||f)return s(e,t,n);return!1}:function(e,t,n){var r,i,o,a=[k,p];if(n){while(e=e[u])if((1===e.nodeType||f)&&s(e,t,n))return!0}else while(e=e[u])if(1===e.nodeType||f)if(i=(o=e[S]||(e[S]={}))[e.uniqueID]||(o[e.uniqueID]={}),l&&l===e.nodeName.toLowerCase())e=e[u]||e;else{if((r=i[c])&&r[0]===k&&r[1]===p)return a[2]=r[2];if((i[c]=a)[2]=s(e,t,n))return!0}return!1}}function we(i){return 1<i.length?function(e,t,n){var r=i.length;while(r--)if(!i[r](e,t,n))return!1;return!0}:i[0]}function Te(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;s<u;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),l&&t.push(s)));return a}function Ce(d,h,g,v,y,e){return v&&!v[S]&&(v=Ce(v)),y&&!y[S]&&(y=Ce(y,e)),le(function(e,t,n,r){var i,o,a,s=[],u=[],l=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)se(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:Te(c,s,d,n,r),p=g?y||(e?d:l||v)?[]:t:f;if(g&&g(f,p,n,r),v){i=Te(p,u),v(i,[],n,r),o=i.length;while(o--)(a=i[o])&&(p[u[o]]=!(f[u[o]]=a))}if(e){if(y||d){if(y){i=[],o=p.length;while(o--)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}o=p.length;while(o--)(a=p[o])&&-1<(i=y?P(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=Te(p===t?p.splice(l,p.length):p),y?y(null,t,p,r):H.apply(t,p)})}function Ee(e){for(var i,t,n,r=e.length,o=b.relative[e[0].type],a=o||b.relative[" "],s=o?1:0,u=be(function(e){return e===i},a,!0),l=be(function(e){return-1<P(i,e)},a,!0),c=[function(e,t,n){var r=!o&&(n||t!==w)||((i=t).nodeType?u(e,t,n):l(e,t,n));return i=null,r}];s<r;s++)if(t=b.relative[e[s].type])c=[be(we(c),t)];else{if((t=b.filter[e[s].type].apply(null,e[s].matches))[S]){for(n=++s;n<r;n++)if(b.relative[e[n].type])break;return Ce(1<s&&we(c),1<s&&xe(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace($,"$1"),t,s<n&&Ee(e.slice(s,n)),n<r&&Ee(e=e.slice(n)),n<r&&xe(e))}c.push(t)}return we(c)}return me.prototype=b.filters=b.pseudos,b.setFilters=new me,h=se.tokenize=function(e,t){var n,r,i,o,a,s,u,l=x[e+" "];if(l)return t?0:l.slice(0);a=e,s=[],u=b.preFilter;while(a){for(o in n&&!(r=_.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=z.exec(a))&&(n=r.shift(),i.push({value:n,type:r[0].replace($," ")}),a=a.slice(n.length)),b.filter)!(r=G[o].exec(a))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),a=a.slice(n.length));if(!n)break}return t?a.length:a?se.error(e):x(e,s).slice(0)},f=se.compile=function(e,t){var n,v,y,m,x,r,i=[],o=[],a=A[e+" "];if(!a){t||(t=h(e)),n=t.length;while(n--)(a=Ee(t[n]))[S]?i.push(a):o.push(a);(a=A(e,(v=o,m=0<(y=i).length,x=0<v.length,r=function(e,t,n,r,i){var o,a,s,u=0,l="0",c=e&&[],f=[],p=w,d=e||x&&b.find.TAG("*",i),h=k+=null==p?1:Math.random()||.1,g=d.length;for(i&&(w=t==C||t||i);l!==g&&null!=(o=d[l]);l++){if(x&&o){a=0,t||o.ownerDocument==C||(T(o),n=!E);while(s=v[a++])if(s(o,t||C,n)){r.push(o);break}i&&(k=h)}m&&((o=!s&&o)&&u--,e&&c.push(o))}if(u+=l,m&&l!==u){a=0;while(s=y[a++])s(c,f,t,n);if(e){if(0<u)while(l--)c[l]||f[l]||(f[l]=q.call(r));f=Te(f)}H.apply(r,f),i&&!e&&0<f.length&&1<u+y.length&&se.uniqueSort(r)}return i&&(k=h,w=p),c},m?le(r):r))).selector=e}return a},g=se.select=function(e,t,n,r){var i,o,a,s,u,l="function"==typeof e&&e,c=!r&&h(e=l.selector||e);if(n=n||[],1===c.length){if(2<(o=c[0]=c[0].slice(0)).length&&"ID"===(a=o[0]).type&&9===t.nodeType&&E&&b.relative[o[1].type]){if(!(t=(b.find.ID(a.matches[0].replace(te,ne),t)||[])[0]))return n;l&&(t=t.parentNode),e=e.slice(o.shift().value.length)}i=G.needsContext.test(e)?0:o.length;while(i--){if(a=o[i],b.relative[s=a.type])break;if((u=b.find[s])&&(r=u(a.matches[0].replace(te,ne),ee.test(o[0].type)&&ye(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&xe(o)))return H.apply(n,r),n;break}}}return(l||f(e,c))(r,t,!E,n,!t||ee.test(e)&&ye(t.parentNode)||t),n},d.sortStable=S.split("").sort(j).join("")===S,d.detectDuplicates=!!l,T(),d.sortDetached=ce(function(e){return 1&e.compareDocumentPosition(C.createElement("fieldset"))}),ce(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||fe("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),d.attributes&&ce(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||fe("value",function(e,t,n){if(!n&&"input"===e.nodeName.toLowerCase())return e.defaultValue}),ce(function(e){return null==e.getAttribute("disabled")})||fe(R,function(e,t,n){var r;if(!n)return!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),se}(C);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;var h=function(e,t,n){var r=[],i=void 0!==n;while((e=e[t])&&9!==e.nodeType)if(1===e.nodeType){if(i&&S(e).is(n))break;r.push(e)}return r},T=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},k=S.expr.match.needsContext;function A(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()}var N=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function j(e,n,r){return m(n)?S.grep(e,function(e,t){return!!n.call(e,t,e)!==r}):n.nodeType?S.grep(e,function(e){return e===n!==r}):"string"!=typeof n?S.grep(e,function(e){return-1<i.call(n,e)!==r}):S.filter(n,e,r)}S.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?S.find.matchesSelector(r,e)?[r]:[]:S.find.matches(e,S.grep(t,function(e){return 1===e.nodeType}))},S.fn.extend({find:function(e){var t,n,r=this.length,i=this;if("string"!=typeof e)return this.pushStack(S(e).filter(function(){for(t=0;t<r;t++)if(S.contains(i[t],this))return!0}));for(n=this.pushStack([]),t=0;t<r;t++)S.find(e,i[t],n);return 1<r?S.uniqueSort(n):n},filter:function(e){return this.pushStack(j(this,e||[],!1))},not:function(e){return this.pushStack(j(this,e||[],!0))},is:function(e){return!!j(this,"string"==typeof e&&k.test(e)?S(e):e||[],!1).length}});var D,q=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(e,t,n){var r,i;if(!e)return this;if(n=n||D,"string"==typeof e){if(!(r="<"===e[0]&&">"===e[e.length-1]&&3<=e.length?[null,e,null]:q.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1]){if(t=t instanceof S?t[0]:t,S.merge(this,S.parseHTML(r[1],t&&t.nodeType?t.ownerDocument||t:E,!0)),N.test(r[1])&&S.isPlainObject(t))for(r in t)m(this[r])?this[r](t[r]):this.attr(r,t[r]);return this}return(i=E.getElementById(r[2]))&&(this[0]=i,this.length=1),this}return e.nodeType?(this[0]=e,this.length=1,this):m(e)?void 0!==n.ready?n.ready(e):e(S):S.makeArray(e,this)}).prototype=S.fn,D=S(E);var L=/^(?:parents|prev(?:Until|All))/,H={children:!0,contents:!0,next:!0,prev:!0};function O(e,t){while((e=e[t])&&1!==e.nodeType);return e}S.fn.extend({has:function(e){var t=S(e,this),n=t.length;return this.filter(function(){for(var e=0;e<n;e++)if(S.contains(this,t[e]))return!0})},closest:function(e,t){var n,r=0,i=this.length,o=[],a="string"!=typeof e&&S(e);if(!k.test(e))for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?-1<a.index(n):1===n.nodeType&&S.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?i.call(S(e),this[0]):i.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),S.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return h(e,"parentNode")},parentsUntil:function(e,t,n){return h(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return h(e,"nextSibling")},prevAll:function(e){return h(e,"previousSibling")},nextUntil:function(e,t,n){return h(e,"nextSibling",n)},prevUntil:function(e,t,n){return h(e,"previousSibling",n)},siblings:function(e){return T((e.parentNode||{}).firstChild,e)},children:function(e){return T(e.firstChild)},contents:function(e){return null!=e.contentDocument&&r(e.contentDocument)?e.contentDocument:(A(e,"template")&&(e=e.content||e),S.merge([],e.childNodes))}},function(r,i){S.fn[r]=function(e,t){var n=S.map(this,i,e);return"Until"!==r.slice(-5)&&(t=e),t&&"string"==typeof t&&(n=S.filter(t,n)),1<this.length&&(H[r]||S.uniqueSort(n),L.test(r)&&n.reverse()),this.pushStack(n)}});var P=/[^\x20\t\r\n\f]+/g;function R(e){return e}function M(e){throw e}function I(e,t,n,r){var i;try{e&&m(i=e.promise)?i.call(e).done(t).fail(n):e&&m(i=e.then)?i.call(e,t,n):t.apply(void 0,[e].slice(r))}catch(e){n.apply(void 0,[e])}}S.Callbacks=function(r){var e,n;r="string"==typeof r?(e=r,n={},S.each(e.match(P)||[],function(e,t){n[t]=!0}),n):S.extend({},r);var i,t,o,a,s=[],u=[],l=-1,c=function(){for(a=a||r.once,o=i=!0;u.length;l=-1){t=u.shift();while(++l<s.length)!1===s[l].apply(t[0],t[1])&&r.stopOnFalse&&(l=s.length,t=!1)}r.memory||(t=!1),i=!1,a&&(s=t?[]:"")},f={add:function(){return s&&(t&&!i&&(l=s.length-1,u.push(t)),function n(e){S.each(e,function(e,t){m(t)?r.unique&&f.has(t)||s.push(t):t&&t.length&&"string"!==w(t)&&n(t)})}(arguments),t&&!i&&c()),this},remove:function(){return S.each(arguments,function(e,t){var n;while(-1<(n=S.inArray(t,s,n)))s.splice(n,1),n<=l&&l--}),this},has:function(e){return e?-1<S.inArray(e,s):0<s.length},empty:function(){return s&&(s=[]),this},disable:function(){return a=u=[],s=t="",this},disabled:function(){return!s},lock:function(){return a=u=[],t||i||(s=t=""),this},locked:function(){return!!a},fireWith:function(e,t){return a||(t=[e,(t=t||[]).slice?t.slice():t],u.push(t),i||c()),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},S.extend({Deferred:function(e){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",a={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},"catch":function(e){return a.then(null,e)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(e,t){var n=m(i[t[4]])&&i[t[4]];s[t[1]](function(){var e=n&&n.apply(this,arguments);e&&m(e.promise)?e.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[t[0]+"With"](this,n?[e]:arguments)})}),i=null}).promise()},then:function(t,n,r){var u=0;function l(i,o,a,s){return function(){var n=this,r=arguments,e=function(){var e,t;if(!(i<u)){if((e=a.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");t=e&&("object"==typeof e||"function"==typeof e)&&e.then,m(t)?s?t.call(e,l(u,o,R,s),l(u,o,M,s)):(u++,t.call(e,l(u,o,R,s),l(u,o,M,s),l(u,o,R,o.notifyWith))):(a!==R&&(n=void 0,r=[e]),(s||o.resolveWith)(n,r))}},t=s?e:function(){try{e()}catch(e){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(e,t.stackTrace),u<=i+1&&(a!==M&&(n=void 0,r=[e]),o.rejectWith(n,r))}};i?t():(S.Deferred.getStackHook&&(t.stackTrace=S.Deferred.getStackHook()),C.setTimeout(t))}}return S.Deferred(function(e){o[0][3].add(l(0,e,m(r)?r:R,e.notifyWith)),o[1][3].add(l(0,e,m(t)?t:R)),o[2][3].add(l(0,e,m(n)?n:M))}).promise()},promise:function(e){return null!=e?S.extend(e,a):a}},s={};return S.each(o,function(e,t){var n=t[2],r=t[5];a[t[1]]=n.add,r&&n.add(function(){i=r},o[3-e][2].disable,o[3-e][3].disable,o[0][2].lock,o[0][3].lock),n.add(t[3].fire),s[t[0]]=function(){return s[t[0]+"With"](this===s?void 0:this,arguments),this},s[t[0]+"With"]=n.fireWith}),a.promise(s),e&&e.call(s,s),s},when:function(e){var n=arguments.length,t=n,r=Array(t),i=s.call(arguments),o=S.Deferred(),a=function(t){return function(e){r[t]=this,i[t]=1<arguments.length?s.call(arguments):e,--n||o.resolveWith(r,i)}};if(n<=1&&(I(e,o.done(a(t)).resolve,o.reject,!n),"pending"===o.state()||m(i[t]&&i[t].then)))return o.then();while(t--)I(i[t],a(t),o.reject);return o.promise()}});var W=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(e,t){C.console&&C.console.warn&&e&&W.test(e.name)&&C.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},S.readyException=function(e){C.setTimeout(function(){throw e})};var F=S.Deferred();function B(){E.removeEventListener("DOMContentLoaded",B),C.removeEventListener("load",B),S.ready()}S.fn.ready=function(e){return F.then(e)["catch"](function(e){S.readyException(e)}),this},S.extend({isReady:!1,readyWait:1,ready:function(e){(!0===e?--S.readyWait:S.isReady)||(S.isReady=!0)!==e&&0<--S.readyWait||F.resolveWith(E,[S])}}),S.ready.then=F.then,"complete"===E.readyState||"loading"!==E.readyState&&!E.documentElement.doScroll?C.setTimeout(S.ready):(E.addEventListener("DOMContentLoaded",B),C.addEventListener("load",B));var $=function(e,t,n,r,i,o,a){var s=0,u=e.length,l=null==n;if("object"===w(n))for(s in i=!0,n)$(e,t,s,n[s],!0,o,a);else if(void 0!==r&&(i=!0,m(r)||(a=!0),l&&(a?(t.call(e,r),t=null):(l=t,t=function(e,t,n){return l.call(S(e),n)})),t))for(;s<u;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:l?t.call(e):u?t(e[0],n):o},_=/^-ms-/,z=/-([a-z])/g;function U(e,t){return t.toUpperCase()}function X(e){return e.replace(_,"ms-").replace(z,U)}var V=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};function G(){this.expando=S.expando+G.uid++}G.uid=1,G.prototype={cache:function(e){var t=e[this.expando];return t||(t={},V(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var r,i=this.cache(e);if("string"==typeof t)i[X(t)]=n;else for(r in t)i[X(r)]=t[r];return i},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][X(t)]},access:function(e,t,n){return void 0===t||t&&"string"==typeof t&&void 0===n?this.get(e,t):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r=e[this.expando];if(void 0!==r){if(void 0!==t){n=(t=Array.isArray(t)?t.map(X):(t=X(t))in r?[t]:t.match(P)||[]).length;while(n--)delete r[t[n]]}(void 0===t||S.isEmptyObject(r))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!S.isEmptyObject(t)}};var Y=new G,Q=new G,J=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,K=/[A-Z]/g;function Z(e,t,n){var r,i;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(K,"-$&").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:J.test(i)?JSON.parse(i):i)}catch(e){}Q.set(e,t,n)}else n=void 0;return n}S.extend({hasData:function(e){return Q.hasData(e)||Y.hasData(e)},data:function(e,t,n){return Q.access(e,t,n)},removeData:function(e,t){Q.remove(e,t)},_data:function(e,t,n){return Y.access(e,t,n)},_removeData:function(e,t){Y.remove(e,t)}}),S.fn.extend({data:function(n,e){var t,r,i,o=this[0],a=o&&o.attributes;if(void 0===n){if(this.length&&(i=Q.get(o),1===o.nodeType&&!Y.get(o,"hasDataAttrs"))){t=a.length;while(t--)a[t]&&0===(r=a[t].name).indexOf("data-")&&(r=X(r.slice(5)),Z(o,r,i[r]));Y.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof n?this.each(function(){Q.set(this,n)}):$(this,function(e){var t;if(o&&void 0===e)return void 0!==(t=Q.get(o,n))?t:void 0!==(t=Z(o,n))?t:void 0;this.each(function(){Q.set(this,n,e)})},null,e,1<arguments.length,null,!0)},removeData:function(e){return this.each(function(){Q.remove(this,e)})}}),S.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=Y.get(e,t),n&&(!r||Array.isArray(n)?r=Y.access(e,t,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=S.queue(e,t),r=n.length,i=n.shift(),o=S._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){S.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Y.get(e,n)||Y.access(e,n,{empty:S.Callbacks("once memory").add(function(){Y.remove(e,[t+"queue",n])})})}}),S.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?S.queue(this[0],t):void 0===n?this:this.each(function(){var e=S.queue(this,t,n);S._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&S.dequeue(this,t)})},dequeue:function(e){return this.each(function(){S.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=S.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};"string"!=typeof e&&(t=e,e=void 0),e=e||"fx";while(a--)(n=Y.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,te=new RegExp("^(?:([+-])=|)("+ee+")([a-z%]*)$","i"),ne=["Top","Right","Bottom","Left"],re=E.documentElement,ie=function(e){return S.contains(e.ownerDocument,e)},oe={composed:!0};re.getRootNode&&(ie=function(e){return S.contains(e.ownerDocument,e)||e.getRootNode(oe)===e.ownerDocument});var ae=function(e,t){return"none"===(e=t||e).style.display||""===e.style.display&&ie(e)&&"none"===S.css(e,"display")};function se(e,t,n,r){var i,o,a=20,s=r?function(){return r.cur()}:function(){return S.css(e,t,"")},u=s(),l=n&&n[3]||(S.cssNumber[t]?"":"px"),c=e.nodeType&&(S.cssNumber[t]||"px"!==l&&+u)&&te.exec(S.css(e,t));if(c&&c[3]!==l){u/=2,l=l||c[3],c=+u||1;while(a--)S.style(e,t,c+l),(1-o)*(1-(o=s()/u||.5))<=0&&(a=0),c/=o;c*=2,S.style(e,t,c+l),n=n||[]}return n&&(c=+c||+u||0,i=n[1]?c+(n[1]+1)*n[2]:+n[2],r&&(r.unit=l,r.start=c,r.end=i)),i}var ue={};function le(e,t){for(var n,r,i,o,a,s,u,l=[],c=0,f=e.length;c<f;c++)(r=e[c]).style&&(n=r.style.display,t?("none"===n&&(l[c]=Y.get(r,"display")||null,l[c]||(r.style.display="")),""===r.style.display&&ae(r)&&(l[c]=(u=a=o=void 0,a=(i=r).ownerDocument,s=i.nodeName,(u=ue[s])||(o=a.body.appendChild(a.createElement(s)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ue[s]=u)))):"none"!==n&&(l[c]="none",Y.set(r,"display",n)));for(c=0;c<f;c++)null!=l[c]&&(e[c].style.display=l[c]);return e}S.fn.extend({show:function(){return le(this,!0)},hide:function(){return le(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){ae(this)?S(this).show():S(this).hide()})}});var ce,fe,pe=/^(?:checkbox|radio)$/i,de=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,he=/^$|^module$|\/(?:java|ecma)script/i;ce=E.createDocumentFragment().appendChild(E.createElement("div")),(fe=E.createElement("input")).setAttribute("type","radio"),fe.setAttribute("checked","checked"),fe.setAttribute("name","t"),ce.appendChild(fe),y.checkClone=ce.cloneNode(!0).cloneNode(!0).lastChild.checked,ce.innerHTML="<textarea>x</textarea>",y.noCloneChecked=!!ce.cloneNode(!0).lastChild.defaultValue,ce.innerHTML="<option></option>",y.option=!!ce.lastChild;var ge={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function ve(e,t){var n;return n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[],void 0===t||t&&A(e,t)?S.merge([e],n):n}function ye(e,t){for(var n=0,r=e.length;n<r;n++)Y.set(e[n],"globalEval",!t||Y.get(t[n],"globalEval"))}ge.tbody=ge.tfoot=ge.colgroup=ge.caption=ge.thead,ge.th=ge.td,y.option||(ge.optgroup=ge.option=[1,"<select multiple='multiple'>","</select>"]);var me=/<|&#?\w+;/;function xe(e,t,n,r,i){for(var o,a,s,u,l,c,f=t.createDocumentFragment(),p=[],d=0,h=e.length;d<h;d++)if((o=e[d])||0===o)if("object"===w(o))S.merge(p,o.nodeType?[o]:o);else if(me.test(o)){a=a||f.appendChild(t.createElement("div")),s=(de.exec(o)||["",""])[1].toLowerCase(),u=ge[s]||ge._default,a.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],c=u[0];while(c--)a=a.lastChild;S.merge(p,a.childNodes),(a=f.firstChild).textContent=""}else p.push(t.createTextNode(o));f.textContent="",d=0;while(o=p[d++])if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(l=ie(o),a=ve(f.appendChild(o),"script"),l&&ye(a),n){c=0;while(o=a[c++])he.test(o.type||"")&&n.push(o)}return f}var be=/^([^.]*)(?:\.(.+)|)/;function we(){return!0}function Te(){return!1}function Ce(e,t){return e===function(){try{return E.activeElement}catch(e){}}()==("focus"===t)}function Ee(e,t,n,r,i,o){var a,s;if("object"==typeof t){for(s in"string"!=typeof n&&(r=r||n,n=void 0),t)Ee(e,s,n,r,t[s],o);return e}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Te;else if(!i)return e;return 1===o&&(a=i,(i=function(e){return S().off(e),a.apply(this,arguments)}).guid=a.guid||(a.guid=S.guid++)),e.each(function(){S.event.add(this,t,i,r,n)})}function Se(e,i,o){o?(Y.set(e,i,!1),S.event.add(e,i,{namespace:!1,handler:function(e){var t,n,r=Y.get(this,i);if(1&e.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&e.stopPropagation();else if(r=s.call(arguments),Y.set(this,i,r),t=o(this,i),this[i](),r!==(n=Y.get(this,i))||t?Y.set(this,i,!1):n={},r!==n)return e.stopImmediatePropagation(),e.preventDefault(),n&&n.value}else r.length&&(Y.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),e.stopImmediatePropagation())}})):void 0===Y.get(e,i)&&S.event.add(e,i,we)}S.event={global:{},add:function(t,e,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.get(t);if(V(t)){n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(re,i),n.guid||(n.guid=S.guid++),(u=v.events)||(u=v.events=Object.create(null)),(a=v.handle)||(a=v.handle=function(e){return"undefined"!=typeof S&&S.event.triggered!==e.type?S.event.dispatch.apply(t,arguments):void 0}),l=(e=(e||"").match(P)||[""]).length;while(l--)d=g=(s=be.exec(e[l])||[])[1],h=(s[2]||"").split(".").sort(),d&&(f=S.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=S.event.special[d]||{},c=S.extend({type:d,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:h.join(".")},o),(p=u[d])||((p=u[d]=[]).delegateCount=0,f.setup&&!1!==f.setup.call(t,r,h,a)||t.addEventListener&&t.addEventListener(d,a)),f.add&&(f.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),i?p.splice(p.delegateCount++,0,c):p.push(c),S.event.global[d]=!0)}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,f,p,d,h,g,v=Y.hasData(e)&&Y.get(e);if(v&&(u=v.events)){l=(t=(t||"").match(P)||[""]).length;while(l--)if(d=g=(s=be.exec(t[l])||[])[1],h=(s[2]||"").split(".").sort(),d){f=S.event.special[d]||{},p=u[d=(r?f.delegateType:f.bindType)||d]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;while(o--)c=p[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,f.remove&&f.remove.call(e,c));a&&!p.length&&(f.teardown&&!1!==f.teardown.call(e,h,v.handle)||S.removeEvent(e,d,v.handle),delete u[d])}else for(d in u)S.event.remove(e,d+t[l],n,r,!0);S.isEmptyObject(u)&&Y.remove(e,"handle events")}},dispatch:function(e){var t,n,r,i,o,a,s=new Array(arguments.length),u=S.event.fix(e),l=(Y.get(this,"events")||Object.create(null))[u.type]||[],c=S.event.special[u.type]||{};for(s[0]=u,t=1;t<arguments.length;t++)s[t]=arguments[t];if(u.delegateTarget=this,!c.preDispatch||!1!==c.preDispatch.call(this,u)){a=S.event.handlers.call(this,u,l),t=0;while((i=a[t++])&&!u.isPropagationStopped()){u.currentTarget=i.elem,n=0;while((o=i.handlers[n++])&&!u.isImmediatePropagationStopped())u.rnamespace&&!1!==o.namespace&&!u.rnamespace.test(o.namespace)||(u.handleObj=o,u.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(u.result=r)&&(u.preventDefault(),u.stopPropagation()))}return c.postDispatch&&c.postDispatch.call(this,u),u.result}},handlers:function(e,t){var n,r,i,o,a,s=[],u=t.delegateCount,l=e.target;if(u&&l.nodeType&&!("click"===e.type&&1<=e.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==e.type||!0!==l.disabled)){for(o=[],a={},n=0;n<u;n++)void 0===a[i=(r=t[n]).selector+" "]&&(a[i]=r.needsContext?-1<S(i,this).index(l):S.find(i,this,null,[l]).length),a[i]&&o.push(r);o.length&&s.push({elem:l,handlers:o})}return l=this,u<t.length&&s.push({elem:l,handlers:t.slice(u)}),s},addProp:function(t,e){Object.defineProperty(S.Event.prototype,t,{enumerable:!0,configurable:!0,get:m(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(e){return e[S.expando]?e:new S.Event(e)},special:{load:{noBubble:!0},click:{setup:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click",we),!1},trigger:function(e){var t=this||e;return pe.test(t.type)&&t.click&&A(t,"input")&&Se(t,"click"),!0},_default:function(e){var t=e.target;return pe.test(t.type)&&t.click&&A(t,"input")&&Y.get(t,"click")||A(t,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},S.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},S.Event=function(e,t){if(!(this instanceof S.Event))return new S.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?we:Te,this.target=e.target&&3===e.target.nodeType?e.target.parentNode:e.target,this.currentTarget=e.currentTarget,this.relatedTarget=e.relatedTarget):this.type=e,t&&S.extend(this,t),this.timeStamp=e&&e.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Te,isPropagationStopped:Te,isImmediatePropagationStopped:Te,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=we,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=we,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=we,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,"char":!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(e,t){S.event.special[e]={setup:function(){return Se(this,e,Ce),!1},trigger:function(){return Se(this,e),!0},_default:function(){return!0},delegateType:t}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,i){S.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;return n&&(n===this||S.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),S.fn.extend({on:function(e,t,n,r){return Ee(this,e,t,n,r)},one:function(e,t,n,r){return Ee(this,e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,S(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return!1!==t&&"function"!=typeof t||(n=t,t=void 0),!1===n&&(n=Te),this.each(function(){S.event.remove(this,e,n,t)})}});var ke=/<script|<style|<link/i,Ae=/checked\s*(?:[^=]|=\s*.checked.)/i,Ne=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function je(e,t){return A(e,"table")&&A(11!==t.nodeType?t:t.firstChild,"tr")&&S(e).children("tbody")[0]||e}function De(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function qe(e){return"true/"===(e.type||"").slice(0,5)?e.type=e.type.slice(5):e.removeAttribute("type"),e}function Le(e,t){var n,r,i,o,a,s;if(1===t.nodeType){if(Y.hasData(e)&&(s=Y.get(e).events))for(i in Y.remove(t,"handle events"),s)for(n=0,r=s[i].length;n<r;n++)S.event.add(t,i,s[i][n]);Q.hasData(e)&&(o=Q.access(e),a=S.extend({},o),Q.set(t,a))}}function He(n,r,i,o){r=g(r);var e,t,a,s,u,l,c=0,f=n.length,p=f-1,d=r[0],h=m(d);if(h||1<f&&"string"==typeof d&&!y.checkClone&&Ae.test(d))return n.each(function(e){var t=n.eq(e);h&&(r[0]=d.call(this,e,t.html())),He(t,r,i,o)});if(f&&(t=(e=xe(r,n[0].ownerDocument,!1,n,o)).firstChild,1===e.childNodes.length&&(e=t),t||o)){for(s=(a=S.map(ve(e,"script"),De)).length;c<f;c++)u=e,c!==p&&(u=S.clone(u,!0,!0),s&&S.merge(a,ve(u,"script"))),i.call(n[c],u,c);if(s)for(l=a[a.length-1].ownerDocument,S.map(a,qe),c=0;c<s;c++)u=a[c],he.test(u.type||"")&&!Y.access(u,"globalEval")&&S.contains(l,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")},l):b(u.textContent.replace(Ne,""),u,l))}return n}function Oe(e,t,n){for(var r,i=t?S.filter(t,e):e,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(ve(r)),r.parentNode&&(n&&ie(r)&&ye(ve(r,"script")),r.parentNode.removeChild(r));return e}S.extend({htmlPrefilter:function(e){return e},clone:function(e,t,n){var r,i,o,a,s,u,l,c=e.cloneNode(!0),f=ie(e);if(!(y.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||S.isXMLDoc(e)))for(a=ve(c),r=0,i=(o=ve(e)).length;r<i;r++)s=o[r],u=a[r],void 0,"input"===(l=u.nodeName.toLowerCase())&&pe.test(s.type)?u.checked=s.checked:"input"!==l&&"textarea"!==l||(u.defaultValue=s.defaultValue);if(t)if(n)for(o=o||ve(e),a=a||ve(c),r=0,i=o.length;r<i;r++)Le(o[r],a[r]);else Le(e,c);return 0<(a=ve(c,"script")).length&&ye(a,!f&&ve(e,"script")),c},cleanData:function(e){for(var t,n,r,i=S.event.special,o=0;void 0!==(n=e[o]);o++)if(V(n)){if(t=n[Y.expando]){if(t.events)for(r in t.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,t.handle);n[Y.expando]=void 0}n[Q.expando]&&(n[Q.expando]=void 0)}}}),S.fn.extend({detach:function(e){return Oe(this,e,!0)},remove:function(e){return Oe(this,e)},text:function(e){return $(this,function(e){return void 0===e?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return He(this,arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||je(this,e).appendChild(e)})},prepend:function(){return He(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=je(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return He(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(S.cleanData(ve(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return S.clone(this,e,t)})},html:function(e){return $(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!ke.test(e)&&!ge[(de.exec(e)||["",""])[1].toLowerCase()]){e=S.htmlPrefilter(e);try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(S.cleanData(ve(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var n=[];return He(this,arguments,function(e){var t=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(ve(this)),t&&t.replaceChild(e,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,a){S.fn[e]=function(e){for(var t,n=[],r=S(e),i=r.length-1,o=0;o<=i;o++)t=o===i?this:this.clone(!0),S(r[o])[a](t),u.apply(n,t.get());return this.pushStack(n)}});var Pe=new RegExp("^("+ee+")(?!px)[a-z%]+$","i"),Re=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=C),t.getComputedStyle(e)},Me=function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r},Ie=new RegExp(ne.join("|"),"i");function We(e,t,n){var r,i,o,a,s=e.style;return(n=n||Re(e))&&(""!==(a=n.getPropertyValue(t)||n[t])||ie(e)||(a=S.style(e,t)),!y.pixelBoxStyles()&&Pe.test(a)&&Ie.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function Fe(e,t){return{get:function(){if(!e())return(this.get=t).apply(this,arguments);delete this.get}}}!function(){function e(){if(l){u.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",l.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",re.appendChild(u).appendChild(l);var e=C.getComputedStyle(l);n="1%"!==e.top,s=12===t(e.marginLeft),l.style.right="60%",o=36===t(e.right),r=36===t(e.width),l.style.position="absolute",i=12===t(l.offsetWidth/3),re.removeChild(u),l=null}}function t(e){return Math.round(parseFloat(e))}var n,r,i,o,a,s,u=E.createElement("div"),l=E.createElement("div");l.style&&(l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",y.clearCloneStyle="content-box"===l.style.backgroundClip,S.extend(y,{boxSizingReliable:function(){return e(),r},pixelBoxStyles:function(){return e(),o},pixelPosition:function(){return e(),n},reliableMarginLeft:function(){return e(),s},scrollboxSize:function(){return e(),i},reliableTrDimensions:function(){var e,t,n,r;return null==a&&(e=E.createElement("table"),t=E.createElement("tr"),n=E.createElement("div"),e.style.cssText="position:absolute;left:-11111px;border-collapse:separate",t.style.cssText="border:1px solid",t.style.height="1px",n.style.height="9px",n.style.display="block",re.appendChild(e).appendChild(t).appendChild(n),r=C.getComputedStyle(t),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===t.offsetHeight,re.removeChild(e)),a}}))}();var Be=["Webkit","Moz","ms"],$e=E.createElement("div").style,_e={};function ze(e){var t=S.cssProps[e]||_e[e];return t||(e in $e?e:_e[e]=function(e){var t=e[0].toUpperCase()+e.slice(1),n=Be.length;while(n--)if((e=Be[n]+t)in $e)return e}(e)||e)}var Ue=/^(none|table(?!-c[ea]).+)/,Xe=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"};function Ye(e,t,n){var r=te.exec(t);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):t}function Qe(e,t,n,r,i,o){var a="width"===t?1:0,s=0,u=0;if(n===(r?"border":"content"))return 0;for(;a<4;a+=2)"margin"===n&&(u+=S.css(e,n+ne[a],!0,i)),r?("content"===n&&(u-=S.css(e,"padding"+ne[a],!0,i)),"margin"!==n&&(u-=S.css(e,"border"+ne[a]+"Width",!0,i))):(u+=S.css(e,"padding"+ne[a],!0,i),"padding"!==n?u+=S.css(e,"border"+ne[a]+"Width",!0,i):s+=S.css(e,"border"+ne[a]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(e["offset"+t[0].toUpperCase()+t.slice(1)]-o-u-s-.5))||0),u}function Je(e,t,n){var r=Re(e),i=(!y.boxSizingReliable()||n)&&"border-box"===S.css(e,"boxSizing",!1,r),o=i,a=We(e,t,r),s="offset"+t[0].toUpperCase()+t.slice(1);if(Pe.test(a)){if(!n)return a;a="auto"}return(!y.boxSizingReliable()&&i||!y.reliableTrDimensions()&&A(e,"tr")||"auto"===a||!parseFloat(a)&&"inline"===S.css(e,"display",!1,r))&&e.getClientRects().length&&(i="border-box"===S.css(e,"boxSizing",!1,r),(o=s in e)&&(a=e[s])),(a=parseFloat(a)||0)+Qe(e,t,n||(i?"border":"content"),o,r,a)+"px"}function Ke(e,t,n,r,i){return new Ke.prototype.init(e,t,n,r,i)}S.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=We(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=X(t),u=Xe.test(t),l=e.style;if(u||(t=ze(s)),a=S.cssHooks[t]||S.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];"string"===(o=typeof n)&&(i=te.exec(n))&&i[1]&&(n=se(e,t,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[s]?"":"px")),y.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(u?l.setProperty(t,n):l[t]=n))}},css:function(e,t,n,r){var i,o,a,s=X(t);return Xe.test(t)||(t=ze(s)),(a=S.cssHooks[t]||S.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=We(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(e,u){S.cssHooks[u]={get:function(e,t,n){if(t)return!Ue.test(S.css(e,"display"))||e.getClientRects().length&&e.getBoundingClientRect().width?Je(e,u,n):Me(e,Ve,function(){return Je(e,u,n)})},set:function(e,t,n){var r,i=Re(e),o=!y.scrollboxSize()&&"absolute"===i.position,a=(o||n)&&"border-box"===S.css(e,"boxSizing",!1,i),s=n?Qe(e,u,n,a,i):0;return a&&o&&(s-=Math.ceil(e["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-Qe(e,u,"border",!1,i)-.5)),s&&(r=te.exec(t))&&"px"!==(r[3]||"px")&&(e.style[u]=t,t=S.css(e,u)),Ye(0,t,s)}}}),S.cssHooks.marginLeft=Fe(y.reliableMarginLeft,function(e,t){if(t)return(parseFloat(We(e,"marginLeft"))||e.getBoundingClientRect().left-Me(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(e){for(var t=0,n={},r="string"==typeof e?e.split(" "):[e];t<4;t++)n[i+ne[t]+o]=r[t]||r[t-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=Ye)}),S.fn.extend({css:function(e,t){return $(this,function(e,t,n){var r,i,o={},a=0;if(Array.isArray(t)){for(r=Re(e),i=t.length;a<i;a++)o[t[a]]=S.css(e,t[a],!1,r);return o}return void 0!==n?S.style(e,t,n):S.css(e,t)},e,t,1<arguments.length)}}),((S.Tween=Ke).prototype={constructor:Ke,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||S.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var e=Ke.propHooks[this.prop];return e&&e.get?e.get(this):Ke.propHooks._default.get(this)},run:function(e){var t,n=Ke.propHooks[this.prop];return this.options.duration?this.pos=t=S.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Ke.propHooks._default.set(this),this}}).init.prototype=Ke.prototype,(Ke.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=S.css(e.elem,e.prop,""))&&"auto"!==t?t:0},set:function(e){S.fx.step[e.prop]?S.fx.step[e.prop](e):1!==e.elem.nodeType||!S.cssHooks[e.prop]&&null==e.elem.style[ze(e.prop)]?e.elem[e.prop]=e.now:S.style(e.elem,e.prop,e.now+e.unit)}}}).scrollTop=Ke.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},S.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},S.fx=Ke.prototype.init,S.fx.step={};var Ze,et,tt,nt,rt=/^(?:toggle|show|hide)$/,it=/queueHooks$/;function ot(){et&&(!1===E.hidden&&C.requestAnimationFrame?C.requestAnimationFrame(ot):C.setTimeout(ot,S.fx.interval),S.fx.tick())}function at(){return C.setTimeout(function(){Ze=void 0}),Ze=Date.now()}function st(e,t){var n,r=0,i={height:e};for(t=t?1:0;r<4;r+=2-t)i["margin"+(n=ne[r])]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function ut(e,t,n){for(var r,i=(lt.tweeners[t]||[]).concat(lt.tweeners["*"]),o=0,a=i.length;o<a;o++)if(r=i[o].call(n,t,e))return r}function lt(o,e,t){var n,a,r=0,i=lt.prefilters.length,s=S.Deferred().always(function(){delete u.elem}),u=function(){if(a)return!1;for(var e=Ze||at(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),r=0,i=l.tweens.length;r<i;r++)l.tweens[r].run(n);return s.notifyWith(o,[l,n,t]),n<1&&i?t:(i||s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l]),!1)},l=s.promise({elem:o,props:S.extend({},e),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},t),originalProperties:e,originalOptions:t,startTime:Ze||at(),duration:t.duration,tweens:[],createTween:function(e,t){var n=S.Tween(o,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,n=e?l.tweens.length:0;if(a)return this;for(a=!0;t<n;t++)l.tweens[t].run(1);return e?(s.notifyWith(o,[l,1,0]),s.resolveWith(o,[l,e])):s.rejectWith(o,[l,e]),this}}),c=l.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(i=t[r=X(n)],o=e[n],Array.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=S.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(c,l.opts.specialEasing);r<i;r++)if(n=lt.prefilters[r].call(l,o,c,l.opts))return m(n.stop)&&(S._queueHooks(l.elem,l.opts.queue).stop=n.stop.bind(n)),n;return S.map(c,ut,l),m(l.opts.start)&&l.opts.start.call(o,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:l,queue:l.opts.queue})),l}S.Animation=S.extend(lt,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return se(n.elem,e,te.exec(t),n),n}]},tweener:function(e,t){m(e)?(t=e,e=["*"]):e=e.match(P);for(var n,r=0,i=e.length;r<i;r++)n=e[r],lt.tweeners[n]=lt.tweeners[n]||[],lt.tweeners[n].unshift(t)},prefilters:[function(e,t,n){var r,i,o,a,s,u,l,c,f="width"in t||"height"in t,p=this,d={},h=e.style,g=e.nodeType&&ae(e),v=Y.get(e,"fxshow");for(r in n.queue||(null==(a=S._queueHooks(e,"fx")).unqueued&&(a.unqueued=0,s=a.empty.fire,a.empty.fire=function(){a.unqueued||s()}),a.unqueued++,p.always(function(){p.always(function(){a.unqueued--,S.queue(e,"fx").length||a.empty.fire()})})),t)if(i=t[r],rt.test(i)){if(delete t[r],o=o||"toggle"===i,i===(g?"hide":"show")){if("show"!==i||!v||void 0===v[r])continue;g=!0}d[r]=v&&v[r]||S.style(e,r)}if((u=!S.isEmptyObject(t))||!S.isEmptyObject(d))for(r in f&&1===e.nodeType&&(n.overflow=[h.overflow,h.overflowX,h.overflowY],null==(l=v&&v.display)&&(l=Y.get(e,"display")),"none"===(c=S.css(e,"display"))&&(l?c=l:(le([e],!0),l=e.style.display||l,c=S.css(e,"display"),le([e]))),("inline"===c||"inline-block"===c&&null!=l)&&"none"===S.css(e,"float")&&(u||(p.done(function(){h.display=l}),null==l&&(c=h.display,l="none"===c?"":c)),h.display="inline-block")),n.overflow&&(h.overflow="hidden",p.always(function(){h.overflow=n.overflow[0],h.overflowX=n.overflow[1],h.overflowY=n.overflow[2]})),u=!1,d)u||(v?"hidden"in v&&(g=v.hidden):v=Y.access(e,"fxshow",{display:l}),o&&(v.hidden=!g),g&&le([e],!0),p.done(function(){for(r in g||le([e]),Y.remove(e,"fxshow"),d)S.style(e,r,d[r])})),u=ut(g?v[r]:0,r,p),r in v||(v[r]=u.start,g&&(u.end=u.start,u.start=0))}],prefilter:function(e,t){t?lt.prefilters.unshift(e):lt.prefilters.push(e)}}),S.speed=function(e,t,n){var r=e&&"object"==typeof e?S.extend({},e):{complete:n||!n&&t||m(e)&&e,duration:e,easing:n&&t||t&&!m(t)&&t};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){m(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(e,t,n,r){return this.filter(ae).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=S.isEmptyObject(t),o=S.speed(e,n,r),a=function(){var e=lt(this,S.extend({},t),o);(i||Y.get(this,"finish"))&&e.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=void 0),e&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=S.timers,r=Y.get(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&it.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem!==this||null!=i&&n[t].queue!==i||(n[t].anim.stop(o),e=!1,n.splice(t,1));!e&&o||S.dequeue(this,i)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e,t=Y.get(this),n=t[a+"queue"],r=t[a+"queueHooks"],i=S.timers,o=n?n.length:0;for(t.finish=!0,S.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),e=i.length;e--;)i[e].elem===this&&i[e].queue===a&&(i[e].anim.stop(!0),i.splice(e,1));for(e=0;e<o;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete t.finish})}}),S.each(["toggle","show","hide"],function(e,r){var i=S.fn[r];S.fn[r]=function(e,t,n){return null==e||"boolean"==typeof e?i.apply(this,arguments):this.animate(st(r,!0),e,t,n)}}),S.each({slideDown:st("show"),slideUp:st("hide"),slideToggle:st("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){S.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),S.timers=[],S.fx.tick=function(){var e,t=0,n=S.timers;for(Ze=Date.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||S.fx.stop(),Ze=void 0},S.fx.timer=function(e){S.timers.push(e),S.fx.start()},S.fx.interval=13,S.fx.start=function(){et||(et=!0,ot())},S.fx.stop=function(){et=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,e){return r=S.fx&&S.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=C.setTimeout(e,r);t.stop=function(){C.clearTimeout(n)}})},tt=E.createElement("input"),nt=E.createElement("select").appendChild(E.createElement("option")),tt.type="checkbox",y.checkOn=""!==tt.value,y.optSelected=nt.selected,(tt=E.createElement("input")).value="t",tt.type="radio",y.radioValue="t"===tt.value;var ct,ft=S.expr.attrHandle;S.fn.extend({attr:function(e,t){return $(this,S.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){S.removeAttr(this,e)})}}),S.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?S.prop(e,t,n):(1===o&&S.isXMLDoc(e)||(i=S.attrHooks[t.toLowerCase()]||(S.expr.match.bool.test(t)?ct:void 0)),void 0!==n?null===n?void S.removeAttr(e,t):i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:(e.setAttribute(t,n+""),n):i&&"get"in i&&null!==(r=i.get(e,t))?r:null==(r=S.find.attr(e,t))?void 0:r)},attrHooks:{type:{set:function(e,t){if(!y.radioValue&&"radio"===t&&A(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,r=0,i=t&&t.match(P);if(i&&1===e.nodeType)while(n=i[r++])e.removeAttribute(n)}}),ct={set:function(e,t,n){return!1===t?S.removeAttr(e,n):e.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(e,t){var a=ft[t]||S.find.attr;ft[t]=function(e,t,n){var r,i,o=t.toLowerCase();return n||(i=ft[o],ft[o]=r,r=null!=a(e,t,n)?o:null,ft[o]=i),r}});var pt=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;function ht(e){return(e.match(P)||[]).join(" ")}function gt(e){return e.getAttribute&&e.getAttribute("class")||""}function vt(e){return Array.isArray(e)?e:"string"==typeof e&&e.match(P)||[]}S.fn.extend({prop:function(e,t){return $(this,S.prop,e,t,1<arguments.length)},removeProp:function(e){return this.each(function(){delete this[S.propFix[e]||e]})}}),S.extend({prop:function(e,t,n){var r,i,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(e)||(t=S.propFix[t]||t,i=S.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=S.find.attr(e,"tabindex");return t?parseInt(t,10):pt.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{"for":"htmlFor","class":"className"}}),y.optSelected||(S.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).addClass(t.call(this,e,gt(this)))});if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},removeClass:function(t){var e,n,r,i,o,a,s,u=0;if(m(t))return this.each(function(e){S(this).removeClass(t.call(this,e,gt(this)))});if(!arguments.length)return this.attr("class","");if((e=vt(t)).length)while(n=this[u++])if(i=gt(n),r=1===n.nodeType&&" "+ht(i)+" "){a=0;while(o=e[a++])while(-1<r.indexOf(" "+o+" "))r=r.replace(" "+o+" "," ");i!==(s=ht(r))&&n.setAttribute("class",s)}return this},toggleClass:function(i,t){var o=typeof i,a="string"===o||Array.isArray(i);return"boolean"==typeof t&&a?t?this.addClass(i):this.removeClass(i):m(i)?this.each(function(e){S(this).toggleClass(i.call(this,e,gt(this),t),t)}):this.each(function(){var e,t,n,r;if(a){t=0,n=S(this),r=vt(i);while(e=r[t++])n.hasClass(e)?n.removeClass(e):n.addClass(e)}else void 0!==i&&"boolean"!==o||((e=gt(this))&&Y.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===i?"":Y.get(this,"__className__")||""))})},hasClass:function(e){var t,n,r=0;t=" "+e+" ";while(n=this[r++])if(1===n.nodeType&&-1<(" "+ht(gt(n))+" ").indexOf(t))return!0;return!1}});var yt=/\r/g;S.fn.extend({val:function(n){var r,e,i,t=this[0];return arguments.length?(i=m(n),this.each(function(e){var t;1===this.nodeType&&(null==(t=i?n.call(this,e,S(this).val()):n)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=S.map(t,function(e){return null==e?"":e+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,t,"value")||(this.value=t))})):t?(r=S.valHooks[t.type]||S.valHooks[t.nodeName.toLowerCase()])&&"get"in r&&void 0!==(e=r.get(t,"value"))?e:"string"==typeof(e=t.value)?e.replace(yt,""):null==e?"":e:void 0}}),S.extend({valHooks:{option:{get:function(e){var t=S.find.attr(e,"value");return null!=t?t:ht(S.text(e))}},select:{get:function(e){var t,n,r,i=e.options,o=e.selectedIndex,a="select-one"===e.type,s=a?null:[],u=a?o+1:i.length;for(r=o<0?u:a?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!A(n.parentNode,"optgroup"))){if(t=S(n).val(),a)return t;s.push(t)}return s},set:function(e,t){var n,r,i=e.options,o=S.makeArray(t),a=i.length;while(a--)((r=i[a]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(e,t){if(Array.isArray(t))return e.checked=-1<S.inArray(S(e).val(),t)}},y.checkOn||(S.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),y.focusin="onfocusin"in C;var mt=/^(?:focusinfocus|focusoutblur)$/,xt=function(e){e.stopPropagation()};S.extend(S.event,{trigger:function(e,t,n,r){var i,o,a,s,u,l,c,f,p=[n||E],d=v.call(e,"type")?e.type:e,h=v.call(e,"namespace")?e.namespace.split("."):[];if(o=f=a=n=n||E,3!==n.nodeType&&8!==n.nodeType&&!mt.test(d+S.event.triggered)&&(-1<d.indexOf(".")&&(d=(h=d.split(".")).shift(),h.sort()),u=d.indexOf(":")<0&&"on"+d,(e=e[S.expando]?e:new S.Event(d,"object"==typeof e&&e)).isTrigger=r?2:3,e.namespace=h.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),t=null==t?[e]:S.makeArray(t,[e]),c=S.event.special[d]||{},r||!c.trigger||!1!==c.trigger.apply(n,t))){if(!r&&!c.noBubble&&!x(n)){for(s=c.delegateType||d,mt.test(s+d)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||E)&&p.push(a.defaultView||a.parentWindow||C)}i=0;while((o=p[i++])&&!e.isPropagationStopped())f=o,e.type=1<i?s:c.bindType||d,(l=(Y.get(o,"events")||Object.create(null))[e.type]&&Y.get(o,"handle"))&&l.apply(o,t),(l=u&&o[u])&&l.apply&&V(o)&&(e.result=l.apply(o,t),!1===e.result&&e.preventDefault());return e.type=d,r||e.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),t)||!V(n)||u&&m(n[d])&&!x(n)&&((a=n[u])&&(n[u]=null),S.event.triggered=d,e.isPropagationStopped()&&f.addEventListener(d,xt),n[d](),e.isPropagationStopped()&&f.removeEventListener(d,xt),S.event.triggered=void 0,a&&(n[u]=a)),e.result}},simulate:function(e,t,n){var r=S.extend(new S.Event,n,{type:e,isSimulated:!0});S.event.trigger(r,null,t)}}),S.fn.extend({trigger:function(e,t){return this.each(function(){S.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return S.event.trigger(e,t,n,!0)}}),y.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){var i=function(e){S.event.simulate(r,e.target,S.event.fix(e))};S.event.special[r]={setup:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r);t||e.addEventListener(n,i,!0),Y.access(e,r,(t||0)+1)},teardown:function(){var e=this.ownerDocument||this.document||this,t=Y.access(e,r)-1;t?Y.access(e,r,t):(e.removeEventListener(n,i,!0),Y.remove(e,r))}}});var bt=C.location,wt={guid:Date.now()},Tt=/\?/;S.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{t=(new C.DOMParser).parseFromString(e,"text/xml")}catch(e){}return n=t&&t.getElementsByTagName("parsererror")[0],t&&!n||S.error("Invalid XML: "+(n?S.map(n.childNodes,function(e){return e.textContent}).join("\n"):e)),t};var Ct=/\[\]$/,Et=/\r?\n/g,St=/^(?:submit|button|image|reset|file)$/i,kt=/^(?:input|select|textarea|keygen)/i;function At(n,e,r,i){var t;if(Array.isArray(e))S.each(e,function(e,t){r||Ct.test(n)?i(n,t):At(n+"["+("object"==typeof t&&null!=t?e:"")+"]",t,r,i)});else if(r||"object"!==w(e))i(n,e);else for(t in e)At(n+"["+t+"]",e[t],r,i)}S.param=function(e,t){var n,r=[],i=function(e,t){var n=m(t)?t():t;r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(null==n?"":n)};if(null==e)return"";if(Array.isArray(e)||e.jquery&&!S.isPlainObject(e))S.each(e,function(){i(this.name,this.value)});else for(n in e)At(n,e[n],t,i);return r.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=S.prop(this,"elements");return e?S.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!S(this).is(":disabled")&&kt.test(this.nodeName)&&!St.test(e)&&(this.checked||!pe.test(e))}).map(function(e,t){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(e){return{name:t.name,value:e.replace(Et,"\r\n")}}):{name:t.name,value:n.replace(Et,"\r\n")}}).get()}});var Nt=/%20/g,jt=/#.*$/,Dt=/([?&])_=[^&]*/,qt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Lt=/^(?:GET|HEAD)$/,Ht=/^\/\//,Ot={},Pt={},Rt="*/".concat("*"),Mt=E.createElement("a");function It(o){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r=0,i=e.toLowerCase().match(P)||[];if(m(t))while(n=i[r++])"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(t)):(o[n]=o[n]||[]).push(t)}}function Wt(t,i,o,a){var s={},u=t===Pt;function l(e){var r;return s[e]=!0,S.each(t[e]||[],function(e,t){var n=t(i,o,a);return"string"!=typeof n||u||s[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),l(n),!1)}),r}return l(i.dataTypes[0])||!s["*"]&&l("*")}function Ft(e,t){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&S.extend(!0,e,r),e}Mt.href=bt.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:bt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(bt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Rt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Ft(Ft(e,S.ajaxSettings),t):Ft(S.ajaxSettings,e)},ajaxPrefilter:It(Ot),ajaxTransport:It(Pt),ajax:function(e,t){"object"==typeof e&&(t=e,e=void 0),t=t||{};var c,f,p,n,d,r,h,g,i,o,v=S.ajaxSetup({},t),y=v.context||v,m=v.context&&(y.nodeType||y.jquery)?S(y):S.event,x=S.Deferred(),b=S.Callbacks("once memory"),w=v.statusCode||{},a={},s={},u="canceled",T={readyState:0,getResponseHeader:function(e){var t;if(h){if(!n){n={};while(t=qt.exec(p))n[t[1].toLowerCase()+" "]=(n[t[1].toLowerCase()+" "]||[]).concat(t[2])}t=n[e.toLowerCase()+" "]}return null==t?null:t.join(", ")},getAllResponseHeaders:function(){return h?p:null},setRequestHeader:function(e,t){return null==h&&(e=s[e.toLowerCase()]=s[e.toLowerCase()]||e,a[e]=t),this},overrideMimeType:function(e){return null==h&&(v.mimeType=e),this},statusCode:function(e){var t;if(e)if(h)T.always(e[T.status]);else for(t in e)w[t]=[w[t],e[t]];return this},abort:function(e){var t=e||u;return c&&c.abort(t),l(0,t),this}};if(x.promise(T),v.url=((e||v.url||bt.href)+"").replace(Ht,bt.protocol+"//"),v.type=t.method||t.type||v.method||v.type,v.dataTypes=(v.dataType||"*").toLowerCase().match(P)||[""],null==v.crossDomain){r=E.createElement("a");try{r.href=v.url,r.href=r.href,v.crossDomain=Mt.protocol+"//"+Mt.host!=r.protocol+"//"+r.host}catch(e){v.crossDomain=!0}}if(v.data&&v.processData&&"string"!=typeof v.data&&(v.data=S.param(v.data,v.traditional)),Wt(Ot,v,t,T),h)return T;for(i in(g=S.event&&v.global)&&0==S.active++&&S.event.trigger("ajaxStart"),v.type=v.type.toUpperCase(),v.hasContent=!Lt.test(v.type),f=v.url.replace(jt,""),v.hasContent?v.data&&v.processData&&0===(v.contentType||"").indexOf("application/x-www-form-urlencoded")&&(v.data=v.data.replace(Nt,"+")):(o=v.url.slice(f.length),v.data&&(v.processData||"string"==typeof v.data)&&(f+=(Tt.test(f)?"&":"?")+v.data,delete v.data),!1===v.cache&&(f=f.replace(Dt,"$1"),o=(Tt.test(f)?"&":"?")+"_="+wt.guid+++o),v.url=f+o),v.ifModified&&(S.lastModified[f]&&T.setRequestHeader("If-Modified-Since",S.lastModified[f]),S.etag[f]&&T.setRequestHeader("If-None-Match",S.etag[f])),(v.data&&v.hasContent&&!1!==v.contentType||t.contentType)&&T.setRequestHeader("Content-Type",v.contentType),T.setRequestHeader("Accept",v.dataTypes[0]&&v.accepts[v.dataTypes[0]]?v.accepts[v.dataTypes[0]]+("*"!==v.dataTypes[0]?", "+Rt+"; q=0.01":""):v.accepts["*"]),v.headers)T.setRequestHeader(i,v.headers[i]);if(v.beforeSend&&(!1===v.beforeSend.call(y,T,v)||h))return T.abort();if(u="abort",b.add(v.complete),T.done(v.success),T.fail(v.error),c=Wt(Pt,v,t,T)){if(T.readyState=1,g&&m.trigger("ajaxSend",[T,v]),h)return T;v.async&&0<v.timeout&&(d=C.setTimeout(function(){T.abort("timeout")},v.timeout));try{h=!1,c.send(a,l)}catch(e){if(h)throw e;l(-1,e)}}else l(-1,"No Transport");function l(e,t,n,r){var i,o,a,s,u,l=t;h||(h=!0,d&&C.clearTimeout(d),c=void 0,p=r||"",T.readyState=0<e?4:0,i=200<=e&&e<300||304===e,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,u=e.dataTypes;while("*"===u[0])u.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||e.converters[i+" "+u[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==u[0]&&u.unshift(o),n[o]}(v,T,n)),!i&&-1<S.inArray("script",v.dataTypes)&&S.inArray("json",v.dataTypes)<0&&(v.converters["text script"]=function(){}),s=function(e,t,n,r){var i,o,a,s,u,l={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)l[a.toLowerCase()]=e.converters[a];o=c.shift();while(o)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!u&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u=o,o=c.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(a=l[u+" "+o]||l["* "+o]))for(i in l)if((s=i.split(" "))[1]===o&&(a=l[u+" "+s[0]]||l["* "+s[0]])){!0===a?a=l[i]:!0!==l[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+u+" to "+o}}}return{state:"success",data:t}}(v,s,T,i),i?(v.ifModified&&((u=T.getResponseHeader("Last-Modified"))&&(S.lastModified[f]=u),(u=T.getResponseHeader("etag"))&&(S.etag[f]=u)),204===e||"HEAD"===v.type?l="nocontent":304===e?l="notmodified":(l=s.state,o=s.data,i=!(a=s.error))):(a=l,!e&&l||(l="error",e<0&&(e=0))),T.status=e,T.statusText=(t||l)+"",i?x.resolveWith(y,[o,l,T]):x.rejectWith(y,[T,l,a]),T.statusCode(w),w=void 0,g&&m.trigger(i?"ajaxSuccess":"ajaxError",[T,v,i?o:a]),b.fireWith(y,[T,l]),g&&(m.trigger("ajaxComplete",[T,v]),--S.active||S.event.trigger("ajaxStop")))}return T},getJSON:function(e,t,n){return S.get(e,t,n,"json")},getScript:function(e,t){return S.get(e,void 0,t,"script")}}),S.each(["get","post"],function(e,i){S[i]=function(e,t,n,r){return m(t)&&(r=r||n,n=t,t=void 0),S.ajax(S.extend({url:e,type:i,dataType:r,data:t,success:n},S.isPlainObject(e)&&e))}}),S.ajaxPrefilter(function(e){var t;for(t in e.headers)"content-type"===t.toLowerCase()&&(e.contentType=e.headers[t]||"")}),S._evalUrl=function(e,t,n){return S.ajax({url:e,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(e){S.globalEval(e,t,n)}})},S.fn.extend({wrapAll:function(e){var t;return this[0]&&(m(e)&&(e=e.call(this[0])),t=S(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstElementChild)e=e.firstElementChild;return e}).append(this)),this},wrapInner:function(n){return m(n)?this.each(function(e){S(this).wrapInner(n.call(this,e))}):this.each(function(){var e=S(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=m(t);return this.each(function(e){S(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(e){return this.parent(e).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(e){return!S.expr.pseudos.visible(e)},S.expr.pseudos.visible=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new C.XMLHttpRequest}catch(e){}};var Bt={0:200,1223:204},$t=S.ajaxSettings.xhr();y.cors=!!$t&&"withCredentials"in $t,y.ajax=$t=!!$t,S.ajaxTransport(function(i){var o,a;if(y.cors||$t&&!i.crossDomain)return{send:function(e,t){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||e["X-Requested-With"]||(e["X-Requested-With"]="XMLHttpRequest"),e)r.setRequestHeader(n,e[n]);o=function(e){return function(){o&&(o=a=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===e?r.abort():"error"===e?"number"!=typeof r.status?t(0,"error"):t(r.status,r.statusText):t(Bt[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),a=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=a:r.onreadystatechange=function(){4===r.readyState&&C.setTimeout(function(){o&&a()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(e){if(o)throw e}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(e){e.crossDomain&&(e.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return S.globalEval(e),e}}}),S.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(e,t){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(e){r.remove(),i=null,e&&t("error"===e.type?404:200,e.type)}),E.head.appendChild(r[0])},abort:function(){i&&i()}}});var _t,zt=[],Ut=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=zt.pop()||S.expando+"_"+wt.guid++;return this[e]=!0,e}}),S.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=!1!==e.jsonp&&(Ut.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(e.data)&&"data");if(a||"jsonp"===e.dataTypes[0])return r=e.jsonpCallback=m(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Ut,"$1"+r):!1!==e.jsonp&&(e.url+=(Tt.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},e.dataTypes[0]="json",i=C[r],C[r]=function(){o=arguments},n.always(function(){void 0===i?S(C).removeProp(r):C[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,zt.push(r)),o&&m(i)&&i(o[0]),o=i=void 0}),"script"}),y.createHTMLDocument=((_t=E.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===_t.childNodes.length),S.parseHTML=function(e,t,n){return"string"!=typeof e?[]:("boolean"==typeof t&&(n=t,t=!1),t||(y.createHTMLDocument?((r=(t=E.implementation.createHTMLDocument("")).createElement("base")).href=E.location.href,t.head.appendChild(r)):t=E),o=!n&&[],(i=N.exec(e))?[t.createElement(i[1])]:(i=xe([e],t,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(e,t,n){var r,i,o,a=this,s=e.indexOf(" ");return-1<s&&(r=ht(e.slice(s)),e=e.slice(0,s)),m(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),0<a.length&&S.ajax({url:e,type:i||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?S("<div>").append(S.parseHTML(e)).find(r):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},S.expr.pseudos.animated=function(t){return S.grep(S.timers,function(e){return t===e.elem}).length},S.offset={setOffset:function(e,t,n){var r,i,o,a,s,u,l=S.css(e,"position"),c=S(e),f={};"static"===l&&(e.style.position="relative"),s=c.offset(),o=S.css(e,"top"),u=S.css(e,"left"),("absolute"===l||"fixed"===l)&&-1<(o+u).indexOf("auto")?(a=(r=c.position()).top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(u)||0),m(t)&&(t=t.call(e,n,S.extend({},s))),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):c.css(f)}},S.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){S.offset.setOffset(this,t,e)});var e,n,r=this[0];return r?r.getClientRects().length?(e=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var e,t,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))t=r.getBoundingClientRect();else{t=this.offset(),n=r.ownerDocument,e=r.offsetParent||n.documentElement;while(e&&(e===n.body||e===n.documentElement)&&"static"===S.css(e,"position"))e=e.parentNode;e&&e!==r&&1===e.nodeType&&((i=S(e).offset()).top+=S.css(e,"borderTopWidth",!0),i.left+=S.css(e,"borderLeftWidth",!0))}return{top:t.top-i.top-S.css(r,"marginTop",!0),left:t.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var e=this.offsetParent;while(e&&"static"===S.css(e,"position"))e=e.offsetParent;return e||re})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o="pageYOffset"===i;S.fn[t]=function(e){return $(this,function(e,t,n){var r;if(x(e)?r=e:9===e.nodeType&&(r=e.defaultView),void 0===n)return r?r[i]:e[t];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):e[t]=n},t,e,arguments.length)}}),S.each(["top","left"],function(e,n){S.cssHooks[n]=Fe(y.pixelPosition,function(e,t){if(t)return t=We(e,n),Pe.test(t)?S(e).position()[n]+"px":t})}),S.each({Height:"height",Width:"width"},function(a,s){S.each({padding:"inner"+a,content:s,"":"outer"+a},function(r,o){S.fn[o]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return $(this,function(e,t,n){var r;return x(e)?0===o.indexOf("outer")?e["inner"+a]:e.document.documentElement["client"+a]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+a],r["scroll"+a],e.body["offset"+a],r["offset"+a],r["client"+a])):void 0===n?S.css(e,t,i):S.style(e,t,n,i)},s,n?e:void 0,n)}})}),S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){S.fn[t]=function(e){return this.on(t,e)}}),S.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,n){S.fn[n]=function(e,t){return 0<arguments.length?this.on(n,null,e,t):this.trigger(n)}});var Xt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;S.proxy=function(e,t){var n,r,i;if("string"==typeof t&&(n=e[t],t=e,e=n),m(e))return r=s.call(arguments,2),(i=function(){return e.apply(t||this,r.concat(s.call(arguments)))}).guid=e.guid=e.guid||S.guid++,i},S.holdReady=function(e){e?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=A,S.isFunction=m,S.isWindow=x,S.camelCase=X,S.type=w,S.now=Date.now,S.isNumeric=function(e){var t=S.type(e);return("number"===t||"string"===t)&&!isNaN(e-parseFloat(e))},S.trim=function(e){return null==e?"":(e+"").replace(Xt,"")},"function"==typeof define&&define.amd&&define("jquery",[],function(){return S});var Vt=C.jQuery,Gt=C.$;return S.noConflict=function(e){return C.$===S&&(C.$=Gt),e&&C.jQuery===S&&(C.jQuery=Vt),S},"undefined"==typeof e&&(C.jQuery=C.$=S),S});
/*
 * jQuery throttle / debounce - v1.1 - 3/7/2010
 * http://benalman.com/projects/jquery-throttle-debounce-plugin/
 * 
 * Copyright (c) 2010 "Cowboy" Ben Alman
 * Dual licensed under the MIT and GPL licenses.
 * http://benalman.com/about/license/
 */
(function(b,c){var $=b.jQuery||b.Cowboy||(b.Cowboy={}),a;$.throttle=a=function(e,f,j,i){var h,d=0;if(typeof f!=="boolean"){i=j;j=f;f=c}function g(){var o=this,m=+new Date()-d,n=arguments;function l(){d=+new Date();j.apply(o,n)}function k(){h=c}if(i&&!h){l()}h&&clearTimeout(h);if(i===c&&m>e){l()}else{if(f!==true){h=setTimeout(i?k:l,i===c?e-m:e)}}}if($.guid){g.guid=j.guid=j.guid||$.guid++}return g};$.debounce=function(d,e,f){return f===c?a(d,e,false):a(d,f,e!==false)}})(this);
/*!
 * imagesLoaded PACKAGED v4.1.4
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
!function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){if(e&&t){var i=this._events=this._events||{},n=i[e]=i[e]||[];return n.indexOf(t)==-1&&n.push(t),this}},t.once=function(e,t){if(e&&t){this.on(e,t);var i=this._onceEvents=this._onceEvents||{},n=i[e]=i[e]||{};return n[t]=!0,this}},t.off=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){var n=i.indexOf(t);return n!=-1&&i.splice(n,1),this}},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var r=i[o],s=n&&n[r];s&&(this.off(e,r),delete n[r]),r.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(i){return t(e,i)}):"object"==typeof module&&module.exports?module.exports=t(e,require("ev-emitter")):e.imagesLoaded=t(e,e.EvEmitter)}("undefined"!=typeof window?window:this,function(e,t){function i(e,t){for(var i in t)e[i]=t[i];return e}function n(e){if(Array.isArray(e))return e;var t="object"==typeof e&&"number"==typeof e.length;return t?d.call(e):[e]}function o(e,t,r){if(!(this instanceof o))return new o(e,t,r);var s=e;return"string"==typeof e&&(s=document.querySelectorAll(e)),s?(this.elements=n(s),this.options=i({},this.options),"function"==typeof t?r=t:i(this.options,t),r&&this.on("always",r),this.getImages(),h&&(this.jqDeferred=new h.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(s||e))}function r(e){this.img=e}function s(e,t){this.url=e,this.element=t,this.img=new Image}var h=e.jQuery,a=e.console,d=Array.prototype.slice;o.prototype=Object.create(t.prototype),o.prototype.options={},o.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},o.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),this.options.background===!0&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&u[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background){var r=e.querySelectorAll(this.options.background);for(n=0;n<r.length;n++){var s=r[n];this.addElementBackgroundImages(s)}}}};var u={1:!0,9:!0,11:!0};return o.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},o.prototype.addImage=function(e){var t=new r(e);this.images.push(t)},o.prototype.addBackground=function(e,t){var i=new s(e,t);this.images.push(i)},o.prototype.check=function(){function e(e,i,n){setTimeout(function(){t.progress(e,i,n)})}var t=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},o.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},o.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred){var t=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[t](this)}},r.prototype=Object.create(t.prototype),r.prototype.check=function(){var e=this.getIsImageComplete();return e?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},r.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},r.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},r.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},r.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},r.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},r.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype=Object.create(r.prototype),s.prototype.check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url;var e=this.getIsImageComplete();e&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},s.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},s.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},o.makeJQueryPlugin=function(t){t=t||e.jQuery,t&&(h=t,h.fn.imagesLoaded=function(e,t){var i=new o(this,e,t);return i.jqDeferred.promise(h(this))})},o.makeJQueryPlugin(),o});
/*! lz-string-1.3.3-min.js | (c) 2013 Pieroxy | Licensed under a WTFPL license */
var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/dist/FileSaver.js */
(function(a,b){if("function"==typeof define&&define.amd)define([],b);else if("undefined"!=typeof exports)b();else{b(),a.FileSaver={exports:{}}.exports}})(this,function(){"use strict";function b(a,b){return"undefined"==typeof b?b={autoBom:!1}:"object"!=typeof b&&(console.warn("Deprecated: Expected third argument to be a object"),b={autoBom:!b}),b.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function c(a,b,c){var d=new XMLHttpRequest;d.open("GET",a),d.responseType="blob",d.onload=function(){g(d.response,b,c)},d.onerror=function(){console.error("could not download file")},d.send()}function d(a){var b=new XMLHttpRequest;b.open("HEAD",a,!1);try{b.send()}catch(a){}return 200<=b.status&&299>=b.status}function e(a){try{a.dispatchEvent(new MouseEvent("click"))}catch(c){var b=document.createEvent("MouseEvents");b.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(b)}}var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),g=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(b,g,h){var i=f.URL||f.webkitURL,j=document.createElement("a");g=g||b.name||"download",j.download=g,j.rel="noopener","string"==typeof b?(j.href=b,j.origin===location.origin?e(j):d(j.href)?c(b,g,h):e(j,j.target="_blank")):(j.href=i.createObjectURL(b),setTimeout(function(){i.revokeObjectURL(j.href)},4E4),setTimeout(function(){e(j)},0))}:"msSaveOrOpenBlob"in navigator?function(f,g,h){if(g=g||f.name||"download","string"!=typeof f)navigator.msSaveOrOpenBlob(b(f,h),g);else if(d(f))c(f,g,h);else{var i=document.createElement("a");i.href=f,i.target="_blank",setTimeout(function(){e(i)})}}:function(b,d,e,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),"string"==typeof b)return c(b,d,e);var h="application/octet-stream"===b.type,i=/constructor/i.test(f.HTMLElement)||f.safari,j=/CriOS\/[\d]+/.test(navigator.userAgent);if((j||h&&i||a)&&"undefined"!=typeof FileReader){var k=new FileReader;k.onloadend=function(){var a=k.result;a=j?a:a.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=a:location=a,g=null},k.readAsDataURL(b)}else{var l=f.URL||f.webkitURL,m=l.createObjectURL(b);g?g.location=m:location.href=m,g=null,setTimeout(function(){l.revokeObjectURL(m)},4E4)}});f.saveAs=g.saveAs=g,"undefined"!=typeof module&&(module.exports=g)});
/*! seedrandom.js v2.3.3 | (c) 2013 David Bau, all rights reserved. | Licensed under a BSD-style license */
!function(a,b,c,d,e,f,g,h,i){function j(a){var b,c=a.length,e=this,f=0,g=e.i=e.j=0,h=e.S=[];for(c||(a=[c++]);d>f;)h[f]=f++;for(f=0;d>f;f++)h[f]=h[g=r&g+a[f%c]+(b=h[f])],h[g]=b;(e.g=function(a){for(var b,c=0,f=e.i,g=e.j,h=e.S;a--;)b=h[f=r&f+1],c=c*d+h[r&(h[f]=h[g=r&g+b])+(h[g]=b)];return e.i=f,e.j=g,c})(d)}function k(a,b){var c,d=[],e=typeof a;if(b&&"object"==e)for(c in a)try{d.push(k(a[c],b-1))}catch(f){}return d.length?d:"string"==e?a:a+"\0"}function l(a,b){for(var c,d=a+"",e=0;e<d.length;)b[r&e]=r&(c^=19*b[r&e])+d.charCodeAt(e++);return n(b)}function m(c){try{return a.crypto.getRandomValues(c=new Uint8Array(d)),n(c)}catch(e){return[+new Date,a,(c=a.navigator)&&c.plugins,a.screen,n(b)]}}function n(a){return String.fromCharCode.apply(0,a)}var o=c.pow(d,e),p=c.pow(2,f),q=2*p,r=d-1,s=c["seed"+i]=function(a,f,g){var h=[],r=l(k(f?[a,n(b)]:null==a?m():a,3),h),s=new j(h);return l(n(s.S),b),(g||function(a,b,d){return d?(c[i]=a,b):a})(function(){for(var a=s.g(e),b=o,c=0;p>a;)a=(a+c)*d,b*=d,c=s.g(1);for(;a>=q;)a/=2,b/=2,c>>>=1;return(a+c)/b},r,this==c)};l(c[i](),b),g&&g.exports?g.exports=s:h&&h.amd&&h(function(){return s})}(this,[],Math,256,6,52,"object"==typeof module&&module,"function"==typeof define&&define,"random");
/*! console_hack.js | (c) 2015 Thomas Michael Edwards | Licensed under SugarCube's Simple BSD license */
!function(){for(var methods=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeline","timelineEnd","timeStamp","trace","warn"],length=methods.length,noop=function(){},console=window.console=window.console||{};length--;){var method=methods[length];console[method]||(console[method]=noop)}}();
}else{document.documentElement.setAttribute("data-init", "lacking");}
</script>
<style id="style-normalize" type="text/css">/*! normalize.css v3.0.3 | MIT License | github.com/necolas/normalize.css */html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,hgroup,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block;vertical-align:baseline}audio:not([controls]){display:none;height:0}[hidden],template{display:none}a{background-color:transparent}a:active,a:hover{outline:0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}img{border:0}svg:not(:root){overflow:hidden}figure{margin:1em 40px}hr{box-sizing:content-box;height:0}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}button,input,optgroup,select,textarea{color:inherit;font:inherit;margin:0}button{overflow:visible}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}input{line-height:normal}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]{-webkit-appearance:textfield;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0}textarea{overflow:auto}optgroup{font-weight:700}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}</style>
<style id="style-init-screen" type="text/css">@-webkit-keyframes init-loading-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-o-keyframes init-loading-spin{0%{-o-transform:rotate(0);transform:rotate(0)}100%{-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes init-loading-spin{0%{-webkit-transform:rotate(0);-o-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#init-screen{display:none;z-index:500000;position:fixed;top:0;left:0;height:100%;width:100%;font:28px/1 Helmet,Freesans,sans-serif;font-weight:700;color:#eee;background-color:#111;text-align:center}#init-screen>div{display:none;position:relative;margin:0 auto;max-width:1136px;top:25%}html[data-init=lacking] #init-screen,html[data-init=loading] #init-screen,html[data-init=no-js] #init-screen{display:block}html[data-init=lacking] #init-lacking,html[data-init=no-js] #init-no-js{display:block;padding:0 1em}html[data-init=no-js] #init-no-js{color:red}html[data-init=loading] #init-loading{display:block;border:24px solid transparent;border-radius:50%;border-top-color:#7f7f7f;border-bottom-color:#7f7f7f;width:100px;height:100px;-webkit-animation:init-loading-spin 2s linear infinite;-o-animation:init-loading-spin 2s linear infinite;animation:init-loading-spin 2s linear infinite}html[data-init=loading] #init-loading>div{text-indent:9999em;overflow:hidden;white-space:nowrap}html[data-init=loading] #passages,html[data-init=loading] #ui-bar{display:none}</style>
<style id="style-font" type="text/css">@font-face{font-family:tme-fa-icons;src:url('data:application/octet-stream;base64,d09GRgABAAAAADLAAA8AAAAAWHgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABWAAAADsAAABUIIslek9TLzIAAAGUAAAAQwAAAFY+IEkIY21hcAAAAdgAAAG8AAAF3rob9jFjdnQgAAADlAAAABMAAAAgBtX/BGZwZ20AAAOoAAAFkAAAC3CKkZBZZ2FzcAAACTgAAAAIAAAACAAAABBnbHlmAAAJQAAAI6gAADv+gJOpzGhlYWQAACzoAAAAMwAAADYY1IZaaGhlYQAALRwAAAAgAAAAJAfCBClobXR4AAAtPAAAAJEAAAFMBfb/0WxvY2EAAC3QAAAAqAAAAKhjiHI5bWF4cAAALngAAAAgAAAAIAFjDA9uYW1lAAAumAAAAY0AAAL94+zEpHBvc3QAADAoAAACHAAAA11cG/YjcHJlcAAAMkQAAAB6AAAAhuVBK7x4nGNgZGBg4GIwYLBjYHJx8wlh4MtJLMljkGJgYYAAkDwymzEnMz2RgQPGA8qxgGkOIGaDiAIAJjsFSAB4nGNgZNZgnMDAysDAVMW0h4GBoQdCMz5gMGRkAooysDIzYAUBaa4pDA4vGF4EMgf9z2KIYg5imAYUZgTJAQDSIQumAHic7dTVbltRAETR7dpNCikzQ8rMzMxt/M39mHnsU1/TfZz5jFpaV7pXJunMDLAZmOqaZjD5y4Tx+uPTyeL5lG2L5zN+L94zG8+ztr7ulXH1fra4bvK9M79xiWW2sNXPbWeFHexkF7vZw172sZ8DHOQQhznCUY5xnBOc5BSnOcNZVjnHeS5wkUtc5gpX/f3r3OAmt7jNHe5yj/s84CGPeMwTnvKM57zgJa94zRve8o73fOAjn/jMF77yje/84Ce/WGPun1zi/2tlXKbp3Xyc44bFyZanSWokJDXOOjXSk/LUSXn+pEwCKTNBaqQqZU5IjX+XMjukTBEp80TKZJEyY6RMGylzR8oEkjKLpEwlKfNJyqSSMrOkTC8pc0zKRJMy26RMOSnzTsrkk7IDpGwDKXtByoaQsiukbA0p+0PKJpGyU6RsFyl7RmosQcrukbKFpOwjKZtJyo6Ssq2k7C0pG0zKLpOy1aTsNymbTsrOk7L9pNwBUi4CKbeBlCtByr0g5XKQckNIuSak3BVSLgwpt4aUq0PK/SHlEpFyk0i5TqTcKVIuFim3i5QrRso9I+WykXLjXOYNzP8BuAPUwHicY2BAAxIQyBz0PwuEARJsA90AeJytVml300YUHXlJnIQsJQstamHExGmwRiZswYAJQbJjIF2crZWgixQ76b7xid/gX/Nk2nPoN35a7xsvJJC053Cak6N3583VzNtlElqS2AvrkZSbL8XU1iaN7DwJ6YZNy1F8KDt7IWWKyd8FURCtltq3HYdERCJQta6wRBD7HlmaZHzoUUbLtqRXTcotPekuW+NBvVXffho6yrE7oaRmM3RoPbIlVRhVokimPVLSpmWo+itJK7y/wsxXzVDCiE4iabwZxtBI3htntMpoNbbjKIpsstwoUiSa4UEUeZTVEufkigkMygfNkPLKpxHlw/yIrNijnFawS7bT/L4vead3OT+xX29RtuRAH8iO7ODsdCVfhFtbYdy0k+0oVBF213dCbNnsVP9mj/KaRgO3KzK90IxgqXyFECs/ocz+IVktnE/5kkejWrKRE0HrZU7sSz6B1uOIKXHNGFnQ3dEJEdT9kjMM9pg+Hvzx3imWCxMCeBzLekclnAgTKWFzNEnaMHJgJWWLKqn1rpg45XVaxFvCfu3a0ZfOaONQd2I8Ww8dWzlRyfFoUqeZTJ3aSc2jKQ2ilHQmeMyvAyg/oklebWM1iZVH0zhmxoREIgIt3EtTQSw7saQpBM2jGb25G6a5di1apMkD9dyj9/TmVri501PaDvSzRn9Wp2I62AvT6WnkL/Fp2uUiRen66Rl+TOJB1gIykS02w5SDB2/9DtLL15YchdcG2O7t8yuofdZE8KQB+xvQHk/VKQlMhZhViFZAYq1rWZbJ1awWqcjUd0OaVr6s0wSKchwXx76Mcf1fMzOWmBK+34nTsyMuPXPtSwjTHHybdT2a16nFcgFxZnlOp1mW7+s0x/IDneZZntfpCEtbp6MsP9RpgeVHOh1jeUELmnTfwZCLMOQCDpAwhKUDQ1hegiEsFQxhuQhDWBZhCMslGMLyYxjCchmGsLysZdXUU0nj2plYBmxCYGKOHrnMReVqKrlUQrtoVGpDnhJulVQUz6p/ZaBePPKGObAWSJfIml8xzpWPRuX41hUtbxo7V8Cx6m8fjvY58VLWi4U/Bf/V1lQlvWLNw5Or8BuGnmwnqjapeHRNl89VPbr+X1RUWAv0G0iFWCjKsmxwZyKEjzqdhmqglUPMbMw8tOt1y5qfw/03MUIWUP34NxQaC9yDTllJWe3grNXX27LcO4NyOBMsSTE38/pW+CIjs9J+kVnKno98HnAFjEpl2GoDrRW82ScxD5neJM8EcVtRNkja2M4EiQ0c84B5850EJmHqqg3kTuGGDfgFYW7BeSdconqjLIfuRezzKKT8W6fiRPaoaIzAs9kbYa/vQspvcQwkNPmlfgxUFaGpGDUV0DRSbqgGX8bZum1Cxg70Iyp2w7Ks4sPHFveVkm0ZhHykiNWjo5/WXqJOqtx+ZhSX752+BcEgNTF/e990cZDKu1rJMkdtA1O3GpVT15pD41WH6uZR9b3j7BM5a5puuiceel/TqtvBxVwssPZtDtJSJhfU9WGFDaLLxaVQ6mU0Se+4BxgWGNDvUIqN/6v62HyeK1WF0XEk307Ut9HnYAz8D9h/R/UD0Pdj6HINLs/3mhOfbvThbJmuohfrp+g3MGutuVm6BtzQdAPiIUetjrjKDXynBnF6pLkc6SHgY90V4gHAJoDF4BPdtYzmUwCj+Yw5PsDnzGHQZA6DLeYw2GbOGsAOcxjsMofBHnMYfMGcdYAvmcMgZA6DiDkMnjAnAHjKHAZfMYfB18xh8A1z7gN8yxwGMXMYJMxhsK/p1jDMLV7QXaC2QVWgA1NPWNzD4lBTZcj+jheG/b1BzP7BIKb+qOn2kPoTLwz1Z4OY+otBTP1V050h9TdeGOrvBjH1D4OY+ky/GMtlBr+MfJcKB5RdbD7n74n3D9vFQLkAAQAB//8AD3icrXsLcFzlleZ//v+++nb37dfte/VotVrdrW5JltuKpO6WJVluPyXbsmOEbGRjO4KVjWPZlsM4QIU4IYGlgCE2yxqKIQkJg2GreKQCTCZb1CZkiswjzOwOmSTATNVWTZLdDUwSMrVDsomD23vOf69assFAqgbk+773P4//nPOdc/5mwNjFl8WjosbaWblmxiOmIlTGYXzb11M7Z2ohAMbZCcZ5iG9prZl4whfwGju05xtttitUdwXYEUgkbQtWga5lC+XBaqJI285qpb8dVEc8Gnm5L5QM/f58yAlB399a7dD0mWAmdAqaMvBmKPKX9TdDwSjod9yhx03FAPcvI6Gk2lV33XoXUtKgL8C6Wa0WSzXbVjhg6JoqIPShCK0FOvOuE48K1V4B1VUQAVevugmP7Fz2CmTzW5/8+ZGP/+Kp7h/8oI4MuOZ7M5B9IvujH2Wf+PnCAjzn8ZK6AieMKRcvXnxWWSWCzGARlPcqtqs21WZzEBFgYIVDAYWzVJIrXBlH+hXGlWNM00GAJmYZ8sKBzTJFVZVppijqDFMVdTIWLa0o5JrdaHusPZGIG1IjFhQGK2mAZEe56kJnR1bTY7ZT7eivFGODBTdma3pHtlCNDVbwmgMHx/aO4R8ffeet5/ZCG6TfuV03IaSJU3oIzKsGO9+5PV+BwU5xqnOQx1aO8fW71yvD9fPn55/fA22PmsaFvfSgwZ8wzPiFvZ2DUMnzJ2hHVDMmHucPsSRrq7UQo4DMAV/AW7CANw/Zru3NIx20bBEpXwukArlxxOPReibaG63/SyQyiftzcBy3k1HuOHgjEgFHnkYfh4VodDJC4138Ff8hv5PlWbrWmm2O6grNEgGNCWGnbFtRm1Z04gzQPPWvkqMWF4eWU8DB267Df+gNe84bBvfRpfNI5Ny5yAmHDh5/PPLuByMlekDS9DsRR73nWHetwBShSO5PqCBQONO4E2wGlSvYZG6gMzeQ09SWFZC0tWION3oOVVXGTbGM+hrAzQj0O25yoN8R8YzzRsaZdzLwhpsGPEm783hAJ9+kq286eDX5pn/VydDjvk7i8EuchU21JJ3DNOqFzeABmywPcNXxhu/wB+3whrqwVw7Cn1j8vPfdDH6O7PR3fDV/Cb85wua/waSit309grZJHHOhHEQ9CA7zTGVCUb0ZvXzc1lrRe5Af+4An0aSL9op0IU9y6vRFtAYGKy7KJGFbQrdg2dXqGAwWilld0zUy9xLqd6A/zeFuy7gzYFmBOwOhZ6NNhZakm8YTI7S1pyM1mM032V26qevXGlzZ8+TKvROlB/BBkO9ACDalB7OZuBnuC5tRcAItpalENNOfhajVH1A2a1HjbHZ4N4r54oWLz4qPoe4jrMo2sonapm5QRQBQ3XycKVxwRRxjQuVCnWc6mrzOZ5FvBiraOmia5FubYRpok8n0ioRTKOQMNbWiszxYWAFZrQ1sB+dDJTFYghzyiBN3oB857ndIAha4Se/+YGUtjAkXXUO2xPE2eoe3TWPeMOXmzNi+j9w1HghvVbSAmu4c6nFac6MgbzXFU2baDr1241+98TfHtU/9t7df+MzU4msmfPYj06Wbw8Gqohda0/FkSyiyvtPGG/FsMKq1pLqmPvndkye/+y+08eYIHEJZpFmJra2Nop/VWuKcCwPvgRhnGlOFps6iIdAEmFVAKh53jblZyBU6nAFdbfX03tGwioZ9oGnEyDSWTQCyFzhoR+s/jdjgWLmc3L2K21zEmXCsM5aDm4g9Ny5v0PZVb+dY9Rcd/sl5eTiPj0nTaeiU+BhhW2qbuzJcUy2Nc2gCrjBkxWCqZiArGgOuwSzjAlDb5L91XfpvfYbpij6ZRIUWYoVcLqC2+UqNLddsMrekY3GZztVl2uQjpl4xjedIM+Uybc/r5viShuHgcgXuwQtpuoMHz8utCe/s8S+Y/7xMaYu2DX1yDrez3lp3cyyKdop+HLcLi878Uh9SKOSlj73cOIUFRVKVKHhaSS9JP452RCcYoJ3w85bz8Ckp9VN4xeZj9atpH4FnPCV4OtiDNIVYCrWwsbauK81VxUlaQnA+riFBisoUsiU0LbQpASCmmRAwg1MNJoH19uQ6WpriUV1jIQjphA5QjosiTfiy1tF+kPJKMTFYpAu6lkx40odnTv7VjYtC/QtTJyGH9HmMnKamGrcaqmaagRsMUwR9WeLmwsQREvIRevSvYa8uVFXo9Sc0w5A8/Rp5+jcxhXLuYAOIx/pbY+ggFp0FV8lNoLNAEQvyDkwBZR9T1ZC6xR0qFgsybix3DJcR7iIGwCsCHHQM0nYKVSBXQZPnqG7KDZiqrn8K524gpN9ghAx42k4GsvF3nohnA0kbnglkC9mrl7h4Db2TommKcVE1QOPRd97K5WJxsKO5nIjHbHtx/og3kK8iWys1he/EkKlqCbFOB6iKQp5Q5Yp6DB0AsjmPvHEFSGsoFraPaVpI2zLc2lmudErjJ/eeQwbKPoRBZulcwhwXYc6i1SdiEpiCF+KrFOIrAzKaHdhQ79tw4MAGuJv4rt8sQQu80jloGnnDfNVJBa+vn1WjSg1d8NHrg44FbTgdJ5+T77yy/gDI5wY7633yTbI7+CdyMDyEL2paDd0BvZjyfIYXH2/H+aqjDfXUisgnk3rFYMePoyZBegWanQpM5hKdlUSU1JnoQH2iG1d90IYADi0JPV2/oxMEeB7apm+aBngFw/ObMjzHzv7dgzyOh48fHZnmO9c8Wv+2RAGwHiP20UNnzx46mvYxyaMixDpZX22lQqQgRDqG4kYcMo92cpypAOo0Ti+iSYXJRGc5l8wvQhPfqpE0SYa7nDwkeQyh26OOlbecqVumoCwJ8+mDm+9/5T4eOyOt+4wk8WjavYTIG+7nD5Li2cWv8zGkMYoz51q2u3Y1JQSwfcumSn9JUxW0CZIWQ5isqKCo8zoGFPybx/lyHD2w4AaCBw7Ap1HIxAaHyZlr1tXG1owMt7h5Ox5QmxF4Iv6vDhaQoTFAYADuYIlnLa7b7RwtiOBDtVK1dbyCMXXxn5azOIIKfLFKaQP9K3HKIMYEQosvhkIWH23TQ9wIpCq9M4WxycnJsQIUYrEJ/bPGuOZohfHVzdmMaAmHm418c7DU3xdoyYPebFktPJtpHu7fefjw4R0VHiNTa06ZUTPe09a1sdTUVNrYtbo3nth11VW7tBa1d/U1a1t71rdG2u1IJNkWDYdbUs0pnnFT+OloWzISsdsjqVpvy9prqrNjed41POfPx2+J7TIXaWP5Wgf5bvToBEvpppQYOXPOJoda4gTQE6TsNK8sAvUSSHBFygfnfM9wL+8aK/Bddv0tZ8SufyKZ7ml7s20iCWdsPpPu4YVaXuur/2M6WX8riReTE21vtPUAnn4iyTxdf0vJ+/QM0pwsUL4D5BmUBQEeXpaU4W6RtExzN1In7eT9qHPpIoUdqAzSrdyHIPo1JNRps1uioCWJyIm2U/JG8oO4aZMXozF8b4RupRd5JJv7Nn8ZeUyxjlrakhJHcwO2gHMUDgGLR0MmS0GrIoMRWos0K81LUnPZYgmkw6sM8HtCoQTaT9y0Wu3f/MZuCYfijhMPhUVQNdL2hY8kMroS/8UvEqqeSfC/xzPV07k3vsqyrL+2ykYnhJjEz45OLIdbu4ncrbrWhImzltU7oqqaXAEdMWiHxPsSdvuF70K6/xf6FejjL13YBvFVP+UXrkwnyelZjBcltoLypQIoEmsoiDUw4C2QFS/I/J6yx5ybWOOqaMad0kJlKo+ElAdLqvRTMqOsgucuM64j3hgHU1H1mIkQ084Oje3eXT1lZwL1nwaD0BZMNfFTcHpv+sf7v6LEo4oZMlRbFNqH9tb60nEN0UkQ0mYawZNpR878eFuD1lWsl/Jb9J5iMbPlDKnkh3raBmS66U1M9Jm5rKUmMel1dKLOcxrVSgf5dJqU4o0g0pJyTlV37x4bytpCATOG8VUT4+m9cPoURiakE34ZMes/wbB0Roun+2p7h9oLSlwzQqZq2eIr+xe2/Rhp5QF8hHn5Hh/FfM9ibs32UrNG+l22ZbrnJ8N+fERAcD6YCp6nuPc2Aq/vWXiMfzKaye/BDfzTLPwe33MT8ns4P/y0uiLBdyZw3qRvNvGZegjF6H+escXvreOnkD7zm7IkADTbJEkU4sdw1jmwzpTj42smHLB82ijenjfx9YsXkccR+B5+I1azGtQk+4maTpnLlsBL75E7O1IPea+mzfPmUwQt00FJoG+nPxN/zruZzZprTljyx2GpXiHdYWBZtcINeB+2xVP16/GT9euDwf00TbqgK5gK7QvCmfp/wPn15WDa3BcM1l/Hy8F9wZQ31nf4Q2IjjrXyG+BnzXnMmqXiTuB5CLa01gINjvb8mesSTwHuSAEtzm8anp+uvwbdprkfhUs0wCNIxH6TP1l/vf6aPDThK0TXI5I+tjj+SX/8wIcaPxWX4y+CqsCiEIiAIzhsKrgfh+6qv+4L4RETPl6/zqMKukki9AA96OseZb3Zk7UKVKxZKt65tpR1J9p1sTGgP5Z4ah+KEzl73R/xEfr+I8H5fchlN/Jr0n0c3fSGkrz+vbhd5m2ZWltThDeKUaKh3WTZXWauS+WomBdMkjGvOCRuT9YfcIZxk0x24/5cT3q8redxe8TpTsLn03b9LIaFo/I0eQ7uxtjQm6rffI4elnTcJfbwX/qRFyG+Vw+SaJdyFIpugk0WXCcnaZFo1323viNAWHZPvk1+ugfjTf2sbcPR5LDT442bhwPj6Z5z9qi9wr8B85Ji51yXb3tISxlpSUtaZEYnFX8ZbHI6C8vk4ll2h5/YdRQbM0CUbSmXHsd5rH5zWz7fBnc/5iA1NLANwyQZ2+5JjiYfQ4mle+BxJA1prT9g+770dv4zTz9RnTPp+JlY4DJKoroOucmyT4fnsGIeFC3H9EtmB+qnGyP6413tPvs4BhIwipskDKakeIg+KKTgbl92JBkkHn1J3c8t+9ia2vBKhMFkGBJtEjrGDIzKE1SeAgTJiDAVRYpKmSGwMlksJor5gUWgjKlXYS0gurS4neaYflXJnaWBUjDKNAVhkWoF1WhHz7uJ2PapE8NHJkulySPD62/qVmLapMq10a997JqvnphQarc8dO3UQ2smYr38pfOWszK6fTs+eBKfHy4j8t2uWNrWnbDx5CNfe+TkxrHVE/EEW4ynxM9H2FhtpAeE2tnGFUH1J4xXChxD5hACLNXbLgOA3WU353rI37Y44SipbwdxwED/mEC0rOmuIzmlGkw7SBzNxZ6NN3519+zXRhV1Uosp3TdtGD68s4eXJo8uzHVtjyXc85gC9MYmRh+euuaRk+vhAG43Tm3RLGW7Clp52Oesq3N7dKVjnW9KxCdWjyFvi/nUs+Ja5CnPxtn+2t4NnVwLrELw76JqDMz1MacMGJoR0I5RVsA1lR/DLEdonLJLQWnOMcSamKlrszLnWWZ3mzcVOjsrnYWynTfVNmQ6aQFxrWtL9SQtgjqsojbxf5lp+qquSF1rVGyk02qZZEEKRkPdlv9ff3LVQ6MTFMas8xSft3fNVbd+vqg1KaF5w7RwBsirUye24UVXDS3oIcj/nz+56mF6qQlUAQ++gGoNytcxFG7P98DWMXMoHIL/6l/Z7p1riv8ko2oiyiru129WsSrmUjO1XdtWc0Pr7miOoWOV9YUQ07WQPmsCisWYDge5puAUAI3NIk6EQACmaQ+BGRaAwOSemV1TH90+vnlDrZBNFOi/nEUlLL96lYx5VZLqB5zDQLFQzGm6KuUX89L6YqxRuaPsCwXYTlJE1EVJt9ycWTo8bereoW7Wv38ewfOzmgI/N42Kn53LatjTxUCv85zbEyg+Y5hTcDddq99M2ysc8/51lABfjZ++8KvSxvUlnpCj7U+mIG3vR8yhXSbXEbaB3cDmatdds4lrhi9Z8hskNo2hkI+RQHWN6fMIUwKGFZiNhDmCNq6BoR1gejCoTzNdD86woB6cPDh33YFr91w99dHJLePr1tp525NylKZkzJtthLplN+ADzhOxjpiN1trRPwb/vhKfqIcMg8Mr3DDqd38o4cM36y9KWa+Tsn7v4/ocj134Vcg2TZsf/ABFKH4tYwrtObZYYxoF3QiQC+PjATwUho5+W8MkQlOOqUDxnlMNjZpsfB8zjJCxZe2afKeTjXeuboqT2XcOlsACB6XROFhWch7AeNy/VsZfx4fO5Aj8EjTVRPjLdtrmTS1NX7Azce6kmjZnnHf+1iuBiG0duzsmQTiZPzfjEoTGAqZ7xqt/nmmai8gXOWb0/sG9z8vyyPNOZjKDf9DlRgmQR93keVlHOU/9RTkfH8W8ieTQzWpsc21DGRM0Xw4soAUWDEDPtMB0oS9I5qeXC0PhMySPyTWjuYFctn9JEgWLp6FSXdz71TeSgzuQBmnXVHPXGqWhIhXkF+H2lQXxVqiSO5OthN9CQQSazmBOhdycwSgoZRJvQ28Yz8SVltDiwd3PUxMLN9De1dWehinH5783RvA9xhpyoHgnWAfGvE3sqtqOFT25rGIoMB4GBa0NAaepg2KYyiwVijQqFKGtopEeUFFYgQCboj0jZ8cCk7U1Q2W3MBBLjMRi0SCKxO0od6gD6Muon6Q35JGLDZS9DEpfLNZTA4aqrmrD0rwHCAO8Cs/Ur4a3J0Lql9WU4RfBJiYySfg+cviqaczLvipt59LuhbjXflPdSuRLUUd/9VV422jRv6SF/NbehYrcQ1p2AZ6jd80L5+kSRwE3WV+OVGTs9GvnU6yLDbJsrZ2aE+iijskqPtuHgTAktgz0r+xtaUaslZRRH6FKlRJrBwO9bK+lef8YXipg7j8GSJjM+GRPmSApRv6n//T4VrH3qqbRaNxoqoxSNMfwD6MV18yPulftrX+xZ7gXeka7vMCPgf2aQ8+N4bPuaKz7lg2LIGjjTT3x4T4jvubPYKL+cFtPTxscwm0DA+yVNaMjbFNt/cE9k+sUpoxgas8Gu1qjhG7GqUu+oAFel8B2gTDcgt+54If2XXv1VVsmVvRkM4m4TnnrYCGLtt5foc4F2rWO/NrIbxENvBHUy0WJBYqEg8hbyklAxoATvupfHMCZ3wAHaASEAFz/Y7pUPh+ZumWK7z65G1KGftgMJro0NbIzrOvbm1sCuhL9tBGKtrof1aLaZkdRjS4zYhzSDTDVw4bldnrPGtubWgKGiH0adR1JuR9VI/qErSgB72HMk0emp2+anr6F7kfTydZ+zdKSO0EdDRuTqaip3xAIjapaLa1aWqg/kmqNQEiXzza3ZFbqId3euezR4Iiqbkj5j7ZEIeTX7X4n9vLvLmKL2mAXILVUp0WPoyLCVJVGQ+/yNlGhjP8PNLq4y9vNy9rPrn+eW36OaPmdX0nTF7EIpu9XPlvW1XMgOiHbSHIL1ji1nsbpBdbAyXtlTRwjSHuCqyJvkjfAVEiMe317oeLEURlNKa/CI7tfVLxLp5qb4tFwUFVYJ3R6/STHqy1Xi1R9RLvvd6lSPIba14rZoo6zwa3w/7L18OGzRwC+N7B52+HD2zYPfA8OP3iIH9kyjkd4Fdwj9x85skUPzfXhQd9cSN96mB+97yjgoYUXvZ7kxYu/UW7mL7Eo+rwKK9byTKWsSWWz6N8VBaZxB5ShgDJZHerscm0J6L1at2fNGPH4CqQNZ+gAGTeaPZVNBB52IJ7nt/uI3N/B0707Do+8vmEH37rpdTLX8eEDd47Xr564Y3aIj+67azM8Q4dwYHjpHbJoOu1/8OkH++lk4s59Y2Lo+tsevG1ukA/N3uHb9f9TbkFebNRET61I/GEuOEtdCkxKcdfISpPptmSn01kdVNF4Y4NjHF1rWnh0cxWZKImsJdKcKPPIkZR5RIoYkcJ7dh665dDOHqV/4jgc2ILXkYz77zgwypGsH1zKst/L+ir6nJVsPdtR2zaC4aQTZC9CR4p0jigDQ6gmexJcUeeXdbS0xY7WslzDdpPF8uryAPX0L+tqoVNFD5QrFi7rbKGXwYnkJGCpwra4XMZe1th6JZcOCL0VgV445HepqL+l5jVdKMHP1VeH89a/WtYaK2/9Z/g4noyFYduzjf6WpSS0FIKDRovrC4aaQ9ZArQ9b1r/K58P0Yhi/4Msl4WPhFbUuzCTBb1OitsjmCVsAn+Qs3eokTJ1FeEQlI1nGXNlfnbS8tcc/sYz4wU8vsbd+lr/UII5u7mncOYBJ+WKc+5jsETe/L03AXCfmN4IlTVnCOYiVSxyWr5h45up7d/Lpu568c7ey4zRcu6yjzk9P3Xvu3im5qb9yaf98ab2AwZIsy0Zrq6nXxkG22zi121ScGiC71IoiZwcZqlAmzUCmvaU5GgkkzaQfoNCjlKimWnxvGhtR5b4r0roYFX59BZLFsvVB5NMRIVAGQ65bJoBsRuaFbLJM/0n3nZCLlZaWYKj+efWy88WezKv+yiG5dKnN23mX2uUJbi5bY+Rc4XgxBrHXGnlYb637gwLPEuXVBmD1ViiIyzgRfl5f9NddvfoB9NDxw0clWD9KV0FbdhMMjzfc+H7uJXEG8fo6Ns4O1q5fU+KCCq16PhXG3JuJcczFw6GwEaLSBXkQwNwF4DgLs1AgHDqA2FToAXEgCDpj+jTudDaDgUmnGsaG9bWx1UOVctJGzBlDf2HJWgZyh1HHkeV53RK5WC6Gc8fr45AzKSByxwlWHShTsxydSgfVLhALUZsXOiS8w0TlVOdJ006bC4ZayA43j7cN9WCqeCgYDTvGJzKnKG0Jn7ou6KSC18Frs8FUk2Jch1frv65/kWLdMMbf2fWfDKac4HFdaYpb8HY9ZDXZhnEylEgHP7t2L6YMcO46M22b111HA113zoFBDJQUpy/WLx6B36K+MxQdmlHBKerm0BIJKqUu68GgoLY0VSpexdChJiDC1WpC9qwK1cQYpS7U0BW0JAzeMrX6P+hRI2Dy4z/hqqmb4gS3jG8GLT77P1Ue5E4wfOFTFoioAS8NYVYZhv9umJapaPV6hct6wHdkHiowcqVYnvUivt5Qa+3vK/X2dBXy2Uy6pclBE4pR4XkwxWHTtq93vH+tv0l2U6pFvbNRePWrv51uBFbBWmgHbw/upXv+0LnRc1AxL/RjLrVgmvx/yP0Fq1KJxarV2A+PHct2HDvWwbvxJIYX60/THfzHrcdGH7shQm/iC2l6E/fXRumtaPU/ybeyx+p34UkVL0LJv9PAUHOomzL1w8q9uZaYoV3SIOoujHBKKii60eKMxhJHXUMgTQW0InVqqErq22AbYN6BHOMkFCMtlpWLDDc/0NM23tYLZ1uGMX5ZrWfPtkQj+chQ61lZiH+gZSiai0Sbz4JhDbeswXd2PSVr8E/twqtr8KXdu690Q2KpI6jHMMuhBjdRdbG9iQslEae6YVhDV7gBdOiHgK4iKtSERkv4yOpAP8ZMpimmNqtSRuUFG50FDD2AeaYRNrasGS0P2LTwuGDncpRJNtZ5Fpev85SVhMY6T3ewBJrtjAFIs8XZi95eSXOXLJkW75wKaXmE7afkst1TsjBDJxP3v3I//kG6Z9R+ce7WnfcfrvHRo6fPnT46CpteTMJZ7yXKMb2XTlHieMpspgUYLz+k3UsJV/LFTWNH7vvT08eHlfWHHtx+69yLSbZMRhHWhDn2SG0oYCC3qE/B0qAKuZqPg+b5XkErlwWmYkKlMkNY2eLmUAqF3OJinmKjrPIhuK1/W/IJ6z8kh5K1D2aK+/UTWqOzkz1fC4xVOgKKKqgjZqKV9nhTGGOgUGnZjiK4Mq8jJFKOMwJ0UxSLdlO/Ymvrtq8H3/UG+nBNcG0e7Vh79xt/yOf37KklDMPYaeyc3LZ1y8hwT671KoP8BApooL9agOqYUm2FATeRptTcdeQGxexmC3pWyw2u5ZSr4l9xsLCKW+DaaeqxVskXZql+XdTggY9NDrcHk331MoTzqZSj3fGlCe3GxJQT6IsGjeBkQOGQO53v+VKSb9E1EVMQ5vKs2/R7axiimWAmiVCh4/MZ1eYrecvvMWx9oa71KppmNkVhBs6G6m+veHkw8amOFi0QFY4pTI7RrikRxSd1jgBaCeytDEHmYSsUN/HTEEyqQVQ6ppY4937ER/nPmMXaWK6W8TvQy1cj+s28wcIlS70LHqQsSoS5rB18abP70ubwv0VMqrRhJALnb2SJXZ76vg7pAPc9++oF2+s8XzLyZUMt/3ajhy35encPGy4n+lIy4Xvvou1JERMJFmTa8zqHldSwlaBa9k6VC63heDzM/3cYttfndDMiKlbIwCN7eV2F8FS61toUNZhCzHltUoKChwg/yah6WVnr8jIXJer+ultoizj14CWn/GfvvEU5uIjTdtnx8nw86K1TlzWF5QsXBhYXGlw+3rLk/5IB/G8+gzZuYUagPa8ByoUaWfiRIuA35I4CrJOMVariLtOCaKD+Ryq3gvWTwSDci1AAfVtQi7zzsmWE4F5Vq/+RPKDe8714vX5SVSVGuXjxa2K/iCyN42qyOkbLkXwt6FIjmt5sRsHC11VB2yANZQl1HL+GWjFC9Em4Vx7Q2oKTeB2+oKkeL3xEkBU015zWlri4VEBrpICIlwZ7Eso2mgSVKs8GLeJN5YsLnmn7Lh7/45KS6ncSg5I/Por8NcaWi7UW27Te2JeyTGPqPg3VS9j2CzJyeznjn1qaGXCrpsq8ro655n7+1zi3WwkBRkGuRl5e3eMyi6L0TvDJcnYwTnM14fWG5Xyh5nXVLya56BmNJRUi25oYoiGRJBGXdaO+Rb1Y9R861mlZYzodsf21K8/wZ1mC8I75Hr9viTsF+fsW5BzxTSO1IFQNz6DJvnC/lPv9L6Ab4KcvfJU6gC94y9NfMP31s7i5XY5RIn6LJqKRxjAKDuOVppiQA65ycUhaEvVeQya8dVuF6uCYKClVFADVGd5FyGt9RTWAAgg50ahiNFm2YkcCarHv3QTW/6Jna0TY0VA0FEpnMkbciKJ0RGSrrMN/XzzKfy7p3saOsq21cUl7FVQ2Dboqxg8D38S4hnxooL2bGRU1qurqAtP1Q1M7xzd3Sd4MKlx9aN7cxtWq/1OQAi25ohrK0s0ilVHwbgmKVNGWD1T/IMmcmd2u68h5MhPsLpW6Mf7ZEUPfceC+0zfhdXy9uTm5cQffujnZrMQFzmZdv+n0HyDOnl33Z4RjOcFoIL338N50IIpBxBEd9+2+7fV+vGGHQ5Y18NCTDw1EwkITYRu/JwZe9fPMI+IfxFUsyjbSqvKhAcwt168pdedsTBbTzZxTnRzRxQyV/if8uggP8y2VcpqWw7iyTmgJOy3GuEu5oK35P5xC0L6GZFag308hopD9/6r3KyoE7rKG5Tqi3D9z8s6TM/3+7mEeeCxiPDanxdWDjxmRxwKIeebmVFVePajGtTl5VaWLcGDdLdMVpbTvxD0n9pWUyvQtew1RfioQFOU/1vU/Lotg4KmyMEz9nnuM2OINTVu8ETPuuUeXPuNZUcFYEmd9rFRbYSxfVUjLiN9dFerqyvd2yKWFBEEB548Fup3m1PWnBQHUERnjyKYur0O1v1pBfvl30u2Hnj4EwydOw/CBOyd23vd4+YefpuUbvHb84elmO9HXD1P3Tq1f48YM5VZ17msH5/d1fPtmWQndeOwTd1EnZNeXbtwsoBRbcbJ29T3T0GbGDO+3J95aen6KxViWDVCHL8i5wsPAxPLfE1FDb55RmQnmCYgrEoijOyX+6KeDoE66Tt5ONjkSgheKBA9LqL6qpqchU0E7QaSYtJ3+irSVimrrmpLJU3ej0gsK6vTRXbdlEXtnb9u17Z9B+Un9m9Hg5rmoE93YF4zCPwZ31H9b/6f6b3cEgzvAgAIYO4IwfMe64Q03nOX3fXzD8Lo7brzrLtiCz85tCkajwb6N0b9LJD738MOfSxTs2x7mj3yGsEgjzzBYB9Xw2hGCYAZOzYWG2uR6nFlvxlJeEZfO732ziNsX84be4ffMGz7/gRmQb1dyTX8Q/dtArU8Hb8Wybmgod53NBlQOilxbg9mPCIstK3sTAzE7O5BMJuTKkvJgwfulBskXM0CBMymXLQrpkSoDMVmJ6aA2QjGG4SJkRk38g5sd61dtYGoQ4St+jHY+U23r4aVWOEjtseoMnDgvfwCEm2+hp6r/X91AK4zYkU3HMVEaxnR3qBfqPzn+/wHPnsOreJxjYGRgYABi1vIsoXh+m68M3MwvgCIMt5YoxkDp2P9f/2exVDAHAbkcDEwgUQAz1Qu/AHicY2BkYGAO+p/FwMBS9v/r/68sFQxAERQQDACh8QbyeJxdT0sVwzAMy49AkAxAkbT3UQiAITGAISmAYQiA9th4ttUs7Q568UeSlVidiwSkB3PUPg+ESd6ZD/+8v7HyrtzwghY89ZB6BcyrYqc6RZhw48YhaA1Wc/v1PQtdeXJ/HppUmFM597nvBVK7D+Z+E8/uQZLBgDyaz3Llvxx02S3c/Hv813JrznryZP4F+6lSfQAAAAAAAAAAUAC2ATABaAGyAfoCJAKwAzYDmgQSBFwExgUyBbQF/AZOBvwHRAe2B/YISgigCPIJGglCCWQJignACgAKQAp2CroLAAtGC4oL8gxcDPINng5iDuYPag/6EF4RIBGGEeQSShKYEyQTbhOyFAoUYhS+FVoVphYoFooXHBeGGFoYnhjGGOwZChlOGXgZrBneGhwaWhqgGtIbLhvyHHQc2B1QHZ4d/wABAAAAUwBtAAYAAAAAAAIAIAAwAHMAAAB2C3AAAAAAeJx1kN9q2zAUh39q0441YxcbjN3tXJWWEcc1lEGvWkLbXZeSu8JUV/6T2VKQlY48w95ifYa9zt6jd/vFESUUYiP5O5/O8ZEE4AP+QWH9nHKsWeEdozXv4A0uIu/Sf488IN9G3sMQPyLv0/+MfICv+BV5iI/4wz+owVtGM/yNrPBZfYm8g/fqW+Rd+svIA/Jd5D18UovI+/S/Ix9gqp4iD3GoniduvvR1WQU5mhxLlmap3C/FUdVWN6IXoXK+k3MpnA2maVySuza0ZlToUZ07292YctFov6k2eWp8VzsrJ0m6qa+NNV4H87Dq1j2WWQiFFN61chX7yNy7mclDUoUwPxuPN/tjAoc5lvCoUaJCgOCI9pjfDGk/BPfMEGaus2pYaDQ0GgtWVP1Kx/ico2BkaQ0zGnKCnHNL09KNuK451721rLqhLfmfht5vzdrmp7Sr3nUfC07YL92afU1r+wrd7/Dh5WwdHrmLjDawanUK3+9acPXqPML7Wq3NaHL6pL+1QHuGMd8t5/8PvPGO3QAAAHicbZLnlpswEIV9DRiwvZtseu89Ib333vvmBWRZYMVC0pHEEufpg8BO/kTncOfTaLgMOtPr97o17P1/baKPACEiDBAjQYohRhhjDevYhu3YwA7sxC7sxh7sxT7sxwEcxCEcxhEcxTEcxwmcxCmcxhmcxTmcxwVcxCVkuIwruIpruI4buIlbuI07uIt7uI8HeIhHeIwneIpneI4XeIlXeI03eIt3eI8P+IhP+Iwv+Ipv+I5N/OiF1hEz9JKxUrtFrDl1lWF9NR9QIikToRaVjUouKxvOmNBjLxnlhgo2DbnM1djLKrNGnGPScSUzItzGv93yPP2bSQSX84z9cqFQdJ56yZRmMhW8mLlJJSaBI0XYPDaZKDUviZmvr6DrNjJMi0WcK1MTM02mqpbZlJtEsNx5SI238jSodJtoS7qv+BpPw67IY9xU+dg5TXjROTWwdGrIOzWhT+uA0jolxqjaZrSOnCF2Nmq16651EYpMm1fakAul9SJQeR5QVYQlk1VkZ8SwoVNFIVjWnKQrlBGdMToftdoZjrs77DajqXKrS02YEFxbbtdWkG0x44JJVUS5aBqKSlJwmhDrmOF2Hv9Wqsy4TNqoKhfmSrrQKuNSL5nvPG6p0s0AkEWkSWVZMy1Kx3ljk03qLuZ14lTmB8gNGmByGrGfjLrhlhJV2f7SaIneNF1ypQNbybBUSgZswQaWEUNngeay1/sD4l/60HicY/DewXAiKGIjI2Nf5AbGnRwMHAzJBRsZWJ02MTAyaIEYm7mYGDkgLD4GMIvNaRfTAaA0J5DN7rSLwQHCZmZw2ajC2BEYscGhI2Ijc4rLRjUQbxdHAwMji0NHckgESEkkEGzmYWLk0drB+L91A0vvRiYGFwAMdiP0AAA=') format('woff')}</style>
<style id="style-core" type="text/css">html{font:16px/1 Helmet,Freesans,sans-serif}#store-area,tw-storydata{display:none!important;z-index:0}.no-transition{-webkit-transition:none!important;-o-transition:none!important;transition:none!important}:-webkit-full-screen{height:100%;width:100%}:-ms-fullscreen{height:100%;width:100%}:fullscreen{height:100%;width:100%}body::-ms-backdrop{background:0 0}:focus{outline:thin dotted}:disabled{cursor:not-allowed!important}body{color:#eee;background-color:#111;overflow:auto}a{cursor:pointer;color:#68d;text-decoration:none;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}a:hover{color:#8af;text-decoration:underline}a.link-broken{color:#c22}a.link-broken:hover{color:#e44}a[disabled],span.link-disabled{color:#aaa;cursor:not-allowed!important;text-decoration:none}area{cursor:pointer}button{cursor:pointer;color:#eee;background-color:#35a;border:1px solid #57c;line-height:normal;padding:.4em;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}button:hover{background-color:#57c;border-color:#79e}button:disabled{background-color:#444;border:1px solid #666}input,select,textarea{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}select{padding:.34em .4em}input[type=text]{min-width:18em}textarea{min-width:30em;resize:vertical}input[type=checkbox],input[type=file],input[type=radio],select{cursor:pointer}input[type=range]{-webkit-appearance:none;min-height:1.2em}input[type=range]:focus{outline:0}input[type=range]::-webkit-slider-runnable-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-webkit-slider-thumb{-webkit-appearance:none;background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;margin-top:-5px;width:33px}input[type=range]:focus::-webkit-slider-runnable-track{background:#222}input[type=range]::-moz-range-track{background:#222;border:1px solid #444;border-radius:0;cursor:pointer;height:10px;width:100%}input[type=range]::-moz-range-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:18px;width:33px}input[type=range]::-ms-track{background:0 0;border-color:transparent;color:transparent;cursor:pointer;height:10px;width:calc(100% - 1px)}input[type=range]::-ms-fill-lower{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-fill-upper{background:#222;border:1px solid #444;border-radius:0}input[type=range]::-ms-thumb{background:#35a;border:1px solid #57c;border-radius:0;cursor:pointer;height:16px;width:33px}input:not(:disabled):focus,input:not(:disabled):hover,select:not(:disabled):focus,select:not(:disabled):hover,textarea:not(:disabled):focus,textarea:not(:disabled):hover{background-color:#333;border-color:#eee}hr{display:block;height:1px;border:none;border-top:1px solid #eee;margin:1em 0;padding:0}audio,canvas,progress,video{max-width:100%;vertical-align:middle}.error-view{background-color:#511;border-left:.5em solid #c22;display:inline-block;margin:.1em;max-width:100%;padding:0 .25em;position:relative}.error-view>.error-toggle{background-color:transparent;border:none;line-height:inherit;left:0;padding:0;position:absolute;top:0;width:1.75em}.error-view>.error{display:inline-block;margin-left:.25em}.error-view>.error-toggle+.error{margin-left:1.5em}.error-view>.error-source[hidden]{display:none}.error-view>.error-source:not([hidden]){background-color:rgba(0,0,0,.2);display:block;margin:0 0 .25em;overflow-x:auto;padding:.25em}.highlight,.marked{color:#ff0;font-weight:700;font-style:italic}.nobr{white-space:nowrap}.error-view>.error-toggle:before,.error-view>.error:before,[data-icon-after]:after,[data-icon-before]:before,[data-icon]:before,a.link-external:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}[data-icon]:before{content:attr(data-icon)}[data-icon-before]:before{content:attr(data-icon-before) "\00a0\00a0"}[data-icon-after]:after{content:"\00a0\00a0" attr(data-icon-after)}.error-view>.error-toggle:before{content:"\e81a"}.error-view>.error-toggle.enabled:before{content:"\e818"}.error-view>.error:before{content:"\e80d\00a0\00a0"}a.link-external:after{content:"\00a0\e80e"}</style>
<style id="style-core-display" type="text/css">#story{z-index:10;margin:2.5em}@media screen and (max-width:1136px){#story{margin-right:1.5em}}#passages{max-width:54em;margin:0 auto}</style>
<style id="style-core-passage" type="text/css">.passage{line-height:1.75;text-align:left;-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.passage-in{opacity:0}.passage ol,.passage ul{margin-left:.5em;padding-left:1.5em}.passage table{margin:1em 0;border-collapse:collapse;font-size:100%}.passage caption,.passage td,.passage th,.passage tr{padding:3px}@media (prefers-reduced-motion:reduce){.passage{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}</style>
<style id="style-core-macro" type="text/css">@-webkit-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@-o-keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}@keyframes cursor-blink{0%{opacity:1}50%{opacity:0}100%{opacity:1}}.macro-append-insert,.macro-linkappend-insert,.macro-linkprepend-insert,.macro-linkreplace-insert,.macro-prepend-insert,.macro-repeat-insert,.macro-replace-insert,.macro-timed-insert{-webkit-transition:opacity .4s ease-in;-o-transition:opacity .4s ease-in;transition:opacity .4s ease-in}.macro-append-in,.macro-linkappend-in,.macro-linkprepend-in,.macro-linkreplace-in,.macro-prepend-in,.macro-repeat-in,.macro-replace-in,.macro-timed-in{opacity:0}.macro-type-cursor:after{-webkit-animation:cursor-blink 1s infinite;-o-animation:cursor-blink 1s infinite;animation:cursor-blink 1s infinite;content:"\2590";opacity:1}</style>
<style id="style-ui-dialog" type="text/css">html[data-dialog] body{overflow:hidden}#ui-overlay.open{visibility:visible;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-overlay:not(.open){-webkit-transition:visibility .2s step-end,opacity .2s ease-in;-o-transition:visibility .2s step-end,opacity .2s ease-in;transition:visibility .2s step-end,opacity .2s ease-in}#ui-overlay{visibility:hidden;opacity:0;z-index:100000;position:fixed;top:-50%;left:-50%;height:200%;width:200%}#ui-dialog.open{display:block;-webkit-transition:opacity .2s ease-in;-o-transition:opacity .2s ease-in;transition:opacity .2s ease-in}#ui-dialog{display:none;opacity:0;z-index:100100;position:fixed;top:50px;margin:0;padding:0}#ui-dialog>*{-webkit-box-sizing:border-box;box-sizing:border-box}#ui-dialog-titlebar{position:relative}#ui-dialog-close{display:block;position:absolute;right:0;top:0;white-space:nowrap}#ui-dialog-body{overflow:auto;min-width:280px;height:92%;height:calc(100% - 2.1em)}@media (prefers-reduced-motion:reduce){#ui-overlay.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-overlay:not(.open){-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}#ui-dialog.open{-webkit-transition:opacity 0s;-o-transition:opacity 0s;transition:opacity 0s}}#ui-overlay{background-color:#000}#ui-overlay.open{opacity:.8}#ui-dialog{max-width:66em}#ui-dialog.open{opacity:1}#ui-dialog-titlebar{background-color:#444;min-height:24px}#ui-dialog-title{margin:0;padding:.2em 3.5em .2em .5em;font-size:1.5em;text-align:center;text-transform:uppercase}#ui-dialog-close{cursor:pointer;font-size:120%;margin:0;padding:0;width:3.6em;height:92%;background-color:transparent;border:1px solid transparent;-webkit-transition-duration:.2s;-o-transition-duration:.2s;transition-duration:.2s}#ui-dialog-close:hover{background-color:#b44;border-color:#d66}#ui-dialog-body{background-color:#111;border:1px solid #444;text-align:left;line-height:1.5;padding:1em}#ui-dialog-body>:first-child{margin-top:0}#ui-dialog-body hr{background-color:#444}#ui-dialog-body ul.buttons{margin:0;padding:0;list-style:none}#ui-dialog-body ul.buttons li{display:inline-block;margin:0;padding:.4em .4em 0 0}#ui-dialog-body ul.buttons>li+li>button{margin-left:1em}#ui-dialog-close{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-close{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}</style>
<style id="style-ui" type="text/css">#ui-dialog-body.settings [id|=setting-body]>div:first-child{display:table;width:100%}#ui-dialog-body.settings [id|=setting-label]{display:table-cell;padding:.4em 2em .4em 0}#ui-dialog-body.settings [id|=setting-label]+div{display:table-cell;min-width:8em;text-align:right;vertical-align:middle;white-space:nowrap}#ui-dialog-body.list{padding:0}#ui-dialog-body.list ul{margin:0;padding:0;list-style:none;border:1px solid transparent}#ui-dialog-body.list li{margin:0}#ui-dialog-body.list li:not(:first-child){border-top:1px solid #444}#ui-dialog-body.list li a{display:block;padding:.25em .75em;border:1px solid transparent;color:#eee;text-decoration:none}#ui-dialog-body.list li a:hover{background-color:#333;border-color:#eee}#ui-dialog-body.saves{padding:0 0 1px}#ui-dialog-body.saves>:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves table{border-spacing:0;width:100%}#ui-dialog-body.saves tr:not(:first-child){border-top:1px solid #444}#ui-dialog-body.saves td{padding:.33em .33em}#ui-dialog-body.saves td:first-child{min-width:1.5em;text-align:center}#ui-dialog-body.saves td:nth-child(3){line-height:1.2}#ui-dialog-body.saves td:last-child{text-align:right}#ui-dialog-body.saves .empty{color:#999;speak:none;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves .datestamp{font-size:75%;margin-left:1em}#ui-dialog-body.saves ul.buttons li{padding:.4em}#ui-dialog-body.saves ul.buttons>li+li>button{margin-left:.2em}#ui-dialog-body.saves ul.buttons li:last-child{float:right}#ui-dialog-body.settings div[id|=header-body]{margin:1em 0}#ui-dialog-body.settings div[id|=header-body]:first-child{margin-top:0}#ui-dialog-body.settings div[id|=header-body]:not(:first-child){border-top:1px solid #444;padding-top:1em}#ui-dialog-body.settings div[id|=header-body]>*{margin:0}#ui-dialog-body.settings h2[id|=header-heading]{font-size:1.375em}#ui-dialog-body.settings p[id|=header-desc],#ui-dialog-body.settings p[id|=setting-desc]{font-size:87.5%;margin:0 0 0 .5em}#ui-dialog-body.settings div[id|=setting-body]+div[id|=setting-body]{margin:1em 0}#ui-dialog-body.settings [id|=setting-control]{white-space:nowrap}#ui-dialog-body.settings button[id|=setting-control]{color:#eee;background-color:transparent;border:1px solid #444;padding:.4em}#ui-dialog-body.settings button[id|=setting-control]:hover{background-color:#333;border-color:#eee}#ui-dialog-body.settings button[id|=setting-control].enabled{background-color:#282;border-color:#4a4}#ui-dialog-body.settings button[id|=setting-control].enabled:hover{background-color:#4a4;border-color:#6c6}#ui-dialog-body.settings input[type=range][id|=setting-control]{max-width:35vw}#ui-dialog-body.list a,#ui-dialog-body.settings span[id|=setting-input]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}#ui-dialog-body.saves button[id=saves-clear]:before,#ui-dialog-body.saves button[id=saves-export]:before,#ui-dialog-body.saves button[id=saves-import]:before,#ui-dialog-body.settings button[id|=setting-control].enabled:after,#ui-dialog-body.settings button[id|=setting-control]:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#ui-dialog-body.saves button[id=saves-export]:before{content:"\e829\00a0"}#ui-dialog-body.saves button[id=saves-import]:before{content:"\e82a\00a0"}#ui-dialog-body.saves button[id=saves-clear]:before{content:"\e827\00a0"}#ui-dialog-body.settings button[id|=setting-control]:after{content:"\00a0\00a0\e830"}#ui-dialog-body.settings button[id|=setting-control].enabled:after{content:"\00a0\00a0\e831"}</style>

<style id="style-ui-debug" type="text/css">#debug-bar{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:0;margin:0;max-height:75%;padding:.5em;position:fixed;right:0;z-index:99900}#debug-bar>div:not([id])+div{margin-top:.5em}#debug-bar>div>label{margin-right:.5em}#debug-bar>div>input[type=text]{min-width:0;width:8em}#debug-bar>div>select{width:15em}#debug-bar-toggle{color:#eee;background-color:#222;border:1px solid #444;height:101%;height:calc(100% + 1px);left:-2em;left:calc(-2em - 1px);position:absolute;top:-1px;width:2em}#debug-bar-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-hint{bottom:.175em;font-size:4.5em;opacity:.33;pointer-events:none;position:fixed;right:.6em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap}#debug-bar-watch{background-color:#222;border-left:1px solid #444;border-top:1px solid #444;bottom:102%;bottom:calc(100% + 1px);font-size:.9em;left:-1px;max-height:650%;max-height:65vh;position:absolute;overflow-x:hidden;overflow-y:scroll;right:0;z-index:99800}#debug-bar-watch[hidden]{display:none}#debug-bar-watch div{color:#999;font-style:italic;margin:1em auto;text-align:center}#debug-bar-watch table{width:100%}#debug-bar-watch tr:nth-child(2n){background-color:rgba(127,127,127,.15)}#debug-bar-watch td{padding:.2em 0}#debug-bar-watch td:first-child+td{padding:.2em .3em .2em .1em}#debug-bar-watch .watch-delete{background-color:transparent;border:none;color:#c00}#debug-bar-watch-all,#debug-bar-watch-none{margin-left:.5em}#debug-bar-views-toggle,#debug-bar-watch-toggle{color:#eee;background-color:transparent;border:1px solid #444;margin-right:1em;padding:.4em}#debug-bar-views-toggle:hover,#debug-bar-watch-toggle:hover{background-color:#333;border-color:#eee}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle,html[data-debug-view] #debug-bar-views-toggle{background-color:#282;border-color:#4a4}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:hover,html[data-debug-view] #debug-bar-views-toggle:hover{background-color:#4a4;border-color:#6c6}#debug-bar-hint:after,#debug-bar-toggle:before,#debug-bar-views-toggle:after,#debug-bar-watch .watch-delete:before,#debug-bar-watch-add:before,#debug-bar-watch-all:before,#debug-bar-watch-none:before,#debug-bar-watch-toggle:after{font-family:tme-fa-icons!important;font-style:normal;font-weight:900;font-variant:normal;line-height:1;speak:never;text-rendering:auto;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}#debug-bar-toggle:before{content:"\e838"}#debug-bar-hint:after{content:"\e838\202f\e822"}#debug-bar-watch .watch-delete:before{content:"\e804"}#debug-bar-watch-add:before{content:"\e805"}#debug-bar-watch-all:before{content:"\e83a"}#debug-bar-watch-none:before{content:"\e827"}#debug-bar-views-toggle:after,#debug-bar-watch-toggle:after{content:"\00a0\00a0\e830"}#debug-bar-watch:not([hidden])~div #debug-bar-watch-toggle:after,html[data-debug-view] #debug-bar-views-toggle:after{content:"\00a0\00a0\e831"}html[data-debug-view] .debug{padding:.25em;background-color:#234}html[data-debug-view] .debug[title]{cursor:help}html[data-debug-view] .debug.block{display:inline-block;vertical-align:middle}html[data-debug-view] .debug.invalid{text-decoration:line-through}html[data-debug-view] .debug.hidden,html[data-debug-view] .debug.hidden .debug{background-color:#555}html:not([data-debug-view]) .debug.hidden{display:none}html[data-debug-view] .debug[data-name][data-type].nonvoid:after,html[data-debug-view] .debug[data-name][data-type]:before{background-color:rgba(0,0,0,.25);font-family:monospace,monospace;white-space:pre}html[data-debug-view] .debug[data-name][data-type]:before{content:attr(data-name)}html[data-debug-view] .debug[data-name][data-type|=macro]:before{content:"<<" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=macro].nonvoid:after{content:"<</" attr(data-name) ">>"}html[data-debug-view] .debug[data-name][data-type|=html]:before{content:"<" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type|=html].nonvoid:after{content:"</" attr(data-name) ">"}html[data-debug-view] .debug[data-name][data-type]:not(:empty):before{margin-right:.25em}html[data-debug-view] .debug[data-name][data-type].nonvoid:not(:empty):after{margin-left:.25em}html[data-debug-view] .debug[data-name][data-type|=special],html[data-debug-view] .debug[data-name][data-type|=special]:before{display:block}</style>
<style id="style-aria-outlines" type="text/css"></style><style id="style-story" type="text/css">.passage {
	line-height: 1.75;
	text-align: left;
	transition: opacity 0s;
    font-family: "Monaco", monospace;
  	max-width: 700px;
}

.myDiv {
	line-height: 1.75;
	text-align: left;
	transition: opacity 0s;
  	padding: 10%; /* 60 px */
  	border: 1px solid white;
  	color:WhiteSmoke;
}

.Centre {
 	text-align: center; 
  	transition: opacity 02;
}

.header {
  position: sticky;
  top: 0;
  z-index: 999;
  padding: 1px;
  background-color: #111111;
}

.hints {
  	color: Gray;
}

.notes a {
  	color: Gray;
}

.names {
  	color: #68d;
}

.names_ii {
  	color: #8381DF;
}

.names_iii {
  	color: #61A4C2;
}

.names_iv {
  	color: #D8D092;
}

.recent a {
    color: #DB709F;/*#*/
  	
}

.recent_ii {
    color: #DB709F;/**/
  	
}

.act_ii a {
  	color: #8381DF/*#7A77DA;*/
}

.act_iii a {
  	/*color: #6BB5B8;*/
  	color: #61A4C2/*#6BA0B8;*/
}

.act_iv a {
  	color: #D8D092/*#DAD06C;*/
}</style></head>
<body>
	<div id="init-screen">
		
		
		<div id="init-loading"><div>Loading…</div></div>
	</div>
	<tw-storydata name="Type Help" startnode="114" creator="Twine" creator-version="2.5.1" format="SugarCube" format-version="2.36.1" ifid="7EE762FB-7C3D-4304-9ADE-E7D4CFD60402" options="" tags="" zoom="1" hidden=""><style role="stylesheet" id="twine-user-stylesheet" type="text/twine-css">.passage {
	line-height: 1.75;
	text-align: left;
	transition: opacity 0s;
    font-family: "Monaco", monospace;
  	max-width: 700px;
}

.myDiv {
	line-height: 1.75;
	text-align: left;
	transition: opacity 0s;
  	padding: 10%; /* 60 px */
  	border: 1px solid white;
  	color:WhiteSmoke;
}

.Centre {
 	text-align: center; 
  	transition: opacity 02;
}

.header {
  position: sticky;
  top: 0;
  z-index: 999;
  padding: 1px;
  background-color: #111111;
}

.hints {
  	color: Gray;
}

.notes a {
  	color: Gray;
}

.names {
  	color: #68d;
}

.names_ii {
  	color: #8381DF;
}

.names_iii {
  	color: #61A4C2;
}

.names_iv {
  	color: #D8D092;
}

.recent a {
    color: #DB709F;/*#*/
  	
}

.recent_ii {
    color: #DB709F;/**/
  	
}

.act_ii a {
  	color: #8381DF/*#7A77DA;*/
}

.act_iii a {
  	/*color: #6BB5B8;*/
  	color: #61A4C2/*#6BA0B8;*/
}

.act_iv a {
  	color: #D8D092/*#DAD06C;*/
}</style><script role="script" id="twine-user-script" type="text/twine-javascript">var scrollTop = 0;
var oldScroll = 0;

window.onscroll = function() {
     scrollTop =
          window.pageYOffset || document.documentElement.scrollTop;
  	$(output).wiki(scrollTop);
};</script><tw-tag name="02-KI-11" color="none"></tw-tag><tw-passagedata pid="1" name="Box" tags="" position="650,300" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $old_input to $input&gt;&gt;
&lt;&lt;if ($input.substr(0,5)).toLowerCase() is "note "&gt;&gt;
	&lt;&lt;set $raw_input to $input.substr(0,$note_char_lim)&gt;&gt;
&lt;&lt;else&gt;&gt;
	&lt;&lt;set $raw_input to $input.substr(0,$char_lim)&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $re = new RegExp("[^A-Za-z0-9-:;,.!?()\[\]'\"*£$%/#~=+_|^¬@ ]", "g")&gt;&gt;
&lt;&lt;set $raw_input to $raw_input.replace($re, '')&gt;&gt;
&lt;&lt;set $raw_input to $raw_input.replaceAll("‑", "-")&gt;&gt;
&lt;&lt;set $raw_input to $raw_input.trim()&gt;&gt;
&lt;&lt;if not ( $raw_input is "" )&gt;&gt;
	&lt;&lt;set $command to $raw_input.toLowerCase()&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $fail_message to "\"&lt;nowiki&gt;" + $raw_input + "&lt;/nowiki&gt;\"&lt;br&gt;&lt;br&gt;"&gt;&gt;

&lt;div class="header"&gt;&lt;br&gt;   &lt;&lt;textbox "$input" "" "Box" autofocus&gt;&gt; 
&lt;span id="heading"&gt;&lt;/span&gt;
&lt;/div&gt;

&lt;br&gt;

&lt;&lt;if ($previous_scene is "00-final-note") and (not hasVisited("End"))&gt;&gt;
	&lt;&lt;set $previous_scene to ""&gt;&gt;
    &lt;&lt;goto "End"&gt;&gt;

&lt;&lt;elseif $command is ""&gt;&gt;

&lt;&lt;elseif ($command.split(" ")[0] is "act")&gt;&gt;
	&lt;&lt;set _act to $old_input.split(" ")[1]&gt;&gt;
    &lt;&lt;set _list_command to "list " + _act&gt;&gt;
    
	&lt;&lt;if $command.split(" ").length lt 2&gt;&gt;
    	&lt;&lt;=$fail_message&gt;&gt;所需参数不足。
    &lt;&lt;elseif not ["1", "2", "3", "4"].includes(_act)&gt;&gt;
    	&lt;&lt;=$fail_message&gt;&gt;幕号须为有效整数。
    &lt;&lt;elseif $command.split(" ").length is 2&gt;&gt;
    	&lt;&lt;if ($acts[_act - 1] is "&gt;blank&lt;") or ($acts[_act - 1] is "")&gt;&gt;
    		&lt;&lt;=$fail_message&gt;&gt;所需参数不足。
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;set $acts[_act - 1] to "&gt;blank&lt;"&gt;&gt;
        	&lt;&lt;set $command to _list_command&gt;&gt;
            &lt;&lt;goto "Box"&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;else&gt;&gt;
    	&lt;&lt;set $acts[_act - 1] to "&lt;nowiki&gt;" + $raw_input.replace($raw_input.split(" ")[0] + " " + $raw_input.split(" ")[1] + " ", "")  + "&lt;/nowiki&gt;"&gt;&gt;
    	&lt;&lt;set $command to _list_command&gt;&gt;
        &lt;&lt;goto "Box"&gt;&gt;
    &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $command is "back"&gt;&gt;
	&lt;&lt;if $prev_command is $previous_scene&gt;&gt;
		&lt;&lt;set $command to $previous_menu&gt;&gt;
    &lt;&lt;else&gt;&gt;
		&lt;&lt;set $command to $previous_scene&gt;&gt;
    &lt;&lt;/if&gt;&gt;
	&lt;&lt;goto "Box"&gt;&gt;

&lt;&lt;elseif $command.split(" ")[0] is "check"&gt;&gt;
	&lt;&lt;if $command.split(" ").length is 1&gt;&gt;
    	&lt;&lt;include "check"&gt;&gt;
    &lt;&lt;else&gt;&gt;
    	&lt;&lt;=$fail_message&gt;&gt;参数过多。
    &lt;&lt;/if&gt;&gt;
    
&lt;&lt;elseif $command.split(" ")[0] is "list"&gt;&gt;
	&lt;&lt;if $command.split(" ").length is 2&gt;&gt;
    	&lt;&lt;set _argument to $command.split(" ")[1]&gt;&gt;
    	&lt;&lt;if ["1", "2", "3", "4"].includes(_argument)&gt;&gt;
        	&lt;&lt;set $page to Number(_argument) - 1&gt;&gt;
            &lt;&lt;set $previous_menu to $command&gt;&gt;
            &lt;&lt;set $previous_scene to $command&gt;&gt;
            &lt;&lt;include "list"&gt;&gt;
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;=$fail_message&gt;&gt;Invalid command.
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;elseif $command.split(" ").length is 1&gt;&gt;
    	&lt;&lt;set $page to 0&gt;&gt;
        &lt;&lt;set $previous_menu to $command&gt;&gt;
        &lt;&lt;set $previous_scene to $command&gt;&gt;
    	&lt;&lt;include "list"&gt;&gt;
    &lt;&lt;else&gt;&gt;
    	&lt;&lt;=$fail_message&gt;&gt;参数过多。
    &lt;&lt;/if&gt;&gt;
    
&lt;&lt;elseif $command.split(" ")[0] is "hangman"&gt;&gt;
	&lt;&lt;if $command.split(" ").length &gt; 2&gt;&gt;
    	&lt;&lt;=$fail_message&gt;&gt;参数过多。
    &lt;&lt;elseif $command.split(" ").length is 1&gt;&gt;
    	&lt;&lt;include "hangman"&gt;&gt;
    &lt;&lt;else&gt;&gt;
		&lt;&lt;set _letter to $command.split(" ")[1]&gt;&gt;
        &lt;&lt;if _letter.length &gt; 1&gt;&gt;
    		&lt;&lt;=$fail_message&gt;&gt;“hangman”指令的参数仅能置入一个字母。
    	&lt;&lt;else&gt;&gt;
    		&lt;&lt;set _letter to _letter.replace(/[^a-z]/g, "fail")&gt;&gt;
            &lt;&lt;if _letter.length &gt; 1&gt;&gt;
            	&lt;&lt;include "hangman"&gt;&gt;
            &lt;&lt;else&gt;&gt;
            	&lt;&lt;set $guessed_letters to $guessed_letters.concatUnique(_letter)&gt;&gt;
                &lt;&lt;include "hangman"&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $command is "help"&gt;&gt;
	&lt;&lt;if $first_help is 2&gt;&gt;
    	&lt;&lt;set $first_help to 1&gt;&gt;
        &lt;&lt;set $prev_command to "intro"&gt;&gt;
    	&lt;&lt;include "Intro"&gt;&gt;
    &lt;&lt;else&gt;&gt;
    	&lt;&lt;include "help"&gt;&gt;
    &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $command.split(" ")[0] is "name"&gt;&gt;
	&lt;&lt;if $command.split(" ").length lt 2&gt;&gt;
    	&lt;&lt;include "name"&gt;&gt;
    &lt;&lt;else&gt;&gt;
		&lt;&lt;set _person to $old_input.split(" ")[1]&gt;&gt;
        &lt;&lt;if (_person is "#") and ($command.split(" ").length &gt; 2)&gt;&gt;
        	&lt;&lt;set $username to "&lt;nowiki&gt;" + $raw_input.replace($raw_input.split(" ")[0] + " " + $raw_input.split(" ")[1] + " ", "")  + "&lt;/nowiki&gt;"&gt;&gt;
            &lt;&lt;set $input to "help"&gt;&gt;
            &lt;&lt;goto "Box"&gt;&gt;
        &lt;&lt;elseif not $people.includes(_person)&gt;&gt;
        	&lt;&lt;=$fail_message&gt;&gt;指令无效。
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;if $raw_input.split(" ").length is 2&gt;&gt;
            	&lt;&lt;run delete $nicknames[_person]&gt;&gt;
            &lt;&lt;else&gt;&gt;
        		&lt;&lt;set $nicknames[_person] to "&lt;nowiki&gt;" + $raw_input.replace($raw_input.split(" ")[0] + " " + $raw_input.split(" ")[1] + " ", "")  + "&lt;/nowiki&gt;"&gt;&gt;
            &lt;&lt;/if&gt;&gt;
            &lt;&lt;if Story.has($prev_command) and ("0123".includes($prev_command[0]) or ($prev_command is "names"))&gt;&gt;
            	&lt;&lt;set $command to $prev_command&gt;&gt;
            	&lt;&lt;goto "Box"&gt;&gt;
            &lt;&lt;else&gt;&gt;
            	&lt;&lt;include "name"&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $command.split(" ")[0] is "title"&gt;&gt;
	&lt;&lt;if $command.split(" ").length lt 2&gt;&gt;
    	请输入“list”查看已输入的标题信息。
    &lt;&lt;else&gt;&gt;
		&lt;&lt;set _title to $raw_input.split(" ")[1]&gt;&gt;
        
        &lt;&lt;set _is_valid_title to false&gt;&gt;
        
        &lt;&lt;for _i to 0; _i lt $cache.length; _i++&gt;&gt;
        	&lt;&lt;if $cache[_i].substr(0,2) is _title&gt;&gt;
            	&lt;&lt;set _is_valid_title to true&gt;&gt;
                &lt;&lt;break&gt;&gt;
            &lt;&lt;/if&gt;&gt;
        &lt;&lt;/for&gt;&gt;
        
        &lt;&lt;if not _is_valid_title&gt;&gt;
        	&lt;&lt;=$fail_message&gt;&gt;未找到以该前缀开头的文件。
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;if $raw_input.split(" ").length is 2&gt;&gt;
            	&lt;&lt;run delete $titles[_title]&gt;&gt;
            &lt;&lt;else&gt;&gt;
        		&lt;&lt;set $titles[_title] to "&lt;nowiki&gt;" + $raw_input.replace($raw_input.split(" ")[0] + " " + $raw_input.split(" ")[1] + " ", "") + "&lt;/nowiki&gt;"&gt;&gt;
            &lt;&lt;/if&gt;&gt;
            &lt;&lt;set $command to "back"&gt;&gt;
            &lt;&lt;goto "Box"&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;

&lt;&lt;elseif $command.split(" ")[0] is "note"&gt;&gt;
	&lt;&lt;if $command.split(" ").length lt 2&gt;&gt;
    	&lt;&lt;include "note"&gt;&gt;
    &lt;&lt;else&gt;&gt;

		&lt;&lt;set $notes to $notes.concat( $raw_input.replace($raw_input.split(" ")[0] + " ", ""))&gt;&gt;
        
        &lt;&lt;if $first_note&gt;&gt;
        	&lt;&lt;set $first_note to false&gt;&gt;
            &lt;&lt;include "note"&gt;&gt;
        &lt;&lt;else&gt;&gt;
        	&lt;&lt;include "note"&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    
&lt;&lt;elseif $command.split(" ")[0] is "save"&gt;&gt;
	&lt;&lt;set $command to $prev_command&gt;&gt;
    &lt;&lt;run UI.saves()&gt;&gt;
    &lt;&lt;goto "Box"&gt;&gt;

&lt;&lt;elseif $command.split(" ")[0] is "find"&gt;&gt;

	&lt;&lt;set $previous_menu to $command&gt;&gt;
	&lt;&lt;set $previous_scene to $command&gt;&gt;

	&lt;&lt;if $command.split(" ").length lt 2&gt;&gt;
		&lt;&lt;set _term to " "&gt;&gt;
    &lt;&lt;else&gt;&gt;
		&lt;&lt;set _term to $command.replace($command.split(" ")[0] + " ", "")&gt;&gt;
    &lt;&lt;/if&gt;&gt;
	&lt;&lt;set _pattern to RegExp.escape(_term)&gt;&gt;
	&lt;&lt;set $re = new RegExp(_pattern)&gt;&gt;

	&lt;&lt;set $time_code to "99"&gt;&gt;

	Showing search results for "&lt;&lt;="&lt;nowiki&gt;" + _term + "&lt;/nowiki&gt;"&gt;&gt;" in local files...&lt;br&gt;

	&lt;&lt;set _counter to 0&gt;&gt;

	&lt;&lt;for _i to 0; _i lt $cache.length; _i++&gt;&gt;
		&lt;&lt;set _passage to Story.get($cache[_i])&gt;&gt;
		&lt;&lt;set _text to _passage.text&gt;&gt;

		/* hard code for finding 2, 3, @ etc */
		&lt;&lt;set $file_test to true&gt;&gt;
		&lt;&lt;if $people.includes(_term)&gt;&gt;
			&lt;&lt;if $re.test($cache[_i])&gt;&gt;
				&lt;&lt;set $file_test to true&gt;&gt;
			&lt;&lt;else&gt;&gt;
				&lt;&lt;set $file_test to false&gt;&gt;
			&lt;&lt;/if&gt;&gt;
		&lt;&lt;/if&gt;&gt;

		&lt;&lt;if $re.test(_text) and $file_test&gt;&gt;
			&lt;&lt;set _counter += 1&gt;&gt;
			&lt;&lt;capture _i&gt;&gt;
			&lt;&lt;set _new_time to $cache[_i].substr(0,2)&gt;&gt;
			&lt;&lt;if _new_time neq $time_code&gt;&gt;
				&lt;&lt;set $time_code to _new_time&gt;&gt;
				&lt;&lt;if $titles.hasOwnProperty($time_code)&gt;&gt;
					&lt;br&gt;&lt;&lt;=$time_code&gt;&gt; &lt;&lt;=$titles[$time_code]&gt;&gt;
				&lt;&lt;/if&gt;&gt;
				&lt;br&gt;
			&lt;&lt;/if&gt;&gt;

			&lt;&lt;set _tags to tags($cache[_i])&gt;&gt;
			&lt;&lt;set _tag_count to _tags.length&gt;&gt;
			&lt;&lt;for _j to 0; _j lt _tags.length; _j++&gt;&gt;
				&lt;&lt;if $cache.includes(_tags[_j])&gt;&gt;
					&lt;&lt;set _tag_count -= 1&gt;&gt;
				&lt;&lt;/if&gt;&gt;
			&lt;&lt;/for&gt;&gt;

			&lt;span class="hints"&gt;(&lt;&lt;=_tag_count&gt;&gt;)&lt;/span&gt;


			&lt;&lt;if $cache[_i] is $recent_passage&gt;&gt;
				&lt;span class="recent"&gt;[[$cache[_i]|Box][$input to $cache[_i]]]&lt;/span&gt;&lt;br&gt;
			&lt;&lt;else&gt;&gt;
				[[$cache[_i]|Box][$input to $cache[_i]]]&lt;br&gt;
			&lt;&lt;/if&gt;&gt;
			&lt;&lt;/capture&gt;&gt;
		&lt;&lt;/if&gt;&gt;
	&lt;&lt;/for&gt;&gt;

	&lt;&lt;if _counter is 0&gt;&gt;
		&lt;br&gt;No results found.
    &lt;&lt;/if&gt;&gt;    

&lt;&lt;elseif Story.has($command) or Story.has($command.toUpperCase())&gt;&gt;
	&lt;&lt;if Story.has($command.toUpperCase())&gt;&gt;
		&lt;&lt;set $command to $command.toUpperCase()&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    
	&lt;&lt;if "0123456789".includes($command[0])&gt;&gt;
    	&lt;&lt;set _scene_name to "" + $command + ""&gt;&gt;
        
        &lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;
        &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
    	&lt;span class="recent_ii"&gt;文件名: &lt;&lt;=$command&gt;&gt;&lt;/span&gt;
        &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
        &lt;span class="recent"&gt;[[返回|Box][$input to $previous_menu]]&lt;/span&gt;&lt;br&gt;&lt;br&gt;
        &lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;
        
        &lt;&lt;if not $cache.includes($command)&gt;&gt;
        
          	&lt;&lt;set $cache to $cache.concatUnique($command)&gt;&gt;
          	&lt;&lt;set $cache to $cache.sort()&gt;&gt;
        	&lt;div class="myDiv"&gt;
            &lt;span class="recent_ii"&gt;//得到新文件——收录至文件列表//&lt;/span&gt;
            &lt;/div&gt;
        &lt;&lt;/if&gt;&gt;
		&lt;&lt;set $recent_passage to $command&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    
    &lt;&lt;set $previous_scene to $command&gt;&gt;
    
	&lt;&lt;set $passage to Story.get($command)&gt;&gt;
    &lt;&lt;set _text to $passage.text&gt;&gt;
    &lt;&lt;for _i to 0; _i lt $people.length; _i++&gt;&gt;
    	&lt;&lt;set _person to $people[_i]&gt;&gt;
    	&lt;&lt;if $nicknames.hasOwnProperty(_person)&gt;&gt;
			&lt;&lt;set _text to _text.replaceAll("[" + _person + "]", "[" +  _person + " " + $nicknames[_person] + "]")&gt;&gt;
		&lt;&lt;/if&gt;&gt;
    &lt;&lt;/for&gt;&gt;
    
    &lt;&lt;if "0123456789".includes($command[0])&gt;&gt;
    	&lt;&lt;set _index to Number($command.substr(0,2))&gt;&gt;
        &lt;&lt;set _color to "names"&gt;&gt;
        &lt;&lt;if _index &gt;= 21&gt;&gt;
        	&lt;&lt;set _color to "names_iv"&gt;&gt;
        &lt;&lt;elseif _index &gt;= 14&gt;&gt;
        	&lt;&lt;set _color to "names_iii"&gt;&gt;
        &lt;&lt;elseif _index &gt;= 7&gt;&gt;
        	&lt;&lt;set _color to "names_ii"&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    	&lt;&lt;set _text to _text.replaceAll("[", "&lt;br&gt;&lt;span class='" + _color + "'&gt;[//")&gt;&gt;
    	&lt;&lt;set _text to _text.replaceAll("]", "//]&lt;/span&gt;")&gt;&gt;
        &lt;&lt;set _text to _text.replaceAll(" -", " --")&gt;&gt;
    	&lt;div class="myDiv"&gt;&lt;&lt;=_text&gt;&gt;&lt;/div&gt;
    &lt;&lt;else&gt;&gt;
    	&lt;&lt;=_text&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    
&lt;&lt;elseif ($command.length &gt;= 3) and "0123456789".includes($command[0])&gt;&gt;
	&lt;&lt;set _a to "0123456789".includes($command[0])&gt;&gt;
    &lt;&lt;set _b to "0123456789".includes($command[1])&gt;&gt;
    &lt;&lt;set _c to ($command[2] == "-")&gt;&gt;
    &lt;&lt;set _d to ($command[4] == "r")&gt;&gt;
    &lt;&lt;set _e to ($command[5] == "-")&gt;&gt;
    
    &lt;&lt;if _a and _b and _c and _d and _e&gt;&gt;
    	&lt;&lt;set _loc to ($command[3] + $command[4]).toUpperCase()&gt;&gt;
    
    	&lt;&lt;=$fail_message&gt;&gt;无效位置代码"_loc".
    &lt;&lt;else&gt;&gt;
		&lt;&lt;=$fail_message&gt;&gt;找不到文件。
        &lt;&lt;if $previous_scene neq ""&gt;&gt;
          &lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;
          &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
          &lt;span class="recent"&gt;[[返回|Box][$input to "back"]]&lt;/span&gt;&lt;br&gt;&lt;br&gt;
          &lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;
      &lt;&lt;/if&gt;&gt;
      &lt;&lt;/if&gt;&gt;
    
&lt;&lt;else&gt;&gt;
	&lt;&lt;=$fail_message&gt;&gt;未知指令。&lt;br&gt;&lt;br&gt;请输入"help"查看可用指令列表。
    &lt;&lt;if $previous_scene neq ""&gt;&gt;
      &lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;
      &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
      &lt;span class="recent"&gt;[[返回|Box][$input to "back"]]&lt;/span&gt;&lt;br&gt;&lt;br&gt;
      &lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;
    &lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;

&lt;&lt;set $prev_command to $command&gt;&gt;
</tw-passagedata><tw-passagedata pid="2" name="StoryInit" tags="" position="650,175" size="100,100">&lt;&lt;set $testing to false&gt;&gt;

&lt;&lt;set Config.history.maxStates to 1&gt;&gt;

&lt;&lt;set $input to ""&gt;&gt;
&lt;&lt;set $raw_input to ""&gt;&gt;
&lt;&lt;set $char_lim to 80&gt;&gt;
&lt;&lt;set $note_char_lim to 300&gt;&gt;
&lt;&lt;set $first_list to true&gt;&gt;
&lt;&lt;set $first_note to true&gt;&gt;
&lt;&lt;set $first_help to 1&gt;&gt;
&lt;&lt;set $recent_passage to "null"&gt;&gt;
&lt;&lt;set $cache_max to 98&gt;&gt;
&lt;&lt;set $is_complete to false&gt;&gt;
&lt;&lt;set $final_message_viewed to false&gt;&gt;
&lt;&lt;set $username to "username2"&gt;&gt;

&lt;&lt;set $seen_title to false&gt;&gt;
&lt;&lt;set $seen_note to false&gt;&gt;
&lt;&lt;set $seen_act to false&gt;&gt;
&lt;&lt;set $seen_name to false&gt;&gt;
&lt;&lt;set $seen_hangman to false&gt;&gt;
&lt;&lt;set $seen_find to false&gt;&gt;


&lt;&lt;set $page to 0&gt;&gt;
&lt;&lt;set $acts to ["", "", "", ""]&gt;&gt;
&lt;&lt;set $act_indices to ["I .....", "II ....", "III ...", "IV ...."]&gt;&gt;
&lt;&lt;set $act_starts to ["00", "07", "14", "21", "99"]&gt;&gt;
&lt;&lt;set $cache to ["00-readme"]&gt;&gt;
&lt;&lt;set $guessed_letters to []&gt;&gt;


&lt;&lt;run UIBar.destroy()&gt;&gt;
&lt;&lt;set $command to ""&gt;&gt;
/* used for nicknames and that's it */
&lt;&lt;set $people to ["1", "2", "3", "4", "5", "6", "7", "8", "9", "10", "11", "12", "K", "@"]&gt;&gt;
&lt;&lt;set $nicknames to {}&gt;&gt;
&lt;&lt;set $titles to {}&gt;&gt;
&lt;&lt;set $notes to ["(Click the icon to the left to delete this note)"]&gt;&gt;
&lt;&lt;set $prev_command to ""&gt;&gt;
&lt;&lt;set $previous_menu to "help"&gt;&gt;
&lt;&lt;set $previous_scene to ""&gt;&gt;
&lt;&lt;if $testing&gt;&gt;
	&lt;&lt;include "Testing vars"&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set Config.saves.autosave = true&gt;&gt;
&lt;&lt;set Config.saves.autoload = "prompt"&gt;&gt;

&lt;&lt;include "Hangman setup"&gt;&gt;</tw-passagedata><tw-passagedata pid="3" name="list" tags="" position="650,425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $cache_max to 98&gt;&gt;


&lt;&lt;set _progress to $cache.length&gt;&gt;
&lt;&lt;if $cache.includes("00-dream")&gt;&gt;
	&lt;&lt;set _progress -= 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;if $cache.includes("00-final-note")&gt;&gt;
	&lt;&lt;set _progress -= 1&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if (_progress &gt;= $cache_max - 2) and (not $final_message_viewed)&gt;&gt;
	''提示：您有一条新消息(1)''&lt;br&gt;&lt;br&gt;
    &lt;&lt;set $is_complete to true&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;if ($acts[$page] eq "") and ($cache.includes("00-act-structure") or $cache.includes("07-ED-10") or $cache.includes("07-KI-11") or $cache.includes("07-ST-3") or $cache.includes("07-DI-1-2-4-5-6-7-8-9") or $cache.includes("08-ED-4-10"))&gt;&gt;
	&lt;&lt;set $acts[$page] = "&gt;blank&lt;"&gt;&gt;
&lt;&lt;/if&gt;&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;
&lt;&lt;if $acts[$page] neq ""&gt;&gt;
&lt;br&gt;&lt;br&gt;
	&lt;&lt;if $acts[$page] eq "&gt;blank&lt;"&gt;&gt;
    	&lt;&lt;set _actless_indices to ["I", "II", "III", "IV"]&gt;&gt;
    	ACT &lt;&lt;=_actless_indices[$page]&gt;&gt;&lt;br&gt;
    &lt;&lt;else&gt;&gt;
		ACT &lt;&lt;=$act_indices[$page]&gt;&gt; $acts[$page]&lt;br&gt;
    &lt;&lt;/if&gt;&gt;
    
    &lt;&lt;set $prev to "&lt;&lt;----"&gt;&gt;
    &lt;&lt;set $next to "----&gt;&gt;"&gt;&gt;
    &lt;&lt;if $page is 0&gt;&gt;&lt;&lt;="&amp;nbsp;".repeat(6)&gt;&gt;&lt;&lt;/if&gt;&gt;
    &lt;&lt;if $page &gt; 0&gt;&gt;&lt;span class="recent"&gt;[[$prev|Box][$input to "list " + ($page).toString()]]&lt;/span&gt;&lt;&lt;/if&gt;&gt;
    
    &lt;&lt;="&amp;nbsp;".repeat(6)&gt;&gt;
    
    &lt;&lt;if $page &lt; 3&gt;&gt;&lt;span class="recent"&gt;[[$next|Box][$input to "list " + ($page + 2).toString()]]&lt;/span&gt;&lt;&lt;/if&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;

&lt;&lt;if $first_list&gt;&gt;
&lt;&lt;set $first_list to false&gt;&gt;
已收集文件: (点击阅读)&lt;br&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;set $time_code to "99"&gt;&gt;
&lt;&lt;set _counter to 0&gt;&gt;
&lt;&lt;for _i to 0; _i lt $cache.length; _i++&gt;&gt;
&lt;&lt;capture _i&gt;&gt;
	&lt;&lt;set _new_time to $cache[_i].substr(0,2)&gt;&gt;
    &lt;&lt;if Number(_new_time) &lt; Number($act_starts[$page])&gt;&gt;
    	&lt;&lt;continue&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;if Number(_new_time) &gt;= Number($act_starts[$page + 1])&gt;&gt;
    	&lt;&lt;break&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    &lt;&lt;set _counter += 1&gt;&gt;
    
    &lt;&lt;if _new_time neq $time_code&gt;&gt;
    	&lt;&lt;set _old_code to $time_code&gt;&gt;
    	&lt;&lt;set $time_code to _new_time&gt;&gt;
        &lt;&lt;if $titles.hasOwnProperty($time_code)&gt;&gt;
        	&lt;&lt;if _counter neq 1&gt;&gt;&lt;br&gt;&lt;&lt;/if&gt;&gt;
        	&lt;&lt;=$time_code&gt;&gt; &lt;&lt;=$titles[$time_code]&gt;&gt;&lt;br&gt;
        &lt;&lt;elseif $titles.hasOwnProperty(_old_code)&gt;&gt;
        	&lt;br&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/if&gt;&gt;
    
    &lt;&lt;set _tags to tags($cache[_i])&gt;&gt;
    &lt;&lt;set _tag_count to _tags.length&gt;&gt;
    &lt;&lt;for _j to 0; _j lt _tags.length; _j++&gt;&gt;
    	&lt;&lt;if $cache.includes(_tags[_j])&gt;&gt;
        	&lt;&lt;set _tag_count -= 1&gt;&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/for&gt;&gt;
    
    &lt;span class="hints"&gt;(&lt;&lt;=_tag_count&gt;&gt;)&lt;/span&gt;
    
    &lt;&lt;if $cache[_i] is $recent_passage&gt;&gt;
		&lt;span class="recent"&gt;[[$cache[_i]|Box][$input to $cache[_i]]]&lt;/span&gt;
    &lt;&lt;elseif $page is 1&gt;&gt;
    	&lt;span class="act_ii"&gt;[[$cache[_i]|Box][$input to $cache[_i]]]&lt;/span&gt;
    &lt;&lt;elseif $page is 2&gt;&gt;
    	&lt;span class="act_iii"&gt;[[$cache[_i]|Box][$input to $cache[_i]]]&lt;/span&gt;
    &lt;&lt;elseif $page is 3&gt;&gt;
    	&lt;span class="act_iv"&gt;[[$cache[_i]|Box][$input to $cache[_i]]]&lt;/span&gt;
    &lt;&lt;else&gt;&gt;
    	[[$cache[_i]|Box][$input to $cache[_i]]]
    &lt;&lt;/if&gt;&gt;
    
    
    
    &lt;br&gt;
    
&lt;&lt;/capture&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;if _counter is 0&gt;&gt;未找到文件&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="4" name="help" tags="" position="775,425" size="100,100">&lt;&lt;if $first_help is 0&gt;&gt;
\''欢迎, &lt;&lt;=$username&gt;&gt;!''

如要查阅消息列表 (&lt;&lt;if $is_complete&gt;&gt;2&lt;&lt;else&gt;&gt;1&lt;&lt;/if&gt;&gt;), 请输入 '''inbox'''.

如要查阅文件列表 (&lt;&lt;=$cache.length&gt;&gt;), 请输入 '''list'''.

如要调用存档功能, 请输入 '''save'''.
&lt;&lt;if $seen_name&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''name'''.
&lt;&lt;/if&gt;&gt;&lt;&lt;if $seen_title&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''title'''.
&lt;&lt;/if&gt;&gt;&lt;&lt;if $seen_act&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''act'''.
&lt;&lt;/if&gt;&gt;&lt;&lt;if $seen_note&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''note'''.
&lt;&lt;/if&gt;&gt;&lt;&lt;if $seen_find&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''find'''.
&lt;&lt;/if&gt;&gt;&lt;&lt;if $seen_hangman&gt;&gt;
&lt;span class="hints"&gt;[*] &lt;/span&gt; 取得新指令: '''hangman'''.
&lt;&lt;/if&gt;&gt;
//游戏具有自动存档功能。但仍然强烈推荐您使用【将存档保存至本地】功能。//
&lt;&lt;else&gt;&gt;
\&lt;&lt;set $first_help to 0&gt;&gt;
\&lt;&lt;type 10ms&gt;&gt;
\''欢迎, &lt;&lt;=$username&gt;&gt;!''
&lt;&lt;/type&gt;&gt;&lt;&lt;type 10ms start 0.3s&gt;&gt;
如要查阅消息列表 (&lt;&lt;if $is_complete&gt;&gt;2&lt;&lt;else&gt;&gt;1&lt;&lt;/if&gt;&gt;), 请输入 '''inbox'''.
&lt;&lt;/type&gt;&gt;&lt;&lt;type 10ms start 0.3s&gt;&gt;
如要查阅文件列表 (&lt;&lt;=$cache.length&gt;&gt;), 请输入 '''list'''.
&lt;&lt;/type&gt;&gt;&lt;&lt;type 10ms start 0.3s&gt;&gt;
如要调用存档功能, 请输入 '''save'''.
&lt;&lt;/type&gt;&gt;&lt;&lt;type 10ms start 0.3s&gt;&gt;
//游戏具有自动存档功能。但仍然强烈推荐您使用【将存档保存至本地】功能。//
&lt;&lt;/type&gt;&gt;
&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="5" name="02-EN-1-6-7-10" tags="03-KI-10-11" position="650,825" size="100,100">[@] 门开了。

[10] 你***是谁？

[@] 注：她的语调像是喝醉了。

[1] 抱歉……请问嘉利（Galley）先生在吗？

[10] 他……在别的地方。呃……我要吐了。

[1] 什么？

[10] 你在这等着吧。我得……老天，索顿（Thornton）在哪？

[@] 门关上了，接着过了一会儿，又打开了。

[6] 你好？你找谁？

[1] 你好，我——我找嘉利先生。

[6] 那你找的就是我了。

[1] 太好了！很抱歉，我的车陷在''鹌鹑小道（Quail Lane）''那边的泥路上，所以到得有些迟了——

[6] 你还没告诉我你来这儿是想做什么。

[1] 做——做什么？我——是你给我发的请柬啊。我身上带着呢。

[6] 那你找错人了。我这辈子第一次见到你。

[1] 我发誓，你是——是鲁伯特·嘉利，对吗？应该是你要找我吧？

[7] 小艾（Eddie），发生什么事了？这位是？

[6] 我正问他呢，小维（Vic）！

[1] 不好意思，这里有叫鲁伯特·嘉利的人吗？请柬上写的是——

[@] 附近有东西掉在地上摔碎的声音。

[1] 哎呦！这东西又是哪来的？

[6] 别管了。我这辈子都住在这里，从来没听说过有鲁伯特·嘉利这个人，恐怕你找错地方了。再见。

[1] 等等——

[7] 小艾！看看外面的天气，你怎么能就这样赶他走呢！

[6] 小维！我们家的客人已经够多了——

[7] 多一个人还是住得下的吧？先生，趁你的脚指头还没冻掉，快进来吧！

[1] 哦——太感谢你了。谢谢你的好心。

[7] 其他人都在''客厅（Living room）''里。肯定有人知道到底怎么回事的。

[6] 那娃娃应该是摔碎了。

[7] 可惜了。

[6] 请你让你家妹妹冷静点吧，小维。她这样搞要出人命的。

[@] 门关上了。
</tw-passagedata><tw-passagedata pid="6" name="26-EN-1" tags="25-WI-K" position="650,3900" size="100,100">[@] 一声响亮的撞击声后，一切回归寂静。

[@] 音频还在继续，它不断继续下去，令人不安。

[@] 但音频里没有什么值得注意的信息了。没有脚步声，没有低语，没有什么戏剧性的天气事件——只有风安静地吹着。

[@] 当你看完所有文件，告诉我你的想法。

[@] 编辑：回顾所有的死亡案例，很明显有一个案例不太符合既定模式。为什么？

[@] 再编：我的理论是正确的！我又添加了一个场景，应该能让逻辑链更完整。</tw-passagedata><tw-passagedata pid="7" name="03-LI-1-4-5-6-7-8-9" tags="04-ST-1-5-8 02-LI-5-8-9 04-BI-6-9" position="650,950" size="100,100">[@] 有四个人进入了''客厅（Living room）''。

[5] 你来了。伊芙（Eve）跟你在一起吗？

[6] 没有。我们带来了另外一个人。

[1] 你们好！实在抱歉——请问我的大衣该挂哪儿？

[9] 这位先生是谁？

[6] 他的车陷在了''鹌鹑小道（Quail Lane）''那边。所以我让他等天气好些再走。

[8] 情况还好吗？

[7] 都挺好。我待会跟你说。

[4] 他还带了瓶酒来！

[@] 注：我觉得这应该是"04-"所属场景中出现的那瓶打碎的酒。

[5] 好吧！希望你别指望得到什么盛情款待……

[1] 说到这儿——我的名字叫约翰·霍布斯（John Hobbes）。我实际上是收到了一封请柬才来的。请我来的人名叫鲁伯特·嘉利。有人听说过这个人吗？

[@] 注：如果你不喜欢我的数字命名系统，可以试试输入“name 1 John Hobbes”指令，这个指令能将1号人员的名字显示为“John Hobbes”。你可以给相应编号的人员取任意昵称，中文也可以，取好的昵称将实时显示在文件中，仅输入“name”指令可以查询你之前输入了哪些昵称。&lt;&lt;set $seen_name to true&gt;&gt;

[4] 我好像在哪儿……算了。

[5] 抱歉，没有叫这个名字的人住在这里。

[1] 这样啊，非常抱歉！肯定是出了什么问题。

[5] 别介意——你想待多久就待多久。我来给你介绍一下——这是维多利亚（Victoria），海伦（Helen），托尼（Tony），小艾（Eddie），还有达米安（Damian）。今晚我们在这小聚。

[9] 玛莎（Martha），你有什么计划吗？我女儿还没来，我们得等她来了再开始……

[6] 她应该来不了了。

[9] 你说什么？

[8] 有人知道安妮（Annie）在哪吗？

[4] 她说她不想来客厅。我都不知道我们为什么非要呆在这房子里！

[7] 等等……你是谁？

[1] 玛莎女士，您能让我在天气变好之前借宿一晚吗？

[4] 我可是受邀来的……

[5] 可以，这房子应该能再住下一个人。''书房（Study）''里还有一张多余的床，霍布斯先生，我带你过去。达米安，你也跟我们来吧——需要一个壮小伙来帮忙！

[8] 好的，玛莎女士。

[1] 谢谢您，那就太好了。

[9] 小艾？你能跟我去一趟''台球室（Billiard room）''吗？请务必来一趟——我想单独和你说点事。

[@] 他们都离开了。</tw-passagedata><tw-passagedata pid="8" name="Test" tags="" position="1150,175" size="100,100">&lt;&lt;set $arr to ["1", "3", "2"]&gt;&gt;
&lt;&lt;set $arr to $arr.sort()&gt;&gt;
&lt;&lt;=$arr&gt;&gt;
&lt;&lt;set $nicknames to {"1": "John", "2": "Annie"}&gt;&gt;
&lt;&lt;if $nicknames.hasOwnProperty("3")&gt;&gt;
	&lt;&lt;=$nicknames["2"]&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;link "hi"&gt;&gt;
&lt;&lt;run document.documentElement.scrollTop = 20&gt;&gt;
&lt;&lt;/link&gt;&gt;

&lt;&lt;textbox "$input" ""&gt;&gt;


&lt;&lt;set $text to "1234 //hello//&lt;&lt;set $text to 'moo'&gt;&gt;"&gt;&gt;
&lt;&lt;set $text to $text.trim()&gt;&gt;

&lt;&lt;nobr&gt;&gt;
&lt;&lt;for _i to 0; _i lt $text.length; _i++&gt;&gt;$text[_i]&lt;br&gt;&lt;&lt;/for&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

$text

$text

/*
''Bold''
__Underlined__
//Italics//
==Strikethrough==
*/

/* comment */</tw-passagedata><tw-passagedata pid="9" name="04-BI-6-9" tags="01-BI-6-10" position="1150,1075" size="100,100">[9] 我不想把这事闹大，小艾。但我可没让你把我女儿弄丢，还好像没事人一样！她人在哪？

[6] 我不知道。她不知道跑去哪里了……

[@] 别墅中某处传来瓶子打碎的声音。在多数其他的“04-”场景中也能听到这个声音。

[9] 这可不行！她还好吗？

[6] 她很好。我们之前就在这个房间，她只是喝得多了点……

[9] 我女儿可不是什么酒鬼。你跟她说了什么？

[6] 我没……我们是小小吵了一架。好像我在忙着招待客人让她不高兴了，但这又不是我的错！如果你好奇她怎么醉成这样，你最好还是问她吧！

[9] 你就不能承担哪怕一点责任吗！如果她不开心，你不应该哄她开心吗？你怎么还不去找她？

[6] 我本来是要去找她的，但是那个不速之客出现在门口，然后……

[9] 艾德蒙·嘉利（Edmund Galley）！我给你买订婚戒指不是为了让你把我女儿抛在一边的！你还想干什么！你到底在找什么？

[6] 没什么，我们只是……我们把戒指弄丢了。但我知道它就在这里。

[9] 你说什么？

[6] 一切在我掌握之中。房子正门被敲响的时候她把戒指掉了，我还没仔细找。

[9] 那你可得好好找找了！然后你得跟她道歉，保证以后再也不会发生这种事。你听懂了没有？

[6] 听懂了，道尔（Dauer）夫人。

[9] 那就好，别把好好的一桩婚事搞砸了，小艾。</tw-passagedata><tw-passagedata pid="10" name="04-ST-1-5-8" tags="05-KI-8-10-11 05-DI-1-5" position="650,1075" size="100,100">[5] 哎呦！

[1] 老天……

[5] 他——他还好吗？

[8] 他没呼吸了。

[@] 瓶子掉在地板上摔碎的声音。

[1] 我——抱歉。我有点头晕……

[5] 你摸过脉搏了吗？

[8] 他尸体还温着，但肯定是死了。

[5] 死在我家里了？先是陌生人前来投宿，然后又有一个陌生人死在了''书房（Study）''里！

[1] 你认识这个人吗？

[5] 我根本不认识！而且他是怎么进来的？根本没人跟我说有人进来了啊。

[8] 没有明显伤口。考虑到他的年龄，应该是心脏病发作。

[5] 哼，那他是罪有应得！我家房子里竟然有个鬼鬼祟祟的怪人？真的假的。

[1] 还是别对死者不敬了。他肯定也是有什么难言之隐才会出现在这里的……

[8] 他身上的东西不多，只有一份钢琴自动演奏用的纸带。有人听过阿梅莉亚·韦斯特（Amelia West）这名字吗？

[@] 注：如果你想对某些信息做点笔记，可以使用“note”指令。&lt;&lt;set $seen_note to true&gt;&gt;

[1] 没听过有这么一位作曲家。

[5] 霍布斯先生……这事和你没关系吧？

[1] 不！我也摸不着头脑，我跟您保证我和这事没关系。但如果您觉得我实在来得不是时候，我可以出去找别的地方住……

[5] 别说这些，霍布斯先生！我们会搞清楚的。在此期间，或许把这件事保密才比较好。达米安，亲爱的，你能把索顿叫来吗？我去报警。

[8] 好的。

[1] 我很抱歉打碎了瓶子。

[5] 这是小事，约翰——你是叫这个对吗？跟我来一趟''餐厅（Dining room）''好吗——这会儿应该是空着的。在你昏倒之前最好坐着歇会儿。

[@] 他们三位都离开了。</tw-passagedata><tw-passagedata pid="11" name="02-KI-11" tags="" position="775,825" size="100,100">[@] 有水烧开的声音。

[@] 有人从外面进来，准备着饭菜。

[@] 远远地能听见别墅前门打开的声音，打开了又关上，接着又打开。

[@] 接着有一声尖锐的铃响。

[11] 有段时间没听到这声音了……估计不是什么好事。

[@] 前门远远地关上了。</tw-passagedata><tw-passagedata pid="12" name="05-DI-1-5" tags="06-ST-1-11" position="650,1200" size="100,100">[5] 好了，约翰。告诉我你为何而来。

[1] 抱歉，我可没想到要被盘问！我不久前收到了这封请柬，我本以为来了这边就能搞清楚这请柬是怎么回事的。

[5] 我明白了。

[@] 这里有一段停顿，可能是她在阅读我先前提到的请柬。

[5] 我可不喜欢这请柬的口气。我没听说过任何叫鲁伯特·嘉利的人。

[1] 他会不会是您的远房亲戚？

[5] 不太像。我原本的姓氏不是嘉利，我只是自己用了这个姓氏……如果真有这么一个人，那他可能是在我搬进来之前曾经住在这里，发出了这封请柬。

[1] 我还指望您能告诉我一些线索呢。

[5] 我们只是今晚在这里小聚——我想是小艾策划的，虽然来聚会的本来应该只有亲近的朋友和家人——我不知道为什么突然有陌生人进来。

[1] 房子里还有哪些人？

[5] 房子里总共有十个人，不算我们在''书房（Study）''找到的那位。哦，还有索顿呢——那一共就是十一人。索顿是我们的管家，别墅唯一的佣人。

[@] 据我所知，的确如此。我没有找到关于房子里还有其他人的证据。

[5] 你手里拿的是什么，约翰？

[1] 我在尸体附近找到的……我想这可能不是你们的东西。也许有人会知道这是什么。

[5] 这是''教堂（Chapel）''的钥匙。我有段时间没去那儿了……

[1] 啊……这确实是个线索！

[5] 约翰，你能把它拿给管家吗？他应该在收拾''书房（Study）''里的东西。

[1] 哦，好。我早些时候应该和他见过一面。我过去找他。

[5] 多谢。过会儿来跟我们一起吃晚饭吧。</tw-passagedata><tw-passagedata pid="13" name="06-ST-1-11" tags="00-references 07-KI-11 03-KI-10-11 02-KI-11 04-KI-3-10-11 05-KI-8-10-11" position="900,1325" size="100,100">[@] 11号人员首先进入房间，挪动了什么沉重的东西。1号人员进入房间。

[11] 晚上好，先生！这间房应该足够让您留宿一夜——等我把碎玻璃清理一下。

[1] 好……抱歉，是我打碎了瓶子。

[11] 没关系，先生！别在意。

[1] 这太可怕了，你也觉得很可怕吧？有些怪事正在发生，我担心其他人会责怪我来得不是时候。

[11] 这也是没办法的事，先生。不过嘉利别墅永远欢迎您！

[1] 这些事背后肯定有个幕后黑手……嗯，你有没有听到或者见到什么可疑的事？

[11] 我大多数时间都在''厨房（Kitchen）''里，先生——自从我们上次见面之后我一直在那儿。我听见前门开了又关，接着又开又关——我猜其中一次是给您开的门，但我不知道还有谁进来了。

[1] 你有见到其他人吗？

[11] 有的。自从门第二次关上，一名客人来了''厨房（Kitchen）''——她看上去醉得厉害。但也没发生什么特别的事。

[1] 然后呢？

[11] 差不多瓶子打碎的时候，又一名客人来了''厨房（Kitchen）''。他走后，马赛科（Maseko）先生来了，我那会儿在照顾喝醉的客人。他告诉我得来一趟这里。

[@] 注：我尽力追踪了所有人员在不同场景中的分布情况，也核实了人们声称的自己在各个时刻所在的地点以及他们同行者的说辞。如果有人撒谎，我会写出来。

[@] 例如，据我所知，11号人员关于他在''厨房（Kitchen）''的位置以及和谁在一起的说法是真实的。你可以查阅他从“02-”到“05-”的场景文件来核实。然而，要验证他下面的说法就比较困难了。

[1] 哦，我都快忘了——刚才我找到一把钥匙。玛莎女士让我把它交给你。

[11] 啊！谢谢您，先生。这肯定是从嘉利先生口袋里掉出来的。

[1] 难道你是说鲁伯特·嘉利吗？

[11] 是啊！可怜的嘉利先生。他过去常去''教堂（Chapel）''——他是我见过最虔诚的人。

[1] 好吧，这位鲁伯特·嘉利先生还挺神秘的！不过总算有个人知道他是谁了。你能带我去见他吗？

[11] 恕我冒犯，先生——您刚才没认出他来吗？

[1] 你不会是说……

[11] 是的，先生，他已经去世了。如果您见到奥斯瓦尔德（Oswald）先生，请您务必把钥匙交给他。现在，请恕我失陪了，我赶着去''厨房（Kitchen）''……

[1] 等等！我还有话要问你……

[@] 11号人员匆匆离开了。顺便一提，如果你对文件列表中，本文件名称前标明的那个大得夸张的数字感到好奇，就看看“00-references”这份文档吧。</tw-passagedata><tw-passagedata pid="14" name="03-KI-10-11" tags="" position="775,950" size="100,100">[@] 有人进入了房间。

[10] 哈里（Harry）？

[11] 晚上好，道尔小姐！恕我冒昧，我得说您穿这条裙子很漂亮。

[10] 我没那个心情，哈里……我得坐着歇会儿。

[11] 哎呀……您没事吧？放轻松些，道尔小姐。

[10] 别那么叫我了！我们都认识这么久了，哈里。呃……

[11] 来，坐这儿吧。我正忙着做晚饭，但我可以给你做点热可可。

[10] 我难受……

[11] 会好的。这回又怎么了？

[10] 他不爱我。

[11] 嗯，我可不那么觉得。他很爱你，你和我都明白这一点。

[10] 他觉得他爱我，但那是假的。只是……只是他得有个伴侣，是谁不重要。

[11] 他能有你在身边是他的福气，你得告诉他这不是理所应当的。他肯定会来找你的，别担心了。

[10] 也许我应该离家出走。哈里，你会跟我走吗？比如去法国或者别的地方，坐在沙滩上吃点牡蛎。法国有牡蛎吃吗？

[11] 我不知道，道尔小姐。但如果您真去了法国，您可以寄明信片给我。

[10] 我不想自己一个人去，哈里。也许小艾能跟我一起去。

[11] 他肯定会去的。为了你他什么都愿意做，你也知道的。来，这是你的热可可。

[10] 谢谢你，哈里。虽然我还是好恨他。

[11] 这很正常。道尔小姐，想要什么就跟我说，我很愿意为您服务。

[@] 顺便一提，如果你想标记每个时间段发生了什么，试试输入“title 03 法国有牡蛎吃吗？”。和name指令一样，你可以给每个时间段随便取标题代号，代号会显示在文件列表，这里只是示范。&lt;&lt;set $seen_title to true&gt;&gt;</tw-passagedata><tw-passagedata pid="15" name="05-KI-8-10-11" tags="04-ST-1-5-8 06-ED-8-10" position="775,1200" size="100,100">[8] 你是索顿，对吗？

[11] 是的，先生。不好意思，我先前见过您吗？

[8] 我是达米安·马赛科（Damian Maseko）。楼上有点情况。玛莎女士让我知会你一声。

[11] 我们刚才听到有瓶子打碎的声音！人都没事吧？

[8] 这可不是单纯的瓶子碎了……有人死了。你应该亲自去看看。

[10] 什么？谁死了？

[8] 我不知道。我不认识他。这房子里有多少人？

[11] 嗯，我想想——您应该认识房子的两位主人，那应该就不是他们了！加上您本人和旁边的道尔小姐共有八名客人。再加上我。您确定那人去世了吗？

[8] 和我想得一样。是个外人。

[10] 是谁？谁死了？

[8] 你该去看看。在楼上的''书房（Study）''。

[11] 是的，我会去看看的，先生。我会……我会去打扫一下。您能帮我照顾一下道尔小姐吗？带她去''艾德蒙的房间（Edmund's room）''吧，我想她需要躺下休息。请您注意一下躲开其他人，尤其是艾德蒙。

[8] 我会照你说的做。走吧，我扶着你。

[10] 你是谁？你长得挺帅。

[8] 你没意见的话，我会扶你到你的房间休息。

[10] 反正小艾也配不上我……</tw-passagedata><tw-passagedata pid="16" name="06-ED-8-10" tags="01-BI-6-10 07-ED-10 08-ED-4-10" position="775,1325" size="100,100">[@] 有两个人进入房间，其中一人瘫倒在床上。

[8] 要不要我叫个人来陪你一会儿？

[10] 叫我弟弟来。

[8] 好，我应该见到过他。我会告诉他来找你。他来之前别让其他人进来，好吗？别墅里有外人。

[10] 我能认出他敲门的声音。你能再陪我一会儿吗？

[8] 我觉得你应该睡觉。

[10] 我不想睡。

[8] 哈哈哈，小维有跟我说你的事。

[10] 她说我什么好话了？

[8] 说了不少呢。她说你很有魅力，小艾有你在身边真的很幸运。

[10] 我看你是瞎编的。

[8] 哪有。她真的很喜欢你。虽然你们俩看起来关系很不好。

[10] 她就是人太好了……我不知道她怎么会喜欢你。你不爱说话，又很严肃。

[8] 哈哈哈……我想起来了。她还跟我说，你有时候特别诚实，有话就说。

[10] 小艾心里还想着她呢……我看得出来。他看我的眼神都不一样。

[8] 肯定不是那样的。你的戒指呢？

[10] 我们吵了一架。我喝多了……不小心弄丢了戒指。希望他能找到它。

[@] 注：你可以使用“find”指令搜索文件中的关键词，如“find 戒指”&lt;&lt;set $seen_find to true&gt;&gt;

[8] 他会找到的，他心里有你。

[@] 她把头埋进枕头说了些什么，我听不清。

[8] 好了，我该走了……我会去叫你弟弟来。你自己待会儿，照顾好自己，好吗？

[@] 她这句回答我也听不清，但他转身直接走了。

[@] 注：下一个场景中没有人进入或离开这个房间，但我还是写了个关于她在睡觉的场景文件。

[@] 你可能注意到了，每个有编号，而且还活着的人在同一个时间代码表示的所有场景中会且仅会出现一次。这样分类方便我整理。</tw-passagedata><tw-passagedata pid="17" name="07-ED-10" tags="00-act-structure 08-ED-4-10" position="775,1475" size="100,100">[@] 她轻轻打着呼噜。

[@] 忽然，外面传来一声雷鸣，但这声音没有吵醒她。

[@] 不久，有人敲响了门，敲门的方式很特别。

[10] 进！

[@] 现在提醒你一句应该不算晚，输入“list X”指令可以跳转到第X幕的页面。详情请看“00-act-structure”文件。</tw-passagedata><tw-passagedata pid="18" name="08-ED-4-10" tags="07-ED-10 08-KI-1-6 03-AT-2-3" position="775,1600" size="100,100">[4] 伊芙！你刚才***去哪儿了？

[10] 我在睡觉……

[4] 我能看出来。听我说，情况不太对。

[10] 哦……有人死啦？

[4] 你是怎么……？

[10] 托尼……你先跟我说发生了什么。

[4] 这东西给你，帮我拿着。别告诉其他人。

[10] 你从哪儿搞来的？看起来很贵。

[4] 我会跟你解释的。只是……有个外人来了别墅，我想他可能是在找这个。先帮我藏起来，好吗？

[10] 托尼……这不会是你偷来的吧。

[4] 我说了会跟你解释。那个外人现在在''厨房（Kitchen）''和小艾说话，我应该还有时间。

[10] 你说的外人是说奥斯瓦尔德吗？我之前和你提过他了，对吧？留着个搞笑的小胡子，还穿得像16世纪的人……

[4] 不，不是他，那个人自我介绍说叫约翰·霍布斯。不过我觉得奥斯瓦尔德也在找什么东西……我们其他人在''客厅（Living room）''集合的时候，他和安妮在''阁楼（Attic）''里说话。现在安妮想……我还是待会儿再和你说吧。

[10] 等会儿，谁是安妮？

[4] 以前她和你在一个学校上学，你不记得啦？我还记得有一次她和一个男生打起来了……这不重要。先帮我藏着这个，好吗？

[10] 好吧。但是你得答应我别惹麻烦。

[4] 我还要出去一趟，待会回来找你。我要去取一样重要的东西，不会很久的。别让陌生人进房间啊！

[@] 他出去了，门被重重关上，他再也没回到过这个房间了。</tw-passagedata><tw-passagedata pid="19" name="01-HE-4-9" tags="02-AT-2-4" position="1275,700" size="100,100">[@] 远远地，能够听到钢琴的乐声。

[9] 我看起来怎么样，托尼？

[4] 棒极了，妈妈。

[9] 哼，你压根没看着我，我都能听出来。把那块表放回去，你那脏脏的小手会把指纹印在上面的！

[4] 反正他年纪大了，肯定注意不到的。

[9] 呵呵，他最好满意。我可花了一大笔钱。

[@] 外面传来一声雷鸣。

[4] 妈，这盒子上写的名字是？

[9] 我不知道，亲爱的。把表放回去吧！

[4] 好吧！你对伊芙怎么就没这么凶呢。

[9] 你姐姐是个有能力的女人，你得多跟她学习学习。

[4] 有能力？那是你还不够了解她——

[9] 停，我不想听。我们该下楼了。记得对主家有点礼貌，好吗？

[4] 我待会再去，妈妈。我刚才好像看到一个熟人。

[9] 好的亲爱的，记得别惹麻烦！</tw-passagedata><tw-passagedata pid="20" name="01-LI-3-5" tags="01-ST-12 02-OS-3" position="1150,700" size="100,100">[@] 钢琴在自动演奏。

[3] 他去哪儿了？

[5] 嗯……他说这首歌让他想起了什么。实在不好意思，他这人有时候确实有点怪！

[3] 是啊，我们小时候就是这样了，他没什么变化。

[5] 哈哈！他这次能请你来真好。因为他经常提起你的事。

[3] 你知道这首歌叫什么名字吗？我没听出来。

[5] 我想应该是首美国的歌吧——是小艾买的。希望你还听得惯。

[3] 嗯，歌词确实很有意思。

[@] 对话被窗外的一声雷鸣打断。他们沉默片刻，钢琴的弹奏也逐渐接近尾声。

[3] 回到这里让我想起了不少过去的回忆。

[5] 这样啊，能让你待得舒适我很高兴。你以前住过的房间应该没有被动过——我只会偶尔进去打扫一下。

[3] 多谢。我应该去看看那个房间。

[5] 现在吗？我们一刻钟之后要在这里集合一下的。

[3] 我得说，我不是很想见到其他客人，我还是喜欢一个人待着。

[5] 哦，没关系。如果你需要什么东西随时可以来找我！

[@] 3号人员离开了。不久后，别墅的前门被敲响。</tw-passagedata><tw-passagedata pid="21" name="01-AT-2" tags="" position="900,700" size="100,100">[@] 注：文件的名称由表示该文件的时间、地点、人物的三部分代码组成。如"01"为时间代码，"AT"指地点为''阁楼（Attic）''，而"2"指此场景中出现的人物只有2号人员。

[@] 这是借助音频恢复功能，在2号人员身上能够追溯到的最早的时间节点。这个场景发生在''阁楼（Attic）''——注意到了吗？我会为文件中所出现的所有地点名称进行首字母大写和加粗处理。这栋别墅早已被拆除，我也找不到关于别墅房间布局信息的文件，因此我只能通过音频中人们对话中提到的内容进行推测。

[@] 要找出所有音频文件对应的地点当然也不容易，不过我尽力找了。以下内容便是我认为的这个场景中当时发生的情况。

[@] 2号人员在睡觉。窗外下着大雨，一声雷鸣响起，她醒来了。她起床打开了窗——外面是一片狂风暴雨。能够听到一声不太清楚的敲门声。

[@] 暂且把听人睡觉的道德问题放在一边，这就是我能够猜测出的全部内容了。如果你想查找2号人员在所有文件中的出场情况，可以输入"find 2"指令，其他人员以此类推。不过这个指令只能显示出你已经看过的文件。你还可以看看时间代码为01的其他文件，它们都差不多发生在同一时刻。&lt;&lt;set $seen_find to true&gt;&gt;</tw-passagedata><tw-passagedata pid="22" name="01-DI-7-8" tags="" position="1025,700" size="100,100">[@] 其他房间中传来弹奏钢琴的声音。

[8] 你给妈妈打过电话了吗？

[7] 我告诉过她我们在这里了。

[8] 那你和她说安妮的事了吗？

[7] 当然说了——我还是不能对她撒谎。但我也请她不要给这边打电话了，我不想让安妮觉得是我“背叛”了她。

[@] 她说这句话时，传来一声雷鸣，但这没有让她分心。

[8] 还差多少钱？

[7] 我没问过，但如果不是走到了绝路，她也不会来找我。亲爱的，还得请你多担待了。

[8] 小维，那她会和我们一起待多久？

[7] 肯定不会太久的。我向你保证，我会跟她谈谈的。

[8] 你知道，我很爱你。

[7] 我知道，亲爱的。我也爱你。

[8] 可你有时候真的把事情搞得很难办，我只想要我们两个人安静地过二人世界。

[7] 我也想啊！我知道这里的人不是什么大善人，但我们明天就离开了，安妮也不会一直跟着我们。会有那么一天的，只有我跟你，我们两个人，也许有天我们可以考虑组建一个小家庭？你想要的是这个吗？

[8] 唉……小维，现在说这件事有点不是时候啊。

[7] 你说的对！抱歉啦。

[@] 前门被敲响。

[8] 你说要我和组成家庭，但你还戴着这个？我知道那是什么。

[7] 亲爱的，对不起，不是你想的那样，我待会再和你解释。现在我需要去看看门口是谁在敲门，好吗？

[8] 别留我一个人和这些人待在一起。我爱你，小维。

[7] 爱你！

[@] 听起来他们在亲亲，这声音不怎么好听。</tw-passagedata><tw-passagedata pid="23" name="01-ST-12" tags="00-audio-recovery" position="1400,700" size="100,100">[@] 背景中，钢琴正在弹奏着，他自言自语。

[12] 是阿梅莉亚! 对了, 是阿梅莉亚...

[12] 上次听她弹琴已经是好久以前了……我就知道我在哪听过这首曲子……

[12] 我怎么就忘记了呢？

[12] 就好像她有一天突然消失了，却没有人注意到！

[12] 有点邪门了。我得去问问他……

[@] 外面一声雷鸣，一具尸体倒下，接着是一片寂静。详情请见"00-audio-recovery"。

[@] 我希望你不会太失望……这次的事件没有我们期望的那么典型，也没提供什么明显的线索。但我想应该能从案件其他内容中得到更多相关证据。
</tw-passagedata><tw-passagedata pid="24" name="02-LI-5-8-9" tags="01-DI-7-8" position="1150,825" size="100,100">[5] 海伦，要来一杯吗？

[9] 你好啊，玛莎。来点儿吧，多谢。能让我这么放松的机会可不多。

[5] 以后你要常来啊——要不然我就得自己喝一整瓶啦！嗯……你好？

[8] 晚上好。

[5] 啊！海伦，这位是达米安。他就是维多利亚那个讨人喜欢的男朋友！

[8] 幸会，女士。

[9] 请你……叫我道尔夫人。

[5] 达米安，你要喝点红酒吗？

[8] 不用了，谢谢你，嘉利夫人。我和小维刚才在讨论你们的别墅，真的很让人喜欢。

[5] 哎呀！叫我玛莎就好。你们修好电话了吗？

[8] 修好了。小维先前要打个电话，刚才已经打过了。

[9] 你是哪里人？

[8] 我是伦敦人。但我和小维其实是在埃及旅游的时候认识的——

[9] 哦，你经常出去旅游吗？

[8] 现在不常去了。不过如果小维想去，我也可以马上计划下一次旅行。

[5] 遇见你是她的幸运。我一直想当然地觉得，任何事她都能自己解决呢——毕竟她那么聪明。

[8] 您客气了。

[9] 好吧，我很高兴见到一个至少已经有所成就的年轻人……现在太多人都没有基本的自律。

[8] 是啊……

[5] 啊——其他人来了！</tw-passagedata><tw-passagedata pid="25" name="02-AT-2-4" tags="01-AT-2" position="900,825" size="100,100">[@] 门被敲响，而后打开了。

[4] 哦——我没把你吵醒吧？

[2] 没……你是谁？

[4] 是你对吧？你叫什么来着？我肯定认识你！

[2] 我很多年之前确实住在这附近，不过我可有好几年没回来了……这次我是回来拜访我姐姐的。容我问一句，你是谁？

[4] 你是安妮·贝拉蒙（Annie Beaumont）！我想起来了，有一次你在报刊亭偷东西被抓到，然后他们就不允许你回来上学了。我就知道我在哪见过你！

[2] 是吗？因为这事记住我还真是记对了。等等，你在干什么？别拉那个！

[4] 这和什么东西是相连的吗？好像也没啥用。

[2] 我认真的，别动它。他们会上来教训我的。

[4] 呸，这房间真吓人。这玩具屋有多少年历史了？

[2] 是啊，他们不知道我要来，这是他们剩下的唯一一张床。感觉这里应该很久没人住了。

[4] 太怪了。你知道之前住这间房的那个女孩的故事吗？

[2] 呃，不知道？

[4] 我姐姐告诉我的。那女孩是一点一点疯掉的，房子里还有很多间卧房，但她只睡在这里。之后有一天……

[2] 嘿！别摔那个东西！我认真的！别在这儿撒野！

[4] 啊哦！晚啦。

[2] 哈？有人在下面啊，你这傻瓜！你差点就砸到人了！唉，天啊。

[4] 抱歉，小安。哦，顺便一提，我叫托尼。你会去''客厅（Living room）''吗？

[2] 我基本不认识这里的其他人，让我自己一个人待会儿吧。

[4] 好吧，抱歉了，我们待会见。

[@] 门关上了，接着被锁上了。</tw-passagedata><tw-passagedata pid="26" name="02-OS-3" tags="" position="1025,825" size="100,100">[3] 嗨，又见面了。

[3] 抱歉，我没能陪你到最后。希望你不要介意这里的其他住民……我知道这并不是你想要的。

[@] 他坐在床上。

[3] 比起你记忆中的模样，我大概要老得多了……但我还是会想，如果你能活到现在，我们大概会有很多共同点。我已经不记得那个少年是什么模样……但你肯定会告诉我的吧，你会告诉我，那时我曾是怎样的一个少年。

[3] 不知道你是否还在我身边。不知道你是否还在意我这个老笨蛋。我只知道，我真的很想你。</tw-passagedata><tw-passagedata pid="27" name="03-AT-2-3" tags="" position="900,950" size="100,100">[@] 有人想打开门，但门上了锁。门被敲响，然后打开。

[2] 哦——实在抱歉。我发誓刚才不是我干的，是托尼干的，我告诉过他不要那么做了的！

[3] 亲爱的，我完全不明白你在说什么。

[2] 哦……我叫安妮。小艾说我可以住在这里——应该可以吧。

[3] 应该可以。不知怎的，你让我想起了她。

[2] 哦……那就好。那，有什么需要我帮忙的吗？

[3] 不不不，没什么。自从我上次上到这里来已经有段时间了，我只是想来看一眼。

[2] 明白了……这对你来说应该不是什么愉快的事情吧？

[3] 是啊，有一点。

[2] 呃，抱歉。如果你想让我搬出去的话，我肯定还能找到其他能睡的地方的。

[3] 不，没关系。回想起一些陈旧的记忆也不错。你就待在这儿吧，我要走了。

[2] 好的！总之，今天见到你很高兴。

[3] 我们会再见的。

[@] 门关上了。</tw-passagedata><tw-passagedata pid="28" name="04-KI-3-10-11" tags="09-DI-1-3" position="775,1075" size="100,100">[3] 有人吗？

[11] 晚上好，先生。什么风把您吹到这儿来了？

[3] 我会跟你解释的——你身上有种我很熟悉的感觉，很像我年轻时候在这里工作的一位管家。难道你是他的亲戚吗？

[11] 那您说的可能是我的父亲！您认识他？能接下他的职务是我的荣幸。

[@] 楼上有玻璃瓶打碎的声音。

[10] 什么声音？是小艾吗？

[3] 这就对了，你看起来确实眼熟。不过，我其实是来找''教堂（Chapel）''的钥匙的。我想应该在你这儿？

[11] 没在我这儿，先生……

[3] 什么意思？那它在哪？

[11] 我不清楚，先生。不如我晚饭后帮您找一找？我找到的话马上告诉您。

[3] 我记得这所房子以前还是很有条理的。当时佣人也很多，素质都很高。我过去不必为了拿个钥匙大做文章！

[11] 抱歉，先生。我有空的时候会尽力帮您找的。

[10] 把你跟我说的故事告诉他，哈里！就是''教堂（Chapel）''的那个。

[11] 道尔小姐，我不知道您在说什么！我不知道什么故事，就算我知道，也不会再说了。

[3] 什么故事？你父亲一定告诉过你什么内情。

[11] 好吧，我确实听过一些故事。

[3] 他埋葬了她，对吧？

[11] 是的，就是他。

[10] 发现尸体的正是他父亲！你能想象吗？

[11] 道尔小姐！

[3] 这位年轻的女士，你最好不要在这所房子里谈论这些事情！

[11] 非常抱歉，先生。请您原谅她。今晚发生了很多不寻常的事！

[3] 不管是什么事，别跟我扯上关系。等其他人都离开''餐厅（Dining room）''，我才会去吃晚饭，你明白我的意思吗？

[11] 我明白，先生。钥匙的事真的很抱歉。

[3] 唉，也不是你的错。这栋房子的主人根本不知道怎么打理家事！

[11] 肯定是我放错了地方。以及，如果您不介意……我觉得她见到您回来会很开心的。

[10] 我吗？

[3] 你又在说什么鬼话？

[11] 我没有别的意思，先生。只是，我早些时候听说了一些事……比如她还在这栋房子里，和我们在一起。我只是觉得应该告诉您这件事，如果是我越界了，还请您原谅……

[3] 说话小心点。找到钥匙，拿给我，你们俩再也别提这事。

[11] 遵命，先生。

[3] 很好。

[@] 音频略有停顿，接着3号人员离开了。</tw-passagedata><tw-passagedata pid="29" name="04-AT-2-7" tags="02-AT-2-4" position="900,1075" size="100,100">[@] 门再次被敲响。

[7] 安妮？

[@] 门开了。

[2] 小维，我很抱歉——真不是我干的。

[7] 安妮，我无所谓。

[2] 是真的，是托尼干的。我不会让他再这样了！

[7] 安妮！我有话要和你说。

[2] 你还好吗？是达米安惹到你了？

[7] 不！只是我觉得很奇怪，这不对劲。

[2] 你是说你和小艾的事？

[7] 我不知道他为什么要邀请我们到这栋别墅来。我以为我们现在只是朋友，因为你也知道嘛，现在他和伊芙是一对了。

[2] 他怎么说？

[7] 问题不是他说了什么，他也没说什么。我觉得他是出于不知道什么原因在生我的气。

[2] 要是生气了，那他干嘛要请我们来，我们又干嘛要应邀来呢？你甚至都不用跟他做什么朋友。

[7] 我知道。你能帮我拿着这个吗？

[2] 好，我可以找个地方把它藏起来，如果你是这个意思的话。这东西不会留在我身上的。

[7] 这样做也不是我的错，对吧？我大概只是希望他能注意到，希望这能表达我的善意。是我想错了。

[2] 他请你来就只是为了跟你炫耀他的新欢……别觉得愧疚，你没欠他什么。

[7] 哈！没想到你也会说这种话。

[2] 小维，你没告诉老妈我的事吧？

[7] 亲爱的……你可以和我们待在一块，想待多久就待多久，但你也总得和她谈谈的。事情不会自己解决。

[2] 如果你去和小艾说明白他配不上你，我就去和她谈！我认真的，小维——

[7] 安妮！行行好，别惹麻烦好吗？

[2] 我已经被卷进麻烦事了！

[7] 行行行。待会再见。

[@] 门关上了。</tw-passagedata><tw-passagedata pid="30" name="04-HE-4" tags="" position="1025,1075" size="100,100">[@] 4号人员进入房间，远处传来玻璃瓶打碎的声音。

[4] 我就知道我记得那名字……妈妈究竟惹了什么麻烦？

[@] 盒子被打开的声音。

[4] 我不能放着它不管……

[@] 他离开了。</tw-passagedata><tw-passagedata pid="31" name="05-BI-6-7" tags="04-AT-2-7 01-BI-6-10 06-DI-5-6-7" position="1150,1200" size="100,100">[7] 小艾……

[6] 嗨，维多利亚。

[7] 你在找什么东西吗？

[6] 嗯，伊芙的戒指丢了。就丢在这个房间里。

[7] 需要我帮忙找找吗？

[6] 好，那就多谢了。

[7] 之前的事我替安妮说声抱歉，刚才我和她聊过了，不会再有这种事了。对不起，还要打扰你——我先前不应该让那个男人进来的。

[6] 没关系，真的没关系的，小维。如果我看起来心情不好，我还要请你原谅呢……我今晚不太好过。

[7] 你跟伊芙还好吗？

[6] 还好，顺其自然吧。我们就是稍微有点争执。

[7] 呃……你觉得会自然解决吗？

[6] 情侣总会吵架的，也总会和好的，这是正常现象。

[7] 我是想说……我们上次分别的时候弄得不太好看。抱歉在那之后我们就没什么联系，也不怎么说话了，在那段时间我认识了达米安，还做了各种各样的事情……

[6] 小维，没关系。毕竟是我的错，我不应该……是我太想当然了……

[7] 都是很久之前的事了。我们现在就只做朋友吧，好吗？

[6] 好啊，这次你能来我很高兴。

[7] 谢谢，哦，戒指给你。

[6] 你什么时候找到的？

[7] 我刚一进门就看到了！来吧，我们吃晚饭去。</tw-passagedata><tw-passagedata pid="32" name="05-AT-2-4" tags="03-AT-2-3 03-LI-1-4-5-6-7-8-9 04-HE-4 01-HE-4-9 06-LI-2-9" position="900,1200" size="100,100">[@] 这扇门第三次被敲响。

[4] 小安？是我，开开门。

[2] 托尼你给我走开！别来！

[4] 我这儿有件你会很感兴趣的东西！

[@] 门开了。

[2] 这东西很值钱吧？你从哪弄来的？

[4] 听我说，这里正在发生一些奇怪的事情，我还没有搞清楚到底是怎么回事。

[2] 这是你偷的吗？

[4] 不是。呃，是的。我跟你说，刚才有一个陌生人突然出现，没人知道他是谁，而且他在找一个叫鲁伯特·嘉利的人。

[2] 是那个老人吗？刚才你出去之后他有来过这里。

[4] 啊？哦，你说的可能是奥斯瓦尔德吧。搞笑小胡子？

[2] 对，是他。

[4] 他不重要。其他所有人都在''客厅（Living room）''里，没人知道鲁伯特·嘉利是谁。

[2] 哦？是挺怪的。

[4] 是吧。不过，我有见过一次那个名字——在我妈妈房间里的一个小盒子上，写着那个名字。我上来找你之前，她给我看过一次，但我不知道那到底是怎么回事！

[2] 所以你就偷了这个怀表？

[4] 是！那个陌生人肯定是在找它。如果真出了什么岔子，我不希望妈妈被牵连。

[2] 还能出什么岔子？你和你妈妈说过这事了吗？

[4] 我不想告诉她。如果有人真的盯上了这个东西，我可以就这样把它藏起来。她不需要知道。

[2] 那这东西肯定很珍贵吧？你为什么要告诉我呢？

[4] 我也不太认识这里的其他人。

[2] 托尼，你做过头了。把怀表给我，我去还给你的母亲。

[4] 你疯了？我不会给你的。

[2] 给我，不然我就告诉她是你偷的。

[4] 小安，你搞什么！我那么相信你！

[2] 我们俩也不是什么熟人吧！你不知道我有多需要它！

[4] 我要走了。你最好别告诉我妈，不然有你好果子吃。

[2] 托尼！别走！

[@] 门被用力摔上了。</tw-passagedata><tw-passagedata pid="33" name="07-DI-1-2-4-5-6-7-8-9" tags="04-ST-1-5-8 06-TO-3-4 08-MA-3-5 08-KI-1-6 08-DI-2-7-8-9 08-ED-4-10" position="650,1475" size="100,100">[5] 请进，找个地方坐吧。晚饭马上就好！

[9] 你看见的不是他，对吗？

[2] 哦……不是。呃，我也没看清。

[1] 座位有什么讲究吗？

[@] 又有几个人走进房间。

[5] 啊，达米安！能帮我从升降机里把菜品拿出来吗？

[9] 我女儿还是没来！

[8] 她应该在睡觉，道尔夫人。小心盘子烫手。

[6] 不好意思，能再说一次你的名字吗？

[1] 约翰·霍布斯。希望你不介意我也一起上桌吃饭！我很感谢——

[5] 小艾，是我跟他说可以一起吃饭的。

[4] 小安，刚才很抱歉……你还生气吗？

[2] 不知道你在说什么。

[7] 你们俩怎么了？

[9] 小艾，能帮我递一下酒吗？

[6] 好的，道尔夫人。你觉得房子怎么样？希望今晚的混乱没有影响你。

[9] 你很清楚我今晚是怎么度过的，小艾。但我也希望我们能把今晚出的这些乱子先放在一边。

[1] 我可不觉得能把它放在一边！

[9] 你能再说一次吗？我一点都不明白，我什么你会和我们在一张桌子上吃饭！

[1] 啊，实际上……又发生了一件有趣的事情。

[5] 霍布斯先生！我们大家都是，在饭桌上说话还是注意点吧。

[9] 我对这位先生刚才想说的话很感兴趣。

[1] 哦——没什么，真没什么。

[8] 我本来也不想说的，但总得有个人告诉大家：早些时候，我们发现有一个人在''书房（Study）''里平静地去世了。我想应该没有人认识他，而且这事已经有人在秘密处理了。

[5] 现在不是秘密啦！

[6] 妈，你知道？是谁死了？

[2] 天啊！我之前应该见过他……

[4] 等会儿，不是奥斯瓦尔德吧。我刚刚还看到他了。

[5] 不是他。不管这个人是谁……我的确不认识他。

[7] 哎，这都什么事啊。

[6] 你怎么没告诉我？

[9] 嚯，刚有个陌生人进门，就发现房子里有人死了？

[5] 我保证，海伦。自从约翰到了我们这儿，我一直和他在一起，他和这事没有关系！我个人希望你不要对我们的客人恶言相向！

[6] 等等，那这个人是怎么进来的？我不明白，他怎么会死在那里？

[1] 我同时还发现，这位死去的先生和邀请我的是同一个人：他是鲁伯特·嘉利先生。现在我们知道——

[6] 谁***是鲁伯特·嘉利？

[@] 一声震耳欲聋的雷鸣，接着有房间正下方''厨房（Kitchen）''传来的，盘子打碎的声音。房间里一时间鸦雀无声。

[6] 我去看看。

[1] 呃，我刚刚想说——

[6] 你，跟我来。我们谈谈。

[5] 我得去找奥斯瓦尔德！他的晚饭要冷掉了。

[@] 这三个人离开了。

[2] 托尼？

[4] 我去拿个东西。

[8] 哦……你姐姐在叫你。她在''小艾的房间（Eddie's room）''。

[2] 托尼，求你了。

[4] 安妮，没事的。我能处理。

[@] 他也离开了。房间中的其他人在下个场景中留在了这个房间。这份文件已经太长了，在这里分割一下。</tw-passagedata><tw-passagedata pid="34" name="08-KI-1-6" tags="09-DI-1-3 07-DI-1-2-4-5-6-7-8-9" position="900,1600" size="100,100">[6] ****。真是一团糟。

[1] 我提前告诉你一下——我……我不太擅长……应对这种情况……

[6] 帮我把它抬出去。

[@] 有重物被移动的声音。一段时间后，他们再次对话。

[1] 你知道他是谁吗？

[6] 他身上有食品储藏室的钥匙，应该是他为我们做了晚饭。

[1] 你连自己家的佣人也不熟悉吗？

[6] 我没怎么在意过。平时都是玛莎管这些事的。

[1] 你是说你母亲？

[6] 你先听我说。跟我解释一下你来这里的目的，谁是鲁伯特·嘉利，以及为什么我们会发现第二具尸体。

[1] 我发誓，我——我已经告诉了你们我知道的所有信息。我所知道的就是，我被一个不认识的人请来了这座别墅，而在我有机会问他为什么请我来之前，他就死了！

[6] 你怎么认识的鲁伯特·嘉利？为什么他在这里？

[1] 我真不知道，我不知道他是谁。

[6] 那你怎么认出他的。

[1] 我……我就知道是他。

[6] 我不知道你在搞什么把戏。但是如果这些事中有任何一位客人参与，那你就应该告诉我！已经有一个佣人遭殃了。

[1] 你认为这两起死亡是有关联的？我以为……我以为也许是雷声吓到他们了。这两个死者看起来都上年纪了。

[6] 你在逗我玩吗？房子里来了两个外人，然后其中一个死了，就这么简单吗？我能看出来这里正在发生着什么。我需要的是你向我保证不要再影响其他人。

[1] 我怎么会和这些事扯上关系？刚才我和大家一样也在''餐厅（Dining room）''里啊！如果这是有人蓄意谋划的，那肯定也是已经在房子里的其他客人做的……如果他们是故意请我来的，那我的处境反而比较危险吧！

[6] 冷静一下，吃饭的时候有两个人缺席……其中一位嘛，她完全不在考虑范围内。但另一位，奥斯瓦尔德——我确实也不太了解他。

[1] 他是谁？

[6] 嗯……我不知道我的父亲是谁。我从来没和母亲聊过，也没多想。但奥斯瓦尔德总是作为我的“叔叔”出现在我的生活中，从小到大都是这样。

[1] 那他有可能认识鲁伯特·嘉利！这是现在最好的一条线索了。

[6] 他肯定会等着我们全都离开之后再去吃饭……你去''餐厅（Dining room）''找他吧。

[1] 谢谢！你不和我一起去找他吗？

[6] 不了，我有别的事要做。

[@] 6号人员等待1号人员离开。接着有倾倒某种液体的声音。6号人员离开了。</tw-passagedata><tw-passagedata pid="35" name="05-LI-3-9" tags="" position="1025,1200" size="100,100">[9] 你好？我们没见过面吧。

[3] 应该……没有。

[9] 我是海伦·道尔，很高兴认识你。不好意思，外面有什么好看的吗？

[3] 虽然太黑了看不太清，但''教堂（Chapel）''就在外面的山坡上。我很想去看看……也许明天有机会吧。

[9] 你想在这个天气出门，那肯定是疯了！

[3] 嗯……不好意思。今晚我有些心不在焉。我的名字叫奥斯瓦尔德·布莱恩·亚瑟·嘉利（Oswald Brian Arthur Galley），很久之前我曾经住在这里。很高兴认识你。

[9] 哦，是这样啊。伊芙大概和我提过你。能详细说说你和这个家族的关系吗？

[3] 很遗憾，我是我们家最后的孩子了。我和这间房子因缘深厚，但和房子的主人没有什么关系。

[9] 抱歉提起这件事。我能问问你现在的婚姻状况吗？

[3] 我一直是喜欢自己一个人过日子。现在想想有些后悔，真正嘉利家族的血脉无法传承下去了。你呢，你有孩子吗？

[9] 我有两个孩子。他们大概在其他房间吧，我一直都不擅长让他们做我想让他们做的事。

[3] 那么道尔先生呢？

[9] 他不在这里，在做他的事。但他本来也想和我们一起来的。

[3] 这样啊。好啦，能见到你真的很开心，道尔夫人。

[9] 我也是。</tw-passagedata><tw-passagedata pid="36" name="06-TO-3-4" tags="" position="1150,1325" size="100,100">[@] 3号人员进入房间，一扇隐藏门打开又关闭。抽屉被拉开，接着关上。4号人员进入房间。

[4] 你干什么？你在翻我的东西？！

[3] 没有没有！我只是四处看看。我不知道这间房间有人住了。

[4] 是么。就是你叫奥斯瓦尔德？

[3] 是，我叫奥斯瓦尔德·嘉利。我们应该没见过吧。

[4] 我姐姐有和我说过你的事。你在我房间做什么？

[3] 这个嘛，我年轻的时候，这间房是我们的育婴室——

[4] 现在不是了吧？别再进来了。

[3] 你对刚认识的人就是这个态度？

[4] 我的耐心也是有限的。给我出去。

[3] 没必要疑神疑鬼的，孩子。我这就走。

[@] 3号人员离开了。抽屉被打开，又关上，接着4号人员离开了。</tw-passagedata><tw-passagedata pid="37" name="06-DI-5-6-7" tags="05-BI-6-7" position="650,1325" size="100,100">[@] 5号人员拿起电话，接着没有使用就放下了听筒。6号人员和7号人员进入房间。

[6] 妈妈，有什么事吗？

[5] 啊！没什么事。你们来得早了点，晚饭还没好呢。

[6] 你看起来有点慌乱。

[5] 这个，你知道的！这么大的房子只有一名佣人，我管起来也不容易，更何况还要给一屋子人布置饭菜。

[7] 抱歉，玛莎女士，那件事——

[6] 妈妈，是我把那个男人从外面放进来的，希望你不要介意。我认为他还是挺无害的。

[5] 我们在说霍布斯先生对吗？我最不担心的就是他了。我觉得能有一位新朋友和我们一起挺好的。维多利亚，我也很高兴安妮能来，更别提介意什么了。

[6] 你还有什么担心的事吗？

[5] 没有！真的没有了。看看你们俩吧，又聚在一起了！你们俩看起来还是那么默契。

[7] 谢谢，玛莎女士。我刚才进来的时候，小艾刚才还在抱怨他找不到什么东西，然后——

[6] ——我们刚刚在叙旧呢。我是想找石灰擦擦球杆。

[5] 你们就像小时候那么亲近，看到你们这样，我有种很奇妙的感觉！哎，维多利亚，我真的觉得……算了，就当我没说吧。

[6] 妈妈，你说得好像我们还是小孩似的，别这样。

[7] 哦，你就跟小时候一样是个坏脾气！我想起来了。

[5] 小艾，她做给你的那个手链你还留着吗？你们当时是各给对方做了一个吧？

[6] 那个啊，我几年前就丢掉了。

[7] 小艾，我随时可以给你再做一个的，你想要的话跟我说！

[@] 其他人开始进入房间了。</tw-passagedata><tw-passagedata pid="38" name="06-LI-2-9" tags="05-LI-3-9 07-DI-1-2-4-5-6-7-8-9" position="1025,1325" size="100,100">[2] 你好——你是托尼的母亲吗？

[9] 是的，孩子。有什么事吗？

[2] 我可能知道你被偷走的怀表在哪。

[9] 什么——被偷了？我真应该把它带在身上的！我就知道要出事。

[2] 什么意思？

[9] 那是我不久前才得到的，我也不知道为什么我要买它。现在房子里可是有各种奇怪的人走来走去啊，就比如我刚刚在这儿见到的那位有点搞笑的先生。大晚上的，他说想去''教堂（Chapel）''呢！我想还是不要给这种人太深刻的印象了。

[2] 托尼说……那盒子上写着一个名字。

[9] 哦？我不太记得了。

[2] 没什么，别介意。

[9] 好孩子，你刚才是不是说知道我的怀表在哪？

[2] 我说过吗？我的意思是我看到了有人拿着它走出你的房间。我没有看清楚是谁。

[@] 很明显是在说谎。

[9] 好吧，谢谢你来告诉我这件事。连我女儿都没来跟我解释今天在发生些什么事，哎！

[2] 不好意思。

[9] 我们是不是该去''餐厅（Dining room）''了？晚饭应该快好了。</tw-passagedata><tw-passagedata pid="39" name="07-KI-11" tags="" position="900,1475" size="100,100">[@] 有走来走去的声音和各种各样的噪音。你能听到这声音来自楼上。

[11] 啊，我从没想过会这样……他真的死了……

[@] 接着，一声雷鸣过后，立刻传来的是碗碟落地砸得粉碎的声响，接着是重物倒下的声音。

[@] 此后一片寂静。欢迎来到充满谜团和困惑的第二幕！</tw-passagedata><tw-passagedata pid="40" name="07-ST-3" tags="" position="1025,1475" size="100,100">[@] 男人走进房间。

[@] 一会儿后，他开始吹口哨。是一首很有名的歌——一首快节奏、欢快的歌曲。稍后，他的口哨被一声雷鸣打断。

[3] 天啊……

[@] 他离开了。
</tw-passagedata><tw-passagedata pid="41" name="name" tags="" position="1400,425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;set $nicks to Object.keys($nicknames)&gt;&gt;

&lt;&lt;if $nicks.length is 0&gt;&gt;
	No names have been set.&lt;br&gt;&lt;br&gt;
&lt;&lt;else&gt;&gt;
	Displaying &lt;&lt;=$nicks.length&gt;&gt; set names.&lt;br&gt;&lt;br&gt;
  	&lt;&lt;for _i to 0; _i lt $nicks.length; _i++&gt;&gt;
    	&lt;&lt;=$nicks[_i]&gt;&gt; - &lt;&lt;=$nicknames[$nicks[_i]]&gt;&gt;&lt;br&gt; 
	&lt;&lt;/for&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;&lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;&lt;span class="recent"&gt;[[返回|Box][$input to "back"]]&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="42" name="00-audio-recovery" tags="25-WI-K" position="900,575" size="100,100">[@] 在这个时代，我们已经能通过科技手段检查尸体，从而获取该名死者死前最后一段时间曾听到的声音信息。能够获取的音频通常只有一两分钟的长度，不同死者能够获取的长度不同。

[@] 音频在死者已经死亡的瞬间之后仍能持续一段时间，虽然时间很短暂，但至少也有能够持续大约30秒的案例。

[@] 然而在这个案件中，通过对比不同来源的音频模式，技术人员能够将从别墅内外发现的十二名受害者身上获取到的音频延长到大致相同的时间点：大约是第一起死亡事件发生前的一分钟。

[@] 这项工程可不便宜。那些技术原理远远超出了我的认知。应该说我们是很幸运的，当时的调查人员选择将所有尸体都保存起来，而且受害者家属对此也没有意见。

[@] 编辑：我设法说服了技术团队，让他们从十二名受害者之外的一具尸体获取音频。我想验证自己的理论。（比较遗憾的是，这名受害者不能按照我的数字命名系统分类……）

[@] 再编：那具尸体获取到的音频只有一分钟，不过其中的信息非常关键。</tw-passagedata><tw-passagedata pid="43" name="note" tags="" position="1150,425" size="100,100">&lt;&lt;nobr&gt;&gt;
&lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;
    &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
    &lt;span class="recent_ii"&gt;Notes&lt;/span&gt;
    &lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;
    &lt;span class="recent"&gt;
    	[[返回|Box][$input to $previous_menu]]
    &lt;/span&gt;
&lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;

&lt;&lt;if $notes.length is 0&gt;&gt;
	No stored notes found.&lt;br&gt;&lt;br&gt;
&lt;&lt;else&gt;&gt;
	
    
	&lt;div class="myDiv"&gt;
  	&lt;&lt;for _i to 0; _i lt $notes.length; _i++&gt;&gt;
    &lt;&lt;capture _i&gt;&gt;
    	&lt;&lt;nobr&gt;&gt;
        &lt;span class="notes"&gt;
        &lt;&lt;link "[#]" "Box"&gt;&gt;
        	&lt;&lt;run $notes.deleteAt(_i)&gt;&gt;
            &lt;&lt;set $input to "note"&gt;&gt;
        &lt;&lt;/link&gt;&gt;
        &lt;/span&gt;
        &lt;&lt;=$notes[_i]&gt;&gt;
        &lt;&lt;/nobr&gt;&gt;
        &lt;&lt;if _i &lt; $notes.length - 1&gt;&gt;
        	&lt;br&gt;&lt;br&gt;
        &lt;&lt;/if&gt;&gt;
    &lt;&lt;/capture&gt;&gt;
	&lt;&lt;/for&gt;&gt;
    &lt;/div&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;</tw-passagedata><tw-passagedata pid="44" name="00-list-of-names" tags="" position="1150,575" size="100,100">[@] 以下内容中，名字是用钢笔写的，其余内容是用铅笔写的。

小维
安妮——我
小艾
玛莎——是房子的主人，强烈的香水味
托尼——偏执，带着枪
约翰——？？
奥斯瓦尔德——过去住在这里，家族画像
(总共7人)

[@] 注：我过去把小维（Vic）写成了维克（Vick），看到这份文档之后我把所有相关内容都统一修改到了这里提到的写法。</tw-passagedata><tw-passagedata pid="45" name="08-DI-2-7-8-9" tags="04-ST-1-5-8 07-DI-1-2-4-5-6-7-8-9 09-MA-5-7 11-LI-1-7-8 09-VI-2-8" position="650,1600" size="100,100">[7] 安妮！发生什么了？

[2] 没什么，真的。我刚刚才听过这个名字。

[9] 感谢你的坦诚。现在很多人都太讲礼貌！为了讲礼貌就绕着弯儿回答问题！

[8] 确实如此，道尔夫人。

[7] 所以到底是什么事？

[9] 她看到有人从我的卧室偷了什么东西。对吧，孩子？

[2] 我——是看到了。但我不知道具体偷的是什么东西。

[@] 此乃谎言。

[8] 您被偷的是什么东西？

[9] 是一块怀表，到我手上还没焐热就被偷了！

[7] 如果是我不小心把一个贼放进了房子里，我很抱歉……天啊，这和那个人有关吗……

[8] 我亲手检查了那具尸体，他的死亡没有任何可疑之处。这背后的原因肯定并不复杂。

[9] 你们能帮我留意下我的怀表吗？如果能把它找到的话，就真的帮大忙了。

[7] 我们两个还是尽量不掺和这事了……

[8] 我会帮您留意的，道尔夫人。我大概知道该问谁。安妮，你能跟我去''小维的房间(Vic's room)''说几句话吗？

[7] 亲爱的，这不怪她！

[2] 小维，没关系。我会去和达米安谈谈的。反正也不是我做的。

[@] 楼上传来一连串碰撞声。

[7] 那你们俩就好好相处吧。我去看看楼上的情况。

[8] 小维，如果你想找我，就到''客厅（Living room）''弹奏钢琴吧，我会去那里找你。

[@] 如果他们想单独谈话，其实不应该选''客厅（Living room）''的！第三者进入房间的可能性也很高，按理说应该能够提前想到的。不知道他们为什么还要抱怨这个。

[@] 他们四人都离开了房间。
</tw-passagedata><tw-passagedata pid="46" name="08-MA-3-5" tags="07-DI-1-2-4-5-6-7-8-9 04-KI-3-10-11 03-AT-2-3" position="1025,1600" size="100,100">[@] 3号人员进入房间，有衣柜和抽屉被开关的声音。5号人员稍后进入了房间

[5] 不好意思，请问你在我的卧室里干什么？

[3] 这里过去是我父母的卧室。

[5] 好吧……奥斯瓦尔德，晚饭好了，你可以到楼下和我们一起吃。不然饭就要凉了。

[3] 我喜欢等所有人都吃完了再吃。你把这房间弄得太难看了，我父母住在这里的时候要比现在好看得多。

[5] 好吧好吧，真不好意思。但是说句难听的，你未经我的允许就进入我的卧室，我真的很不高兴，这是践踏我们的好意！

[3] 我可觉得，你对我这点情绪应该是今晚最小的事了。

[5] 你在暗示什么？

[3] 其他的客人可要更有精神呢，你难道没注意到吗？那位住在旧育婴室里的客人可是在床头柜的抽屉里藏了一把枪！

[5] 你是说托尼？肯定是搞错了！你说真的？

[3] 哦，千真万确。有位喝醉的年轻女性对我的妹妹指指点点，另外一位似乎对什么事深感愧疚，虽然我也不清楚到底是什么事。

[5] 这个我很能理解，奥斯瓦尔德。但这也不是你侵犯我们隐私的理由啊！我觉得其他客人肯定也是这么想的。

[3] 这里曾经是我家族世代相传的祖宅。我有权利知道这里在发生些什么！

[5] 很不好意思，你现在已经不是房子的主人了！你现在是客人，我还是希望你好好当你的客人。

[3] 你一个人住我父母的双人床，你都没有个丈夫。你是个冒用姓名的货色！这房子本该是我家的！

[5] 你没资格说这话！立刻给我滚出去！

[3] 看你摆的这些没用的东西……

[@] 听起来像是一系列物品碰撞地面的声音。

[5] 停下！停下！

[3] 你不属于这里！

[@] 他离开了。5号人员坐到床边，抽泣起来。</tw-passagedata><tw-passagedata pid="47" name="09-DI-1-3" tags="07-ST-3 10-TO-1-4" position="650,1725" size="100,100">[1] 不好意思——请问你是奥斯瓦尔德先生吗？

[3] 抱歉，今晚我已经被打扰太多次了。我想一个人安静地吃晚饭。

[1] 我明白……其实……我先前找到了这把钥匙……

[3] 啊！是''教堂（Chapel）''的钥匙。感谢你。你刚刚想问我什么？

[1] 你有没有听过鲁伯特·嘉利这个名字？

[3] 鲁伯特？在我的家族里，这是个常见的名字。我有位叔祖父叫做鲁伯特，不过我也没有见过他。

[1] 我猜，他是不是早就去世了？

[3] 是啊，他不是我们这个时代的人。不过这栋房子一直保留着过去人们留下的记忆……你问这个做什么？

[1] 你有注意到吗？今夜已经出现了两位死者。其中一位是鲁伯特·嘉利……至少我觉得是。

[3] 好吧，确实有点意思。你能带我去看看尸体吗？

[1] 我之前回现场去看了看，尸体已经被搬走了。

[3] 另一具呢？

[1] 我想他应该是那位管家。我们刚刚在楼下发现了他的尸体。

[3] 许多年前我们家曾有一位管家，他的名字是乔治·索顿（George Thornton）。你有什么头绪吗？ 

[1] 没有……我也才刚来。我对这家人一点都不熟悉。

[3] 既然你都进了门，其实这就已经不是偶然了。存在即合理。你肯定已经和这栋房子有所联系，只是你自己也不知道罢了。

[1] 如果你不介意的话，能和我解释一下你来到这里的原因吗？

[3] 我是受邀来到这里的，虽然我似乎不太受欢迎。

[@] 外面传来一声雷鸣。

[3] 啊呀！骇死我了。

[1] 我想起来了……我们大家吃饭的时候，你不是唯一缺席的人，对吗？

[@] 注：他不是。

[3] 那个时候我在过去曾经作为图书室的房间里，现在好像是被临时改造成了一间卧室。地板有点黏黏的。我在那里找到了找到了一张便条，上面写着一次演出的相关信息，演奏的是德沃夏克的幽默曲。不过，上面写的这次演出的钢琴演奏家我从来没听过。

[@] 注：我花了点时间查他所说的曲子，拼写应该没问题，虽然原文的字体要更花哨一些。我听了其中第一首曲子，不过也没听出什么名堂。

[1] 嗯……我有种感觉，房子里应该有人在隐瞒什么。同一天发生两起死亡事件，这应该不是偶然……

[3] 我恰好知道一条重要信息。你可以去''托尼的房间（Tony's room）''看看，让他给你看看他床头柜里藏了什么——你会因此而谴责他……

[1] 谢谢你的情报。抱歉打扰你用餐了。

[3] 没关系，比起给你提供情报，这番对话给我提供的信息量可能要更大！

[@] 1号人员离开了，3号人员继续用餐。
</tw-passagedata><tw-passagedata pid="48" name="09-ED-6-10" tags="03-KI-10-11" position="775,1725" size="100,100">[@] 门开了。

[6] 我就知道该来这里找你。

[10] 关上门吧。我听说这儿有坏人。

[@] 门关了。

[6] 我给你带了热可可。

[10] 谢谢，小艾。

[6] 介意我坐在你旁边的床沿上吗？

[10] 我们不是已经订婚了吗？

[6] 啊？对哦。之前的事我很抱歉。

[10] 我也有错，别太自责了——不是你的错。

[6] 我真的很抱歉。要喝点热可可吗？

[10] 很好喝，不过我之前喝过了。这杯的味道和索顿平时给我做的一模一样。这是不是从他放在炉子上的壶里直接倒出来的？

[6] 谁是索顿？你认识那个管家吗？

[10] 我当然认识了，小艾！你在逗我玩吗？

[6] 好吧，这应该不重要。知道我之前找到了什么吗？

[10] 哦，我听说了……

[6] 不是！我说的是另外的。我是想说，我找到了这个戒指。怎么样，是不是很漂亮？

[10] 啊！很漂亮！你是要再向我求婚一次吗？我们已经欠了一场婚礼没办啦！

[6] 亲爱的，你愿意嫁给我吗？

[10] 好了好了给我吧！你又调戏我……你今天不太对劲啊。

[6] 是不对劲，我爱上了一个女孩。

[10] 嘿，行吧。我只知道，这女孩真是太幸运啦！

[@] 气氛逐渐暧昧。我还是不多写了。

[6] 伊芙，我爱你胜过这世上所有一切。

[10] 嘴巴真甜，小艾。其实你也不赖。

[6] 要是知道爬上那座山我就能……遇见你，我一定会去爬最高的山！

[10] 小艾！

[@] 他们的动作越来越大胆，接着，一声雷鸣打断了亲热的两人。

[6] 上帝啊……***的……

[@] 他爬起身。

[6] 这个……这是我的……

[@] 略有停顿，接着有一些很轻的声响。他离开了。</tw-passagedata><tw-passagedata pid="49" name="09-VI-2-8" tags="07-DI-1-2-4-5-6-7-8-9 06-LI-2-9 10-DI-2-3" position="1150,1725" size="100,100">[8] 安妮，我就长话短说了。你把怀表放哪了？

[2] 我不知道你在说什么。你要问的就只有这个了吗？

[8] 我不会责备你的，告诉我在哪。

[2] 你本来也不应该责备我！我什么也没做！

[8] 我不傻，安妮。别演了。

[2] 哦，你不傻？那你怎么会觉得是我偷了东西？我都没去过''海伦的房间（Helen's room）''。

[8] 我没说是你偷的，海伦说你知道是谁偷的。而且我看见你和托尼在晚饭的时候交头接耳，托尼又说他要去拿个东西。对我撒谎没有意义，安妮。

[2] 我发誓，我和这件事情无关。

[8] 好。那你能提供什么线索吗？

[2] 听上去你已经什么都知道了。托尼八成把它藏在了别的地方。

[8] 这就够了。听我说，安妮，我是和你的姐姐睡在一起，但这不代表我们俩就要像仇人一样。

[2] 哼，玛莎没让你睡''阁楼（Attic）''算你运气好。

[8] 哈哈哈！也没那么差吧。你有见过其他人吗？

[2] 我和托尼聊过，就是这次谈话把我拉进了麻烦事。接着就在晚饭开始之前，我去了''客厅（Living room）''，那里只有海伦在。我以为这个地方会更有生气一点的。

[8] 至少发生的这些事让我很感兴趣。

[2] 我可不觉得尸体有意思。

[@] 外面一声雷鸣。

[2] 好应景啊。

[8] 你不认识鲁伯特·嘉利，对吗？我觉得你应该不认识。

[2] 不认识。不过我见过有个怪人在房子里游荡……他很久之前应该住在这里。我会去问问他。

[8] 尽量委婉地跟他传达一下这些新的进展吧。如果某个死者是他的亲属，他应该也会伤心的……

[2] 谢谢你，宝贝。你太贴心了！mua！

[@] 你可能没看出来，但是最后一句话是阴阳怪气。</tw-passagedata><tw-passagedata pid="50" name="09-TO-4-9" tags="" position="900,1725" size="100,100">[@] .门打开了，4号人员进入房间。他打开抽屉，接着是某种调试机械的声音。9号人员进入房间。

[9] 托尼，亲爱的。见到你姐姐了吗？

[4] 老妈……我现在忙着呢……

[9] 这很重要，托尼！我觉得她跟小艾之间发生了什么不愉快。你能去和她聊两句吗？

[4] 我本来就要去找她聊聊的。不愉快是说什么？

[9] 你知道这次订婚对他们两位有多大的意义。年轻的恋人会因为一点小事就在婚姻开始前丢弃自己的婚约，我太清楚了。我是觉得，搞清楚她有没有变心是很重要的，就是这样。

[4] 那你怎么不自己去跟她说？

[9] 我还是不要掺和了。她不希望我干涉的。托尼，你比我更懂她。

[4] 你竟然还会关心她。你们俩可是一见面就吵架的。

[9] 托尼！我做任何事都是为了你们俩好，你心里清楚。为了让你们能健康成长，我吃了多少苦啊！

[@] 外面一声雷鸣，对话稍有停顿。

[4] 我很感激你，妈妈。我现在有点忙，你没有什么事要跟我说的话，我先走了？

[9] 托尼啊，你和这些陌生人、和这些奇奇怪怪的事情没关系吧？我的怀表都丢了。

[4] 也许反过来是件好事呢。你原本是为什么要把它带来的呢？

[9] 我也不清楚。我和玛莎也没那么熟——我们怎么就到她家里来住了呢？还有外人进来的。我好奇他们请我们来的真正原因。

[4] 哼，只要不波及我们，就放着不管吧。如果有人来找你说些有的没的就大声喊我，我会来帮你。

[9] 希望我不用这么做！

[4] 我也希望，妈妈你自己小心点。我会在你身边。

[9] 别担心，亲爱的。我能照顾自己。

[@] 9号人员离开了。4号人员在口袋里翻找着什么。

[4] 去哪了？怎么没了？</tw-passagedata><tw-passagedata pid="51" name="09-MA-5-7" tags="06-DI-5-6-7" position="1025,1725" size="100,100">[@] 7号人员进入房间，此时5号人员正在低低地抽泣。

[7] 玛莎？你还好吗？

[5] 我没事……谢谢你来看我。我需要一点时间平复一下心情，之后我马上就下楼。

[7] 我的天啊……你的东西怎么掉了一地？

[5] 没事的，真的。至少没东西打碎。

[@] 7号人员坐到床上，坐在5号人员身边。

[7] 如果说今晚你觉得压力特别大，那正说明你在面对这些麻烦和解决麻烦！要是我的话，光是要给这么多人忙前忙后准备一场盛大的晚餐就已经太难了。

[5] 谢谢你能这么说。我真的很希望能让大家都平稳度过今晚，但没想到会有外人进来，也没想到会有人死……好像我自己家的房子不受我的控制那样。

[7] 如果我的话让你觉得轻松些许，其实你的接受能力就已经比某些客人强了。我说真心话，玛莎，我都不知道你是怎么能这么镇静的！是你的存在在鼓励着我们。

[5] 你可能认为我管家这么久已经习惯了吧。实际上管家太难了，管着这么大的房子，还要一个人把儿子带大，这么多年都过来了。但有的时候，我还是会迷茫，会不知所措。

[7] 我一直想问……为什么你戴着这戒指？我小的时候好像没注意过。

[5] 我不知道，也许我戴着戒指，人们就会认为我是有丈夫的，这能让我看起来更强势吧……不过，现在我早习惯了一个人生活。

[@] 我猜，她很大可能是摘下了戒指，并把它放在了抽屉里。虽然不能确定。

[5] 晚饭前，我们三个人在''餐厅（Dining room）''的时候，我想和你说点事来着，维多利亚。

[7] 什么事？

[5] 我……在小艾面前我说不出口。但是今天能见到达米安我真的很高兴。你们两个在一起的时候，看起来是那么快乐……未来他会是个好丈夫的，哈哈，别介意！

[7] 谢谢，玛莎。你能喜欢他我也很高兴。不过他本来不是很想来这里的，希望他能玩得开心点吧！

[@] 外面传来一声雷鸣。

[5] 维多利亚……我很高兴你和小艾还能做朋友。你们小时候是那么亲密无间。

[7] 能见到他很高兴。但我能问一句吗，就是随便问问——他现在有在谈恋爱吗？我不想问他本人。

[5] 哦，我不清楚。他有事情总是憋着不说。

[7] 好吧……希望他也能得到自己的幸福。我知道，不管最后他和谁在一起，他都会给对方幸福的。

[5] 我也觉得！谢谢你来鼓励我，维多利亚。

[7] 不用谢！有事就叫我。

[5] 我过会儿就下楼去，能帮我和大家说一声吗？我得先把房间打扫干净……

[@] 7号人员离开了，5号人员开始打扫房间。</tw-passagedata><tw-passagedata pid="52" name="10-ED-8" tags="" position="1150,1850" size="100,100">[@] 门被打开。

[8] 女士，你在吗？——很抱歉打扰你。

[@] 他走进房间。

[8] 女士，你还醒着吗？我想问你几个问题，可以吗？

[@] 他提高声音，走近几步。

[8] 我在找一块怀表。请你告诉我，你有没有见过它？我问完就走。

[@] 他向房间中再踏入几步，接着脚步停滞，开始摸索什么。不久，外面传来钢琴声，他离开了。</tw-passagedata><tw-passagedata pid="53" name="10-DI-2-3" tags="03-AT-2-3 09-DI-1-3 11-OS-2-3" position="650,1850" size="100,100">[2] 又见面了……你就是奥斯瓦尔德，对吗？

[3] 明明我没做过自我介绍，为什么每个人都知道我的名字？希望不是有人在背后议论我！

[2] 没这回事！我们之前见过一面，记得吗？在''阁楼（Attic）''里。你还说过……

[3] 不用再说了，我记得自己都说过什么。你打扰我用餐又是有什么事啊？

[2] 哦，不好意思！没事，不重要。

[3] 唉，孩子，我郑重地向你道歉。请坐，我不是故意要这么说话的。

[@] 她坐下了。

[3] 那么，今晚下着这么大的雨，你是出于什么原因来到这座嘉利别墅呢？

[2] 我是和我姐姐一起来的。我基本不认识其他人，这是实话。这栋房子也不过是一个暂时的住所。

[3] 可不止如此，孩子。这栋别墅的历史相当悠久。

[2] 看起来确实。实际上……我想找你说的是……你认识鲁伯特·嘉利吗？

[3] 我大概知道你想问什么了——有人告诉我这件事了。非常有意思。

[2] 你认识他？我也不了解这个人，我只知道他死了。

[3] 是的，我认识他……在很久很久之前，他曾住在这房子里。不过，他应该早就去世了——至于他今晚神秘出现的原因，我并不知晓……

[2] 天啊！你说的是真的？

[3] 我和你一样诧异！不仅如此，他们刚才回去调查尸体的时候，它竟然消失了！

[2] 太恐怖了……应该是有人想故意吓我们吧，你觉得呢？也许是有人想拿回属于自己的东西，也许就是鲁伯特拿走的？

[3] 说不定……但鲁伯特不是唯一的死者。他们还在''厨房（Kitchen）''里找到了老管家索顿的尸体，我还是个孩子的时候他就在这里当管家了！

[2] 又一个？我不明白……

[3] 这栋别墅有它深藏的秘密，而现在居住于此的人们不会知道他们面对的是什么。

[2] 希望你不介意我再问一句，我听说有一位姑娘过去曾经住在''阁楼（Attic）''，关于她，你能告诉我一些其他情报吗？呃，就当做补充情报吧，她可能也与现在发生的事有关联。

[3] 不如我们到楼上，去我的卧室聊聊？我可以给你看一些许多年前留下的东西，可能能给你提供一些灵感。

[2] 哦……好的！我去！

[@] 两人离开了房间。一阵钢琴演奏声传来。</tw-passagedata><tw-passagedata pid="54" name="10-TO-1-4" tags="11-LI-1-7-8" position="900,1850" size="100,100">[@] 门被敲响，然后打开。

[1] 嗨！我们大概没有正式打过招呼……

[4] 你来了？进来吧，我也正想找你说话呢。

[1] 太巧了！我也想找你聊聊。

[4] 怀表在哪？

[1] 我没见过什么怀表，我自己也没有带着怀表。你丢了一块怀表吗？

[4] 怀表不在我这儿，也不在我妈那儿。如果你是找怀表的话就别问我了，纯属浪费时间。

[1] 我不是要找怀表！

[4] 你来这里肯定是要找什么东西。我可不信你跑这么老远就是为了来看一眼。

[1] 我来这里是因为收到了鲁伯特·嘉利的邀请函。

[4] 真的吗？我只在那个装着怀表的盒子上见过这名字，就这一次。现在那块表没了。

[1] 我明白你的意思……那……这和我又有什么关系？

[4] 就是你偷了表。

[1] 他为什么要特地请我来偷他的表？

[4] 我推测，要么鲁伯特·嘉利这个人根本不存在，要么他是某位嘉利家已经去世的亲属。你伪造了邀请函，目的则是偷取他的所有物。现在，你有什么话说？

[1] 听我说，我明白你怀疑我的动机，因为我的确来得无缘无故……但我也在想办法证明我的清白。我和你一样对现在发生的事感到困惑，我们可以一起把这件事查清楚，这样会容易得多。

[4] 我一点也不困惑。我知道你在欺骗别墅的主家，我只想表明态度：我不想和这些事扯上关系。只要别扯上我，我就不介意。

[1] 好吧。

[@] 突然响起一阵急促的脚步声，接着是抽屉被打开的声音。

[1] 啊哈！这又是什么？

[4] 还能是什么，只是一把警用左轮手枪。你怎么知道它在抽屉里的？

[1] 然后呢？刚才你还想把锅都甩给我！

[4] 别碰它！我不是想责怪你什么——我告诉过你了，我根本不在乎你想干什么。我只在乎我自己的事，我也只是在为自己做打算而已！

[1] 今天晚上有两个人死了，而你的抽屉里刚好有一把手枪？

[4] 两个？等一下，有人是被枪击而死的吗？

[1] 我可没说是枪击。不过你的嫌疑很大，不管是不是枪击都一样。

[4] 哈，别嘴硬了！我和这些事一点关系都没有，这很清楚。我都不认识这里的人！

[1] 哼，那我也是啊！
 
[@] 一阵钢琴声响起。

[4] 好！那我们就是一条船上的了。现在，请你出去。

[1] 哦……钢琴！

[4] 你说什么？

[1] 我之前注意到有钢琴，但我没有想到……我得去看看。

[@] 1号人员离开房间，抽屉被关上。</tw-passagedata><tw-passagedata pid="55" name="10-MA-5-6" tags="09-ED-6-10 08-MA-3-5 11-TO-4-5 11-BI-6-9 12-TO-6" position="1025,1850" size="100,100">[5] 小艾？你还好吗？

[@] 6号人员坐在床边。

[6] 有……有人把一具尸体放在了我的房间里。

[5] 你是在开玩笑吧！是之前那一具吗？

[6] 不是……是一具女人的尸体。看起来和我差不多大。

[5] 天啊！太可怕了。你知道她是谁吗？

[6] 我认不出。我想应该是有人在房子各处留下尸体，想恐吓我们。尸体看起来都很新鲜。

[5] 真不敢相信！不过，我也有我怀疑的对象。

[6] 我在''厨房（Kitchen）''也找到一具尸体——这一具看起来像是我们的佣人……有这么个人吗？

[5] 谁？今天应该没有任何佣人在。

[6] 那这具尸体一定也是用来吓唬我们的。我倒了点热可可，之后回到了我的房间。我在房间里先是待了一会，不知道我怎么就没有早点发现那具尸体……

[5] 应该是你本来就有点心不在焉，没事的。

[6] 这还不算完——我躺在床上，但也没有发现它就躺在我的旁边……

[@] 有趣的描述！虽然，这并不完全是事实。

[5] 亲爱的，这一切都太可怕了。不过我或许有头绪了……可能是你叔叔奥斯瓦尔德干的。

[6] 哦……他没有和我们一起吃晚饭。他其实不算我的叔叔吧？

[5] 当然不算了！他之前还来威胁我。好像就因为他之前住在这里，所以这房子就该归他呢！

[6] 我会去找他聊聊。我才不管外面下了多大的雨，这房子里容不下他了。

[5] 亲爱的，他很危险！如果你去找他当面对质，他说不定会对你做什么呢……

[6] 妈妈，我必须这么做！

[5] 我听说托尼的床头柜抽屉里有一把枪。我会去把他引出房间，你进去把枪拿着。你觉得怎么样？

[6] 好……反正我对他也没有什么信任。

[5] 就是这样，亲爱的。我们要按照我们的方式去和他对峙！

[6] 还有一件事……我在尸体上找到了我的戒指，但我却不知道它是怎么到了尸体上！它之前在我手上，这一点我记得很清楚，因为是小维把它交给我的。但我不知道我是怎么又把它弄丢的……

[5] 一定是他趁你没注意的时候偷走了。唉，在尸体上找到戒指一定让你很不舒服吧……

[6] 就好像有人在故意捉弄我一样。他觉得我不配作为别墅的主人，总不可能是因为我还没有未婚妻吧？

[5] 不管怎样，至少我们确定是他做的了。这样一来事情很快就能结束了。

[6] 我会在''台球室（Billiard room）''等你。你确定是他做的？

[5] 我很确定。

[@] 他们两人都离开了房间，钢琴声从远处传来。</tw-passagedata><tw-passagedata pid="56" name="10-LI-7-9" tags="09-MA-5-7" position="775,1850" size="100,100">[@] 7号人员进入房间，呻吟一声。9号人员进入房间。

[9] 孩子，你还好吗？你的脸色不太好。

[7] 你好……你是海伦，对吗？玛莎说她会……不好意思……

[9] 坐下吧，孩子。别自己硬撑。

[7] 谢谢你……我没事，真的。我听说你的怀表丢了。

[9] 会找到的。你现在感觉怎么样？

[7] 哦……没什么。我大概是吃错了什么东西吧！

[9] 没事的，我也经历过。

[7] 啊……我还是第一次。

[9] 我还记得我第一次的时候特别焦虑！第二次甚至要更糟糕。

[7] 哦？我大概只见过其中一位。

[9] 你肯定见过托尼。我的第一次……最后没有结果……不过至少托尼平安降生了。抱歉了，我不是故意想吓你！

[7] 没事，我不介意！能有个人一起聊这件事真好……

[9] 亲爱的……他知道吗？

[7] 我会告诉他的。回了家我就告诉他。

[9] 你可一定要好好珍惜他啊。我发现自己第二次怀孕的时候，战争刚刚爆发...我只能在丈夫从前线休短假回家时告诉他这个消息。一切都显得那么不真实——就像一场戏。我们总以为战争结束后生活还会继续，一举一动表现得仿佛真会如此...但他再也没能回来。托尼从没见过自己的父亲。

[7] 为你感到难过。我都不敢想你是怎么挨过来的。要是我没有达米安在身边……

[9] 别这么想。瞧我，我不应该提这事！

[7] 不，真的很感谢你……能和你聊天很高兴。感谢你的建议。

[@] 片刻后，钢琴的乐声响起。

[9] 抱歉，孩子——我好像还不知道你的名字？

[7] 我……我叫维多利亚·马赛科（Victoria Maseko）。

[9] 那么，希望你能平平安安的。待会见。

[@] 9号人员离开房间。</tw-passagedata><tw-passagedata pid="57" name="01-BI-6-10" tags="" position="775,700" size="100,100">[@] 其他房间传来钢琴平和的演奏声。对话正进行到一半。 

[10] ——这次你就听我的吧！

[6] 你什么意思？

[10] 我真的很期待今晚的聚会。毕竟我全家人都来了，你假装在乎我也要装得像一点吧？

[6] 我真的很抱歉。你早点告诉我你过生日嘛，早知道我就给你买蛋糕了！

[@] 外面传来一声雷鸣。

[6] 亲爱的，我错了，我们回''客厅（Living room）''去吧。

[10] 哦，然后呢？然后你就再在大家面前开我的玩笑，然后一晚上再也不理我是吗？

[6] 我没有不理你，伊芙，我们还有别的客人嘛！你觉得我真的要和你那倒霉弟弟聊一晚上他过得有多惨吗？他还跟我说他去当兵就是为了好玩！这，他是认真的吗？

[10] 别扯上托尼，你知道他有他的问题。你也知道我不是因为这个生气！

[6] 伊芙，我真的很抱歉。就告诉我我到底哪里做错了吧——哎呀呀，你少喝点威士忌吧——

[10] 干什么？哦，少喝点我就能在客人面前更有礼貌了是吗？

[6] 我们都想过得舒服点，别把大家的美好时光也给毁了。

[10] 哦，肯定的，你就是想和那个漂亮女孩度过点美好的时光吧……

[6] 别这样！我告诉过你了，我不想聊到——

[10] 我都看到了，你看她的眼神！这不公平，你把她请来，然后无视我，就好像我不存在！

[6] 我是这家的主人，我不需要你来告诉我该请谁来！

[10] 我们都已经订婚了，小艾！你最少也要跟我说实话吧？承认吧，你对她还有感情。

[6] 你没完了，是吧？我从来没想过和你订婚之后，你会比之前更小心眼！早知道我就不给你什么戒指了！

[10] 我……我受够了。

[@] 有什么东西撞到墙上弹开了，她离开了房间。

[6] 伊芙，我不是那个意思！**的，东西掉哪儿了？她会杀了我……

[@] 前门被敲响了。</tw-passagedata><tw-passagedata pid="58" name="11-LI-1-7-8" tags="09-ED-6-10 10-LI-7-9 08-KI-1-6 10-TO-1-4 04-BI-6-9 11-BI-6-9 12-BI-1-2-3-4-5-7-8-9 10-ED-8" position="775,1975" size="100,100">[8] 小维？发生什么事了吗？

[@] 钢琴声停。

[7] 我没事，宝贝。过来我这儿。

[8] 真没事？

[7] 我刚刚在这里和别人聊天……不是什么大事。我只是想你了。

[@] 1号人员进入房间。

[1] 真是架好钢琴……

[8] 霍布斯先生，你怎么在这儿？我和小维正想——

[1] 哦，不好意思不好意思！我不会打扰你们的，我只是想检查一下这架钢琴，很快的。

[7] 宝贝，你找到怀表了吗？

[8] 我找到了，但它其实不重要。房间里还有一个人，一开始我没看出来……我还以为只是睡着了……

[7] 等等……又有人死了？

[8] 我不知道那是谁——是个年轻的女性。真是让人不忍心看。

[7] 她有和我们一起吃晚饭吗？我在想这会是谁……

[1] 啊，你们或许会对我找到的另一具尸体感兴趣，就在楼下的''厨房（Kitchen）''。我对此没有任何头绪。

[8] 事情不对劲。这不像是事故。

[7] 但怎么会有人做出这种事呢……没有任何理由啊……

[1] 可能是毒药……可能根本不是故意的。这个可能性如何？

[8] 我不知道……可能是吧。我没有观察到任何伤口或者挣扎的痕迹。

[7] 哦天哪……太可怕了。我觉得不是。

[1] 我刚刚和一个叫托尼的男孩聊了聊，他床头柜的抽屉里有一把枪！我知道至今为止没有出现任何枪击，但是……

[8] 你觉得小艾知情吗？

[7] 宝贝，他和这事没有任何关系。这根本说不通。到底是出于怎样的动机才会做出这样的事？这些死去的人到底是谁？

[1] 我认为小艾今晚一整晚的举止都很可疑！其次就是奥斯瓦尔德了——你们见过他吗？

[8] 这里还有其他我们不认识的人吗？

[7] 他过去住在这里。我小的时候，大人不允许我进''奥斯瓦尔德的房间（Oswald's room）''。但我也没见过他本人——他也在这里？

[1] 他在，我之前见过他！他是这里最疯的一个人了。

[8] 小维……我们离开这里吧。我不想眼睁睁看着这些事继续。

[7] 我明白，亲爱的。我们把怀表还给它的主人，然后就离开这里。我妈妈的房子就在几英里之外……我们带上安妮，然后就走。

[1] 哦，我不建议你们这么做！''鹌鹑小道（Quail Lane）''现在应该被雨水淹没了，其他地方也是泥泞不堪……

[8] 那我们只能再等一夜了……

[7] 没关系的，宝贝。我们两个就待在一起，我们都会没事的。反正我们两个和这件事没关系的。安妮也一样……但愿如此。

[1] 等一下……嘘！

[@] 能听到''台球室（Billiard room）''里两个人的声音。详细对话请查看对应场景文件。

[1] 是谁？

[7] 是海伦的声音……

[1] 还有一个人在……是个男人。我听不清楚。

[7] 她说什么——离我的孩子远点？难道是……

[@] 一声尖叫。

[1] 哎呀！

[8] 别，小维——

[7] 快，我们赶快过去！

[@] 所有人都冲出了房间。</tw-passagedata><tw-passagedata pid="59" name="11-OS-2-3" tags="11-BI-6-9" position="650,1975" size="100,100">[3] 到了。

[2] 哦……你有段时间没收拾过这里了吧。

[3] 自从我多年以前离开这里，就没有任何人再来动过这间房了！这里保留着许多回忆。来，我们坐床边吧。

[@] 他们坐下了。

[2] 你之前说要给我看点什么东西？

[3] 是的，孩子。所有我画的画都放在这里——我年轻的时候经常作画。

[2] 这画的是你的家人吗？

[3] 是的——这个是我，这两位是我的父母。我离开家之后就再也没有联系过他们……

[2] 那么这个就是她了？

[3] 这是我的姐姐埃莉诺（Eleanor），她对我很好。我小的时候，她会陪我在花园里玩耍。父母忙得没法照顾我的时候，她会照顾我。我们创造了只属于我们两人的小小世界……失去她的那段时间非常难熬。

[2] 发生什么事了？

[3] 她的身体越来越虚弱，最后只能每天待在她的房间里，就是那间''阁楼（Attic）''。父亲母亲都很担心她，接着有一天我们上楼去看她，她已经……

[2] 太糟糕了。

[3] 一直以来我都心知肚明，不能与父母谈论这件事。我觉得他们最爱的孩子还是她。所以，我长大成人后便离开了家。

[2] 那……这个人又是谁？

[3] 嗯？我不太确定，他可能是埃莉诺生病之前交的朋友吧。

[@] 能从这里听到''台球室（Billiard room）''传来的一声尖叫。

[2] 你听到了吗？

[3] 很难听不到！

[2] 希望她没事……我们应该去看看情况。

[@] 他们都冲出了房间。</tw-passagedata><tw-passagedata pid="60" name="11-TO-4-5" tags="09-TO-4-9 11-LI-1-7-8 11-BI-6-9 12-BI-1-2-3-4-5-7-8-9" position="900,1975" size="100,100">[@] 门再次被敲响，接着门被打开。

[5] 你好啊，托尼。我能进来吗？

[4] 进来吧。

[5] 你和你妈妈没吵架吧？

[4] 没事。她之前还在这里和我说话来着。

[5] 那就好。有你们两位在这里真是太好了。

[@] 她顿了一下，没有说话。

[5] 那么……其他所有人应该都在楼下的''客厅（Living room）''，你想和我们一起吗？

[4] 不想，谢谢。

[5] 你确定吗？那，作为交换，我可以帮你从''厨房（Kitchen）''带点吃的？

[4] 我也不饿。

[5] 好吧。

[4] 你为什么要这么看着我？

[5] 我觉得你还是应该跟我下楼，一直待在房间里可不健康。

[4] 是出什么事了吗？

[5] 不……我是……我很担心你。

[4] 玛莎，我的话可能不太好听，但你家里已经到处都是外人了。你更应该操心其他更大的事。

[5] 我很清楚现在发生的事是怎么一回事。

[4] 你确定吗？我不想直接说的，但是我真的觉得有些人想整你。我知道我们今天才刚认识，但我妈的朋友可不多，我至少是很感谢你能和她做朋友的。

[5] 托尼，你能为我着想我很高兴。但该相信谁，我还用不着你来告诉我！

[4] 你真觉得霍布斯先生是清白的吗？因为我很确定：关于他来这里的原因，他撒了谎。能大老远的来一趟，他一定是知道什么内情。

[5] 他是我的客人，就和你一样！

[4] 至少我是和你们有所关联的！不久前……我和我妈在这里说话，她前脚刚走，霍布斯先生后脚就进了门，探头探脑的找什么东西。他可能也不知道事情的全貌，但他肯定脱不了干系。

[5] 不过，你也没把你的事和盘托出啊，我说的对吗？

[4] 什么？

[5] 托尼……我知道你有一把枪。

[4] 我确实有！但这也不代表——

[5] 我知道，孩子。但是……这栋房子里有坏人啊。或许我们需要像你这样的人站在我们这边。

[4] 我不想掺和，抱歉。我……我对现在发生的这些事觉得恶心。我不知道该相信谁……

[5] 你很担心你妈妈，对吧？

[4] 有一点吧，我确实担心她。

[5] 我明白，亲爱的。如果你需要任何帮助，或者如果你妈妈和其他人起了什么冲突，我都会帮助你们的。你明白我的意思吗？

[4] 谢谢你，玛莎。

[5] 过来吧，孩子。

[@] 音频稍有停顿，我觉得应该是他们拥抱了一下。

[5] 那个，我觉得——

[@] 在这里能够听到''台球室（Billiard room）''传来一声尖叫。

[4] 是我妈的声音……

[@] 抽屉被拉开，接着关上。

[5] 托尼，不要！放下枪！

[@] 他们两人冲出了房间。</tw-passagedata><tw-passagedata pid="61" name="11-BI-6-9" tags="12-BI-1-2-3-4-5-7-8-9" position="1025,1975" size="100,100">[@] 6号人员进入房间，开始打台球。9号人员随后进入房间。

[9] 小艾，大家都在哪里？我怎么一个人都找不到呢。

[6] 他们都在房子各处……去''客厅（Living room）''等一会儿吧，他们一定会聚集到那里的。我待会也会去——我只是……我需要整理一下思绪。

[9] 我这一整天都没见过几个人！如果有什么事情发生，我也有知情的权利。否则要我看，现在的情况简直就像是你这个做主人的玩失踪，把我们母子两个客人晾在一边了！

[6] 我很抱歉，道尔夫人。我需要的就是一点时间，之后我向您保证，所有事情都会恢复正常的。请您耐心些，再等待一两个小时，好吗？

[9] 年轻人，我不欣赏你那轻浮的态度。告诉我发生了什么。

[6] 好吧。房子各处出现了三具尸体，我们认为是客人中的某一位试图以此恐吓我们。但我们已经着手处理了。

[9] 哼，你从一开始让外人进门就是错的！我看这是你们自作自受。你该去和那个外人谈谈。

[6] 请你不要指挥我！我已经说过了，我在整理思绪。

[9] 但是你现在看起来就是无所作为！你找到戒指了吗？还是说你放弃了？

[6] 戒指？对……我找到了。如果你想要的话就拿去吧……我不想要了。

[9] 我给你戒指是有原因的，小艾。我女儿呢？

[6] 你女儿？

[9] 你最好不是在这阵忙乱中把她给忘了！我之前应该把对你的期望说得很清楚了。艾德蒙，要是她出了什么事，可是有后果的。

[6] 我照你说的找到了戒指。如果你还想要我做什么其他的事，那你应该先告诉我！

[9] 现在，别跟我扯这些了，年轻人。她在哪？

[6] 好吧，我有关注每位进门的客人，没看到有其他人进入这栋房子。除非……

[9] 我记得她是在你的房间里睡觉。你应该赶快去那里和她和好！拿着这戒指，小艾。

[6] 啊，天啊……我……

[9] 小艾？

[6] 她……您的女儿去世了，道尔夫人。

[9] 你这话什么意思？这不可能。你为什么没早点说出来？

[6] 我……我不知道！你应该告诉我你有个女儿，这样我才有可能做点什么！

[9] 小艾，别胡说八道了！去找她，好好照顾她。

[6] 我说过了……

[9] 艾德蒙·嘉利，你事到如今还跟我玩文字游戏？你要为我女儿的安全负责！你这种行为真让我恶心，不仅恶心而且惊愕！你就是这样招待客人的？

[6] 我不知道你女儿是哪位！你为什么觉得我和这事有关？

[9] 你说什么？

[6] 如果你是真的很关心你女儿，那你应该早点跟我提她！不能因为我是房子的男主人，你就指望我去照顾所有人吧！

[9] 你真是个怪物，小艾！你怎么敢对我的家庭关系说三道四？离我的孩子们远点！

[6] 你这又是说什么？你根本没有女儿吧？你也是幕后黑手？

[9] 离我远点！我要叫了！我要喊人来，我儿子有枪！

[6] 我都不知道为什么我那么相信你！我一直想表现得尽量礼貌谦恭，到最后是为了什么？你和其他人一样，对我来说都是外人。

[@] 一声非常响的尖叫。

[6] 好吧！我们走着瞧。

[@] 6号人员离开房间，不久后，别墅里所有其他人进入房间。</tw-passagedata><tw-passagedata pid="62" name="12-BI-1-2-3-4-5-7-8-9" tags="13-ST-1 13-AT-2 13-OS-3 13-TO-4-6 13-MA-5 13-VI-7-8 11-BI-6-9" position="650,2100" size="100,100">[8] 发生什么事了？

[9] 他……是他杀了伊芙……

[7] 冷静一下，我们会查清楚的……

[@] 外面一声雷鸣，有人倒在了地板上。

[1] 我的天啊……

[4] 这是怎么一回事？

[7] 我不知道……我们也是刚刚发现她在这里。

[5] 天啊……又一个……

[8] 我们听到刚才这里还有一个人。有人看到他去哪儿了吗？

[4] 我没遇见其他人……

[2] 这是怎么了？为什么大家都在？

[7] 安妮……很高兴你没事。

[3] 是真的……他们回来了……

[5] 把这个人赶出去！

[3] 我什么也没做！不管你的房子里到底出了什么事，我都没参与！

[8] 所有人，冷静一下！有人知道她是谁吗？

[2] 她……她死了吗？

[5] 和其他尸体一样，是有人想吓我们。他们肯定是早就死了……

[8] 我觉得不是……尸体还是温的。

[7] 如果之前房子里真的多出四个人，肯定会有人注意到的！我不明白这些人是从哪里来的。

[2] 等等，这已经是第四具了？

[4] 可能是某种疾病吧。也许他们都是从附近的医院跑出来的。

[5] 托尼，请你认真一点！

[2] 怎么没人提一句我们之中还有两个外人呢？

[4] 那真是谢谢你指出来哦，小安。至少我和约翰是被邀请来的。

[2] 你是吗？

[7] 你们俩，闭嘴！

[8] 听我说……现在我们都去睡觉，都把门锁好。所有的门都有锁吗？

[5] 是的，亲爱的——都可以从内部反锁。

[8] 那么就这么办，我们都去睡觉，看看明天早上会发生什么。

[1] 玛莎，你给警察打过电话了，对吗？

[5] 我……是的，我打过电话了。他们说明早才能到这里。

[@] 明显是谎言，非常有趣。

[8] 好。那么在天亮之前，我们都锁好门，别让其他人进门。

[5] 各位，今晚的事情非常抱歉。我相信明天一切都会解决好的，所以不用担心！晚安，祝大家睡个好觉！

[@] 注：时间码“13”代表夜晚。除了4号和6号，大多数人只是独自或与伴侣回房睡觉。不过我还是详细记录了每个人的情况。</tw-passagedata><tw-passagedata pid="63" name="13-ST-1" tags="" position="1025,2225" size="100,100">[@] 1号人员进入房间，锁好门。

[1] 至少尸体没在这里……

[@] 他上床睡觉，很快睡着了。不久后，有一声雷鸣。

[1] **的，真响啊……

[@] 他继续睡觉了。正常人会像这样子自言自语吗？我不记得了。</tw-passagedata><tw-passagedata pid="64" name="12-TO-6" tags="" position="775,2100" size="100,100">[@] 6号人员进入房间时，外面刚好传来一声雷鸣，一个抽屉被打开。

[6] **的！它在哪？

[@] 他搜遍了房间各处。

[6] 肯定在他手上……

[@] 暗门被打开的声音，接着是暗门被关闭的声音。</tw-passagedata><tw-passagedata pid="65" name="13-TO-4-6" tags="14-LI-6" position="775,2225" size="100,100">[@] 4号人员进入房间，锁上门。他睡前做了各种各样的准备，接着上床，不久开始打鼾。

[@] 一扇暗门被打开。脚步声接近床边。一个抽屉被打开，接着外面传来一声雷鸣。

[@] 一瞬间，房间里鸦雀无声。4号人员继续打鼾，脚步声从床边离开，接着反锁的门被打开，最后关上。

[@] 注：6号人员整晚都醒着待在''客厅（Living room）''，不过我就不费事记录他抽鼻子的声音了。他在"14-"场景的客厅开始了新的一天。</tw-passagedata><tw-passagedata pid="66" name="13-MA-5" tags="" position="1275,2225" size="100,100">[@] 5号人员进入房间，锁门，入睡。不久后一声雷鸣，无事发生。

[@] 从某种意义上说，这平凡得令人毛骨悚然。让我不禁怀疑类似的事情是否已经在我身上发生过。

[@] 我想这可能会是个不受欢迎的观点，但我确实觉得这样更好。她值得在生命的最后时刻获得幸福。

[@] 或者，谁知道呢，也许这是我内心的斯德哥尔摩综合症在作祟。</tw-passagedata><tw-passagedata pid="67" name="13-OS-3" tags="" position="1150,2225" size="100,100">[@] 3号人员进入房间，锁门。他醒着待了一会儿。

[3] 能回家真好。

[@] 不久一声雷鸣，似乎是这声音让他下定决心睡觉去了。</tw-passagedata><tw-passagedata pid="68" name="13-AT-2" tags="" position="900,2225" size="100,100">[@] 2号人员进入房间，锁门。

[2] 我怎么**的没关窗户……

[@] 她关上了窗，接着入睡。不久后有一声雷鸣。

[@] 之后便再无声响，只剩下她轻柔的呼吸声和偶尔翻身时的窸窣动静。

[@] 而我就该到此为止了，对吧？快进到她醒来的那一刻。

[@] 说来也怪。大多数时候我并不怀念与人接触的感觉——我有电影和电视作伴。但要我听别人入睡的呼吸声？这个自己一个人听就不太好了。

[@] 总之，没有其他怪事发生。</tw-passagedata><tw-passagedata pid="69" name="13-VI-7-8" tags="11-LI-1-7-8 08-DI-2-7-8-9 12-BI-1-2-3-4-5-7-8-9 15-VI-1-2-4-5-7" position="650,2225" size="100,100">[@] 他们进入房间，锁上了门。

[8] 你在找什么？

[7] 其他的……你知道我在说什么。我只想确认一下。我可不希望大晚上的从衣柜里跳出一具尸体！

[8] 别这样，小维。我们在这里很安全。

[7] 我知道，亲爱的。而且，你会保护我的，对吧？

[8] 当然，但是请你不要再像刚才那样突然跑开了，小维。我不喜欢一个人和其他人相处。

[7] 亲爱的，我会一直在你身边的。反正明天一早我们就离开这里，也不需要和其他任何人说话。

[8] 我觉得霍布斯先生是个可疑人物，你觉得呢？我们能就这一点达成一致吗？

[7] 我说不准……我觉得他还是挺值得信任的，他就不像是会说谎的人。但我也明白你的意思——比如说，他到底是为什么在这里，又为什么要在客厅偷听我们的对话？

[8] 小维，我这一整天都感觉好像是有人在盯着我。我不能再待下去了，否则我就要疯掉了。

[7] 我知道发现尸体是很吓人，但我不觉得这是有人故意做的。别难过啦，至少我见过的每一个人都和我说你很好，他们很喜欢你！我觉得不用担心。

[8] 我还是不相信他们。为什么你要弹奏钢琴？发生什么事了吗？

[7] 没事。我只是想见见你，亲爱的。不过谢谢你能马上冲进来找我！

[@] 他们躺到床上。

[8] 小维，我不喜欢这房子，在这里没有安全感。

[7] 我们会没事的！如果你真的很担心，就一直锁着门，直到警察来再开门吧。

[8] 哈哈！要不就这么办吧！

[7] 好啊！然后我们就去''温特考特（Wintercote）''找妈妈。

[@] 注：拼写是这样没错，但念起来和 "hot" 押韵。就像 "Winter-cot"。（反正他俩后来都没去那儿）

[7] 亲爱的，那是什么？

[8] 你应该知道这事啊，小维。道尔夫人请我晚饭后帮她找到这东西……啊，这太糟糕了。我刚才没……我没认出那是她……

[7] 你在说什么？

[8] 为什么没人指出来呢？她的怀表丢了，她问过许多问题，现在，她死了……她儿子刚刚也在场——他甚至一点都不伤心！

[7] 你是说之前发现的那位死者吗？你认识她？

[8] 我当然认识，小维！其他人也应该能认出她的……他们肯定也认识其他那些死者……他们是在隐瞒什么！

[7] 冷静一下，亲爱的，别这样……

[8] 不行！有什么不太对劲。非常、非常不对劲。你是不会对我撒谎的，对吗？

[7] 我绝对不会……

[8] 那么，在我去''客厅（Living room）''之前，你是在和谁说话？你和我说过的，你在和其他人聊天……

[7] 没有这回事，亲爱的。我不知道你是怎么了，你真的吓到我了！

[@] 她确实有点吓到了！

[8] 好吧……抱歉。但……房子里其他人都在满嘴跑火车。我们不能信任他们了，小维。

[7] 这不重要。只要我们还在这里，就没人能伤害我们。我们安安心心睡觉吧，明早，你再和我解释这一切，好吗？

[8] 好。我爱你，小维。但我同样迫不及待想离开这里了。

[7] 我也爱你，亲爱的。所有事情都会好起来的。

[@] 他们都睡着了。不久，一声雷鸣响起。

[@] 你现在应该已经开始看出这个案子与我们当前这个案子的相似之处了。但如果你还没想明白，不妨看看15‑VI‑1‑2‑4‑5‑7。</tw-passagedata><tw-passagedata pid="70" name="15-VI-1-2-4-5-7" tags="14-VI-7 13-VI-7-8 14-AT-2-4 16-KI-1-2-3-4-6 16-DI-5-7" position="650,2500" size="100,100">[@] 其他人陆续来到房间外，开始敲门。

[1] 门被反锁了！里面的人还好吗？

[7] 又来一个，就在屋里！我一醒过来，它……我不明白……

[5] 孩子，你得先从里面打开门，要不然我们也帮不了你！

[7] 我知道……我知道……

[@] 门锁被打开。

[1] 我不敢相信……

[5] 亲爱的，你没事吗？

[7] 我没事——只是……

[1] 这怎么可能？晚上你有打开过门锁吗？

[7] 没有！我发誓，我刚醒过来就看到它在这儿……

[1] 你可能没有排查过房间各处。

[7] 我真的都看过了……

[5] 没关系的，孩子。

[2] 小维，发生什么了？

[1] 他看起来挺壮实的……要移动这样一具尸体恐怕也不容易。

[7] 我不明白……

[5] 这不是你的错，亲爱的。

[4] 那……它是怎么进入房间的？

[1] 这里有一块怀表。你之前不是说你丢了一块怀表吗？

[4] 对！它到底怎么**的到那儿去的……

[7] 我看见了！昨天晚上……

[@] 传来一声枪响。

[4] 我的枪！一定是我的枪！

[1] 什么？

[4] 我刚才在''阁楼（Attic）''和安妮说过这事，我的枪昨晚消失不见了！和这房间的情况一样。我明明反锁了门……

[1] 太好了。现在有谁不在场？

[2] 小艾和奥斯瓦尔德不在。

[1] 我们得去找他们……

[@] 1号、2号和4号人员一起跑出了房间。

[5] 亲爱的，跟我来''餐厅（Dining room）''一趟吧。我们倆吃点早饭。

[7] 好。谢谢你，玛莎。

[@] 她们两人也离开了房间。</tw-passagedata><tw-passagedata pid="71" name="00-act-structure" tags="" position="1025,575" size="100,100">[@] 我将整个故事分成了四幕（Act），每幕分别包含的时间码如下：1~6,7~13,14~20,21~26。如果想在文件列表快速切换，可以输入“list 2”指令，这会将你引导到第二幕的文件列表。我个人给故事的每一幕取了标题：

第一幕（ACT I） ...... 无知（IGNORANCE）
第二幕（ACT II） ..... 困惑（CONFUSION）
第三幕（ACT III） .... 恐怖（TERROR）
第四幕（ACT IV） ..... 清算（THE RECKONING）

[@] 你可以输入指令改动幕的标题，如“act 1 初来乍到”。&lt;&lt;set $seen_act to true&gt;&gt;</tw-passagedata><tw-passagedata pid="72" name="01-QU-1-11" tags="00-invitation" position="650,700" size="100,100">[@] 外面的雨越下越大，说话声有些难以分辨。

[1] 倒霉！它卡住了。你能再使点劲儿吗？

[@] 发动机一声咆哮，接着是几秒钟的混乱。

[11] 不行！发不动！先生，我们还在原地。我也没办法了。

[1] 好吧……我看也只能这样了。

[11] 明天再试试吧，先生。至少等天亮些……

[1] 倒霉！这玩意儿！这倒霉天气。抱歉，你是鲁伯特（Rupert）的佣人吗？

[11] 从我记事起就是了，先生。

[1] 好吧，希望他知道我因为他遭了多少罪……

[@] 头顶传来一声响亮的雷鸣。在其他场景你能听到同样的雷鸣。

[11] 先生，请您跟着我走。别墅就在不远处，请留意脚下。

[1] 谢谢你……天杀的，我真不应该穿这双鞋……

[11] 先生，请问……您是嘉利一家的朋友吗？

[1] 从没听说过！你知道我是为什么被邀请来的吗？

[11] 我也不清楚，先生。但我们今夜的确有几位客人……这肯定会是个难忘的夜晚！

[1] 奇怪……我这周早些时候收到了一封请柬——我不知道是谁发来的，不过我还是来了……我现在才发现这点子有多疯狂！

[@] 注：有关人员搜索尸体时找到了这封请柬。文件“00-invitation”中有详细信息。

[11] 我觉得您来很正常，先生！在嘉利家的别墅作客可是件不可多得的事。如果您有任何需求，只管跟我说。

[1] 哦，这儿就是别墅了？

[11] 是的先生，走上台阶就是''门厅（Entrance）''了。请您敲敲门，嘉利先生会为您开门的。

[@] 11号人员匆匆走开了，1号人员走上台阶，敲了敲门。</tw-passagedata><tw-passagedata pid="73" name="14-LI-6" tags="" position="775,2375" size="100,100">[@] 他在房间里踱步，逐渐地能够听见房子其他各处的声音。他自言自语起来。

[6] 他必须照我说的做，我手里有枪。

[@] 过了一阵子。

[6] 好安静啊。

[@] 钢琴开始弹奏。这是与“01”场景中所弹奏的同样的曲目。稍后，能够听见7号人员的叫喊声，6号人物离开房间。</tw-passagedata><tw-passagedata pid="74" name="14-VI-7" tags="" position="650,2375" size="100,100">[@] 她处于熟睡状态。当钢琴开始弹奏时，她醒来了。

[7] 我的天啊……

[@] 她跌跌撞撞爬下床，大声喊着其他人。</tw-passagedata><tw-passagedata pid="75" name="14-AT-2-4" tags="13-TO-4-6 15-VI-1-2-4-5-7" position="900,2375" size="100,100">[4] 小安，你醒了没有？小安？

[@] 稍有停顿，接着门锁被打开，门开了。

[2] 干什么？

[4] 我能进来吗？

[2] 发生什么事了？你干嘛要吵醒我？

[4] 我就是想找你聊聊，可以吗？

[2] 聊什么？

[4] 我的枪……不见了。

[2] 你还有枪呢？

[4] 我去哪儿都带着它，并不是特意想用它做什么坏事。但现在它没了！

[2] 你应该锁门的。

[4] 我锁了！我真的锁了。但是早上醒来的时候，我发现门锁是开的……

[2] 你确定睡觉之前还拿着它吗？

[4] 我一直都很小心的，小安。我不会随便把它丢在一边。说实在的，我现在感觉非常不安，你是整栋房子里我唯一认识的人了！

[2] 你到底是为什么要来这里啊？

[4] 我也不知道！我……我的意思是，你觉得这和那些不断出现的尸体有关吗？

[2] 也许吧。昨天他们发现第一具尸体之后不久，第二次到现场查看情况的时候，尸体消失了。这事你知道吗？

[4] 你开玩笑的吧？

[2] 奥斯瓦尔德说过，所有尸体都是过去曾经在这栋房子里生活过的人。等会儿，现在房子里总共有多少人？

[4] 七个，对吧？

[2] 我不觉得这么几个人能做这么多事。我觉得……嗯，算了，有点怪。

[4] 呃……有没有一种可能，真的有幽灵或者鬼？不是我疯了？

[2] 不管怎么说，这与这座房子无关，一定是这样。你还记得你曾经说过的那个，以前住在阁楼里的女孩吗？

[4] 那只是我从别处听来的故事……我也不知道是不是真事。

[2] 这就是我们仅有的线索了。我们必须查明真相。

[4] 我不确定……我还是不要参加比较好。

[2] 托尼，拜托。我们得坚持到底啊。

[@] 能够听到7号人员的叫喊。

[2] 这声音是小维吗？天哪……

[@] 他们冲出了房间。

[@] 注：他们还以为是幽灵诶！考虑到他们是过去的人，这么解释还挺有趣的。不过，现在人们也还在用“幽灵短信”、“幽灵照片”和“幽灵账号”这些说法就是了。</tw-passagedata><tw-passagedata pid="76" name="14-DI-1-3-5" tags="08-MA-3-5 15-VI-1-2-4-5-7" position="1025,2375" size="100,100">[5] 早上好，约翰！你昨晚睡得好吗？

[1] 挺好的，再次感谢你，玛莎。

[5] 来吧，约翰，吃点烤面包片。

[1] 啊……谢谢你。

[5] 抱歉让你卷入所有这些事件……这真是件可怕的事。而且我敢肯定，做这些事的人只是想吓唬我们，让我们离开这所房子。

[1] 你知道是谁做的吗？

[5] 他基本上是自己把自己给暴露了！你见过奥斯瓦尔德了吧？我昨天抓到他在我的房间里鬼鬼祟祟，那时候我吃过晚饭在找他。他说觉得我不配做房子的主人，他才应该拥有这栋房子的所有权！

[1] 哦……是这么回事啊。

[5] 他演都不演一下的，这说的也太直接了！

[1] 确实……那么，你之后有为此做些什么吗？

[5] 还没。先把这些事当做我们两个的秘密吧。事情会解决的。

[3] 啊……早上好。

[1] 早上好……

[5] 奥斯瓦尔德！你昨晚睡得好吗？

[3] 你好像没有告诉过我你的名字？

[1] 我是约翰，约翰·霍布斯。

[3] 霍布斯先生，请你告诉我——你觉得这栋房子怎么样？

[5] 约翰，你没必要和他说话。

[1] 我——好吧。我觉得房子挺好的。

[3] 那你觉得这房子的主人如何呢？

[5] 请停一下！如果你是要吃我们的食物，我希望你还是……

[3] 我正想和这位客人好好聊一聊呢！你没地方待了是吧？

[5] 你怎么敢——

[@] 背景中传来钢琴声。

[3] 我认为在昨晚的谈话中，我已经把我的态度说明得很清楚了！我很抱歉把你的卧室弄乱，但是——

[5] “弄乱”？我知道你到底做了什么！你等着被抓吧！

[@] 能听见7号人员的叫喊。

[1] 你听到了吗？我们应该——

[5] 听起来是维多利亚……

[@] 这两人冲出了房间。3号人员留在这里吃饭。</tw-passagedata><tw-passagedata pid="77" name="16-KI-1-2-3-4-6" tags="17-DI-6-7 21-LI-1-2-4 17-KI-2-3-4 17-MA-1-5" position="650,2625" size="100,100">[6] 给我进去。

[3] 求你了……别杀我……

[6] 安静。

[@] 听起来是食品储藏室的门被关上并锁死了。注：我将食品储藏室也视为''厨房（Kitchen）''的一部分，因此没有代表食品储藏室的独立代码，只有厨房。

[@] 其他人到达厨房。

[1] 找到他了！他在这儿！

[6] 冷静！一切都在我掌控之中。

[2] 奥斯瓦尔德人在哪？他还好吗？

[3] 我在这儿！我还能听见你们说话呢！

[@] 他的声音有些闷。

[2] 你**这是做什么，小艾？让他出来！

[4] 嘿！那是我的枪！怎么到你手上的？

[6] 那什么，让你们经历这么多事我也很抱歉！但我保证，事情从现在开始就会回归正常了。

[2] 你根本不知道我们面对的是什么！快把他放出来，他是唯一知道发生了什么的人。

[6] 你说的也没错！那我保证，如果接下来事件还会继续发生，那我们就把他放出来。但我同样可以保证：事件不会继续发生了。

[2] 你压根没懂我的意思！

[4] 把枪还给我！

[6] 我不能还给你。对不起，这是我家，我需要掌控大局。你离开别墅的时候我会还给你的。

[4] 我不找出真相是不会离开的！

[6] 你疯了吗？

[1] 我们大家都冷静一下吧。我觉得这是个好主意，我们就让他待在里面，直到——

[2] 你又算老几？

[6] 不管你们怎么想，我手里有枪，我拿着食品储藏室的钥匙。别想搞什么花样。小安，你姐姐在哪？我要和她谈谈。

[2] 你自己找去吧。

[6] 行吧。

[1] 等一下！大家分开之前……如果有人有新的发现或是想召集大家的时候，就到''客厅（Living room）''弹奏钢琴吧。到时候我们都在那里见面。这样可以吗？

[3] 那我呢？

[1] 召集的人不包括奥斯瓦尔德。

[6] 当然可以。反正也不会有任何事发生的。

[2] 你的想法大错特错，小艾。

[6] 别在这里指责我了！为什么你就不能像你姐姐那样？

[@] 6号人员离开了。

[3] 他走了？

[4] 他们又**在说些什么？

[3] 霍布斯！我要跟你说点事……

[1] 啥事？

[3] 我想起来了……我想起来我是在哪遇见玛莎的了……

[1] 哦？是在哪？

[3] 是在她的婚礼现场！我出席了她的婚礼……去问问她，她嫁给了谁……

[1] 啊……好，我会去问她。

[@] 1号人员离开房间。其他人员留下。为方便起见，我将接下来的文字分割到了下一个文件。</tw-passagedata><tw-passagedata pid="78" name="15-DI-3-6" tags="16-KI-1-2-3-4-6 14-DI-1-3-5" position="775,2500" size="100,100">[6] 按我说的做，站起来，双手抱头。

[3] 哦！早上好啊，小艾。那是真家伙吗？

[6] 当然是！我是认真的，站起来。

[3] 小艾，不好意思，我早饭才吃到一半呢。事实上，刚才我和两位朋友在这里谈话——

[6] 结束了，奥斯瓦尔德。我不会给你第二次机会。

[3] 我还记得你小时候会叫我“叔叔”。看来那段时光也已经过去了，是吧？

[6] 这栋别墅属于我的家族。你没有权利来到这里。

[3] 孩子，把枪放下。威胁我也没有什么好处。

[6] 我说让你站起来！别让我说第二遍！

[3] 冷静。让我先吃完早饭——

[@] 子弹发射的巨响。玻璃杯被打翻。

[6] 站起来！双手抱头！

[@] 椅子发出刺耳的刮擦声，除此之外一片寂静。

[6] 接下来跟我下楼去''厨房（Kitchen）''，听懂了吗？

[@] 沉默在持续。两人离开了房间。</tw-passagedata><tw-passagedata pid="79" name="16-DI-5-7" tags="15-DI-3-6 09-MA-5-7 17-MA-1-5 25-WI-K" position="775,2625" size="100,100">[5] 天啊……这是谁搞的。

[7] 那上面是弹孔吗？他们到底在这儿做了什么？

[5] 亲爱的，肯定没什么大事的。要吃点面包片吗？

[7] 真的，我都饿坏了……我昨晚什么都没吃。你确定食物安全吗？

[5] 怎么会不安全呢？

[7] 抱歉……我也不知道，脑子里乱乱的。

[5] 那就吃点吧。你经历得太多了！

[7] 太糟糕了……我不明白它为什么会进到我的房间里来……昨晚肯定有其他人进过我的房间……

[5] 没关系的，就算发生什么事，也肯定不是冲着我们来的。要是想对我们做什么，之前这么多机会也都没做，对吧！这些人只是想吓唬我们。

[7] 我不喜欢这样。感觉就像是有人在和我们玩一场游戏。你确定没有其他办法进入我的卧室吗？

[5] 别想了，亲爱的。至少我们所有人都还好。要是我家的客人受伤……我都不敢想！

[7] 是啊。

[@] 他们停了下来。你几乎能听到楼下其他人提高了嗓门。

[5] 发生这一切我真的很抱歉，维多利亚。

[7] 没关系！反正天亮了，我现在就出发去''温特考特（Wintercote）''吧。和妈妈在一起我会觉得更安全。

[5] 我也有段时间没见到你妈妈了。我这个朋友当得！她还住得那么近，离这里只有几英里。需要我开车载你去吗？

[7] 不用了，我自己走过去吧。

[5] 亲爱的，你确定吗？

[7] 我没事！你已经够忙的了。不是说警察要来了吗？

[5] 是啊……不过，也许我们可以自己解决这个问题。

[7] 希望你们能找到真相。不，应该说，你们肯定会的。

[5] 谢谢，维多利亚。也谢谢你昨天来安慰我……我当时的状态真是糟透了。很抱歉让你看到我那副样子。

[7] 没关系。

[5] 我之前没说，不过……我注意到你把手链摘下来了？

[7] 我知道……只是气氛有点奇怪。我觉得他可能生我气了，但我只是想当朋友。

[5] 我想他有时也会想你。

[7] 嗯……但我现在也有我的生活了。

[5] 当然！抱歉，维多利亚。我最好上楼去检查一下''主卧室（Master Bedroom）''，确保家具没有损坏！

[@] 5号人员离开，7号人员继续用餐。

[@] 注：我可能找到了我一直在寻找的最终线索！如果我没想错，这或许可以验证我的理论。但愿他们还保留着那具尸体……</tw-passagedata><tw-passagedata pid="80" name="17-MA-1-5" tags="01-LI-3-5 16-KI-1-2-3-4-6 18-AT-1-4" position="900,2750" size="100,100">[5] 约翰……你查出是谁开的枪了吗？

[1] 大家都很好！没什么可担心的。小艾似乎觉得现在一切都在掌控之中。如果有人弹钢琴，我们就都去''客厅（Living room）''集合。

[5] 啊，这下可算松了口气！我确实很心疼房子，但这也没办法……

[1] 我其实想说——你楼下那架钢琴真漂亮。是新买的吗？

[5] 确实是最近刚买的！我想不起来我们为什么决定买它了，不过小艾倒是挺喜欢音乐的。

[1] 你说巧不巧，我正好在镇上的钢琴行工作！不过我们也不卖那种钢琴。

[5] 昨晚要是让它多演奏一会儿就好了，可惜最后只让它正常运转了一次。奥斯瓦尔德和我当时还在欣赏它……在他露出真面目之前。现在想想，我那时还那么努力地保持礼貌！

[1] 哦——小艾把他锁在储藏室里了！我忘了说。希望他不要再生是非了。

[5] 约翰，你应该先说这个！你可真逗。不过这样我就放心了。希望接下来咱们能愉快地度过这一天！

[1] 玛莎，有件事……希望你不介意我问，但你……有过爱人吗？

[5] 能再说一遍吗？

[1] 抱歉，可能太唐突了……我只是对你的家庭结构有些困惑。

[5] 我一直独身生活。这种生活并不适合所有人，但对我而言刚刚好。还有，我就说在前头，我不知道小艾的父亲是谁。希望你别把那些评判带进这个家门！

[1] 我不是有意冒犯！我只是……好吧。奥斯瓦尔德告诉我……他记得你的婚礼？

[5] 约翰，要是我就不会信那人说的任何一个字。

[1] 不，我当然也不信！我只是想确认一下。

[5] 嗯……我确实有过一场婚礼，算是吧……我还为婚礼准备了一件漂亮的礼服！但我并没有结婚……我从未结过婚。那感觉更像是为我举办的一场庆祝活动……让我想想。这里应该还有一些旧照片……

[1] 还有一件事……我刚到这儿的时候，差点被楼上掉下来的东西砸到脑袋！这栋别墅上下，有没有能俯瞰''门厅（Entrance）''的房间？

[5] 去看看''阁楼（Attic）''吧，约翰。不过我很确定，那是我们那位关在食品储藏室里的朋友做的。啊，找到了，是我的老相册……

[1] 如果没问题的话，我现在就过去。

[@] 他离开了。</tw-passagedata><tw-passagedata pid="81" name="17-KI-2-3-4" tags="15-DI-3-6 18-AT-1-4" position="650,2750" size="100,100">[2] 他走了，奥斯瓦尔德。你还好吗？

[3] 我很好，孩子！我会没事的。

[4] 我们听到一声枪响！他有没有——

[3] 枪口没有瞄准我。反正我很乐意待在这里——这房子的主人会得到应有的报应……

[2] 你是什么意思？能告诉我们发生了什么吗？

[3] 亲爱的，我在这栋房子里住了很久……即使是我也从没见过这样的事。

[4] 我们认为……也许，正在发生的事情无法用物理手段来解释。你觉得呢？

[@] 他说得很慢，就好像是正在尽力不要让这句话显得太荒唐。

[3] 我想这一点已经很清楚了。下一步就是要找出导致这一切的原因。而我对此已有怀疑……

[2] 你以为这些事都是针对现在房子的主人吗？这说不通。他们从我小时候就住在这里，从来没有发生过这样的事情。

[4] 也许和怀表有关？它可能属于——

[2] 怀表太新了。

[4] 好吧，我也不知道，应该吧。它出现在这里肯定是有原因的。是谁把它放进盒子里，还在上面写了“鲁伯特”？肯定有人知道些什么。

[3] 我没听过这怀表有什么历史。这听起来也不像一般而言的超自然活动。

[2] 你很懂超自然活动吗？

[3] 我吗……我也从来没直接遭遇过，至少是在这之前……

[4] 现在来看，肯定是有人做了什么事引发了这一切。而且能做这件事的人并不多。

[2] 是不是你扔那个娃娃的时候就已经全完蛋了？**的！我让你住手你偏不听，你这个**！看看我们现在落到什么地步了！

[4] 小安……我发誓……

[3] 有一个我能想到的，唯一可能有答案的地方。

[2] 是哪里？

[3] ''教堂（Chapel）''。但很可惜，唯一的钥匙在我身上，和我一起被关在这里面。

[4] 旧''教堂（Chapel）''？不能直接破门进去吗？

[3] 你可以试试……不怕死的话。

[@] 略有停顿，你可以听到楼上传来的高声争吵。

[2] 我应该去看看楼上发生什么了……

[4] 你等会，那奥斯瓦尔德怎么办？

[2] 小艾拿着钥匙呢。听我说，你去楼上我的房间……那里有个能用来说服他的东西。

[4] 小安——

[2] 去吧，在''阁楼（Attic）''等我。我待会会去找你的，不会太久。

[@] 她离开了，接着他也离开了。</tw-passagedata><tw-passagedata pid="82" name="18-AT-1-4" tags="19-AT-1-2" position="775,2875" size="100,100">[4] 嘿！别拉那个！

[1] 为什么？这会拉动什么东西吗？

[4] 别碰任何东西，都有可能搞坏。你到底在这里做什么？

[1] 我就是来看看。

[4] 你不该来。你根本不知道自己在调查什么。

[1] 我倒觉得挺安全的。你是不想让我看到什么东西吗？

[4] 行，你要是想在这里待着那就待吧……我也不会待多久。她说的是这个吗？我想应该是……

[1] 这房间到底是用来干什么的？有点吓人啊。

[4] 是一个已经死掉的女孩的卧室。我觉得你应该能看出来。

[1] 是啊，我看见这间娃娃屋了……

[4] 别碰别碰！你疯了？

[1] 干什么，你怕鬼还是怎么？

[@] 小小的停顿。

[1] 拜托……你不会是认真的吧……

[@] 外面一声雷鸣。

[4] 那**是什么声音。说真的，怎么**的回事！都没下雨哪儿来的雷声啊！

[@] 和其他人一样，这声音在我听来也酷似一声雷鸣。

[1] 怎么回事？你们几个推理出什么结果了？

[4] 待会再见，霍布斯。我……这太**了！我得走了。小安马上就到这里，你问她吧。告诉她我已经解出真相了。

[@] 4号人员离开。</tw-passagedata><tw-passagedata pid="83" name="18-KI-3" tags="" position="650,2875" size="100,100">[@] 听起来像是3号人员在吃什么东西。

[@] 有铃声响起。

[@] 不久，一声雷鸣。此外无事发生。</tw-passagedata><tw-passagedata pid="84" name="18-MA-5-6" tags="16-DI-5-7 10-MA-5-6" position="900,2875" size="100,100">[6] 妈，能聊两句吗？

[5] 不是现在，亲爱的。我有点忙。

[6] 我去和小维谈了谈。还记得我之前得到的那枚戒指吗？嗯，我想我……我问了小维……

[5] 我的天啊……

[6] 妈！我和你说正事呢！

[5] 小艾，现在不是时候。我在看重要的东西……

[6] 我求婚了，妈妈！我向她求婚，但她拒绝了。她说她心里有别人。我就这样失去了这个世界上对我最重要的人。

[5] 亲爱的，我认识你们俩很久了。我相信你们之间的问题会解决的。我需要一些时间来看我手上这些……

[6] 妈妈，我需要你的帮助。我不知道该怎么办。你就不能听我说两句吗？

[5] 现在不行，小艾！你就不能自立一点吗？昨天发现那具女尸后你第一时间跑来找我，现在又跟我抱怨感情问题——难道你看不出我跟你一样焦头烂额吗？我这儿正忙着处理事情，要是你能学会自己解决问题而不是一有事就找我，那才是真的帮大忙了！

[@] 外面一声雷鸣。

[6] 抱歉。我这就走。

[5] 小艾，亲爱的！我不是故意发火的。我是真的忙着看这个……你到底怎么了？

[6] 我也不知道。没事了。待会见吧。</tw-passagedata><tw-passagedata pid="85" name="18-VI-2-7" tags="09-VI-2-8" position="1025,2875" size="100,100">[7] 呜啊啊，亲爱的……亲爱的，我很抱歉……

[2] 小维，发生什么事了？

[7] 他……怎么会？我们锁上了门……我们今早就要离开的……

[2] 你在说什么？你认识这具尸体吗？

[7] 安妮……你也认识他的，对吧？快告诉我，我们俩的精神都还正常。

[2] 我不明白，小维。我不知道你在说什么！

[7] 上帝啊……安妮！求求你！想起来啊！是他开车载我们来这里的啊！

[2] 我们车上没有司机，小维，车里只有我们俩。你冷静点好不好？

[7] 昨天晚饭后……你走进这间房间。安妮，你那时在和谁说话？

[2] 我没有和任何人说话，小维。我可以发誓！我只是进来看了两眼。你要为这个骂我两句吗？

[7] 安妮，求求你……我求你想一想……

[2] 你吓到我了，小维。你是不是撞鬼了？是这么回事吗？

[7] 安妮……

[2] 我们认为这些人是过去曾经住在这里的人！如果你能看到幽灵，也许你可以和他们交谈。你能做到吗？小维，你在写什么？

[7] 拿着这个。我不知道发生了什么，但我们不能再让这种事发生。安妮，我不能再失去你了，你明白吗？

[2] 这是什么？

[7] 你就……随时看着它。别再忘记任何人。如果你发现自己忘记，就来找我。我……我要去和其他人也说说这事……

[2] 小维，这纸上就只是我们的名字啊。你在房子里还看到其他人了吗？那有可能是——

[7] 没有什么其他人，安妮。只有我们。

[2] 那这个是谁？

[7] 是达米安。你还记得吗？我们……

[@] 一声雷鸣，接着是有人倒下的声音。

[2] 天啊……同一个地方又出现一具尸体。这不可能是巧合。

[@] 2号人员离开。</tw-passagedata><tw-passagedata pid="86" name="19-DI-4-6" tags="20-KI-3-4" position="900,3000" size="100,100">[@] 6号人员进入房间，给自己倒了些饮料。4号人员进入房间。

[6] 进来吧，进来吧！来，坐下坐下。

[4] 你看起来很开心。

[6] 我想庆祝一下！来，跟我喝一杯。你想喝点什么？

[4] 我不想喝酒。我想跟你谈谈。

[6] 没有什么比与你这样的绅士畅聊一晚更让我期待的了。不过，你得先喝上一杯才能开口说话！

[4] 那我就来一杯……你随便挑吧。

[6] 好小子！

[@] 又倒了几杯酒。

[4] 我找到了这条手链。这对你有什么特殊意义吗？

[6] 你猜怎么，我楼上也有一个一模一样的手链！我们现在成了一辈子的朋友？永恒的伙伴？干杯！

[4] 我知道这对你有特殊意义。只要你把储藏室的钥匙交出来，我就把它给你。

[6] 我们喝酒时就不谈公事了，好吗？说实话，我也没理由要它啊。

[4] ***，小安！完全没作用。我们再想办法……

[6] 别急着走啊。你还记得我才是老大，对吧？坐回去，好好喝你的酒。

[4] 那可是我的枪。

[6] 是把好枪，对吧？你看见天花板的弹孔了吗？

[@] 4号人员坐回座位，电话响了起来。

[6] 别管它。我们已经玩得很开心了，你不觉得吗？

[4] 你抓错人了，这是个误会。

[6] 哎呀，别这么酸溜溜的！别忘了你可是客人！而且还不是我请来的！

[4] 我又不想来！

[6] 你可真是个狡猾的老鼠，是吧？拿她的手链来威胁我？你这个恶心的胆小鬼。

[@] 他开始哽咽，好像要哭出来了。

[4] 哦，所以这东西确实有意义！

[6] 这并不意味着什么。她肯定再也不会想起我了。我本该只把她当朋友的，可我连这点都做不到……

[4] 把储藏室的钥匙给我，小艾。我能搞定。

[6] 太晚了……我总不能把说出来的话再咽回去……

[4] 行了吧你！

[@] 一声雷鸣。无人言语，但电话铃声还在响。有人挪动了什么东西，接着有翻找口袋的声音。随后，4号人员离开。</tw-passagedata><tw-passagedata pid="87" name="19-AT-1-2" tags="18-AT-1-4 18-VI-2-7 00-list-of-names 20-DI-1 20-LI-2-5" position="775,3000" size="100,100">[2] 你在找什么东西吗？

[1] 啊——托尼让我告诉你，他刚离开。我不知道他去哪儿了，但他看起来挺匆忙的！

[2] 太好了！真是个大**。他拿走了手链，是吗？

[1] 我不确定，我也没看见。

[2] 该死！他根本不知道自己在做什么。你就别管了。

[1] 我想我们还没正式认识过。我是约翰。

[2] 你知道我的名字吗？

[1] 嗯……之前我应该听到过。你是安妮，对吗？

[2] 这房子里总共有多少人？

[1] 总共有我们六个人……还有几具尸体。你难道是找到除此之外的其他人了吗？

[2] 我发现了另一具尸体，就躺在今早发现的那具旁边。它们可能有所关联。

[@] 注：她省略的部分有点多了！

[1] **的……如果这些事件还在继续，我们应该把那个可怜的人从食品储藏室里救出来！你知道这到底是怎么一回事吗？

[@] 一阵电话铃声传来。

[2] 我发现了一份名单。我敢发誓那上面本来有屋里所有人的名字……但我刚刚又核对了一遍，有个名字我不认识。

[@] 名单内容见："00-list-of-names"。

[1] 鲁伯特·嘉利？

[2] 不是。你认识一个叫小维的人吗？

[1] 没听说过！

[2] 我不知道这名单是什么意思……我猜它可能是其中一具尸体的名字。

[1] 或者是幕后黑手的名字！

[2] 可能吧……我也不知道。

[@] 一声雷鸣。电话还在响。

[1] 我们得去把奥斯瓦尔德从食品储藏室里放出来。你知道钥匙在哪儿吗？

[2] 不，找不到那东西的话，我们无能为力……该死！就没人去接那个电话吗？

[1] 玛莎怎么不接呢？

[2] 一定是出什么事了……我去看看她是否安好。你去''餐厅（Dining room）''接电话。

[1] 如果是……

[2] 接就是了。

[@] 两位都离开了房间。</tw-passagedata><tw-passagedata pid="88" name="20-DI-1" tags="19-DI-4-6 19-AT-1-2 21-LI-1-2-4" position="900,3125" size="100,100">[@] 注：本场景中的“K”指的是电话另一端的人。她并不在房间里，所以我没有把她包含在这份文件的代码中。

[1] 你好？

[K] 你好——我是凯瑟琳（Katherine）。我找玛莎，她在吗？

[1] 她估计在忙……我可以帮你传话。

[K] 不好意思——请问你是哪位？

[1] 呕……我叫约翰·霍布斯……抱歉，这边发生了……一些事情……

[K] 你还好吗？

[1] 我……这房间里有具尸体！就瘫在桌子的上首位置，周围都是酒水。呃……窗帘是拉上的……天花板上好像有个弹孔……

[K] 天哪。我女儿和你在一起吗？

[1] 不好意思，您女儿是哪位？

[K] 安妮·贝拉蒙？她应该在那边。她还好吗？

[1] 她好着呢！是的，我刚刚还和她在一块。

[K] 太好了。你们那边有多少人？

[1] 只有我们五个。我不太确定为什么我们要聚在这里。然后……尸体一个接一个地出现……我不知道为什么……

[K] 冷静一下。我住在附近，我会找一些邻居过来确认情况。可惜我自己没法亲自到场。我只需要你暂时保证大家的安全——你能做到吗？我都不敢想象玛莎现在在想什么……

[@] 钢琴声响起。

[1] 好！多谢。真的太谢谢你了。

[K] 一切都会好的。帮我护着点女儿，过会儿我再打给你。你的名字叫什么来着？

[1] 约翰。

[K] 帮我保护好她，约翰。

[@] 她挂断了电话。外面又是一声雷鸣。钢琴仍在演奏，1号人员离开房间，去和其他人汇合。

[@] 注：我分不清是“Katherine”还是“Catherine”，不过“Kate”这个昵称同时适用于两个全名，所以我就这么用了。

[@] 另外，我一直在开发一款“刽子手”（hangman）游戏。它应该已经安装在你的系统上了——如果你感兴趣的话可以试试。我得提醒你……它可能不是你想的那样。

译注：Hangman直译为“上吊的人”，是一个猜单词的双人游戏。由一个玩家想出一个单词或短语，另一个玩家猜该单词或短语中的每一个字母。第一个人抽走单词或短语，只留下相应数量的空白与下划线。出题玩家一般会画一个绞刑架，当猜词的玩家猜出了短语中存在的一个字母时，出题的玩家就将这个字母存在的所有位置都填上。如果玩家猜的字母不在单词或短语中，那么出题的玩家就给绞刑架上小人添上一笔，直到7笔过后，游戏结束。&lt;&lt;set $seen_hangman to true&gt;&gt;</tw-passagedata><tw-passagedata pid="89" name="20-KI-3-4" tags="19-KI-3-5 21-CH-3 21-LI-1-2-4 19-DI-4-6" position="650,3125" size="100,100">[4] 奥斯瓦尔德？我找到钥匙了。

[@] 门锁被打开。3号人员一声咆哮。

[4] 你在干什么？放开我！我是来救你的！

[3] 把枪放下！

[4] 好吧！你看，我不碰它了。我说过我会来救你出去的，你还记得吗？

[3] 小心驶得万年船。

[4] 到底是谁把你关在那里的？

[3] 我没看见。我吃完早饭后下来这里，然后门就在我身后锁上了。

[4] 一定是这房子的问题……我觉得情况越来越糟了。我当时正在喝酒，突然一具尸体出现在我面前……

[3] 你喝酒了？屋子里全是鬼，你还喝酒？

[4] 我是紧张了，行吗？快告诉我怎么阻止这一切。

[3] 我不保证能做到。

[@] 钢琴声响起。

[4] 我去找其他人。你''教堂（Chapel）''的事办完就来找我们吧。

[3] 别相信他们。玛莎在你进来之前还在这儿……很明显，幽灵已经控制了她。如果我是你，我会保持距离。

[4] 你是什么意思？她没事吧？

[3] 你自己看看就知道了。

[@] 外面传来一声雷鸣。他们都离开了。</tw-passagedata><tw-passagedata pid="90" name="20-LI-2-5" tags="" position="775,3125" size="100,100">[@] 5号人员首先进入房间，她生起了火。2号人员接着进入房间。

[2] 玛莎？你还好吗？

[5] 亲爱的，随手关门。别把坏东西放进来。

[2] 我只是想确认你有没有事……

[5] 我没事，孩子。我在处理事情。

[@] 火声噼啪。

[2] 抱歉……我不是有意打扰你的。

[5] 哦，安妮！过来，亲爱的。你比我记忆中的样子大多了！

[2] 你真的没事吗？

[5] 亲爱的，这几天真是忙疯了！我东奔西跑，感觉都没机会好好跟你说说话。你妈妈身体怎么样？

[2] 她……还行吧。我们不怎么说话。

[5] 真遗憾我们不能像以前那样经常见面了！也许等一切恢复正常后，我可以请你们俩来吃顿饭。我一个人在这儿真是太孤单了！

[2] 当然！一定。谢谢你，玛莎。我很高兴你没事。

[5] 我们在干什么？我们不能让这些幽灵来指挥我们！我要打开钢琴的自动演奏，我们要好好享受一下。

[@] 钢琴开始演奏。还是之前的音乐。

[5] 亲爱的，你在看什么呢？快来和我一起跳舞吧！

[2] 又来了……你知道谁是小艾吗？

[5] 他马上就到，我敢肯定！哦，他超爱这首歌。只要你开口，他肯定愿意唱给你听！知道吗，我觉得你们俩肯定合得来！

[2] 我明明记得我背下了名单的内容！我……我现在脑子一片空白……

[5] 安妮，快放下！别写了。我们会玩得很开心的。到了明天，这场噩梦就要醒了。

[2] 我……我不太会跳舞，玛莎。

[5] 你肯定会的！来吧亲爱的，至少给我一个微笑！

[@] 外面传来一声雷鸣，有人倒在地上。钢琴声却依旧未停。</tw-passagedata><tw-passagedata pid="91" name="21-LI-1-2-4" tags="05-AT-2-4 19-DI-4-6 20-LI-2-5 22-LI-1 02-AT-2-4 11-TO-4-5 12-BI-1-2-3-4-5-7-8-9 18-VI-2-7 20-DI-1 07-DI-1-2-4-5-6-7-8-9 08-KI-1-6 11-LI-1-7-8 22-CH-2-3" position="775,3275" size="100,100">[@] 有趣的是，剩下的都是外人。遗憾的是，他们仍在继续寻找真相。

[2] 呃……又出现了一具尸体。

[4] **的！速度是不是变快了！

[2] 我也刚发现……

[4] 老天，小安！把那东西关上吧！

[2] 我不会关啊！

[@] 钢琴大声演奏着。1号人员进入房间。

[1] 我在''餐厅（Dining room）''又发现一具！哦……

[2] 你那具长什么样？

[4] 先把那**东西关了吧！

[2] 我不会！我真不知道怎么关！

[4] 踢一脚！做点什么！

[@] 钢琴自行停止了演奏。火堆轻轻噼啪作响，短暂的寂静随之而来。

[1] 那么……我们至今发现了多少具尸体？

[4] 我觉得这种情况不可能永远持续下去。曾经住在这里的人终究是有限的。

[2] 昨天一共四具。

[4] 四具？我只见到''台球室（Billiard room）''的一具。

[1] 我看到了另外两个。我不记得有第四个。

[2] 好，那昨天一共三具。

[4] 今天早晨一具。

[2] 那个房间里有两具，我去看过了。

[1] ''餐厅（Dining room）''里也有一具。接着就是眼前的这一具。

[2] 那么总共七具？托尼……别靠近它。也许会传染呢。

[4] 不可能。我们和这些尸体共处了至少十多个小时，也没出什么事。你觉得他们会突然爬起来吗？

[2] 我……我有个点子。我们先复盘一下目前发生的事情如何？

[1] 什么意思？

[2] 告诉我你到达门口时发生了什么。

[1] 唉，我的车陷在泥里了，剩下的路我只好步行到房门口。

[4] 我们看到你在''门厅（Entrance）''了。你在那儿待了很久，对吧？

[1] 等等……所以''阁楼（Attic）''里是你？

[4] 是我们两个。那是谁放你进门的呢？

[1] 我猜门一定是没锁。直到很久以后我才遇到奥斯瓦尔德……

[2] 好。接着呢？

[4] 我下了楼，遇见了霍布斯。

[1] 你还是叫我约翰吧。

[4] 当时我很不信任他……不知道为什么。明明他和我们其他人处境相同。

[2] 后来你还是上楼了。

[4] 我并没有马上上楼。还有那块怀表的事情要处理呢。

[1] 那是怎么回事？

[2] 那不重要……我们不是都聚在一起吃晚饭了吗？你不觉得这很奇怪吗？

[4] 奇怪什么？

[2] 是谁做的晚饭呢？

[4] 楼下大概有佣人吧？

[1] 我想是有一个，但他已经死了，很遗憾。后来我发现了他的尸体。

[2] 没错！所以他不是幽灵？

[4] 幽灵会做饭。我觉得还是幽灵。

[2] 你认真的吗，托尼？能不能好好想想，别急着下结论？

[4] 我知道的和你一样多！所以别用那种居高临下的口气跟我说话，小安。这明显是超自然现象，你以为的那些规则现在都不适用了！

[1] 抱歉，但我不认为是幽灵作祟。我们目前掌握的线索只有几具尸体。很可能只是有人在耍我们，对吧？

[4] 呵，刚才你可不是这么说的！我可是亲眼看见他们出现在我面前的。而且这里压根就没有其他活人的踪迹！

[2] 我感觉我们好像忘了什么……

[4] 你们两个怎么回事？这个议题早就聊过，不是吗？

[2] 钢琴呢？是谁在弹？

[4] 你眼睛瞎吗？你明明就知道那是自动的。

[2] 那也得有个人把它打开啊。不是我开的。

[1] 肯定是有其他人在！

[4] 是幽灵，霍布斯！小安，能不能别听他的？

[2] 可能不是鬼。我觉得不是。

[4] 所以七个陌生人走进房子，给我们做了晚餐，打开了钢琴，然后死了？真的吗？

[2] 我觉得有什么东西在干扰我们的思维。我试着记住我们所有人的名字，但总发现一些我不认识的名字。

[1] 还有别的名字吗？有几个？

[2] 七个……一直都是七个人。我们四个和另外三个。

[4] 那么，上面有我的名字吗？

[2] 有啊。

[4] 那就不对了。我的真名不是托尼。别人只是因为我父亲的关系才这么叫我。

[2] 真的吗？那你的真名是什么？

[4] 嗯，我不想说。不然我可能也会像其他幽灵一样出现在你的死亡名单上。

[2] 他们不可能是幽灵……我写过关于他们的东西。比如……玛莎。我猜那一定是她。上面说她是这栋房子的主人，而且她身上有浓烈的香水味。我感觉我一定知道些什么……

[1] 那么你是怎么知道要写什么内容的呢？

[2] 我没有！是我写的，但我不记得写过……

[1] 你是想说自己被附身了吗？我觉得你只是压力太大忘记了，或者这是有别人在上面写的？

[2] 我只是在想……感觉我之前肯定认识一个叫玛莎的人……

[4] 闭嘴！你们两个给我闭嘴！

[@] 突然的寂静。
 
[2] 托尼？别拿那东西指着我们。

[4] 别说话。

[1] 你在哪里找到的？我记得你说弄丢了。

[4] 我在其中一具尸体上找到的……

[2] 托尼，离尸体远点。把枪放下。

[4] 你们两个疯了吗……真的不记得了？

[2] 我不知道你什么意思。你吓到我了，托尼。

[4] 这是谁？我站在谁身上？

[1] 玛莎？

[4] 是的！没错！我们应该是五个人，对吧？

[2] 那第五个人是谁？

[4] 是玛莎啊！玛莎·嘉利！你还在纸上写了。她……她昨天来和我聊天，就是约翰离开去看钢琴那时候！

[1] 你是说——

[4] 我是说一个真实的，活着的人！你们这是什么表情？

[2] 请你先把枪放下——

[4] 别这样！这一点都不好笑！

[2] 托尼……

[@] 外面一声雷鸣，接着是有人倒在地上的声音。

[2] 我的上帝啊……

[1] 我——我们走进来的时候还没有的，对吗？

[2] 是这房子……它在扰乱我们的心智。我得离开这里……

[1] 等等，安妮！

[@] 她跑开了。约翰独自留下。

</tw-passagedata><tw-passagedata pid="92" name="21-CH-3" tags="" position="650,3275" size="100,100">[@] 3号人员踩着泥泞前行。这声音虽不悦耳，但总比终日聆听屋内的动静来得新鲜。最终，泥泞的路段过渡到砂砾路，他停下了脚步。

[@] 他花了一会儿才打开门。

[@] 接着是缓慢的、带着回音的脚步声。脚步声停了下来。

[@] 这就是我们所能听到的全部。我无法判断他在做什么，也许是在祈祷，也许是在读什么东西。我听这个男人的录音，听了好几个小时，听到他吃饭，听到他睡觉，听到他试图与他死去的妹妹交谈。他经常愤怒和沮丧。他喜欢假装自己知道很多事情，而我也愿意相信我很了解他。

[@] 但我真的了解吗？我看不见他。我无法向他询问任何事。我只是坐在电脑前，听着这该死的录音，试图弄清楚他到底在搞什么鬼。

[@] 奇怪的是，这一切在我脑海中如此清晰。我能勾勒出那座''教堂（Chapel）''的模样——排列的长椅、高耸的祭坛。我看见他裹着大衣，跪在阴冷的房间里，辨认着地板上斑驳的旧铜牌。空气里漂浮着尘埃。泥泞的山路蜿蜒而下，古宅的每个房间彼此相连，壁纸褪色的纹路，还有那些横陈的尸体，就像我提过的那场噩梦般触目惊心。

[@] 我想这太荒唐了，但我也没有办法确证，不是吗？现在这整个世界上所有活着的人之中，没有谁比我更了解这个地方。我脑海中关于这些人的想法，比他们本人还要真实。当我死去，这一切都将随我而去。

[@] 编辑：不清楚我当时为什么要写这些话。其他类似的文字都被我删除了。</tw-passagedata><tw-passagedata pid="93" name="22-LI-1" tags="23-CH-1-2" position="775,3400" size="100,100">[@] 约翰很安静。我猜不透他在打什么主意。

[@] 我们永远无法得知托尼的真名了，你会因此觉得焦躁吗？我想，我可以试着翻一些参军记录，但这感觉有点像作弊。他不想让我们知道。毕竟我们已经侵犯了这些人的隐私，我想这是我们能为他做的唯一一件事。

[@] 他咳嗽一声。

[1] 这里肯定还有别人。但如果他们藏在房子里，我们早该发现的……

[@] 一声雷鸣。

[1] 是''教堂（Chapel）''！我的天啊……安妮……

[@] 他匆匆离开。</tw-passagedata><tw-passagedata pid="94" name="22-CH-2-3" tags="06-TO-3-4 20-KI-3-4" position="650,3400" size="100,100">[@] 门吱呀一声开了。

[2] 奥斯瓦尔德？

[3] 你好啊，孩子。

[2] 你是怎么逃出储藏室的？

[3] 门没有上锁。看来，是房子改变了主意。

[2] 你解开真相了吗？到底是什么导致了所有事件的发生？

[3] 我一直都很清楚真相。自从我妹妹去世后，这栋房子就被诅咒了。

[2] 我觉得人们正在死去，而我却记不起来。我感觉自己快要疯了。求求你，告诉我你能阻止这一切！

[3] 埃莉去世时，我们没有举行葬礼。我们没有向任何人承认她的离去。我们不能哀悼。如果我们不去尝试铭记过去，那么我们也将面临同样的命运。

[2] 我已经不记得了……我不知道该怎么做。这些名字对我来说毫无意义……

[3] 什么名字？

[2] 托尼？谁**是托尼？他有一把枪，他很偏执。是''客厅（Living room）''里的那家伙吗？

[3] 枪！上帝啊，那东西可吓人了。你没带来吧？

[2] 你在哪里看到的？是谁拿着它？托尼吗？我想不起来了……

[3] 哦，那个有趣的男孩？是的，我在他卧室里抓到他拿着那东西。我不信任他。我觉得最好别让他知道我们在这儿。

[2] 你认识他？

[3] 哦……可怜的姑娘。你不记得了吗？

[2] 我……我不知道……他是谁？

[3] 孩子，想想看。你还记得你的父母吗？你的兄弟姐妹？你最亲密的朋友？你爱过的人？

[2] 我……我不确定……

[3] 这很重要！你家里有空着的床吗？走廊上有多余的鞋子吗？如果你记不起身边亲近的人，那么你就是向诅咒投降了！

[2] 那之后会发生什么事？

[3] 孩子，你将遭受比死亡更悲惨的命运……你会被遗忘。如果你记不起自己为何在此，那可能已经为时已晚。向上帝祈祷，或许还能得救！

[@] 一声巨大的雷声过后，紧接着是有人摔倒的声音。

[2] 这里也有尸体……

[@] 稍许停顿。

[2] 奥斯瓦尔德，过去住在这里，家族画像。那幅画！他给我看了！他……不……

[@] 我对我们案件中的受害者通常不会抱有太多同情。但安妮的遭遇实在太可怕了，不是吗？她试图弄清真相，却因此受到了惩罚。</tw-passagedata><tw-passagedata pid="95" name="24-DI-1" tags="25-AT-1 25-WI-K" position="650,3650" size="100,100">[@] 他接起了电话。

[K] 约翰，是你吗？

[1] 是……

[K] 你们还好吗？

[1] 我……还行吧。

[K] 好的。我的一些邻居正在往你那边赶，但天气实在差，他们至少还要半小时才能到……在那之前你能应付得来吗？

[1] 能……

[K] 出什么事了吗？

[1] 我觉得房子里还有别人。

[K] 你现在身边有其他人吗？

[1] 我没看见他们。但我猜有人躲在什么地方，他们把我引到这里来——是为了陷害我？我不知道。我——也许下一个就轮到杀我了。我不知道。

[K] 你确定吗？听起来相当严重……

[1] 一定还有别人……桌上摆着新鲜的食物，之前还有钢琴声。你知道是谁住在这里吗？

[K] 据我所知，嘉利别墅现在无人居住。自从老伊丽莎白·嘉利去世后，那里就一直空着。她只有一个孩子，是个叫埃莉诺的女孩——而且她很久以前就去世了。所以不管是谁在搞鬼，约翰，我敢肯定他们只是想捉弄你。

[1] 我...我不知道。我去了教堂……想找人。我带了把枪……然后，突然间……

[@] 稍许停顿。

[K] 你还在吗？

[1] 你认识一个叫安妮的孩子吗？

[K] 安妮？

[1] 我在''教堂（Chapel）''里的一具尸体旁发现了一张纸条。她以前住在这里吗？

[K] 她和你在一起，是吗？她还好吗？

[1] 我……你认识她？

[K] 好了，约翰。你和我说过你会保护好她的。她现在在哪？

[1] 我……我不知道……

[K] 那就去找她，约翰！我特别叮嘱过你要保护我女儿的！

[1] 我……

[K] 怎么了？

[1] 不！我确定你女儿没事...她可能就在隔壁房间，只是我忘了她的存在。我...我觉得我的记忆在衰退。但没必要担心。

[@] 嗯，这是个谎言。她躺在''教堂（Chapel）''地板上的血泊中，已经死了。

[K] 天哪...你确定她没事吗？

[1] 我去帮你查一下……你说她叫什么名字来着？

[K] 安妮·贝拉蒙！约翰，到底发生什么事了？

[1] 我……我得走了。抱歉。

[@] 电话被挂断。

[@] 他在房子里四处走动，时间一点点过去，但很难确切地说他去了哪里。唯一我确定的地方是''阁楼（Attic）''，下一份文件就从那里开始。

[@] 编辑：我可能发现了事件的定式。我之前怎么就没注意到呢……我要实验确证一下我的理论。</tw-passagedata><tw-passagedata pid="96" name="23-CH-1-2" tags="22-CH-2-3 24-DI-1" position="650,3525" size="100,100">[@] 只剩下他们俩了。你早知道会这样，但依然令人不快。

[@] 约翰走进来，随手关上了身后的门。

[1] 安妮？

[@] 他的声音回荡着。他冲向她。

[1] 你还好吗？我真不敢相信这里也有尸体……

[2] 退后！别靠近我！

[1] 干什么？发生什么事了？

[2] 他说是诅咒，现在……我想可能已经太迟了……

[1] 你在说谁？这里还有别人吗？

[2] 不！你必须离开。你不明白……

[1] 如果有人这样做，我可以阻止他们。我——

[2] 把枪给我。

[1] 我……我不会给你的。你想干什么？

[2] 给我！没时间了！

[1] 不要，安妮！我不能给——安妮！

[@] 他们扭成一团。

[2] 给我，约翰！

[1] 告诉我你为什么要抢枪！

[2] 我能给这一切做个了结了！我能阻止它继续扩散！

[1] 安妮，求你了！我们只要——

[@] 发生了什么事。听起来很痛苦。约翰瘫倒在地。

[2] 对不起，约翰。告诉……告诉妈妈我爱她。

[1] 你在干什么？别——

[@] 一声枪响，几乎同时伴随着雷鸣，震耳欲聋的巨响将窗户震得粉碎。这令人胆寒的轰鸣持续了片刻，才渐渐化作空洞的呼啸风声。

[@] 她身旁掉落着我提到的那份名单。她的伤势很严重，但幸运的是录音还能恢复。

[1] 尸体……尸体在跟着我……

[@] 当他穿过泥泞回到房子时，听到电话铃声响起。

[@] 编辑：聪明！简直难以置信的聪明。她竟然想出来了！谁能想到她居然有胆量尝试这个解决方案？她和我一样是个真正的科学家……可惜没有成功，但至少我们不用自己去试了。
</tw-passagedata><tw-passagedata pid="97" name="25-AT-1" tags="25-WI-K" position="650,3775" size="100,100">[@] ''阁楼（Attic）''的门吱呀一声开了，约翰走进了房间。

[1] 约翰，这下你可闯祸了。

[@] 我像往常一样调查了他的亲属情况，虽然对这个案子来说没那么重要。他最近刚和妻子离婚，也不再和女儿联系。不过他在录音里从未提起过这些。我想他更喜欢把心事藏在心里吧。

[@] 窗户打开了。这里的风比山上的更安静。

[1] 大概……就这样了吧。

[@] 他在那里等了一会儿。远处传来隆隆的雷声。

[1] 我不记得她了。我谁都不记得了……我甚至不记得扣动过扳机……

[@] 他又停了下来。风很轻。

[1] 上帝啊，宽恕我吧。

[@] 编辑：隆隆的雷声？这声音不太像“雷鸣”，但我想这只是因为它比其他雷声更远……我是不是还漏掉了什么？</tw-passagedata><tw-passagedata pid="98" name="25-WI-K" tags="" position="775,3775" size="100,100">[@] 装满的水壶被放在火上烧着。

[@] 传来几声杯子碰撞的叮当声。

[@] 水壶的鸣笛声越来越响，然后戛然而止。突然，头顶传来一声震耳欲聋的雷鸣。可以听到一具身体倒地的声音，还有一只马克杯摔碎的声响。

[@] 房子又恢复了寂静。

[@] 窗外只有一只鸟在歌唱，但我向来不擅长分辨鸟的种类——我听不出这是哪种鸟的叫声。

[@] 注：这就是我能追踪到的线索链的全部情况，据我所见，总共有十二人死亡。目前尚不清楚这是否与我们正在调查的链条相同，或者是否存在多个链条。</tw-passagedata><tw-passagedata pid="99" name="hangman" tags="" position="1275,425" size="100,100">&lt;&lt;if $guessed_letters.length &gt;= $hangs.length - 1&gt;&gt;
''你的使命已经完成。''

''现在，世界更加安全了。''

&lt;&lt;else&gt;&gt;
\我现在在想一个单词。

我所想的是哪个单词？

单词: _ _ _ _ _ _ _ &lt;span class="hints"&gt;(&lt;&lt;=12 - $guessed_letters.length&gt;&gt;)&lt;/span&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;nobr&gt;&gt;
&lt;&lt;for _i to 0; _i lt $hangs.length; _i++&gt;&gt;
	&lt;&lt;set $hangs[_i] to $hangs[_i].replaceAll(".", "&amp;nbsp;")&gt;&gt;
&lt;&lt;/for&gt;&gt;

&lt;&lt;set _hangman_progress to $guessed_letters.length&gt;&gt;
&lt;&lt;if _hangman_progress &gt;= $hangs.length&gt;&gt;
	&lt;&lt;set _hangman_progress to $hangs.length - 1&gt;&gt;
&lt;&lt;/if&gt;&gt;
&lt;&lt;/nobr&gt;&gt;&lt;&lt;if $guessed_letters.length &gt; 0&gt;&gt;
&lt;&lt;=$hangs[_hangman_progress]&gt;&gt;
&lt;&lt;nobr&gt;&gt;

&lt;&lt;if $guessed_letters.length &gt;= $hangs.length - 1&gt;&gt;
&lt;&lt;else&gt;&gt;

已猜字母: 
&lt;&lt;set _comma_max to $guessed_letters.length - 1&gt;&gt;
&lt;&lt;for _i to 0; _i lt _comma_max; _i++&gt;&gt;
$guessed_letters[_i],
&lt;&lt;/for&gt;&gt;
$guessed_letters[_comma_max]
&lt;&lt;/if&gt;&gt;

&lt;&lt;/nobr&gt;&gt;&lt;&lt;/if&gt;&gt;

</tw-passagedata><tw-passagedata pid="100" name="17-DI-6-7" tags="" position="775,2750" size="100,100">[6] 小维！我找你半天了。

[7] 小艾，我要离开这里了。抱歉，我已经受不了了。

[6] 别走！留下吧。我已经摸清了真相。我们可以回到普通的生活了。

[7] 我们刚才听到的枪声不是你做的吧？发生什么事了？

[6] 没什么，我保证。我已经处理好了。只是……我一直在想，那个……

[7] 你妈看到天花板可要不高兴了。

[6] 我不在乎。这无关紧要。小维，你听我说，我有事要告诉你。

[7] 现在不是时候，小艾。如果你想找我，我会和我妈妈在''温特考特（Wintercote）''，也许你之后可以过来看看——

[6] 别走，小维。我想让你留在这里陪我。我知道我们已经很久没见了……但我想你。而且我知道你来这里不只是为了参观这栋房子。

[7] 这真不是个好时机。小艾，一具尸体昨晚莫名其妙出现在我床上。我需要点时间……我不想待在这儿。

[6] 小维，等一下。在你走之前……我有件事要告诉你。这枚戒指我买了有一阵子了。现在……

[7] 小艾……

[6] 我爱你，小维。我这一生一直爱着你。我知道我们现在不再那么亲密了，但直到今天我才意识到我有机会弥补这一切！我不能……我不想过没有你的日子了。维多利亚，你愿意嫁给我吗？

[7] 都过去了，小艾……

[6] 我知道现在不是最好的时机。但永远不会有完美的时机。而我需要你……

[7] 小艾……我不能嫁给你。我……我有别人了。

[6] 太对了！你当然有。但你非要留到这时候说？

[7] 小艾，拜托！你见过他的！怎么回事？

[6] 对不起。我不知道。好好想想，好吗？我依然爱你。

[7] 别这么说！我……天啊……他是……

[6] 你还好吗？

[7] 那个是他……我的天啊……

[@] 她跑开了。

[6] 等等，小维！告诉我发生什么事了！</tw-passagedata><tw-passagedata pid="101" name="19-KI-3-5" tags="18-MA-5-6 20-LI-2-5 18-KI-3" position="650,3000" size="100,100">[5] 奥斯瓦尔德？你在里面吗？

[3] 我在。我猜你不是来放我出去的，对吗？

[5] 不……不过，我对这一切感到抱歉。我需要你帮我个忙。

[3] 你凭什么认为我会帮你？

[5] 我知道我们之间存在分歧……我很抱歉事情会发展到这一步。我只是不知道还能做些什么。如果你知道发生了什么，那么我需要你采取行动……求你了。

[3] 怎么了？

[5] 我正在翻看我们的旧照片……里面有个人。每张照片里都有。一个我不认识的男人。我发誓，我以前看过这些照片，他从来不在那里……他就这样出现了。我不明白……

[@] 她听起来心烦意乱。

[3] 哇！这可真是出乎意料。

[5] 我不知道该怎么办……刚才我还和小艾在我的房间里，但我不能告诉他这件事……我怎么能说呢？我要怎么解释我们所有人的记忆里都有一个幽灵……

[3] 你为什么觉得我能帮到你？

[5] 对不起，我之前不该怀疑你。你是唯一了解这栋房子的人！我……我一个人真的搞不定。一切都失控了。我实在无法理解这种事怎么可能发生……

[@] 电话铃响了起来。

[3] 如果他们能改变物理实体，那就意味着他们正在变得更强大。如果我是你，我也会害怕。

[5] 求求你帮帮我……我不知道该怎么办。我不想要这样。我从没想过让这些人闯入我的生活……我只想……回到从前——只有我和小艾的日子。如果需要的话，我愿意永远离开这个家！

[@] 她崩溃了。

[3] 听我说，玛莎。拿着那些照片，上楼去烧掉它们。如果你发现其他任何与幽灵有关的东西，也一并烧掉。这是唯一能阻止事情失控的办法。

[5] 好……我会做的。谢谢。

[@] 外面一声雷鸣。

[3] 要快。不知道我们还有多少时间。</tw-passagedata><tw-passagedata pid="102" name="Hangman setup" tags="" position="775,175" size="100,100">&lt;&lt;set $hangs to ['', '&lt;html&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
.....................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
.....................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|...........|.....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|........../|.....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|........../|\\...&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|........../|\\...&lt;br&gt;\
...|..........|......&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;', '&lt;html&gt;\
..._____________.....&lt;br&gt;\
...|/..........:.....&lt;br&gt;\
...|...........:.....&lt;br&gt;\
...|.........(@).....&lt;br&gt;\
...|........../|\\....&lt;br&gt;\
...|..........|.|....&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
...|.................&lt;br&gt;\
+===================+&lt;br&gt;\
|...................|&lt;br&gt;&lt;/html&gt;']&gt;&gt;</tw-passagedata><tw-passagedata pid="103" name="Testing vars" tags="" position="900,175" size="100,100">&lt;&lt;set $input to "list"&gt;&gt;
&lt;&lt;set $recent_passage to "01-QU-1-11"&gt;&gt;
&lt;&lt;set $first_list to false&gt;&gt;
&lt;&lt;set $previous_menu to "list"&gt;&gt;


&lt;&lt;set $cache to Story.lookupWith(function (p) {
	return "012".includes(p.title[0]);
})&gt;&gt;


&lt;&lt;for _i to 0; _i lt $cache.length; _i++&gt;&gt;
	&lt;&lt;set $cache[_i] to $cache[_i].title&gt;&gt;
&lt;&lt;/for&gt;&gt;


&lt;&lt;run $cache.delete("00-dream")&gt;&gt;
&lt;&lt;run $cache.delete("00-final-note")&gt;&gt;
&lt;&lt;run $cache.delete("25-WI-K")&gt;&gt;

&lt;&lt;set $nicknames to {
    "1": "John",
    "2": "Annie",
    "3": "Oswald",
    "4": "Tony",
    "5": "Martha",
    "6": "Eddie",
    "7": "Vic",
    "8": "Damian",
    "9": "Helen",
    "10": "Eve",
    "11": "Thornton",
    "12": "Rupert",
    "K": "Kate",
    "@": "Narrator"
}&gt;&gt;
&lt;&lt;set $titles to {
    "00": "Misc",
    "01": "Arrival",
    "02": "Entrance",
    "03": "Gathering",
    "04": "The Body",
    "05": "Discussion",
    "06": "The Butler",
    "07": "Dinner I",
    "08": "Dinner II",
    "09": "Apologies",
    "10": "Suspicions",
    "11": "Accusations",
    "12": "The Billiard Room",
    "13": "Night",
    "14": "Dawn",
    "15": "Panic",
    "16": "The Prisoner",
    "17": "The Proposal",
    "18": "Ghosts",
    "19": "The Bracelet",
    "20": "Phone Call I",
    "21": "The Long Talk",
    "22": "Prayer",
    "23": "The Chapel",
    "24": "Phone Call II",
    "25": "Distant Thunder",
    "26": "The End"
}&gt;&gt;
    &lt;&lt;set $acts to ["IGNORANCE", "CONFUSION", "TERROR", "THE RECKONING"]&gt;&gt;

&lt;&lt;set $guessed_letters to ["a", "b", "c"]&gt;&gt;
&lt;&lt;goto "Box"&gt;&gt;</tw-passagedata><tw-passagedata pid="104" name="00-references" tags="" position="1275,575" size="100,100">[@] 你大概已经注意到了文件列表中，各场景文件名最前方显示的灰色数字。

[@] 它表示各文件可以指向的其他未发现文件的总数。或者说，代表一份文件所能提供的“参考”价值还有多少。

[@] “参考”可能是某个角色的一句话或者其他相关描述，能提供他们早些时候或者晚些时候所在地点的信息。此外我的评论中提及的内容也可以被算作“参考”。

[@] 有些参考可能不够完整，需要查阅其他旁证进行交叉参考才能取得进展。在某些情况下，个别场景需要很长时间后才能得到明确的验证。

[@] 如果一个场景的参考数被标明为（0），这不代表该文件中的信息都已被利用完毕！还可能存在一些重要的细节。我标注参考时也可能有些疏漏。

[@] 你可以把这个参考数系统理解为我在整理文件时建立的一个文件关系网系统，虽然没做完。不过考虑到你也能用，我没直接把它删掉。</tw-passagedata><tw-passagedata pid="105" name="00-dream" tags="" position="1400,575" size="100,100">I have l//i//ved a hundred million years

我于此世百万年

Alone

形单影只

And blue

满溢悲伤

I h//a//ve cried a hundred million tears

我流泪水百万滴

Till I

直到我

//M//et you

遇见你

Because

因为

Of you

你

The wo//r//ld

世界

Is M//i//ne

属于了我

Be//c//ause

因为

Of You

你

The SUN

阳光

Will ALWAYS S//H//INE

始终照耀

Skies //a//bove

天空啊

ALL WERE G//R//AY

曾是灰色

Till your Love

直到你的爱

Came My WAY

来我身边

I LIVE

我的生命

ANEW

焕然一新

Because

因为

Of you

你

Because

因为

Of You

你

The WORL//D//

世界

Is MINE

属于了我

Because

因为

Of you

你

The Sun

阳光

Wi//l//l Always Shine

始终照耀

Skies ABOVE

天空啊

All were Gray

曾是灰色

Till your L//o//ve

直到你的爱

Came My Way

来我身边

I LIVE

我的生命

A//N//EW

焕然一新

Because

因为

Of you

你

There's a picture nothin//g// can erase

那景象永远无法忘怀

Within 

永在

My HEART

我心

No one else can ever take your place

无人能代替你

Tho' we're

尽管我们

Apart

分别

Because

因为

OF YOU

你

The W o r //l// d

世 界

Is MINE

属于了我

Because

因为

Of you

你

The S U N

阳 光

Will Always S H I N E

始终照 耀

SKIES ABOVE

天空啊

All W//E//RE GRAY

曾为灰色

Till your L O V E

直到你的 爱

CAME My WAY

来我身边

I LIVE

我的生命

Anew

焕然一新

Because

因

Of

为

//Y//ou

你

43092</tw-passagedata><tw-passagedata pid="106" name="00-invitation" tags="" position="775,575" size="100,100">我亲爱的朋友，

我听说你跟克莱尔的事了，为你感到遗憾。我一直觉得你们两位是很般配的一对，不过我从来也不是个情感专家就是了。

这周六晚上来一趟嘉利别墅吧，我请了亲朋好友来为我庆生。我们非常欢迎你来，我会向你介绍我的家人。

你的才能独一无二，老朋友。不过我最近确实搞到了些能让你感兴趣的东西，或许不是最好的货，但有时候当你闭上双眼，就能感觉到房间里仿佛还有其他人……

我会在你来之前把它准备好。可别被骗了，嘉利别墅里没有幽灵！

鲁伯特·嘉利（Rupert Galley）</tw-passagedata><tw-passagedata pid="107" name="save" tags="" position="1025,425" size="100,100">&lt;&lt;=$cache[$cache.length-2]&gt;&gt;:&lt;&lt;=$cache.length&gt;&gt;&lt;&lt;=".".repeat(6)&gt;&gt;

游戏具备自动保存机制。

但仍然强烈推荐您使用【将存档保存至本地】功能

&lt;&lt;link "Load saves"&gt;&gt;&lt;&lt;run UI.saves()&gt;&gt;&lt;&lt;/link&gt;&gt;

&lt;span class="recent"&gt;[[返回|Box][$input to $previous_menu]]&lt;/span&gt;</tw-passagedata><tw-passagedata pid="108" name="00-readme" tags="26-EN-1" position="650,575" size="100,100">[@] 多数音频的音质都很差，但我已经尽全力去听了所有内容。

[@] 要打开一个文件，只需在最上方文本框内输入文件的名称（如：“26-EN-1”）。希望你能读懂我的命名风格！

[@] 我认为你的假设是对的。我们能找到这个案子真是幸运，更幸运的是，他们还保存着那些尸体。</tw-passagedata><tw-passagedata pid="109" name="inbox" tags="" position="1525,425" size="100,100">你有 (&lt;&lt;if $is_complete&gt;&gt;2&lt;&lt;else&gt;&gt;1&lt;&lt;/if&gt;&gt;) 条消息：（点击阅读）
[[简述|Box][$input to "message-"]]
&lt;&lt;if $is_complete&gt;&gt;[[最后|Box][$input to "message2-"]]&lt;&lt;/if&gt;&gt;</tw-passagedata><tw-passagedata pid="110" name="message-" tags="" position="1650,575" size="100,100">发自: Alan Thomas
主题: 简述

&lt;div class="myDiv"&gt;

你现在所持有的这台计算机正是我们的调查员死亡时正在使用的计算机。关于那天究竟发生了什么事，这是我们唯一的情报来源。

我们的记录中没有调查员的名字，他只是我们在那段恐怖的岁月中雇来解决这桩事件的一个外人。关于那段记忆，我并没有太多印象，但说那段时间是所有亲历者的噩梦应该没有问题。我们那时太想要一个答案了。

然后某天，所有事件就那样停止了。我那时还很年轻，很遗憾没有参与事件的调查。我只知道所有人都努力不去提及它。这台计算机被锁了起来，关于何时才能再次检查它，我们收到了一系列严格的指示。他们列出了一份清单，禁止清单上的人了解任何事件相关信息，其中就包括我。

在那之后，你就加入了我们，后面的事你都知道。不管硬盘里写了什么内容，我很确定这台计算机并没有多危险。更重要的是，如果我们不知道那起事件为何就此停止，我们就不知道未来它是否还会重演！所以我将再次检查这台计算机的日期稍微提前了一些。提前做准备总不会有什么坏处。

即使我有旧数据库的权限，我能读到的关于这次事件的信息也少得可怜。世界上只有一个人知道发生了什么，他的硬盘此刻就在你手上。

你要做的就是弄清楚他到底是怎么结束那场事件的。我不知道你还能从硬盘上找到什么内容，但有一件事毋庸置疑——你得忽略一些可能比较敏感的信息。

以下是我们想办法找到的几个文档名称，我建议你从这里开始：

01-QU-1-11
02-EN-1-6-7-10
03-LI-1-4-5-6-7-8-9
04-ST-?????

别问我这些文档的名字有什么含义。如果你能自己弄清楚，那其他的你肯定就也能搞懂了。（最后一个文件名有点小小的损坏，但你应该能做点“填空题”）

祝你好运。

A.T.

&lt;/div&gt;
\&lt;&lt;set $previous_menu to "message-"&gt;&gt;
\&lt;&lt;set $previous_scene to "message-"&gt;&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;&lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;&lt;span class="recent"&gt;[[返回|Box][$input to "help"]]&lt;/span&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="111" name="Intro" tags="" position="1400,300" size="100,100">&lt;div class="Centre"&gt;
&lt;&lt;type 30ms start 0.5s&gt;&gt;
//解谜推理游戏 by William Rous//
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 100ms start 0.5s&gt;&gt;
''T - - Y - - P - - E''
&lt;&lt;/type&gt;&gt;&lt;&lt;type 120ms start 0.8s&gt;&gt;
''H - - E - - L - - P''
&lt;&lt;/type&gt;&gt;
&lt;&lt;="&amp;nbsp;".repeat(5)&gt;&gt;


&lt;&lt;timed 11.5s&gt;&gt;&lt;&lt;set $input to ""&gt;&gt;&lt;&lt;goto "Loading"&gt;&gt;&lt;&lt;/timed&gt;&gt;
&lt;&lt;type 300ms start 1s&gt;&gt;
\..............
&lt;&lt;/type&gt;&gt;
&lt;/div&gt;</tw-passagedata><tw-passagedata pid="112" name="message2-" tags="" position="1775,575" size="100,100">发自：Alan Thomas
主题: 最后

&lt;div class="myDiv"&gt;

调查进展如何？要是找到了什么有意思的信息记得告诉我。为了这个谜底我真的等了太久。

在我给你发了上一条信息之后，我们又成功修复了一些数据。其中包括一大堆已经损坏的音频文件，但我们只能修复其中一小部分……大多数内容无法辨认，隐约有音乐的声音。Pippa找到了下面这个链接，是个youtube上的视频，你可以看看。

https://www.youtube.com/watch?v=PLk6ctbDiak

不过这个视频应该跟我们调查的事件无关。

本次修复的还有一个文件。似乎在上一位调查员去世时，这台计算机上所显示的就是这份文件，因此这份文件没有被归类在其他文件之列。但你应该可以打开它。文件名如下：

00-final-note

除了你之外没有其他人能阅读这个文件。不过这倒无所谓，如果你真的找到了关键线索，你肯定会和我们同步的。

A.T.

&lt;/div&gt;&lt;&lt;set $final_message_viewed to true&gt;&gt;

&lt;&lt;done&gt;&gt;&lt;&lt;replace "#heading"&gt;&gt;&lt;&lt;="&amp;nbsp;".repeat(3)&gt;&gt;&lt;span class="recent"&gt;[[返回|Box][$input to "help"]]&lt;/span&gt;&lt;br&gt;&lt;br&gt;&lt;&lt;/replace&gt;&gt;&lt;&lt;/done&gt;&gt;</tw-passagedata><tw-passagedata pid="113" name="Background" tags="" position="1400,175" size="100,100">&lt;&lt;type 14ms start 0.3s&gt;&gt;
1936年3月7日，星期日，一群本地人沿着漫长且泥泞的道路走进嘉利（Galley）家的别墅。
&lt;&lt;/type&gt;&gt;&lt;&lt;type 14ms start 1s&gt;&gt;
在他们所有人仅有的记忆中，这栋别墅数十年来都无人居住。那日他们前往别墅的原因也无人知晓。
&lt;&lt;/type&gt;&gt;&lt;&lt;type 14ms start 1s&gt;&gt;
他们抵达别墅时，第一眼看见的便是一个男人的尸体，他看起来四十余岁，趴倒在别墅正门台阶上，血液仍顺着台阶向下缓缓流动。
&lt;&lt;/type&gt;&gt;&lt;&lt;type 14ms start 1s&gt;&gt;
他们敲门，无人应答。于是他们决定破门而入。搜索整座别墅途中，他们不断发现更多尸体，所有尸体都是近期死亡的。除去最新鲜的两具尸体外，所有死者的死因不明。
&lt;&lt;/type&gt;&gt;&lt;&lt;type 14ms start 1s&gt;&gt;
他们请来了官方人员，在那之后很少有相关信息公之于众。只有一名受害者的信息被公开。媒体对搜索别墅的当地居民进行了大量报道，但内容实在乏善可陈。嘉利别墅的故事逐渐被遗忘。
&lt;&lt;/type&gt;&gt;&lt;&lt;type 14ms start 1s&gt;&gt;
没有任何活着的人知道那天发生了什么，似乎未来也不会再有任何人真正了解真相……
&lt;&lt;/type&gt;&gt;&lt;&lt;type 30ms start 2s&gt;&gt;
[[开始游戏|Intro]]
&lt;&lt;/type&gt;&gt;</tw-passagedata><tw-passagedata pid="114" name="Start" tags="" position="1275,175" size="100,100">[[点击开始|Background]]


[[(跳过开头)|Box]]</tw-passagedata><tw-passagedata pid="115" name="PassageFooter" tags="" position="1025,175" size="100,100">
&lt;&lt;script&gt;&gt;

&lt;&lt;/script&gt;&gt;

&lt;&lt;timed 0.2s&gt;&gt;
/*&lt;&lt;run document.documentElement.scrollTop = 20&gt;&gt;
&lt;&lt;script&gt;&gt;
	oldScroll = scrollTop;
	window.scrollTo(0, oldScroll);
&lt;&lt;/script&gt;&gt;
*/
&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="116" name="00-final-note" tags="" position="1525,575" size="100,100">[@] 刚才我在查找事件最后一名受害者家人朋友的资料……我意识到其中有个我不认识的人。翻找先前记下的笔记……然后我突然明白了，我想起那个人是谁了！这时一股恶寒袭来，仿佛我的血液在渐渐凝固。

[@] 我大概没有多少时间了。我很清楚自己应该抹除硬盘上所有信息，抱歉我没做到。我希望未来有人能读到这份文件，获知真相。

[@] 呵呵，我猜没有人会记得我是谁吧！有理智的人都应该对这台机器敬而远之。你们不会知道是谁做了这些，也不会知道我的名字。一切都结束了，就是这样。

[@] 大家都盼着事件结束。没人催我做什么或者告诉我怎么做，但我知道此刻这便是我该做的，我是你们唯一的选择。我应该是整个世界上和社会脱节得最严重的人了。此刻，整个世界的命运正把握在我的手中。

[@] 从阿梅莉亚开始，鲁伯特、哈里、伊芙、海伦、达米安、小维、小艾、玛莎、托尼、奥斯瓦尔德、安妮、凯瑟琳……梅根、西蒙、乔治、安迪、黛博拉、大卫、汤姆……直至现在，我能记起的有达伦、萨拉，最后是我。

[@] 也许对于嘉利别墅的事件，这不是最好的结局。我会是唯一一个知晓真相的人，也会把真相带进坟墓。

[@] 但我觉得，正是那些已死的人们引导我抵达了真相，在他们死后数十年，还有我在和他们“对话”。我很相信，这就是事实。我很荣幸能做好我该做的。

[@] 即使你们不记得我是谁……我也感谢你们。

[@] 真没想到我会如此期待自己的死亡。肾上腺素的刺激让我兴奋不已。写啊，你个笨蛋！死之前应该要写点重要的事啊！

[@] 算啦。

[@] 上帝啊，希望这样做是对的</tw-passagedata><tw-passagedata pid="117" name="Loading" tags="" position="1525,300" size="100,100">&lt;&lt;type 16ms start 0.4s&gt;&gt;
Loading SYS_RUNNER.........Done
Running SYS_CORE1...... Done
Running SYS_CORE2...... Done
Copyright (C) Wizard BIOS 1992 – 1998
Loading USR_ENV......... Done
Loading USR_FILES......... ERROR
Loading USR_MAIL... Done
Loading LLT_CLI..........................
&lt;&lt;/type&gt;&gt;
&lt;&lt;timed 4s&gt;&gt;&lt;&lt;goto "Box"&gt;&gt;&lt;&lt;/timed&gt;&gt;</tw-passagedata><tw-passagedata pid="118" name="End" tags="" position="1525,175" size="100,100">&lt;div class="Centre"&gt;&lt;&lt;nobr&gt;&gt;
&lt;&lt;for _i to 0; _i lt $hangs.length; _i++&gt;&gt;
	&lt;&lt;set $hangs[_i] to $hangs[_i].replaceAll(".", "&amp;nbsp;")&gt;&gt;
&lt;&lt;/for&gt;&gt;
&lt;&lt;set _hangman_progress to $guessed_letters.length&gt;&gt;
&lt;&lt;/nobr&gt;&gt;&lt;&lt;type 30ms start 0.5s&gt;&gt;
&lt;&lt;=$hangs[12]&gt;&gt;
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 300ms start 1.5s&gt;&gt;''THE END''&lt;&lt;/type&gt;&gt;
&lt;&lt;type 50ms start 3s&gt;&gt;
//原作者 William Rous//

//译者 Akita23508//
&lt;&lt;/type&gt;&gt;

&lt;&lt;type 50ms start 3s&gt;&gt;
[[返回文件列表|Box][$input to "list"]]
&lt;&lt;/type&gt;&gt;
&lt;/div&gt;</tw-passagedata></tw-storydata>
	<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1><button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="Close"></button></div><div id="ui-dialog-body"></div></div><div id="story" role="main"><div id="passages" aria-live="polite"><div id="passage-box" data-passage="Box" class="passage">  	        <div class="header"><br>   <input id="textbox-input" name="textbox-input" type="text" inputmode="text" tabindex="0" class="macro-textbox" autofocus="autofocus">  <span id="heading"></span> </div> <br>  <br><br><br><br><br><br><span class="macro-timed"><br><br></span></div></div></div><script id="script-sugarcube" type="text/javascript">
	/*! SugarCube JS */
	if (document.documentElement.getAttribute("data-init") === "loading") {
	(function(window, document, jQuery, undefined) {
		"use strict";

		function _classCallCheck(instance, Constructor) {
			if (!(instance instanceof Constructor)) throw new TypeError("Cannot call a class as a function")
		}

		function _defineProperties(target, props) {
			for (var i = 0; i < props.length; i++) {
				var descriptor = props[i];
				descriptor.enumerable = descriptor.enumerable || !1, descriptor.configurable = !0, "value" in descriptor && (descriptor.writable = !0), Object.defineProperty(target, descriptor.key, descriptor)
			}
		}

		function _createClass(Constructor, protoProps, staticProps) {
			return protoProps && _defineProperties(Constructor.prototype, protoProps), staticProps && _defineProperties(Constructor, staticProps), Object.defineProperty(Constructor, "prototype", {
				writable: !1
			}), Constructor
		}

		function _slicedToArray(arr, i) {
			return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest()
		}

		function _nonIterableRest() {
			throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
		}

		function _iterableToArrayLimit(arr, i) {
			var _i = null == arr ? null : "undefined" != typeof Symbol && arr[Symbol.iterator] || arr["@@iterator"];
			if (null != _i) {
				var _s, _e, _arr = [],
					_n = !0,
					_d = !1;
				try {
					for (_i = _i.call(arr); !(_n = (_s = _i.next())
						.done) && (_arr.push(_s.value), !i || _arr.length !== i); _n = !0);
				} catch (err) {
					_d = !0, _e = err
				} finally {
					try {
						_n || null == _i.return || _i.return()
					} finally {
						if (_d) throw _e
					}
				}
				return _arr
			}
		}

		function _arrayWithHoles(arr) {
			if (Array.isArray(arr)) return arr
		}

		function _toConsumableArray(arr) {
			return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread()
		}

		function _nonIterableSpread() {
			throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")
		}

		function _unsupportedIterableToArray(o, minLen) {
			if (o) {
				if ("string" == typeof o) return _arrayLikeToArray(o, minLen);
				var n = Object.prototype.toString.call(o)
					.slice(8, -1);
				return "Object" === n && o.constructor && (n = o.constructor.name), "Map" === n || "Set" === n ? Array.from(o) : "Arguments" === n || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n) ? _arrayLikeToArray(o, minLen) : void 0
			}
		}

		function _iterableToArray(iter) {
			if ("undefined" != typeof Symbol && null != iter[Symbol.iterator] || null != iter["@@iterator"]) return Array.from(iter)
		}

		function _arrayWithoutHoles(arr) {
			if (Array.isArray(arr)) return _arrayLikeToArray(arr)
		}

		function _arrayLikeToArray(arr, len) {
			(null == len || len > arr.length) && (len = arr.length);
			for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];
			return arr2
		}

		function _typeof(obj) {
			return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(obj) {
				return typeof obj
			} : function(obj) {
				return obj && "function" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? "symbol" : typeof obj
			}, _typeof(obj)
		}
		var errorPrologRegExp = /^(?:(?:uncaught\s+(?:exception:\s+)?)?\w*(?:error|exception|_err):\s+)+/i,
			Alert = function() {
				function mesg(where, error, isFatal, isUncaught) {
					var mesg = "Error",
						nice = "A".concat(isFatal ? " fatal" : "n", " error has occurred.");
					nice += isFatal ? " Aborting." : " You may be able to continue, but some parts may not work properly.";
					var isObject = null !== error && "object" === _typeof(error),
						what = (isObject && "message" in error ? String(error.message)
							.replace(errorPrologRegExp, "") : String(error))
						.trim() || "unknown error";
					null != where && (mesg += " [".concat(where, "]")), mesg += ": ".concat(what, "."), isObject && "stack" in error && (mesg += "\n\nStack Trace:\n".concat(error.stack)), mesg && (nice += "\n\n".concat(mesg)), isUncaught || console[isFatal ? "error" : "warn"](mesg), window.alert(nice)
				}
				var origOnError;
				return origOnError = window.onerror, window.onerror = function(what, source, lineNum, colNum, error) {
					"complete" === document.readyState ? mesg(null, null != error ? error : what, !1, !0) : (mesg(null, null != error ? error : what, !0, !0), window.onerror = origOnError, "function" == typeof window.onerror && window.onerror.apply(this, arguments))
				}, Object.freeze(Object.defineProperties({}, {
					error: {
						value: function(where, error) {
							mesg(where, error)
						}
					},
					fatal: {
						value: function(where, error) {
							mesg(where, error, !0)
						}
					}
				}))
			}(),
			Patterns = (wsMap = new Map([
					[" ", "\\u0020"],
					["\f", "\\f"],
					["\n", "\\n"],
					["\r", "\\r"],
					["\t", "\\t"],
					["\v", "\\v"],
					[" ", "\\u00a0"],
					[" ", "\\u1680"],
					["᠎", "\\u180e"],
					[" ", "\\u2000"],
					[" ", "\\u2001"],
					[" ", "\\u2002"],
					[" ", "\\u2003"],
					[" ", "\\u2004"],
					[" ", "\\u2005"],
					[" ", "\\u2006"],
					[" ", "\\u2007"],
					[" ", "\\u2008"],
					[" ", "\\u2009"],
					[" ", "\\u200a"],
					["\u2028", "\\u2028"],
					["\u2029", "\\u2029"],
					[" ", "\\u202f"],
					[" ", "\\u205f"],
					["　", "\\u3000"],
					["\ufeff", "\\ufeff"]
				]), wsRe = /^\s$/, missing = "", wsMap.forEach((function(pat, char) {
					wsRe.test(char) || (missing += pat)
				})), space = missing ? "[\\s".concat(missing, "]") : "\\s", spaceNoTerminator = "[\\u0020\\f\\t\\v\\u00a0\\u1680\\u180e\\u2000-\\u200a\\u202f\\u205f\\u3000\\ufeff]", notSpace = "\\s" === space ? "\\S" : space.replace(/^\[/, "[^"), anyChar = "(?:.|".concat("[\\n\\r\\u2028\\u2029]", ")"), anyLetter = "[0-9A-Z_a-z\\-\\u00c0-\\u00d6\\u00d8-\\u00f6\\u00f8-\\u00ff\\u0150\\u0170\\u0151\\u0171]", anyLetterStrict = anyLetter.replace("\\-", ""), identifier = "".concat("[$A-Z_a-z]")
				.concat("[$0-9A-Z_a-z]", "*"), variable = "[$_]" + identifier, htmlTagName = "[A-Za-z](?:".concat(cENChar = "(?:[\\x2D.0-9A-Z_a-z\\xB7\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u037D\\u037F-\\u1FFF\\u200C\\u200D\\u203F\\u2040\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]|[\\uD800-\\uDB7F][\\uDC00-\\uDFFF])", "*-")
				.concat(cENChar, "*|[0-9A-Za-z]*)"), twStyle = "(".concat(anyLetter, "+)\\(([^\\)\\|\\n]+)\\):"), cssStyle = "".concat(spaceNoTerminator, "*(")
				.concat(anyLetter, "+)")
				.concat(spaceNoTerminator, "*:([^;\\|\\n]+);"), idOrClass = "".concat(spaceNoTerminator, "*((?:")
				.concat("[#.]")
				.concat(anyLetter, "+")
				.concat(spaceNoTerminator, "*)+);"), inlineCss = "".concat(twStyle, "|")
				.concat(cssStyle, "|")
				.concat(idOrClass), Object.freeze({
					space: space,
					spaceNoTerminator: spaceNoTerminator,
					lineTerminator: "[\\n\\r\\u2028\\u2029]",
					notSpace: notSpace,
					anyChar: anyChar,
					anyLetter: anyLetter,
					anyLetterStrict: anyLetterStrict,
					identifierFirstChar: "[$A-Z_a-z]",
					identifierNextChar: "[$0-9A-Z_a-z]",
					identifier: identifier,
					variableSigil: "[$_]",
					variable: variable,
					macroName: "[A-Za-z][\\w-]*|[=-]",
					templateName: "[A-Za-z][\\w-]*",
					htmlTagName: htmlTagName,
					cssIdOrClassSigil: "[#.]",
					cssImage: "\\[[<>]?[Ii][Mm][Gg]\\[(?:\\s|\\S)*?\\]\\]+",
					inlineCss: inlineCss,
					url: "(?:file|https?|mailto|ftp|javascript|irc|news|data):[^\\s'\"]+"
				})),
			wsMap, wsRe, missing, cENChar, twStyle, cssStyle, idOrClass, space, spaceNoTerminator, notSpace, anyChar, anyLetter, anyLetterStrict, identifier, variable, htmlTagName, inlineCss;
		! function() {
			var startWSRe, endWSRe, _trimString = (startWSRe = new RegExp("^".concat(Patterns.space)
				.concat(Patterns.space, "*")), endWSRe = new RegExp("".concat(Patterns.space)
				.concat(Patterns.space, "*$")), function(str, where) {
				var val = String(str);
				if (!val) return val;
				switch (where) {
					case "start":
						return startWSRe.test(val) ? val.replace(startWSRe, "") : val;
					case "end":
						return endWSRe.test(val) ? val.replace(endWSRe, "") : val;
					default:
						throw new Error('_trimString called with incorrect where parameter value: "'.concat(where, '"'))
				}
			});

			function _createPadString(length, padding) {
				var targetLength = Number.parseInt(length, 10) || 0;
				if (targetLength < 1) return "";
				var padString = void 0 === padding ? "" : String(padding);
				for ("" === padString && (padString = " "); padString.length < targetLength;) {
					var curPadLength = padString.length,
						remainingLength = targetLength - curPadLength;
					padString += curPadLength > remainingLength ? padString.slice(0, remainingLength) : padString
				}
				return padString.length > targetLength && (padString = padString.slice(0, targetLength)), padString
			}
			Array.prototype.flat || Object.defineProperty(Array.prototype, "flat", {
				configurable: !0,
				writable: !0,
				value: function flat() {
					if (null == this) throw new TypeError("Array.prototype.flat called on null or undefined");
					var depth = 0 === arguments.length ? 1 : Number(arguments[0]) || 0;
					return depth < 1 ? Array.prototype.slice.call(this) : Array.prototype.reduce.call(this, (function(acc, cur) {
						return cur instanceof Array ? acc.push.apply(acc, _toConsumableArray(flat.call(cur, depth - 1))) : acc.push(cur), acc
					}), [])
				}
			}), Array.prototype.flatMap || Object.defineProperty(Array.prototype, "flatMap", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.flatMap called on null or undefined");
					return Array.prototype.map.apply(this, arguments)
						.flat()
				}
			}), Array.prototype.includes || Object.defineProperty(Array.prototype, "includes", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.includes called on null or undefined");
					if (0 === arguments.length) return !1;
					var length = this.length >>> 0;
					if (0 === length) return !1;
					var needle = arguments[0],
						i = Number(arguments[1]) || 0;
					for (i < 0 && (i = Math.max(0, length + i)); i < length; ++i) {
						var value = this[i];
						if (value === needle || value != value && needle != needle) return !0
					}
					return !1
				}
			}), Object.entries || Object.defineProperty(Object, "entries", {
				configurable: !0,
				writable: !0,
				value: function(obj) {
					if ("object" !== _typeof(obj) || null === obj) throw new TypeError("Object.entries object parameter must be an object");
					return Object.keys(obj)
						.map((function(key) {
							return [key, obj[key]]
						}))
				}
			}), Object.fromEntries || Object.defineProperty(Object, "fromEntries", {
				configurable: !0,
				writable: !0,
				value: function(iter) {
					return Array.from(iter)
						.reduce((function(acc, pair) {
							if (Object(pair) !== pair) throw new TypeError("Object.fromEntries iterable parameter must yield objects");
							return pair[0] in acc ? Object.defineProperty(acc, pair[0], {
								configurable: !0,
								enumerable: !0,
								writable: !0,
								value: pair[1]
							}) : acc[pair[0]] = pair[1], acc
						}), {})
				}
			}), Object.getOwnPropertyDescriptors || Object.defineProperty(Object, "getOwnPropertyDescriptors", {
				configurable: !0,
				writable: !0,
				value: function(obj) {
					if (null == obj) throw new TypeError("Object.getOwnPropertyDescriptors object parameter is null or undefined");
					var O = Object(obj);
					return Reflect.ownKeys(O)
						.reduce((function(acc, key) {
							var desc = Object.getOwnPropertyDescriptor(O, key);
							return void 0 !== desc && (key in acc ? Object.defineProperty(acc, key, {
								configurable: !0,
								enumerable: !0,
								writable: !0,
								value: desc
							}) : acc[key] = desc), acc
						}), {})
				}
			}), Object.values || Object.defineProperty(Object, "values", {
				configurable: !0,
				writable: !0,
				value: function(obj) {
					if ("object" !== _typeof(obj) || null === obj) throw new TypeError("Object.values object parameter must be an object");
					return Object.keys(obj)
						.map((function(key) {
							return obj[key]
						}))
				}
			}), String.prototype.padStart || Object.defineProperty(String.prototype, "padStart", {
				configurable: !0,
				writable: !0,
				value: function(length, padding) {
					if (null == this) throw new TypeError("String.prototype.padStart called on null or undefined");
					var baseString = String(this),
						baseLength = baseString.length,
						targetLength = Number.parseInt(length, 10);
					return targetLength <= baseLength ? baseString : _createPadString(targetLength - baseLength, padding) + baseString
				}
			}), String.prototype.padEnd || Object.defineProperty(String.prototype, "padEnd", {
				configurable: !0,
				writable: !0,
				value: function(length, padding) {
					if (null == this) throw new TypeError("String.prototype.padEnd called on null or undefined");
					var baseString = String(this),
						baseLength = baseString.length,
						targetLength = Number.parseInt(length, 10);
					return targetLength <= baseLength ? baseString : baseString + _createPadString(targetLength - baseLength, padding)
				}
			}), String.prototype.trimStart || Object.defineProperty(String.prototype, "trimStart", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.trimStart called on null or undefined");
					return _trimString(this, "start")
				}
			}), String.prototype.trimLeft || Object.defineProperty(String.prototype, "trimLeft", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.trimLeft called on null or undefined");
					return _trimString(this, "start")
				}
			}), String.prototype.trimEnd || Object.defineProperty(String.prototype, "trimEnd", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.trimEnd called on null or undefined");
					return _trimString(this, "end")
				}
			}), String.prototype.trimRight || Object.defineProperty(String.prototype, "trimRight", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.trimRight called on null or undefined");
					return _trimString(this, "end")
				}
			})
		}(),
		function() {
			var _nativeMathRandom = Math.random,
				_regExpMetaCharsRe, _hasRegExpMetaCharsRe, _formatRegExp, _hasFormatRegExp;

			function _random() {
				var min, max;
				switch (arguments.length) {
					case 0:
						throw new Error("_random called with insufficient parameters");
					case 1:
						min = 0, max = arguments[0];
						break;
					default:
						min = arguments[0], max = arguments[1]
				}
				if (min > max) {
					var _ref = [max, min];
					min = _ref[0], max = _ref[1]
				}
				return Math.floor(_nativeMathRandom() * (max - min + 1)) + min
			}

			function _randomIndex(length, boundsArgs) {
				var min, max;
				switch (boundsArgs.length) {
					case 1:
						min = 0, max = length - 1;
						break;
					case 2:
						min = 0, max = Math.trunc(boundsArgs[1]);
						break;
					default:
						min = Math.trunc(boundsArgs[1]), max = Math.trunc(boundsArgs[2])
				}
				return Number.isNaN(min) ? min = 0 : !Number.isFinite(min) || min >= length ? min = length - 1 : min < 0 && (min = length + min) < 0 && (min = 0), Number.isNaN(max) ? max = 0 : (!Number.isFinite(max) || max >= length || max < 0 && (max = length + max) < 0) && (max = length - 1), _random(min, max)
			}

			function _getCodePointStartAndEnd(str, pos) {
				var code = str.charCodeAt(pos);
				if (Number.isNaN(code)) return {
					char: "",
					start: -1,
					end: -1
				};
				if (code < 55296 || code > 57343) return {
					char: str.charAt(pos),
					start: pos,
					end: pos
				};
				if (code >= 55296 && code <= 56319) {
					var nextPos = pos + 1;
					if (nextPos >= str.length) throw new Error("high surrogate without trailing low surrogate");
					var nextCode = str.charCodeAt(nextPos);
					if (nextCode < 56320 || nextCode > 57343) throw new Error("high surrogate without trailing low surrogate");
					return {
						char: str.charAt(pos) + str.charAt(nextPos),
						start: pos,
						end: nextPos
					}
				}
				if (0 === pos) throw new Error("low surrogate without leading high surrogate");
				var prevPos = pos - 1,
					prevCode = str.charCodeAt(prevPos);
				if (prevCode < 55296 || prevCode > 56319) throw new Error("low surrogate without leading high surrogate");
				return {
					char: str.charAt(prevPos) + str.charAt(pos),
					start: prevPos,
					end: pos
				}
			}
			Object.defineProperty(Array, "random", {
				configurable: !0,
				writable: !0,
				value: function(array) {
					if ("object" !== _typeof(array) || null === array || !Object.prototype.hasOwnProperty.call(array, "length")) throw new TypeError("Array.random array parameter must be an array or array-lke object");
					var length = array.length >>> 0;
					if (0 !== length) {
						var index = 0 === arguments.length ? _random(0, length - 1) : _randomIndex(length, Array.prototype.slice.call(arguments, 1));
						return array[index]
					}
				}
			}), Object.defineProperty(Array.prototype, "concatUnique", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.concatUnique called on null or undefined");
					var result = Array.from(this);
					if (0 === arguments.length) return result;
					var items = Array.prototype.reduce.call(arguments, (function(prev, cur) {
							return prev.concat(cur)
						}), []),
						addSize = items.length;
					if (0 === addSize) return result;
					for (var indexOf = Array.prototype.indexOf, push = Array.prototype.push, i = 0; i < addSize; ++i) {
						var value = items[i]; - 1 === indexOf.call(result, value) && push.call(result, value)
					}
					return result
				}
			}), Object.defineProperty(Array.prototype, "count", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.count called on null or undefined");
					for (var indexOf = Array.prototype.indexOf, needle = arguments[0], pos = Number(arguments[1]) || 0, count = 0; - 1 !== (pos = indexOf.call(this, needle, pos));) ++count, ++pos;
					return count
				}
			}), Object.defineProperty(Array.prototype, "countWith", {
				configurable: !0,
				writable: !0,
				value: function(predicate, thisArg) {
					if (null == this) throw new TypeError("Array.prototype.countWith called on null or undefined");
					if ("function" != typeof predicate) throw new Error("Array.prototype.countWith predicate parameter must be a function");
					var length = this.length >>> 0;
					if (0 === length) return 0;
					for (var count = 0, i = 0; i < length; ++i) predicate.call(thisArg, this[i], i, this) && ++count;
					return count
				}
			}), Object.defineProperty(Array.prototype, "delete", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.delete called on null or undefined");
					if (0 === arguments.length) return [];
					var length = this.length >>> 0;
					if (0 === length) return [];
					for (var needles = Array.prototype.concat.apply([], arguments), needlesLength = needles.length, indices = [], i = 0; i < length; ++i)
						for (var value = this[i], j = 0; j < needlesLength; ++j) {
							var needle = needles[j];
							if (value === needle || value != value && needle != needle) {
								indices.push(i);
								break
							}
						}
					for (var result = [], _i = 0, iend = indices.length; _i < iend; ++_i) result[_i] = this[indices[_i]];
					for (var splice = Array.prototype.splice, _i2 = indices.length - 1; _i2 >= 0; --_i2) splice.call(this, indices[_i2], 1);
					return result
				}
			}), Object.defineProperty(Array.prototype, "deleteAt", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.deleteAt called on null or undefined");
					if (0 === arguments.length) return [];
					var length = this.length >>> 0;
					if (0 === length) return [];
					for (var splice = Array.prototype.splice, cpyIndices = _toConsumableArray(new Set(Array.prototype.concat.apply([], arguments)
								.map((function(x) {
									return x < 0 ? Math.max(0, length + x) : x
								})))
							.values()), delIndices = _toConsumableArray(cpyIndices)
						.sort((function(a, b) {
							return b - a
						})), result = [], i = 0, iend = cpyIndices.length; i < iend; ++i) result[i] = this[cpyIndices[i]];
					for (var _i3 = 0, _iend = delIndices.length; _i3 < _iend; ++_i3) splice.call(this, delIndices[_i3], 1);
					return result
				}
			}), Object.defineProperty(Array.prototype, "deleteWith", {
				configurable: !0,
				writable: !0,
				value: function(predicate, thisArg) {
					if (null == this) throw new TypeError("Array.prototype.deleteWith called on null or undefined");
					if ("function" != typeof predicate) throw new Error("Array.prototype.deleteWith predicate parameter must be a function");
					var length = this.length >>> 0;
					if (0 === length) return [];
					for (var splice = Array.prototype.splice, indices = [], result = [], i = 0; i < length; ++i) predicate.call(thisArg, this[i], i, this) && (result.push(this[i]), indices.push(i));
					for (var _i4 = indices.length - 1; _i4 >= 0; --_i4) splice.call(this, indices[_i4], 1);
					return result
				}
			}), Object.defineProperty(Array.prototype, "first", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.first called on null or undefined");
					if (0 !== this.length >>> 0) return this[0]
				}
			}), Object.defineProperty(Array.prototype, "includesAll", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.includesAll called on null or undefined");
					if (1 === arguments.length) return Array.isArray(arguments[0]) ? Array.prototype.includesAll.apply(this, arguments[0]) : Array.prototype.includes.apply(this, arguments);
					for (var i = 0, iend = arguments.length; i < iend; ++i)
						if (!Array.prototype.some.call(this, (function(val) {
							return val === this.val || val != val && this.val != this.val
						}), {
							val: arguments[i]
						})) return !1;
					return !0
				}
			}), Object.defineProperty(Array.prototype, "includesAny", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.includesAny called on null or undefined");
					if (1 === arguments.length) return Array.isArray(arguments[0]) ? Array.prototype.includesAny.apply(this, arguments[0]) : Array.prototype.includes.apply(this, arguments);
					for (var i = 0, iend = arguments.length; i < iend; ++i)
						if (Array.prototype.some.call(this, (function(val) {
							return val === this.val || val != val && this.val != this.val
						}), {
							val: arguments[i]
						})) return !0;
					return !1
				}
			}), Object.defineProperty(Array.prototype, "last", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.last called on null or undefined");
					var length = this.length >>> 0;
					if (0 !== length) return this[length - 1]
				}
			}), Object.defineProperty(Array.prototype, "pluck", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.pluck called on null or undefined");
					var length = this.length >>> 0;
					if (0 !== length) {
						var index = 0 === arguments.length ? _random(0, length - 1) : _randomIndex(length, Array.prototype.slice.call(arguments));
						return Array.prototype.splice.call(this, index, 1)[0]
					}
				}
			}), Object.defineProperty(Array.prototype, "pluckMany", {
				configurable: !0,
				writable: !0,
				value: function(wantSize) {
					if (null == this) throw new TypeError("Array.prototype.pluckMany called on null or undefined");
					var length = this.length >>> 0;
					if (0 === length) return [];
					var want = Math.trunc(wantSize);
					if (!Number.isInteger(want)) throw new Error("Array.prototype.pluckMany want parameter must be an integer");
					if (want < 1) return [];
					want > length && (want = length);
					var splice = Array.prototype.splice,
						result = [],
						max = length - 1;
					do {
						result.push(splice.call(this, _random(0, max--), 1)[0])
					} while (result.length < want);
					return result
				}
			}), Object.defineProperty(Array.prototype, "pushUnique", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.pushUnique called on null or undefined");
					var addSize = arguments.length;
					if (0 === addSize) return this.length >>> 0;
					for (var indexOf = Array.prototype.indexOf, push = Array.prototype.push, i = 0; i < addSize; ++i) {
						var value = arguments[i]; - 1 === indexOf.call(this, value) && push.call(this, value)
					}
					return this.length >>> 0
				}
			}), Object.defineProperty(Array.prototype, "random", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.random called on null or undefined");
					var length = this.length >>> 0;
					if (0 !== length) {
						var index = 0 === arguments.length ? _random(0, length - 1) : _randomIndex(length, Array.prototype.slice.call(arguments));
						return this[index]
					}
				}
			}), Object.defineProperty(Array.prototype, "randomMany", {
				configurable: !0,
				writable: !0,
				value: function(wantSize) {
					if (null == this) throw new TypeError("Array.prototype.randomMany called on null or undefined");
					var length = this.length >>> 0;
					if (0 === length) return [];
					var want = Math.trunc(wantSize);
					if (!Number.isInteger(want)) throw new Error("Array.prototype.randomMany want parameter must be an integer");
					if (want < 1) return [];
					want > length && (want = length);
					var picked = new Map,
						result = [],
						max = length - 1;
					do {
						var i = void 0;
						do {
							i = _random(0, max)
						} while (picked.has(i));
						picked.set(i, !0), result.push(this[i])
					} while (result.length < want);
					return result
				}
			}), Object.defineProperty(Array.prototype, "shuffle", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.shuffle called on null or undefined");
					var length = this.length >>> 0;
					if (0 === length) return this;
					for (var i = length - 1; i > 0; --i) {
						var j = Math.floor(_nativeMathRandom() * (i + 1));
						if (i !== j) {
							var swap = this[i];
							this[i] = this[j], this[j] = swap
						}
					}
					return this
				}
			}), Object.defineProperty(Array.prototype, "unshiftUnique", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.unshiftUnique called on null or undefined");
					var addSize = arguments.length;
					if (0 === addSize) return this.length >>> 0;
					for (var indexOf = Array.prototype.indexOf, unshift = Array.prototype.unshift, i = 0; i < addSize; ++i) {
						var value = arguments[i]; - 1 === indexOf.call(this, value) && unshift.call(this, value)
					}
					return this.length >>> 0
				}
			}), Object.defineProperty(Function.prototype, "partial", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Function.prototype.partial called on null or undefined");
					var slice = Array.prototype.slice,
						fn = this,
						bound = slice.call(arguments, 0);
					return function() {
						for (var applied = [], argc = 0, i = 0; i < bound.length; ++i) applied.push(bound[i] === undefined ? arguments[argc++] : bound[i]);
						return fn.apply(this, applied.concat(slice.call(arguments, argc)))
					}
				}
			}), Object.defineProperty(Math, "clamp", {
				configurable: !0,
				writable: !0,
				value: function(num, min, max) {
					var value = Number(num);
					return Number.isNaN(value) ? NaN : value.clamp(min, max)
				}
			}), Object.defineProperty(Math, "easeInOut", {
				configurable: !0,
				writable: !0,
				value: function(num) {
					return 1 - (Math.cos(Number(num) * Math.PI) + 1) / 2
				}
			}), Object.defineProperty(Number.prototype, "clamp", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Number.prototype.clamp called on null or undefined");
					if (2 !== arguments.length) throw new Error("Number.prototype.clamp called with an incorrect number of parameters");
					var min = Number(arguments[0]),
						max = Number(arguments[1]);
					if (min > max) {
						var _ref2 = [max, min];
						min = _ref2[0], max = _ref2[1]
					}
					return Math.min(Math.max(this, min), max)
				}
			}), RegExp.escape || (_regExpMetaCharsRe = /[\\^$*+?.()|[\]{}]/g, _hasRegExpMetaCharsRe = new RegExp(_regExpMetaCharsRe.source), Object.defineProperty(RegExp, "escape", {
				configurable: !0,
				writable: !0,
				value: function(str) {
					var val = String(str);
					return val && _hasRegExpMetaCharsRe.test(val) ? val.replace(_regExpMetaCharsRe, "\\$&") : val
				}
			})), _formatRegExp = /{(\d+)(?:,([+-]?\d+))?}/g, _hasFormatRegExp = new RegExp(_formatRegExp.source), Object.defineProperty(String, "format", {
				configurable: !0,
				writable: !0,
				value: function(format) {
					function padString(str, align, pad) {
						if (!align) return str;
						var plen = Math.abs(align) - str.length;
						if (plen < 1) return str;
						var padding = String(pad)
							.repeat(plen);
						return align < 0 ? str + padding : padding + str
					}
					if (arguments.length < 2) return 0 === arguments.length ? "" : format;
					var args = 2 === arguments.length && Array.isArray(arguments[1]) ? _toConsumableArray(arguments[1]) : Array.prototype.slice.call(arguments, 1);
					return 0 === args.length ? format : _hasFormatRegExp.test(format) ? (_formatRegExp.lastIndex = 0, format.replace(_formatRegExp, (function(match, index, align) {
						var retval = args[index];
						if (null == retval) return "";
						for (;
							"function" == typeof retval;) retval = retval();
						switch (_typeof(retval)) {
							case "string":
								break;
							case "object":
								retval = JSON.stringify(retval);
								break;
							default:
								retval = String(retval)
						}
						return padString(retval, align ? Number.parseInt(align, 10) : 0, " ")
					}))) : format
				}
			}), Object.defineProperty(String.prototype, "contains", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.contains called on null or undefined");
					return -1 !== String.prototype.indexOf.apply(this, arguments)
				}
			}), Object.defineProperty(String.prototype, "count", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.count called on null or undefined");
					var needle = String(arguments[0] || "");
					if ("" === needle) return 0;
					for (var indexOf = String.prototype.indexOf, step = needle.length, pos = Number(arguments[1]) || 0, count = 0; - 1 !== (pos = indexOf.call(this, needle, pos));) ++count, pos += step;
					return count
				}
			}), Object.defineProperty(String.prototype, "first", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.first called on null or undefined");
					return _getCodePointStartAndEnd(String(this), 0)
						.char
				}
			}), Object.defineProperty(String.prototype, "last", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.last called on null or undefined");
					var str = String(this);
					return _getCodePointStartAndEnd(str, str.length - 1)
						.char
				}
			}), Object.defineProperty(String.prototype, "splice", {
				configurable: !0,
				writable: !0,
				value: function(startAt, delCount, replacement) {
					if (null == this) throw new TypeError("String.prototype.splice called on null or undefined");
					var length = this.length >>> 0;
					if (0 === length) return "";
					var start = Number(startAt);
					Number.isSafeInteger(start) ? start < 0 && (start += length) < 0 && (start = 0) : start = 0, start > length && (start = length);
					var count = Number(delCount);
					(!Number.isSafeInteger(count) || count < 0) && (count = 0);
					var res = this.slice(0, start);
					return void 0 !== replacement && (res += replacement), start + count < length && (res += this.slice(start + count)), res
				}
			}), Object.defineProperty(String.prototype, "splitOrEmpty", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.splitOrEmpty called on null or undefined");
					return "" === String(this) ? [] : String.prototype.split.apply(this, arguments)
				}
			}), Object.defineProperty(String.prototype, "toLocaleUpperFirst", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.toLocaleUpperFirst called on null or undefined");
					var str = String(this),
						_getCodePointStartAnd3 = _getCodePointStartAndEnd(str, 0),
						char = _getCodePointStartAnd3.char,
						end = _getCodePointStartAnd3.end;
					return -1 === end ? "" : char.toLocaleUpperCase() + str.slice(end + 1)
				}
			}), Object.defineProperty(String.prototype, "toUpperFirst", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.toUpperFirst called on null or undefined");
					var str = String(this),
						_getCodePointStartAnd4 = _getCodePointStartAndEnd(str, 0),
						char = _getCodePointStartAnd4.char,
						end = _getCodePointStartAnd4.end;
					return -1 === end ? "" : char.toUpperCase() + str.slice(end + 1)
				}
			}), Object.defineProperty(Date.prototype, "toJSON", {
				configurable: !0,
				writable: !0,
				value: function() {
					return ["(revive:date)", this.toISOString()]
				}
			}), Object.defineProperty(Function.prototype, "toJSON", {
				configurable: !0,
				writable: !0,
				value: function() {
					return ["(revive:eval)", "(".concat(this.toString(), ")")]
				}
			}), Object.defineProperty(Map.prototype, "toJSON", {
				configurable: !0,
				writable: !0,
				value: function() {
					return ["(revive:map)", _toConsumableArray(this)]
				}
			}), Object.defineProperty(RegExp.prototype, "toJSON", {
				configurable: !0,
				writable: !0,
				value: function() {
					return ["(revive:eval)", this.toString()]
				}
			}), Object.defineProperty(Set.prototype, "toJSON", {
				configurable: !0,
				writable: !0,
				value: function() {
					return ["(revive:set)", _toConsumableArray(this)]
				}
			}), Object.defineProperty(JSON, "reviveWrapper", {
				configurable: !0,
				writable: !0,
				value: function(code, data) {
					if ("string" != typeof code) throw new TypeError("JSON.reviveWrapper code parameter must be a string");
					return ["(revive:eval)", [code, data]]
				}
			}), Object.defineProperty(JSON, "_real_stringify", {
				value: JSON.stringify
			}), Object.defineProperty(JSON, "stringify", {
				configurable: !0,
				writable: !0,
				value: function(_value, replacer, space) {
					return JSON._real_stringify(_value, (function(key, val) {
						var value = val;
						if ("function" == typeof replacer) try {
							value = replacer(key, value)
						} catch (ex) {}
						return void 0 === value && (value = ["(revive:eval)", "undefined"]), value
					}), space)
				}
			}), Object.defineProperty(JSON, "_real_parse", {
				value: JSON.parse
			}), Object.defineProperty(JSON, "parse", {
				configurable: !0,
				writable: !0,
				value: function value(text, reviver) {
					return JSON._real_parse(text, (function(key, val) {
						var value = val;
						if (Array.isArray(value) && 2 === value.length) switch (value[0]) {
							case "(revive:set)":
								value = new Set(value[1]);
								break;
							case "(revive:map)":
								value = new Map(value[1]);
								break;
							case "(revive:date)":
								value = new Date(value[1]);
								break;
							case "(revive:eval)":
								try {
									if (Array.isArray(value[1])) {
										var $ReviveData$ = value[1][1];
										value = eval(value[1][0])
									} else value = eval(value[1])
								} catch (ex) {}
						} else if ("string" == typeof value && "@@revive@@" === value.slice(0, 10)) try {
							value = eval(value.slice(10))
						} catch (ex) {}
						if ("function" == typeof reviver) try {
							value = reviver(key, value)
						} catch (ex) {}
						return value
					}))
				}
			}), Object.defineProperty(Array.prototype, "contains", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.contains called on null or undefined");
					return Array.prototype.includes.apply(this, arguments)
				}
			}), Object.defineProperty(Array.prototype, "containsAll", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.containsAll called on null or undefined");
					return Array.prototype.includesAll.apply(this, arguments)
				}
			}), Object.defineProperty(Array.prototype, "containsAny", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.containsAny called on null or undefined");
					return Array.prototype.includesAny.apply(this, arguments)
				}
			}), Object.defineProperty(Array.prototype, "flatten", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("Array.prototype.flatten called on null or undefined");
					return Array.prototype.flat.call(this, 1 / 0)
				}
			}), Object.defineProperty(String.prototype, "readBracketedList", {
				configurable: !0,
				writable: !0,
				value: function() {
					if (null == this) throw new TypeError("String.prototype.readBracketedList called on null or undefined");
					for (var match, re = new RegExp("(?:\\[\\[((?:\\s|\\S)*?)\\]\\])|([^\"'\\s]\\S*)", "gm"), names = []; null !== (match = re.exec(this));) match[1] ? names.push(match[1]) : match[2] && names.push(match[2]);
					return names
				}
			})
		}();
		var Browser = (userAgent = navigator.userAgent.toLowerCase(), winPhone = userAgent.includes("windows phone"), isMobile = Object.freeze({
				Android: !winPhone && userAgent.includes("android"),
				BlackBerry: /blackberry|bb10/.test(userAgent),
				iOS: !winPhone && /ip(?:hone|ad|od)/.test(userAgent),
				Opera: !winPhone && ("object" === _typeof(window.operamini) || userAgent.includes("opera mini")),
				Windows: winPhone || /iemobile|wpdesktop/.test(userAgent),
				any: function() {
					return isMobile.Android || isMobile.BlackBerry || isMobile.iOS || isMobile.Opera || isMobile.Windows
				}
			}), isGecko = !isMobile.Windows && !/khtml|trident|edge/.test(userAgent) && userAgent.includes("gecko"), isIE = !userAgent.includes("opera") && /msie|trident/.test(userAgent), ieVersion = isIE ? (ver = /(?:msie\s+|rv:)(\d+\.\d)/.exec(userAgent)) ? Number(ver[1]) : 0 : null, isOpera = userAgent.includes("opera") || userAgent.includes(" opr/"), operaVersion = isOpera ? function() {
				var ver = new RegExp("".concat(/khtml|chrome/.test(userAgent) ? "opr" : "version", "\\/(\\d+\\.\\d+)"))
					.exec(userAgent);
				return ver ? Number(ver[1]) : 0
			}() : null, isVivaldi = userAgent.includes("vivaldi"), Object.freeze({
				userAgent: userAgent,
				isMobile: isMobile,
				isGecko: isGecko,
				isIE: isIE,
				ieVersion: ieVersion,
				isOpera: isOpera,
				operaVersion: operaVersion,
				isVivaldi: isVivaldi
			})),
			ver, userAgent, winPhone, isMobile, isGecko, isIE, ieVersion, isOpera, operaVersion, isVivaldi, Has = (hasAudioElement = function() {
				try {
					return "function" == typeof document.createElement("audio")
						.canPlayType
				} catch (ex) {}
				return !1
			}(), hasFile = function() {
				try {
					return "Blob" in window && "File" in window && "FileList" in window && "FileReader" in window && (!Browser.isOpera || Browser.operaVersion >= 15)
				} catch (ex) {}
				return !1
			}(), hasGeolocation = function() {
				try {
					return "geolocation" in navigator && "function" == typeof navigator.geolocation.getCurrentPosition && "function" == typeof navigator.geolocation.watchPosition
				} catch (ex) {}
				return !1
			}(), hasMutationObserver = function() {
				try {
					return "MutationObserver" in window && "function" == typeof window.MutationObserver
				} catch (ex) {}
				return !1
			}(), hasPerformance = function() {
				try {
					return "performance" in window && "function" == typeof window.performance.now
				} catch (ex) {}
				return !1
			}(), hasTouch = function() {
				try {
					return "ontouchstart" in window || !!window.DocumentTouch && document instanceof window.DocumentTouch || !!navigator.maxTouchPoints || !!navigator.msMaxTouchPoints
				} catch (ex) {}
				return !1
			}(), hasTransitionEndEvent = function() {
				try {
					for (var teMap = new Map([
						["transition", "transitionend"],
						["MSTransition", "msTransitionEnd"],
						["WebkitTransition", "webkitTransitionEnd"],
						["MozTransition", "transitionend"]
					]), teKeys = _toConsumableArray(teMap.keys()), el = document.createElement("div"), i = 0; i < teKeys.length; ++i)
						if (el.style[teKeys[i]] !== undefined) return teMap.get(teKeys[i])
				} catch (ex) {}
				return !1
			}(), Object.freeze({
				audio: hasAudioElement,
				fileAPI: hasFile,
				geolocation: hasGeolocation,
				mutationObserver: hasMutationObserver,
				performance: hasPerformance,
				touch: hasTouch,
				transitionEndEvent: hasTransitionEndEvent
			})),
			hasAudioElement, hasFile, hasGeolocation, hasMutationObserver, hasPerformance, hasTouch, hasTransitionEndEvent, Visibility = (vendor = function() {
				try {
					return Object.freeze([{
						hiddenProperty: "hidden",
						stateProperty: "visibilityState",
						changeEvent: "visibilitychange"
					}, {
						hiddenProperty: "webkitHidden",
						stateProperty: "webkitVisibilityState",
						changeEvent: "webkitvisibilitychange"
					}, {
						hiddenProperty: "mozHidden",
						stateProperty: "mozVisibilityState",
						changeEvent: "mozvisibilitychange"
					}, {
						hiddenProperty: "msHidden",
						stateProperty: "msVisibilityState",
						changeEvent: "msvisibilitychange"
					}].find((function(vnd) {
						return vnd.hiddenProperty in document
					})))
				} catch (ex) {}
				return undefined
			}(), Object.freeze(Object.defineProperties({}, {
				vendor: {
					get: function() {
						return vendor
					}
				},
				state: {
					get: function() {
						return vendor && document[vendor.stateProperty] || "visible"
					}
				},
				isEnabled: {
					value: function() {
						return Boolean(vendor)
					}
				},
				isHidden: {
					value: function() {
						return Boolean(vendor && document[vendor.hiddenProperty])
					}
				},
				hiddenProperty: {
					value: vendor && vendor.hiddenProperty
				},
				stateProperty: {
					value: vendor && vendor.stateProperty
				},
				changeEvent: {
					value: vendor && vendor.changeEvent
				}
			}))),
			vendor, Fullscreen = function() {
				var _hasPromise, vendor = function() {
						try {
							return Object.freeze([{
								isEnabled: "fullscreenEnabled",
								element: "fullscreenElement",
								requestFn: "requestFullscreen",
								exitFn: "exitFullscreen",
								changeEvent: "fullscreenchange",
								errorEvent: "fullscreenerror"
							}, {
								isEnabled: "webkitFullscreenEnabled",
								element: "webkitFullscreenElement",
								requestFn: "webkitRequestFullscreen",
								exitFn: "webkitExitFullscreen",
								changeEvent: "webkitfullscreenchange",
								errorEvent: "webkitfullscreenerror"
							}, {
								isEnabled: "mozFullScreenEnabled",
								element: "mozFullScreenElement",
								requestFn: "mozRequestFullScreen",
								exitFn: "mozCancelFullScreen",
								changeEvent: "mozfullscreenchange",
								errorEvent: "mozfullscreenerror"
							}, {
								isEnabled: "msFullscreenEnabled",
								element: "msFullscreenElement",
								requestFn: "msRequestFullscreen",
								exitFn: "msExitFullscreen",
								changeEvent: "MSFullscreenChange",
								errorEvent: "MSFullscreenError"
							}].find((function(vnd) {
								return vnd.isEnabled in document
							})))
						} catch (ex) {}
						return undefined
					}(),
					_returnsPromise = (_hasPromise = null, function() {
						if (null !== _hasPromise) return _hasPromise;
						if (_hasPromise = !1, vendor) try {
							var value = document.exitFullscreen();
							value.catch((function() {})), _hasPromise = value instanceof Promise
						} catch (ex) {}
						return _hasPromise
					});

				function _selectElement(requestedEl) {
					var selectedEl = requestedEl || document.documentElement;
					return selectedEl === document.documentElement && ("msRequestFullscreen" === vendor.requestFn || Browser.isOpera && Browser.operaVersion < 15) && (selectedEl = document.body), selectedEl
				}

				function isFullscreen() {
					return Boolean(vendor && document[vendor.element])
				}

				function requestFullscreen(options, requestedEl) {
					var _this = this;
					if (!vendor) return Promise.reject(new Error("fullscreen not supported"));
					var element = _selectElement(requestedEl);
					if ("function" != typeof element[vendor.requestFn]) return Promise.reject(new Error("fullscreen not supported"));
					if (isFullscreen()) return Promise.resolve();
					if (_returnsPromise()) return element[vendor.requestFn](options);
					var namespace = ".Fullscreen_requestFullscreen";
					return new Promise((function(resolve, reject) {
						jQuery(element)
							.off(namespace)
							.one("".concat(vendor.errorEvent)
								.concat(namespace, " ")
								.concat(vendor.changeEvent)
								.concat(namespace), (function(ev) {
									jQuery(_this)
										.off(namespace), ev.type === vendor.errorEvent ? reject(new Error("unknown fullscreen request error")) : resolve()
								})), element[vendor.requestFn](options)
					}))
				}

				function exitFullscreen() {
					var _this2 = this;
					if (!vendor || "function" != typeof document[vendor.exitFn]) return Promise.reject(new TypeError("fullscreen not supported"));
					if (!isFullscreen()) return Promise.reject(new TypeError("fullscreen mode not active"));
					if (_returnsPromise()) return document[vendor.exitFn]();
					var namespace = ".Fullscreen_exitFullscreen";
					return new Promise((function(resolve, reject) {
						jQuery(document)
							.off(namespace)
							.one("".concat(vendor.errorEvent)
								.concat(namespace, " ")
								.concat(vendor.changeEvent)
								.concat(namespace), (function(ev) {
									jQuery(_this2)
										.off(namespace), ev.type === vendor.errorEvent ? reject(new Error("unknown fullscreen exit error")) : resolve()
								})), document[vendor.exitFn]()
					}))
				}
				return Object.freeze(Object.defineProperties({}, {
					vendor: {
						get: function() {
							return vendor
						}
					},
					element: {
						get: function() {
							return vendor ? document[vendor.element] : null
						}
					},
					isEnabled: {
						value: function() {
							return Boolean(vendor && document[vendor.isEnabled])
						}
					},
					isFullscreen: {
						value: isFullscreen
					},
					request: {
						value: requestFullscreen
					},
					exit: {
						value: exitFullscreen
					},
					toggle: {
						value: function(options, requestedEl) {
							return isFullscreen() ? exitFullscreen() : requestFullscreen(options, requestedEl)
						}
					},
					onChange: {
						value: function(handlerFn, requestedEl) {
							if (vendor) {
								var element = _selectElement(requestedEl);
								$(element)
									.on(vendor.changeEvent, handlerFn)
							}
						}
					},
					offChange: {
						value: function(handlerFn, requestedEl) {
							if (vendor) {
								var element = _selectElement(requestedEl);
								handlerFn ? $(element)
									.off(vendor.changeEvent, handlerFn) : $(element)
									.off(vendor.changeEvent)
							}
						}
					},
					onError: {
						value: function(handlerFn, requestedEl) {
							if (vendor) {
								var element = _selectElement(requestedEl);
								$(element)
									.on(vendor.errorEvent, handlerFn)
							}
						}
					},
					offError: {
						value: function(handlerFn, requestedEl) {
							if (vendor) {
								var element = _selectElement(requestedEl);
								handlerFn ? $(element)
									.off(vendor.errorEvent, handlerFn) : $(element)
									.off(vendor.errorEvent)
							}
						}
					}
				}))
			}(),
			_ref3 = Object.freeze(Object.defineProperties({}, {
				clone: {
					value: function clone(orig) {
						return "object" !== _typeof(orig) || null === orig ? orig : orig instanceof String ? String(orig) : orig instanceof Number ? Number(orig) : orig instanceof Boolean ? Boolean(orig) : "function" == typeof orig.clone ? orig.clone(!0) : orig.nodeType && "function" == typeof orig.cloneNode ? orig.cloneNode(!0) : (orig instanceof Array ? copy = new Array(orig.length) : orig instanceof Date ? copy = new Date(orig.getTime()) : orig instanceof Map ? (copy = new Map, orig.forEach((function(val, key) {
								return copy.set(key, clone(val))
							}))) : orig instanceof RegExp ? copy = new RegExp(orig) : orig instanceof Set ? (copy = new Set, orig.forEach((function(val) {
								return copy.add(clone(val))
							}))) : copy = Object.create(Object.getPrototypeOf(orig)), Object.keys(orig)
							.forEach((function(name) {
								return copy[name] = clone(orig[name])
							})), copy);
						var copy
					}
				},
				convertBreaks: {
					value: function(source) {
						for (var node, output = document.createDocumentFragment(), para = document.createElement("p"); null !== (node = source.firstChild);) {
							if (node.nodeType === Node.ELEMENT_NODE) switch (node.nodeName.toUpperCase()) {
								case "BR":
									if (null !== node.nextSibling && node.nextSibling.nodeType === Node.ELEMENT_NODE && "BR" === node.nextSibling.nodeName.toUpperCase()) {
										source.removeChild(node.nextSibling), source.removeChild(node), output.appendChild(para), para = document.createElement("p");
										continue
									}
									if (!para.hasChildNodes()) {
										source.removeChild(node);
										continue
									}
									break;
								case "ADDRESS":
								case "ARTICLE":
								case "ASIDE":
								case "BLOCKQUOTE":
								case "CENTER":
								case "DIV":
								case "DL":
								case "FIGURE":
								case "FOOTER":
								case "FORM":
								case "H1":
								case "H2":
								case "H3":
								case "H4":
								case "H5":
								case "H6":
								case "HEADER":
								case "HR":
								case "MAIN":
								case "NAV":
								case "OL":
								case "P":
								case "PRE":
								case "SECTION":
								case "TABLE":
								case "UL":
									para.hasChildNodes() && (output.appendChild(para), para = document.createElement("p")), output.appendChild(node);
									continue
							}
							para.appendChild(node)
						}
						para.hasChildNodes() && output.appendChild(para), source.appendChild(output)
					}
				},
				safeActiveElement: {
					value: function() {
						try {
							return document.activeElement || null
						} catch (ex) {
							return null
						}
					}
				},
				setDisplayTitle: {
					value: function(title) {
						if ("string" != typeof title) throw new TypeError("story display title must be a string (received: ".concat(Util.getType(title), ")"));
						var render = document.createDocumentFragment();
						new Wikifier(render, title);
						var text = function(source) {
								for (var node, copy = source.cloneNode(!0), frag = document.createDocumentFragment(); null !== (node = copy.firstChild);) {
									if (node.nodeType === Node.ELEMENT_NODE) switch (node.nodeName.toUpperCase()) {
										case "BR":
										case "DIV":
										case "P":
											frag.appendChild(document.createTextNode(" "))
									}
									frag.appendChild(node)
								}
								return frag.textContent
							}(render)
							.trim();
						document.title = Config.passages.displayTitles && "" !== State.passage && State.passage !== Config.passages.start ? "".concat(State.passage, " | ")
							.concat(text) : text;
						var storyTitle = document.getElementById("story-title");
						null !== storyTitle && jQuery(storyTitle)
							.empty()
							.append(render)
					}
				},
				setPageElement: {
					value: function(idOrElement, titles, defaultText) {
						var el = "object" === _typeof(idOrElement) ? idOrElement : document.getElementById(idOrElement);
						if (null == el) return null;
						var ids = Array.isArray(titles) ? titles : [titles];
						jQuery(el)
							.empty();
						for (var i = 0, iend = ids.length; i < iend; ++i)
							if (Story.has(ids[i])) return new Wikifier(el, Story.get(ids[i])
								.processText()
								.trim()), el;
						if (null != defaultText) {
							var text = String(defaultText)
								.trim();
							"" !== text && new Wikifier(el, text)
						}
						return el
					}
				},
				throwError: {
					value: function(place, message, source) {
						var $wrapper = jQuery(document.createElement("div")),
							$toggle = jQuery(document.createElement("button")),
							$source = jQuery(document.createElement("pre")),
							mesg = "".concat(L10n.get("errorTitle"), ": ")
							.concat(message || "unknown error");
						return $toggle.addClass("error-toggle")
							.ariaClick({
								label: L10n.get("errorToggle")
							}, (function() {
								$toggle.hasClass("enabled") ? ($toggle.removeClass("enabled"), $source.attr({
									"aria-hidden": !0,
									hidden: "hidden"
								})) : ($toggle.addClass("enabled"), $source.removeAttr("aria-hidden hidden"))
							}))
							.appendTo($wrapper), jQuery(document.createElement("span"))
							.addClass("error")
							.text(mesg)
							.appendTo($wrapper), jQuery(document.createElement("code"))
							.text(source)
							.appendTo($source), $source.addClass("error-source")
							.attr({
								"aria-hidden": !0,
								hidden: "hidden"
							})
							.appendTo($wrapper), $wrapper.addClass("error-view")
							.appendTo(place), console.warn("".concat(mesg, "\n\t")
								.concat(source.replace(/\n/g, "\n\t"))), !1
					}
				},
				stringFrom: {
					value: function stringFrom(value) {
						switch (_typeof(value)) {
							case "function":
								return "[function]";
							case "number":
								if (Number.isNaN(value)) return "[number NaN]";
								break;
							case "object":
								if (null === value) return "[null]";
								if (value instanceof Array) return value.map((function(val) {
										return stringFrom(val)
									}))
									.join(", ");
								if (value instanceof Set) return Array.from(value)
									.map((function(val) {
										return stringFrom(val)
									}))
									.join(", ");
								if (value instanceof Map) {
									var result = Array.from(value)
										.map((function(_ref4) {
											var _ref5 = _slicedToArray(_ref4, 2),
												key = _ref5[0],
												val = _ref5[1];
											return "".concat(stringFrom(key), " → ")
												.concat(stringFrom(val))
										}));
									return "{ ".concat(result.join(", "), " }")
								}
								if (value instanceof Date) return value.toLocaleString();
								if (value instanceof Element) {
									if (value === document.documentElement || value === document.head || value === document.body) throw new Error("illegal operation; attempting to convert the <html>, <head>, or <body> tags to string is not allowed");
									return value.outerHTML
								}
								return value instanceof Node ? value.textContent : "function" == typeof value.toString ? value.toString() : Object.prototype.toString.call(value);
							case "symbol":
								var desc = void 0 !== value.description ? ' "'.concat(value.description, '"') : "";
								return "[symbol".concat(desc, "]");
							case "undefined":
								return "[undefined]"
						}
						return String(value)
					}
				}
			})),
			clone = _ref3.clone,
			convertBreaks = _ref3.convertBreaks,
			safeActiveElement = _ref3.safeActiveElement,
			setDisplayTitle = _ref3.setDisplayTitle,
			setPageElement = _ref3.setPageElement,
			throwError = _ref3.throwError,
			stringFrom = _ref3.stringFrom;
		! function() {
			function onKeypressFn(ev) {
				13 !== ev.which && 32 !== ev.which || (ev.preventDefault(), jQuery(safeActiveElement() || this)
					.trigger("click"))
			}

			function onClickFnWrapper(fn) {
				return function() {
					var $this = jQuery(this);
					$this.ariaIsDisabled() || ($this.is("[aria-pressed]") && $this.attr("aria-pressed", "true" === $this.attr("aria-pressed") ? "false" : "true"), fn.apply(this, arguments))
				}
			}

			function oneClickFnWrapper(fn) {
				return onClickFnWrapper((function() {
					jQuery(this)
						.off(".aria-clickable")
						.removeAttr("role tabindex aria-controls aria-pressed")
						.filter("button")
						.prop("disabled", !0), fn.apply(this, arguments)
				}))
			}
			jQuery.fn.extend({
				ariaClick: function(options, handler) {
					if (0 === this.length || 0 === arguments.length) return this;
					var opts = options,
						fn = handler;
					return null == fn && (fn = opts, opts = undefined), "string" != typeof(opts = jQuery.extend({
							namespace: undefined,
							one: !1,
							selector: undefined,
							data: undefined,
							role: undefined,
							controls: undefined,
							pressed: undefined,
							label: undefined
						}, opts))
						.namespace ? opts.namespace = "" : "." !== opts.namespace[0] && (opts.namespace = ".".concat(opts.namespace)), "boolean" == typeof opts.pressed && (opts.pressed = opts.pressed ? "true" : "false"), this.filter("button")
						.prop("type", "button"), null != opts.role ? this.attr("role", opts.role) : this.not("[role]")
						.filter("a,[data-passage]")
						.attr("role", "link")
						.end()
						.not("a")
						.not("[data-passage]")
						.attr("role", "button")
						.end()
						.end()
						.end(), this.attr("tabindex", 0), null != opts.controls && this.attr("aria-controls", opts.controls), null != opts.pressed && this.attr("aria-pressed", opts.pressed), null != opts.label && this.attr({
							"aria-label": opts.label,
							title: opts.label
						}), this.not("button")
						.on("keypress.aria-clickable".concat(opts.namespace), opts.selector, onKeypressFn), this.on("click.aria-clickable".concat(opts.namespace), opts.selector, opts.data, opts.one ? oneClickFnWrapper(fn) : onClickFnWrapper(fn)), this
				},
				ariaDisabled: function(disable) {
					if (0 === this.length || 0 === arguments.length) return this;
					var $nonDisableable = this.not("button,fieldset,input,menuitem,optgroup,option,select,textarea"),
						$disableable = this.filter("button,fieldset,input,menuitem,optgroup,option,select,textarea");
					return disable ? ($nonDisableable.each((function() {
						this.setAttribute("disabled", ""), this.setAttribute("aria-disabled", "true")
					})), $disableable.each((function() {
						this.disabled = !0, this.setAttribute("aria-disabled", "true")
					}))) : ($nonDisableable.each((function() {
						this.removeAttribute("disabled"), this.removeAttribute("aria-disabled")
					})), $disableable.each((function() {
						this.disabled = !1, this.removeAttribute("aria-disabled")
					}))), this
				},
				ariaIsDisabled: function() {
					return this.is("[disabled]")
				}
			})
		}(), jQuery.extend({
			wikiWithOptions: function(options) {
				for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) sources[_key - 1] = arguments[_key];
				if (0 !== sources.length) {
					var frag = document.createDocumentFragment();
					sources.forEach((function(content) {
						return new Wikifier(frag, content, options)
					}));
					var errors = _toConsumableArray(frag.querySelectorAll(".error"))
						.map((function(errEl) {
							return errEl.textContent.replace(errorPrologRegExp, "")
						}));
					if (errors.length > 0) throw new Error(errors.join("; "))
				}
			},
			wiki: function() {
				for (var _len2 = arguments.length, sources = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) sources[_key2] = arguments[_key2];
				this.wikiWithOptions.apply(this, [undefined].concat(sources))
			}
		}), jQuery.fn.extend({
			wikiWithOptions: function(options) {
				for (var _len3 = arguments.length, sources = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) sources[_key3 - 1] = arguments[_key3];
				if (0 === this.length || 0 === sources.length) return this;
				var frag = document.createDocumentFragment();
				return sources.forEach((function(content) {
					return new Wikifier(frag, content, options)
				})), this.append(frag), this
			},
			wiki: function() {
				for (var _len4 = arguments.length, sources = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) sources[_key4] = arguments[_key4];
				return this.wikiWithOptions.apply(this, [undefined].concat(sources))
			}
		});
		var Util = function() {
				var toString, utilGetType = "[object Object]" === (toString = Object.prototype.toString)
					.call(new Map) ? function(O) {
						if (null === O) return "null";
						if (O instanceof Map) return "Map";
						if (O instanceof Set) return "Set";
						var baseType = _typeof(O);
						return "object" === baseType ? toString.call(O)
							.slice(8, -1) : baseType
					} : function(O) {
						if (null === O) return "null";
						var baseType = _typeof(O);
						return "object" === baseType ? toString.call(O)
							.slice(8, -1) : baseType
					};

				function utilToEnum(obj) {
					var pEnum = Object.create(null);
					if (obj instanceof Array) obj.forEach((function(val, i) {
						return pEnum[String(val)] = i
					}));
					else if (obj instanceof Set) Array.from(obj)
						.forEach((function(val, i) {
							return pEnum[String(val)] = i
						}));
					else if (obj instanceof Map) obj.forEach((function(val, key) {
						return pEnum[String(key)] = val
					}));
					else {
						if ("object" !== _typeof(obj) || null === obj || Object.getPrototypeOf(obj) !== Object.prototype) throw new TypeError("Util.toEnum obj parameter must be an Array, Map, Set, or generic object");
						Object.assign(pEnum, obj)
					}
					return Object.freeze(pEnum)
				}

				function utilToStringTag(obj) {
					return Object.prototype.toString.call(obj)
						.slice(8, -1)
				}
				var _illegalSlugCharsRe = /[\x00-\x20!-/:-@[-^`{-\x9f]+/g,
					_isInvalidSlugRe = /^-*$/;
				var _illegalFilenameCharsRE = /[\x00-\x1f"#$%&'*+,/:;<=>?\\^`|\x7f-\x9f]+/g;
				var _markupCharsRe = /[!"#$&'*\-/<=>?@[\\\]^_`{|}~]/g,
					_hasMarkupCharsRe = new RegExp(_markupCharsRe.source),
					_markupCharsMap = utilToEnum({
						"!": "&#33;",
						'"': "&quot;",
						"#": "&#35;",
						$: "&#36;",
						"&": "&amp;",
						"'": "&#39;",
						"*": "&#42;",
						"-": "&#45;",
						"/": "&#47;",
						"<": "&lt;",
						"=": "&#61;",
						">": "&gt;",
						"?": "&#63;",
						"@": "&#64;",
						"[": "&#91;",
						"\\": "&#92;",
						"]": "&#93;",
						"^": "&#94;",
						_: "&#95;",
						"`": "&#96;",
						"{": "&#123;",
						"|": "&#124;",
						"}": "&#125;",
						"~": "&#126;"
					});
				var _htmlCharsRe = /[&<>"'`]/g,
					_hasHtmlCharsRe = new RegExp(_htmlCharsRe.source),
					_htmlCharsMap = utilToEnum({
						"&": "&amp;",
						"<": "&lt;",
						">": "&gt;",
						'"': "&quot;",
						"'": "&#39;",
						"`": "&#96;"
					});

				function utilEscape(str) {
					if (null == str) return "";
					var val = String(str);
					return val && _hasHtmlCharsRe.test(val) ? val.replace(_htmlCharsRe, (function(ch) {
						return _htmlCharsMap[ch]
					})) : val
				}
				var _escapedHtmlRe = /&(?:amp|#38|#x26|lt|#60|#x3c|gt|#62|#x3e|quot|#34|#x22|apos|#39|#x27|#96|#x60);/gi,
					_hasEscapedHtmlRe = new RegExp(_escapedHtmlRe.source, "i"),
					_escapedHtmlMap = utilToEnum({
						"&amp;": "&",
						"&#38;": "&",
						"&#x26;": "&",
						"&lt;": "<",
						"&#60;": "<",
						"&#x3c;": "<",
						"&gt;": ">",
						"&#62;": ">",
						"&#x3e;": ">",
						"&quot;": '"',
						"&#34;": '"',
						"&#x22;": '"',
						"&apos;": "'",
						"&#39;": "'",
						"&#x27;": "'",
						"&#96;": "`",
						"&#x60;": "`"
					});

				function utilUnescape(str) {
					if (null == str) return "";
					var val = String(str);
					return val && _hasEscapedHtmlRe.test(val) ? val.replace(_escapedHtmlRe, (function(entity) {
						return _escapedHtmlMap[entity.toLowerCase()]
					})) : val
				}
				var _nowSource = Has.performance ? performance : Date;
				var _cssTimeRe = /^([+-]?(?:\d*\.)?\d+)([Mm]?[Ss])$/;
				var utilScrubEventKey = function() {
						var separatorKey, decimalKey;
						if ("undefined" != typeof Intl && "function" == typeof Intl.NumberFormat) {
							var match = (new Intl.NumberFormat)
								.format(111111.5)
								.match(/(\D*)\d+(\D*)/);
							match && (separatorKey = match[1], decimalKey = match[2])
						}
						return separatorKey || decimalKey || (separatorKey = ",", decimalKey = "."),
							function(key) {
								switch (key) {
									case "Scroll":
										return "ScrollLock";
									case "Spacebar":
										return " ";
									case "Left":
										return "ArrowLeft";
									case "Right":
										return "ArrowRight";
									case "Up":
										return "ArrowUp";
									case "Down":
										return "ArrowDown";
									case "Del":
										return "Delete";
									case "Crsel":
										return "CrSel";
									case "Exsel":
										return "ExSel";
									case "Esc":
										return "Escape";
									case "Apps":
										return "ContextMenu";
									case "Nonconvert":
										return "NonConvert";
									case "MediaNextTrack":
										return "MediaTrackNext";
									case "MediaPreviousTrack":
										return "MediaTrackPrevious";
									case "VolumeUp":
										return "AudioVolumeUp";
									case "VolumeDown":
										return "AudioVolumeDown";
									case "VolumeMute":
										return "AudioVolumeMute";
									case "Zoom":
										return "ZoomToggle";
									case "SelectMedia":
									case "MediaSelect":
										return "LaunchMediaPlayer";
									case "Add":
										return "+";
									case "Divide":
										return "/";
									case "Multiply":
										return "*";
									case "Subtract":
										return "-";
									case "Decimal":
										return decimalKey;
									case "Separator":
										return separatorKey
								}
								return key
							}
					}(),
					utilHasMediaQuery = "function" != typeof window.matchMedia ? function() {
						return !1
					} : function(mediaQuery) {
						return window.matchMedia(mediaQuery)
							.matches
					};
				return Object.freeze(Object.defineProperties({}, {
					getType: {
						value: utilGetType
					},
					isBoolean: {
						value: function(obj) {
							return "boolean" == typeof obj || "string" == typeof obj && ("true" === obj || "false" === obj)
						}
					},
					isIterable: {
						value: function(obj) {
							return null != obj && "function" == typeof obj[Symbol.iterator]
						}
					},
					isNumeric: {
						value: function(obj) {
							var num;
							switch (_typeof(obj)) {
								case "number":
									num = obj;
									break;
								case "string":
									num = Number(obj);
									break;
								default:
									return !1
							}
							return !Number.isNaN(num) && Number.isFinite(num)
						}
					},
					sameValueZero: {
						value: function(a, b) {
							return a === b || a != a && b != b
						}
					},
					toEnum: {
						value: utilToEnum
					},
					toStringTag: {
						value: utilToStringTag
					},
					slugify: {
						value: function(str) {
							var base = String(str)
								.trim(),
								_legacy = base.replace(/[^\w\s\u2013\u2014-]+/g, "")
								.replace(/[_\s\u2013\u2014-]+/g, "-")
								.toLocaleLowerCase();
							return _isInvalidSlugRe.test(_legacy) ? base.replace(_illegalSlugCharsRe, "")
								.replace(/[_\s\u2013\u2014-]+/g, "-") : _legacy
						}
					},
					sanitizeFilename: {
						value: function(str) {
							return String(str)
								.trim()
								.replace(_illegalFilenameCharsRE, "")
						}
					},
					escapeMarkup: {
						value: function(str) {
							if (null == str) return "";
							var val = String(str);
							return val && _hasMarkupCharsRe.test(val) ? val.replace(_markupCharsRe, (function(ch) {
								return _markupCharsMap[ch]
							})) : val
						}
					},
					escape: {
						value: utilEscape
					},
					unescape: {
						value: utilUnescape
					},
					charAndPosAt: {
						value: function(text, position) {
							var str = String(text),
								pos = Math.trunc(position),
								code = str.charCodeAt(pos);
							if (Number.isNaN(code)) return {
								char: "",
								start: -1,
								end: -1
							};
							var retval = {
								char: str.charAt(pos),
								start: pos,
								end: pos
							};
							if (code < 55296 || code > 57343) return retval;
							if (code >= 55296 && code <= 56319) {
								var nextPos = pos + 1;
								if (nextPos >= str.length) return retval;
								var nextCode = str.charCodeAt(nextPos);
								return nextCode < 56320 || nextCode > 57343 || (retval.char = retval.char + str.charAt(nextPos), retval.end = nextPos), retval
							}
							if (0 === pos) return retval;
							var prevPos = pos - 1,
								prevCode = str.charCodeAt(prevPos);
							return prevCode < 55296 || prevCode > 56319 || (retval.char = str.charAt(prevPos) + retval.char, retval.start = prevPos), retval
						}
					},
					now: {
						value: function() {
							return _nowSource.now()
						}
					},
					fromCssTime: {
						value: function(cssTime) {
							var match = _cssTimeRe.exec(String(cssTime));
							if (null === match) throw new SyntaxError('invalid time value syntax: "'.concat(cssTime, '"'));
							var msec = Number(match[1]);
							if (1 === match[2].length && (msec *= 1e3), Number.isNaN(msec) || !Number.isFinite(msec)) throw new RangeError('invalid time value: "'.concat(cssTime, '"'));
							return msec
						}
					},
					toCssTime: {
						value: function(msec) {
							if ("number" != typeof msec || Number.isNaN(msec) || !Number.isFinite(msec)) {
								var what;
								switch (_typeof(msec)) {
									case "string":
										what = '"'.concat(msec, '"');
										break;
									case "number":
										what = String(msec);
										break;
									default:
										what = utilToStringTag(msec)
								}
								throw new Error("invalid milliseconds: ".concat(what))
							}
							return "".concat(msec, "ms")
						}
					},
					fromCssProperty: {
						value: function(cssName) {
							if (!cssName.includes("-")) switch (cssName) {
								case "bgcolor":
									return "backgroundColor";
								case "float":
									return "cssFloat";
								default:
									return cssName
							}
							return ("-ms-" === cssName.slice(0, 4) ? cssName.slice(1) : cssName)
								.split("-")
								.map((function(part, i) {
									return 0 === i ? part : part.toUpperFirst()
								}))
								.join("")
						}
					},
					parseUrl: {
						value: function(url) {
							var el = document.createElement("a"),
								queryObj = Object.create(null);
							el.href = url, el.search && el.search.replace(/^\?/, "")
								.splitOrEmpty(/(?:&(?:amp;)?|;)/)
								.forEach((function(query) {
									var _query$split2 = _slicedToArray(query.split("="), 2),
										key = _query$split2[0],
										value = _query$split2[1];
									queryObj[key] = value
								}));
							var pathname = el.host && "/" !== el.pathname[0] ? "/".concat(el.pathname) : el.pathname;
							return {
								href: el.href,
								protocol: el.protocol,
								host: el.host,
								hostname: el.hostname,
								port: el.port,
								path: "".concat(pathname)
									.concat(el.search),
								pathname: pathname,
								query: el.search,
								search: el.search,
								queries: queryObj,
								searches: queryObj,
								hash: el.hash
							}
						}
					},
					newExceptionFrom: {
						value: function(original, exceptionType, override) {
							if ("object" !== _typeof(original) || null === original) throw new Error("Util.newExceptionFrom original parameter must be an object");
							if ("function" != typeof exceptionType) throw new Error("Util.newExceptionFrom exceptionType parameter must be an error type constructor");
							var ex = new exceptionType(original.message);
							void 0 !== original.name && (ex.name = original.name), void 0 !== original.code && (ex.code = original.code), void 0 !== original.columnNumber && (ex.columnNumber = original.columnNumber), void 0 !== original.description && (ex.description = original.description), void 0 !== original.fileName && (ex.fileName = original.fileName), void 0 !== original.lineNumber && (ex.lineNumber = original.lineNumber), void 0 !== original.number && (ex.number = original.number), void 0 !== original.stack && (ex.stack = original.stack);
							var overrideType = _typeof(override);
							if ("undefined" !== overrideType)
								if ("object" === overrideType && null !== override) Object.assign(ex, override);
								else {
									if ("string" !== overrideType) throw new Error("Util.newExceptionFrom override parameter must be an object or string");
									ex.message = override
								} return ex
						}
					},
					scrubEventKey: {
						value: utilScrubEventKey
					},
					hasMediaQuery: {
						value: utilHasMediaQuery
					},
					random: {
						value: Math.random
					},
					entityEncode: {
						value: utilEscape
					},
					entityDecode: {
						value: utilUnescape
					},
					evalExpression: {
						value: function() {
							return Scripting.evalJavaScript.apply(Scripting, arguments)
						}
					},
					evalStatements: {
						value: function() {
							return Scripting.evalJavaScript.apply(Scripting, arguments)
						}
					}
				}))
			}(),
			SimpleStore = (_adapters = [], _initialized = null, Object.freeze(Object.defineProperties({}, {
				adapters: {
					value: _adapters
				},
				create: {
					value: function(storageId, persistent) {
						if (_initialized) return _initialized.create(storageId, persistent);
						for (var i = 0; i < _adapters.length; ++i)
							if (_adapters[i].init(storageId, persistent)) return (_initialized = _adapters[i])
								.create(storageId, persistent);
						throw new Error("no valid storage adapters found")
					}
				}
			}))),
			_adapters, _initialized, _ok, _WebStorageAdapter;
		SimpleStore.adapters.push((_ok = !1, _WebStorageAdapter = function() {
			function _WebStorageAdapter(storageId, persistent) {
				_classCallCheck(this, _WebStorageAdapter);
				var prefix = "".concat(storageId, "."),
					engine = null,
					name = null;
				persistent ? (engine = window.localStorage, name = "localStorage") : (engine = window.sessionStorage, name = "sessionStorage"), Object.defineProperties(this, {
					_engine: {
						value: engine
					},
					_prefix: {
						value: prefix
					},
					_prefixRe: {
						value: new RegExp("^".concat(RegExp.escape(prefix)))
					},
					name: {
						value: name
					},
					id: {
						value: storageId
					},
					persistent: {
						value: !!persistent
					}
				})
			}
			return _createClass(_WebStorageAdapter, [{
				key: "length",
				get: function() {
					return this.keys()
						.length
				}
			}, {
				key: "size",
				value: function() {
					return this.keys()
						.length
				}
			}, {
				key: "keys",
				value: function() {
					for (var keys = [], i = 0; i < this._engine.length; ++i) {
						var key = this._engine.key(i);
						this._prefixRe.test(key) && keys.push(key.replace(this._prefixRe, ""))
					}
					return keys
				}
			}, {
				key: "has",
				value: function(key) {
					return !("string" != typeof key || !key) && this._engine.hasOwnProperty(this._prefix + key)
				}
			}, {
				key: "get",
				value: function(key) {
					if ("string" != typeof key || !key) return null;
					var value = this._engine.getItem(this._prefix + key);
					return null == value ? null : _WebStorageAdapter._deserialize(value)
				}
			}, {
				key: "set",
				value: function(key, value) {
					if ("string" != typeof key || !key) return !1;
					try {
						this._engine.setItem(this._prefix + key, _WebStorageAdapter._serialize(value))
					} catch (ex) {
						if (/quota.?(?:exceeded|reached)/i.test(ex.name + ex.message)) throw Util.newExceptionFrom(ex, Error, "".concat(this.name, " quota exceeded"));
						throw ex
					}
					return !0
				}
			}, {
				key: "delete",
				value: function(key) {
					return !("string" != typeof key || !key || (this._engine.removeItem(this._prefix + key), 0))
				}
			}, {
				key: "clear",
				value: function() {
					for (var keys = this.keys(), i = 0, iend = keys.length; i < iend; ++i) this.delete(keys[i]);
					return !0
				}
			}], [{
				key: "_serialize",
				value: function(obj) {
					return LZString.compressToUTF16(JSON.stringify(obj))
				}
			}, {
				key: "_deserialize",
				value: function(str) {
					return JSON.parse(LZString.decompressFromUTF16(str))
				}
			}]), _WebStorageAdapter
		}(), Object.freeze(Object.defineProperties({}, {
			init: {
				value: function() {
					function hasWebStorage(storeId) {
						try {
							var store = window[storeId],
								tid = "_sc_".concat(String(Date.now()));
							store.setItem(tid, tid);
							var result = store.getItem(tid) === tid;
							return store.removeItem(tid), result
						} catch (ex) {}
						return !1
					}
					return _ok = hasWebStorage("localStorage") && hasWebStorage("sessionStorage")
				}
			},
			create: {
				value: function(storageId, persistent) {
					if (!_ok) throw new Error("adapter not initialized");
					return new _WebStorageAdapter(storageId, persistent)
				}
			}
		})))), SimpleStore.adapters.push(function() {
			var _MAX_EXPIRY = "Tue, 19 Jan 2038 03:14:07 GMT",
				_MIN_EXPIRY = "Thu, 01 Jan 1970 00:00:00 GMT",
				_ok = !1,
				_CookieAdapter = function() {
					function _CookieAdapter(storageId, persistent) {
						_classCallCheck(this, _CookieAdapter);
						var prefix = "".concat(storageId)
							.concat(persistent ? "!" : "*", ".");
						Object.defineProperties(this, {
							_prefix: {
								value: prefix
							},
							_prefixRe: {
								value: new RegExp("^".concat(RegExp.escape(prefix)))
							},
							name: {
								value: "cookie"
							},
							id: {
								value: storageId
							},
							persistent: {
								value: !!persistent
							}
						})
					}
					return _createClass(_CookieAdapter, [{
						key: "length",
						get: function() {
							return this.keys()
								.length
						}
					}, {
						key: "size",
						value: function() {
							return this.keys()
								.length
						}
					}, {
						key: "keys",
						value: function() {
							if ("" === document.cookie) return [];
							for (var cookies = document.cookie.split(/;\s*/), keys = [], i = 0; i < cookies.length; ++i) {
								var kvPair = cookies[i].split("="),
									key = decodeURIComponent(kvPair[0]);
								if (this._prefixRe.test(key)) "" !== decodeURIComponent(kvPair[1]) && keys.push(key.replace(this._prefixRe, ""))
							}
							return keys
						}
					}, {
						key: "has",
						value: function(key) {
							return !("string" != typeof key || !key) && null !== _CookieAdapter._getCookie(this._prefix + key)
						}
					}, {
						key: "get",
						value: function(key) {
							if ("string" != typeof key || !key) return null;
							var value = _CookieAdapter._getCookie(this._prefix + key);
							return null === value ? null : _CookieAdapter._deserialize(value)
						}
					}, {
						key: "set",
						value: function(key, value) {
							if ("string" != typeof key || !key) return !1;
							try {
								if (_CookieAdapter._setCookie(this._prefix + key, _CookieAdapter._serialize(value), this.persistent ? "Tue, 19 Jan 2038 03:14:07 GMT" : undefined), !this.has(key)) throw new Error("unknown validation error during set")
							} catch (ex) {
								throw Util.newExceptionFrom(ex, Error, "cookie error: ".concat(ex.message))
							}
							return !0
						}
					}, {
						key: "delete",
						value: function(key) {
							if ("string" != typeof key || !key || !this.has(key)) return !1;
							try {
								if (_CookieAdapter._setCookie(this._prefix + key, undefined, _MIN_EXPIRY), this.has(key)) throw new Error("unknown validation error during delete")
							} catch (ex) {
								throw Util.newExceptionFrom(ex, Error, "cookie error: ".concat(ex.message))
							}
							return !0
						}
					}, {
						key: "clear",
						value: function() {
							for (var keys = this.keys(), i = 0, iend = keys.length; i < iend; ++i) this.delete(keys[i]);
							return !0
						}
					}], [{
						key: "_getCookie",
						value: function(prefixedKey) {
							if (!prefixedKey || "" === document.cookie) return null;
							for (var cookies = document.cookie.split(/;\s*/), i = 0; i < cookies.length; ++i) {
								var kvPair = cookies[i].split("=");
								if (prefixedKey === decodeURIComponent(kvPair[0])) return decodeURIComponent(kvPair[1]) || null
							}
							return null
						}
					}, {
						key: "_setCookie",
						value: function(prefixedKey, value, expiry) {
							if (prefixedKey) {
								var payload = "".concat(encodeURIComponent(prefixedKey), "=");
								null != value && (payload += encodeURIComponent(value)), null != expiry && (payload += "; expires=".concat(expiry)), payload += "; path=/", document.cookie = payload
							}
						}
					}, {
						key: "_serialize",
						value: function(obj) {
							return LZString.compressToBase64(JSON.stringify(obj))
						}
					}, {
						key: "_deserialize",
						value: function(str) {
							return JSON.parse(LZString.decompressFromBase64(str))
						}
					}]), _CookieAdapter
				}();
			return Object.freeze(Object.defineProperties({}, {
				init: {
					value: function(storageId) {
						try {
							var tid = "_sc_".concat(String(Date.now()));
							_CookieAdapter._setCookie(tid, _CookieAdapter._serialize(tid), undefined), _ok = _CookieAdapter._deserialize(_CookieAdapter._getCookie(tid)) === tid, _CookieAdapter._setCookie(tid, undefined, _MIN_EXPIRY)
						} catch (ex) {
							_ok = !1
						}
						return _ok && function(storageId) {
							if ("" === document.cookie) return;
							for (var oldPrefix = "".concat(storageId, "."), oldPrefixRe = new RegExp("^".concat(RegExp.escape(oldPrefix))), persistPrefix = "".concat(storageId, "!."), sessionPrefix = "".concat(storageId, "*."), sessionTestRe = /\.(?:state|rcWarn)$/, cookies = document.cookie.split(/;\s*/), i = 0; i < cookies.length; ++i) {
								var kvPair = cookies[i].split("="),
									key = decodeURIComponent(kvPair[0]);
								if (oldPrefixRe.test(key)) {
									var value = decodeURIComponent(kvPair[1]);
									"" !== value && function() {
										var persist = !sessionTestRe.test(key);
										_CookieAdapter._setCookie(key, undefined, _MIN_EXPIRY), _CookieAdapter._setCookie(key.replace(oldPrefixRe, (function() {
											return persist ? persistPrefix : sessionPrefix
										})), value, persist ? _MAX_EXPIRY : undefined)
									}()
								}
							}
						}(storageId), _ok
					}
				},
				create: {
					value: function(storageId, persistent) {
						if (!_ok) throw new Error("adapter not initialized");
						return new _CookieAdapter(storageId, persistent)
					}
				}
			}))
		}());
		var DebugView = function() {
				function DebugView(parent, type, name, title) {
					_classCallCheck(this, DebugView), Object.defineProperties(this, {
							parent: {
								value: parent
							},
							view: {
								value: document.createElement("span")
							},
							break: {
								value: document.createElement("wbr")
							}
						}), jQuery(this.view)
						.attr({
							title: title,
							"aria-label": title,
							"data-type": null != type ? type : "",
							"data-name": null != name ? name : ""
						})
						.addClass("debug"), jQuery(this.break)
						.addClass("debug hidden"), this.parent.appendChild(this.view), this.parent.appendChild(this.break)
				}
				return _createClass(DebugView, [{
					key: "output",
					get: function() {
						return this.view
					}
				}, {
					key: "type",
					get: function() {
						return this.view.getAttribute("data-type")
					},
					set: function(type) {
						this.view.setAttribute("data-type", null != type ? type : "")
					}
				}, {
					key: "name",
					get: function() {
						return this.view.getAttribute("data-name")
					},
					set: function(name) {
						this.view.setAttribute("data-name", null != name ? name : "")
					}
				}, {
					key: "title",
					get: function() {
						return this.view.title
					},
					set: function(title) {
						this.view.title = title
					}
				}, {
					key: "append",
					value: function(el) {
						return jQuery(this.view)
							.append(el), this
					}
				}, {
					key: "modes",
					value: function(options) {
						if (null == options) {
							var current = {};
							return this.view.className.splitOrEmpty(/\s+/)
								.forEach((function(name) {
									"debug" !== name && (current[name] = !0)
								})), current
						}
						if ("object" === _typeof(options)) return Object.keys(options)
							.forEach((function(name) {
								this[options[name] ? "addClass" : "removeClass"](name)
							}), jQuery(this.view)), this;
						throw new Error("DebugView.prototype.modes options parameter must be an object or null/undefined")
					}
				}, {
					key: "remove",
					value: function() {
						var $view = jQuery(this.view);
						this.view.hasChildNodes() && $view.contents()
							.appendTo(this.parent), $view.remove(), jQuery(this.break)
							.remove()
					}
				}], [{
					key: "isEnabled",
					value: function() {
						return "enabled" === jQuery(document.documentElement)
							.attr("data-debug-view")
					}
				}, {
					key: "enable",
					value: function() {
						jQuery(document.documentElement)
							.attr("data-debug-view", "enabled"), jQuery.event.trigger(":debugviewupdate")
					}
				}, {
					key: "disable",
					value: function() {
						jQuery(document.documentElement)
							.removeAttr("data-debug-view"), jQuery.event.trigger(":debugviewupdate")
					}
				}, {
					key: "toggle",
					value: function() {
						"enabled" === jQuery(document.documentElement)
							.attr("data-debug-view") ? DebugView.disable() : DebugView.enable()
					}
				}]), DebugView
			}(),
			NodeTyper = function() {
				var NodeTyper = function() {
					function NodeTyper(config) {
						if (_classCallCheck(this, NodeTyper), "object" !== _typeof(config) || null === config) throw new Error("config parameter must be an object (received: ".concat(Util.getType(config), ")"));
						if (!(config.hasOwnProperty("targetNode") && config.targetNode instanceof Node)) throw new Error('config parameter object "targetNode" property must be a node');
						Object.defineProperties(this, {
							node: {
								value: config.targetNode
							},
							childNodes: {
								value: []
							},
							nodeValue: {
								writable: !0,
								value: ""
							},
							appendTo: {
								writable: !0,
								value: config.parentNode || null
							},
							classNames: {
								writable: !0,
								value: config.classNames || null
							},
							finished: {
								writable: !0,
								value: !1
							}
						});
						var childNode, node = this.node;
						for (node.nodeValue && (this.nodeValue = node.nodeValue, node.nodeValue = ""); null !== (childNode = node.firstChild);) this.childNodes.push(new NodeTyper({
							targetNode: childNode,
							parentNode: node,
							classNames: this.classNames
						})), node.removeChild(childNode)
					}
					return _createClass(NodeTyper, [{
						key: "finish",
						value: function() {
							for (; this.type(!0););
							return !1
						}
					}, {
						key: "type",
						value: function(flush) {
							if (this.finished) return !1;
							if (this.appendTo) {
								if (this.appendTo.appendChild(this.node), this.appendTo = null, this.node.nodeType !== Node.ELEMENT_NODE && this.node.nodeType !== Node.TEXT_NODE || "none" === jQuery(this.node.parentNode)
									.css("display")) return this.finish();
								this.node.parentNode && this.classNames && jQuery(this.node.parentNode)
									.addClass(this.classNames)
							}
							if (this.nodeValue) {
								if (flush) this.node.nodeValue += this.nodeValue, this.nodeValue = "";
								else {
									var _Util$charAndPosAt = Util.charAndPosAt(this.nodeValue, 0),
										char = _Util$charAndPosAt.char,
										start = _Util$charAndPosAt.start,
										end = _Util$charAndPosAt.end;
									this.node.nodeValue += char, this.nodeValue = this.nodeValue.slice(1 + end - start)
								}
								return !0
							}
							this.classNames && (jQuery(this.node.parentNode)
								.removeClass(this.classNames), this.classNames = null);
							for (var childNodes = this.childNodes; childNodes.length > 0;) {
								if (childNodes[0].type()) return !0;
								childNodes.shift()
							}
							return this.finished = !0, !1
						}
					}]), NodeTyper
				}();
				return NodeTyper
			}(),
			PRNGWrapper = function() {
				function PRNGWrapper(seed, useEntropy) {
					_classCallCheck(this, PRNGWrapper), Object.defineProperties(this, new Math.seedrandom(seed, useEntropy, (function(prng, seed) {
						return {
							_prng: {
								value: prng
							},
							seed: {
								writable: !0,
								value: seed
							},
							pull: {
								writable: !0,
								value: 0
							},
							random: {
								value: function() {
									return ++this.pull, this._prng()
								}
							}
						}
					})))
				}
				return _createClass(PRNGWrapper, null, [{
					key: "marshal",
					value: function(prng) {
						if (!prng || !prng.hasOwnProperty("seed") || !prng.hasOwnProperty("pull")) throw new Error("PRNG is missing required data");
						return {
							seed: prng.seed,
							pull: prng.pull
						}
					}
				}, {
					key: "unmarshal",
					value: function(prngObj) {
						if (!prngObj || !prngObj.hasOwnProperty("seed") || !prngObj.hasOwnProperty("pull")) throw new Error("PRNG object is missing required data");
						for (var prng = new PRNGWrapper(prngObj.seed, !1), i = prngObj.pull; i > 0; --i) prng.random();
						return prng
					}
				}]), PRNGWrapper
			}(),
			StyleWrapper = (_imageMarkupRe = new RegExp(Patterns.cssImage, "g"), _hasImageMarkupRe = new RegExp(Patterns.cssImage), function() {
				function StyleWrapper(style) {
					if (_classCallCheck(this, StyleWrapper), null == style) throw new TypeError("StyleWrapper style parameter must be an HTMLStyleElement object");
					Object.defineProperties(this, {
						style: {
							value: style
						}
					})
				}
				return _createClass(StyleWrapper, [{
					key: "isEmpty",
					value: function() {
						return 0 === this.style.cssRules.length
					}
				}, {
					key: "set",
					value: function(rawCss) {
						this.clear(), this.add(rawCss)
					}
				}, {
					key: "add",
					value: function(rawCss) {
						var css = rawCss;
						_hasImageMarkupRe.test(css) && (_imageMarkupRe.lastIndex = 0, css = css.replace(_imageMarkupRe, (function(wikiImage) {
							var markup = Wikifier.helpers.parseSquareBracketedMarkup({
								source: wikiImage,
								matchStart: 0
							});
							if (markup.hasOwnProperty("error") || markup.pos < wikiImage.length) return wikiImage;
							var source = markup.source;
							if ("data:" !== source.slice(0, 5) && Story.has(source)) {
								var passage = Story.get(source);
								passage.tags.includes("Twine.image") && (source = passage.text.trim())
							}
							return 'url("'.concat(source.replace(/"/g, "%22"), '")')
						}))), this.style.styleSheet ? this.style.styleSheet.cssText += css : this.style.appendChild(document.createTextNode(css))
					}
				}, {
					key: "clear",
					value: function() {
						this.style.styleSheet ? this.style.styleSheet.cssText = "" : jQuery(this.style)
							.empty()
					}
				}]), StyleWrapper
			}()),
			_imageMarkupRe, _hasImageMarkupRe, Diff = (Op = Util.toEnum({
				Delete: 0,
				SpliceArray: 1,
				Copy: 2,
				CopyDate: 3
			}), Object.freeze(Object.defineProperties({}, {
				Op: {
					value: Op
				},
				diff: {
					value: function diff(orig, dest) {
						for (var aOpRef, objToString = Object.prototype.toString, origIsArray = orig instanceof Array, keys = [].concat(Object.keys(orig), Object.keys(dest))
							.sort()
							.filter((function(val, i, arr) {
								return 0 === i || arr[i - 1] !== val
							})), diffed = {}, keyIsAOpRef = function(key) {
								return key === aOpRef
							}, i = 0, klen = keys.length; i < klen; ++i) {
							var key = keys[i],
								origP = orig[key],
								destP = dest[key];
							if (orig.hasOwnProperty(key))
								if (dest.hasOwnProperty(key)) {
									if (origP === destP) continue;
									if (_typeof(origP) === _typeof(destP))
										if ("function" == typeof origP) origP.toString() !== destP.toString() && (diffed[key] = [Op.Copy, destP]);
										else if ("object" !== _typeof(origP) || null === origP) diffed[key] = [Op.Copy, destP];
									else {
										var origPType = objToString.call(origP);
										if (origPType === objToString.call(destP))
											if (origP instanceof Date) Number(origP) !== Number(destP) && (diffed[key] = [Op.Copy, clone(destP)]);
											else if (origP instanceof Map) diffed[key] = [Op.Copy, clone(destP)];
										else if (origP instanceof RegExp) origP.toString() !== destP.toString() && (diffed[key] = [Op.Copy, clone(destP)]);
										else if (origP instanceof Set) diffed[key] = [Op.Copy, clone(destP)];
										else if ("[object Object]" !== origPType) diffed[key] = [Op.Copy, clone(destP)];
										else {
											var recurse = diff(origP, destP);
											null !== recurse && (diffed[key] = recurse)
										} else diffed[key] = [Op.Copy, clone(destP)]
									} else diffed[key] = [Op.Copy, "object" !== _typeof(destP) || null === destP ? destP : clone(destP)]
								} else if (origIsArray && Util.isNumeric(key)) {
								var nKey = Number(key);
								if (!aOpRef) {
									aOpRef = "";
									do {
										aOpRef += "~"
									} while (keys.some(keyIsAOpRef));
									diffed[aOpRef] = [Op.SpliceArray, nKey, nKey]
								}
								nKey < diffed[aOpRef][1] && (diffed[aOpRef][1] = nKey), nKey > diffed[aOpRef][2] && (diffed[aOpRef][2] = nKey)
							} else diffed[key] = Op.Delete;
							else diffed[key] = [Op.Copy, "object" !== _typeof(destP) || null === destP ? destP : clone(destP)]
						}
						return Object.keys(diffed)
							.length > 0 ? diffed : null
					}
				},
				patch: {
					value: function patch(orig, diffed) {
						for (var keys = Object.keys(diffed || {}), patched = clone(orig), i = 0, klen = keys.length; i < klen; ++i) {
							var key = keys[i],
								diffedP = diffed[key];
							if (diffedP === Op.Delete) delete patched[key];
							else if (diffedP instanceof Array) switch (diffedP[0]) {
								case Op.SpliceArray:
									patched.splice(diffedP[1], diffedP[2] - diffedP[1] + 1);
									break;
								case Op.Copy:
									patched[key] = clone(diffedP[1]);
									break;
								case Op.CopyDate:
									patched[key] = new Date(diffedP[1])
							} else patched[key] = patch(patched[key], diffedP)
						}
						return patched
					}
				}
			}))),
			Op, L10n = (_patternRe = /\{\w+\}/g, _hasPatternRe = new RegExp(_patternRe.source), Object.freeze(Object.defineProperties({}, {
				init: {
					value: function() {
						strings && Object.keys(strings)
							.length > 0 && Object.keys(l10nStrings)
							.forEach((function(id) {
								try {
									var value;
									switch (id) {
										case "identity":
											value = strings.identity;
											break;
										case "aborting":
											value = strings.aborting;
											break;
										case "cancel":
											value = strings.cancel;
											break;
										case "close":
											value = strings.close;
											break;
										case "ok":
											value = strings.ok;
											break;
										case "errorTitle":
											value = strings.errors.title;
											break;
										case "errorNonexistentPassage":
											value = strings.errors.nonexistentPassage;
											break;
										case "errorSaveMissingData":
											value = strings.errors.saveMissingData;
											break;
										case "errorSaveIdMismatch":
											value = strings.errors.saveIdMismatch;
											break;
										case "warningDegraded":
											value = strings.warnings.degraded;
											break;
										case "debugViewTitle":
											value = strings.debugView.title;
											break;
										case "debugViewToggle":
											value = strings.debugView.toggle;
											break;
										case "uiBarToggle":
											value = strings.uiBar.toggle;
											break;
										case "uiBarBackward":
											value = strings.uiBar.backward;
											break;
										case "uiBarForward":
											value = strings.uiBar.forward;
											break;
										case "uiBarJumpto":
											value = strings.uiBar.jumpto;
											break;
										case "jumptoTitle":
											value = strings.jumpto.title;
											break;
										case "jumptoTurn":
											value = strings.jumpto.turn;
											break;
										case "jumptoUnavailable":
											value = strings.jumpto.unavailable;
											break;
										case "savesTitle":
											value = strings.saves.title;
											break;
										case "savesDisallowed":
											value = strings.saves.disallowed;
											break;
										case "savesIncapable":
											value = strings.saves.incapable;
											break;
										case "savesLabelAuto":
											value = strings.saves.labelAuto;
											break;
										case "savesLabelDelete":
											value = strings.saves.labelDelete;
											break;
										case "savesLabelExport":
											value = strings.saves.labelExport;
											break;
										case "savesLabelImport":
											value = strings.saves.labelImport;
											break;
										case "savesLabelLoad":
											value = strings.saves.labelLoad;
											break;
										case "savesLabelClear":
											value = strings.saves.labelClear;
											break;
										case "savesLabelSave":
											value = strings.saves.labelSave;
											break;
										case "savesLabelSlot":
											value = strings.saves.labelSlot;
											break;
										case "savesUnavailable":
											value = strings.saves.unavailable;
											break;
										case "savesUnknownDate":
											value = strings.saves.unknownDate;
											break;
										case "settingsTitle":
											value = strings.settings.title;
											break;
										case "settingsOff":
											value = strings.settings.off;
											break;
										case "settingsOn":
											value = strings.settings.on;
											break;
										case "settingsReset":
											value = strings.settings.reset;
											break;
										case "restartTitle":
											value = strings.restart.title;
											break;
										case "restartPrompt":
											value = strings.restart.prompt;
											break;
										case "shareTitle":
											value = strings.share.title;
											break;
										case "alertTitle":
											break;
										case "autoloadTitle":
											value = strings.autoload.title;
											break;
										case "autoloadCancel":
											value = strings.autoload.cancel;
											break;
										case "autoloadOk":
											value = strings.autoload.ok;
											break;
										case "autoloadPrompt":
											value = strings.autoload.prompt;
											break;
										case "macroBackText":
											value = strings.macros.back.text;
											break;
										case "macroReturnText":
											value = strings.macros.return.text
									}
									value && (l10nStrings[id] = value.replace(/%\w+%/g, (function(pat) {
										return "{".concat(pat.slice(1, -1), "}")
									})))
								} catch (ex) {}
							}))
					}
				},
				get: {
					value: function(ids, overrides) {
						if (!ids) return "";
						var selectedId, id = ((Array.isArray(ids) ? ids : [ids])
							.some((function(id) {
								return !!l10nStrings.hasOwnProperty(id) && (selectedId = id, !0)
							})), selectedId);
						if (!id) return "";
						for (var processed = l10nStrings[id], iteration = 0; _hasPatternRe.test(processed);) {
							if (++iteration > 50) throw new Error("L10n.get exceeded maximum replacement iterations, probable infinite loop");
							_patternRe.lastIndex = 0, processed = processed.replace(_patternRe, (function(pat) {
								var subId = pat.slice(1, -1);
								return overrides && overrides.hasOwnProperty(subId) ? overrides[subId] : l10nStrings.hasOwnProperty(subId) ? l10nStrings[subId] : void 0
							}))
						}
						return processed
					}
				}
			}))),
			_patternRe, _hasPatternRe, strings = {
				errors: {},
				warnings: {},
				debugView: {},
				uiBar: {},
				jumpto: {},
				saves: {},
				settings: {},
				restart: {},
				share: {},
				autoload: {},
				macros: {
					back: {},
					return: {}
				}
			},
			l10nStrings = {
				identity: "game",
				aborting: "Aborting",
				cancel: "Cancel",
				close: "Close",
				ok: "OK",
				errorTitle: "Error",
				errorToggle: "Toggle the error view",
				errorNonexistentPassage: 'the passage "{passage}" does not exist',
				errorSaveDiskLoadFailed: "failed to load save file from disk",
				errorSaveMissingData: "save is missing required data. Either the loaded file is not a save or the save has become corrupted",
				errorSaveIdMismatch: "save is from the wrong {identity}",
				_warningIntroLacking: "Your browser either lacks or has disabled",
				_warningOutroDegraded: ", so this {identity} is running in a degraded mode. You may be able to continue, however, some parts may not work properly.",
				warningNoWebStorage: "{_warningIntroLacking} the Web Storage API{_warningOutroDegraded}",
				warningDegraded: "{_warningIntroLacking} some of the capabilities required by this {identity}{_warningOutroDegraded}",
				debugBarToggle: "Toggle the debug bar",
				debugBarNoWatches: "— no watches set —",
				debugBarAddWatch: "Add watch",
				debugBarDeleteWatch: "Delete watch",
				debugBarWatchAll: "Watch all",
				debugBarWatchNone: "Delete all",
				debugBarLabelAdd: "Add",
				debugBarLabelWatch: "Watch",
				debugBarLabelTurn: "Turn",
				debugBarLabelViews: "Views",
				debugBarViewsToggle: "Toggle the debug views",
				debugBarWatchToggle: "Toggle the watch panel",
				uiBarToggle: "Toggle the UI bar",
				uiBarBackward: "Go backward within the {identity} history",
				uiBarForward: "Go forward within the {identity} history",
				uiBarJumpto: "Jump to a specific point within the {identity} history",
				jumptoTitle: "Jump To",
				jumptoTurn: "Turn",
				jumptoUnavailable: "No jump points currently available…",
				savesTitle: "Saves",
				savesDisallowed: "Saving has been disallowed on this passage.",
				savesIncapable: "{_warningIntroLacking} the capabilities required to support saves, so saves have been disabled for this session.",
				savesLabelAuto: "Autosave",
				savesLabelDelete: "Delete",
				savesLabelExport: "Save to Disk…",
				savesLabelImport: "Load from Disk…",
				savesLabelLoad: "Load",
				savesLabelClear: "Delete All",
				savesLabelSave: "Save",
				savesLabelSlot: "Slot",
				savesUnavailable: "No save slots found…",
				savesUnknownDate: "unknown",
				settingsTitle: "Settings",
				settingsOff: "Off",
				settingsOn: "On",
				settingsReset: "Reset to Defaults",
				restartTitle: "Restart",
				restartPrompt: "Are you sure that you want to restart? Unsaved progress will be lost.",
				shareTitle: "Share",
				alertTitle: "Alert",
				autoloadTitle: "Autoload",
				autoloadCancel: "Go to start",
				autoloadOk: "Load autosave",
				autoloadPrompt: "An autosave exists. Load it now or go to the start?",
				macroBackText: "Back",
				macroReturnText: "Return"
			},
			Config = (_debug = !1, _addVisitedLinkClass = !1, _cleanupWikifierOutput = !1, _loadDelay = 0, _audioPauseOnFadeToZero = !0, _audioPreloadMetadata = !0, _historyControls = !0, _historyMaxStates = 40, _macrosIfAssignmentError = !0, _macrosMaxLoopIterations = 1e3, _macrosTypeSkipKey = " ", _macrosTypeVisitedPassages = !0, _passagesDisplayTitles = !1, _passagesNobr = !1, _savesId = "untitled-story", _savesSlots = 8, _savesTryDiskOnMobile = !0, _uiStowBarInitially = 800, _uiUpdateStoryElements = !0, _errHistoryModeDeprecated = "Config.history.mode has been deprecated and is no longer used by SugarCube, please remove it from your code", Object.freeze({
				get debug() {
					return _debug
				},
				set debug(value) {
					_debug = Boolean(value)
				},
				get addVisitedLinkClass() {
					return _addVisitedLinkClass
				},
				set addVisitedLinkClass(value) {
					_addVisitedLinkClass = Boolean(value)
				},
				get cleanupWikifierOutput() {
					return _cleanupWikifierOutput
				},
				set cleanupWikifierOutput(value) {
					_cleanupWikifierOutput = Boolean(value)
				},
				get loadDelay() {
					return _loadDelay
				},
				set loadDelay(value) {
					if (!Number.isSafeInteger(value) || value < 0) throw new RangeError("Config.loadDelay must be a non-negative integer");
					_loadDelay = value
				},
				audio: Object.freeze({
					get pauseOnFadeToZero() {
						return _audioPauseOnFadeToZero
					},
					set pauseOnFadeToZero(value) {
						_audioPauseOnFadeToZero = Boolean(value)
					},
					get preloadMetadata() {
						return _audioPreloadMetadata
					},
					set preloadMetadata(value) {
						_audioPreloadMetadata = Boolean(value)
					}
				}),
				history: Object.freeze({
					get controls() {
						return _historyControls
					},
					set controls(value) {
						var controls = Boolean(value);
						if (1 === _historyMaxStates && controls) throw new Error("Config.history.controls must be false when Config.history.maxStates is 1");
						_historyControls = controls
					},
					get maxStates() {
						return _historyMaxStates
					},
					set maxStates(value) {
						if (!Number.isSafeInteger(value) || value < 1) throw new RangeError("Config.history.maxStates must be a positive integer");
						_historyMaxStates = value, _historyControls && 1 === value && (_historyControls = !1)
					},
					get mode() {
						throw new Error(_errHistoryModeDeprecated)
					},
					set mode(_) {
						throw new Error(_errHistoryModeDeprecated)
					},
					get tracking() {
						throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")
					},
					set tracking(_) {
						throw new Error("Config.history.tracking has been deprecated, use Config.history.maxStates instead")
					}
				}),
				macros: Object.freeze({
					get ifAssignmentError() {
						return _macrosIfAssignmentError
					},
					set ifAssignmentError(value) {
						_macrosIfAssignmentError = Boolean(value)
					},
					get maxLoopIterations() {
						return _macrosMaxLoopIterations
					},
					set maxLoopIterations(value) {
						if (!Number.isSafeInteger(value) || value < 1) throw new RangeError("Config.macros.maxLoopIterations must be a positive integer");
						_macrosMaxLoopIterations = value
					},
					get typeSkipKey() {
						return _macrosTypeSkipKey
					},
					set typeSkipKey(value) {
						_macrosTypeSkipKey = String(value)
					},
					get typeVisitedPassages() {
						return _macrosTypeVisitedPassages
					},
					set typeVisitedPassages(value) {
						_macrosTypeVisitedPassages = Boolean(value)
					}
				}),
				navigation: Object.freeze({
					get override() {
						return _navigationOverride
					},
					set override(value) {
						if (!(null == value || value instanceof Function)) throw new TypeError("Config.navigation.override must be a function or null/undefined (received: ".concat(Util.getType(value), ")"));
						_navigationOverride = value
					}
				}),
				passages: Object.freeze({
					get descriptions() {
						return _passagesDescriptions
					},
					set descriptions(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("boolean" !== valueType && "Object" !== valueType && "function" !== valueType) throw new TypeError("Config.passages.descriptions must be a boolean, object, function, or null/undefined (received: ".concat(valueType, ")"))
						}
						_passagesDescriptions = value
					},
					get displayTitles() {
						return _passagesDisplayTitles
					},
					set displayTitles(value) {
						_passagesDisplayTitles = Boolean(value)
					},
					get nobr() {
						return _passagesNobr
					},
					set nobr(value) {
						_passagesNobr = Boolean(value)
					},
					get onProcess() {
						return _passagesOnProcess
					},
					set onProcess(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("function" !== valueType) throw new TypeError("Config.passages.onProcess must be a function or null/undefined (received: ".concat(valueType, ")"))
						}
						_passagesOnProcess = value
					},
					get start() {
						return _passagesStart
					},
					set start(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("string" !== valueType) throw new TypeError("Config.passages.start must be a string or null/undefined (received: ".concat(valueType, ")"))
						}
						_passagesStart = value
					},
					get transitionOut() {
						return _passagesTransitionOut
					},
					set transitionOut(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("string" !== valueType && ("number" !== valueType || !Number.isSafeInteger(value) || value < 0)) throw new TypeError("Config.passages.transitionOut must be a string, non-negative integer, or null/undefined (received: ".concat(valueType, ")"))
						}
						_passagesTransitionOut = value
					}
				}),
				saves: Object.freeze({
					get autoload() {
						return _savesAutoload
					},
					set autoload(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("boolean" !== valueType && "string" !== valueType && "function" !== valueType) throw new TypeError("Config.saves.autoload must be a boolean, string, function, or null/undefined (received: ".concat(valueType, ")"))
						}
						_savesAutoload = value
					},
					get autosave() {
						return _savesAutosave
					},
					set autosave(value) {
						if (null != value) {
							var valueType = Util.getType(value);
							if ("string" === valueType) return void(_savesAutosave = [value]);
							if ("boolean" !== valueType && ("Array" !== valueType || !value.every((function(item) {
								return "string" == typeof item
							}))) && "function" !== valueType) throw new TypeError("Config.saves.autosave must be a boolean, Array<string>, function, or null/undefined (received: ".concat(valueType)
								.concat("Array" === valueType ? "<any>" : "", ")"))
						}
						_savesAutosave = value
					},
					get id() {
						return _savesId
					},
					set id(value) {
						if ("string" != typeof value || "" === value) throw new TypeError("Config.saves.id must be a non-empty string (received: ".concat(Util.getType(value), ")"));
						_savesId = value
					},
					get isAllowed() {
						return _savesIsAllowed
					},
					set isAllowed(value) {
						if (!(null == value || value instanceof Function)) throw new TypeError("Config.saves.isAllowed must be a function or null/undefined (received: ".concat(Util.getType(value), ")"));
						_savesIsAllowed = value
					},
					get slots() {
						return _savesSlots
					},
					set slots(value) {
						if (!Number.isSafeInteger(value) || value < 0) throw new TypeError("Config.saves.slots must be a non-negative integer (received: ".concat(Util.getType(value), ")"));
						_savesSlots = value
					},
					get tryDiskOnMobile() {
						return _savesTryDiskOnMobile
					},
					set tryDiskOnMobile(value) {
						_savesTryDiskOnMobile = Boolean(value)
					},
					get version() {
						return _savesVersion
					},
					set version(value) {
						_savesVersion = value
					},
					get onLoad() {
						throw new Error("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead")
					},
					set onLoad(value) {
						console.warn("Config.saves.onLoad has been deprecated, use the Save.onLoad API instead"), Save.onLoad.add(value)
					},
					get onSave() {
						throw new Error("Config.saves.onSave has been deprecated, use the Save.onSave API instead")
					},
					set onSave(value) {
						console.warn("Config.saves.onSave has been deprecated, use the Save.onSave API instead"), Save.onSave.add(value)
					}
				}),
				ui: Object.freeze({
					get stowBarInitially() {
						return _uiStowBarInitially
					},
					set stowBarInitially(value) {
						var valueType = Util.getType(value);
						if ("boolean" !== valueType && ("number" !== valueType || !Number.isSafeInteger(value) || value < 0)) throw new TypeError("Config.ui.stowBarInitially must be a boolean or non-negative integer (received: ".concat(valueType, ")"));
						_uiStowBarInitially = value
					},
					get updateStoryElements() {
						return _uiUpdateStoryElements
					},
					set updateStoryElements(value) {
						_uiUpdateStoryElements = Boolean(value)
					}
				})
			})),
			_navigationOverride, _passagesDescriptions, _passagesStart, _passagesOnProcess, _passagesTransitionOut, _savesAutoload, _savesAutosave, _savesIsAllowed, _savesVersion, _debug, _addVisitedLinkClass, _cleanupWikifierOutput, _loadDelay, _audioPauseOnFadeToZero, _audioPreloadMetadata, _historyControls, _historyMaxStates, _macrosIfAssignmentError, _macrosMaxLoopIterations, _macrosTypeSkipKey, _macrosTypeVisitedPassages, _passagesDisplayTitles, _passagesNobr, _savesId, _savesSlots, _savesTryDiskOnMobile, _uiStowBarInitially, _uiUpdateStoryElements, _errHistoryModeDeprecated, SimpleAudio = function() {
				var _hasPromise, _gestureEventNames = Object.freeze(["click", "contextmenu", "dblclick", "keyup", "mouseup", "pointerup", "touchend"]),
					_specialIds = Object.freeze([":not", ":all", ":looped", ":muted", ":paused", ":playing"]),
					_formatSpecRe = /^([\w-]+)\s*\|\s*(\S.*)$/,
					_badIdRe = /[:\s]/,
					_tracks = new Map,
					_groups = new Map,
					_lists = new Map,
					_subscribers = new Map,
					_masterRate = 1,
					_masterVolume = 1,
					_masterMute = !1,
					_masterMuteOnHidden = !1,
					_playReturnsPromise = (_hasPromise = null, function() {
						if (null !== _hasPromise) return _hasPromise;
						if (_hasPromise = !1, Has.audio) try {
							var audio = document.createElement("audio");
							audio.muted = !0;
							var value = audio.play();
							value.catch((function() {})), _hasPromise = value instanceof Promise
						} catch (ex) {}
						return _hasPromise
					}),
					AudioTrack = function() {
						function AudioTrack(obj) {
							if (_classCallCheck(this, AudioTrack), obj instanceof Array) this._create(obj);
							else {
								if (!(obj instanceof AudioTrack)) throw new Error("sources parameter must be either an array, of URIs or source objects, or an AudioTrack instance");
								this._copy(obj)
							}
						}
						return _createClass(AudioTrack, [{
							key: "_create",
							value: function(sourceList) {
								var dataUriRe = /^data:\s*audio\/(?:x-)?([^;,]+)\s*[;,]/i,
									extRe = /\.([^./\\]+)$/,
									formats = AudioTrack.formats,
									usedSources = [],
									audio = document.createElement("audio");
								audio.preload = "none", sourceList.forEach((function(src) {
									var srcUri = null;
									switch (_typeof(src)) {
										case "string":
											var match;
											if ("data:" === src.slice(0, 5)) {
												if (null === (match = dataUriRe.exec(src))) throw new Error("source data URI missing media type")
											} else if (null === (match = extRe.exec(Util.parseUrl(src)
												.pathname))) throw new Error("source URL missing file extension");
											formats[match[1]] && (srcUri = src);
											break;
										case "object":
											if (null === src) throw new Error("source object cannot be null");
											if (!src.hasOwnProperty("src")) throw new Error('source object missing required "src" property');
											if (!src.hasOwnProperty("format")) throw new Error('source object missing required "format" property');
											formats[src.format] && (srcUri = src.src);
											break;
										default:
											throw new Error("invalid source value (type: ".concat(_typeof(src), ")"))
									}
									if (null !== srcUri) {
										var source = document.createElement("source");
										source.src = srcUri, audio.appendChild(source), usedSources.push(srcUri)
									}
								})), audio.hasChildNodes() && Config.audio.preloadMetadata && (audio.preload = "metadata"), this._finalize(audio, usedSources, clone(sourceList))
							}
						}, {
							key: "_copy",
							value: function(obj) {
								this._finalize(obj.audio.cloneNode(!0), clone(obj.sources), clone(obj.originals))
							}
						}, {
							key: "_finalize",
							value: function(audio, sources, originals) {
								var _this3 = this;
								Object.defineProperties(this, {
										audio: {
											configurable: !0,
											value: audio
										},
										sources: {
											value: Object.freeze(sources)
										},
										originals: {
											value: Object.freeze(originals)
										},
										_error: {
											writable: !0,
											value: !1
										},
										_faderId: {
											writable: !0,
											value: null
										},
										_mute: {
											writable: !0,
											value: !1
										},
										_rate: {
											writable: !0,
											value: 1
										},
										_volume: {
											writable: !0,
											value: 1
										}
									}), jQuery(this.audio)
									.on("loadstart.AudioTrack", (function() {
										return _this3._error = !1
									}))
									.on("error.AudioTrack", (function() {
										return _this3._error = !0
									}))
									.find("source:last-of-type")
									.on("error.AudioTrack", (function() {
										return _this3._trigger("error")
									})),
									function(id, callback) {
										if ("function" != typeof callback) throw new Error("callback parameter must be a function");
										_subscribers.set(id, callback)
									}(this, (function(mesg) {
										if (_this3.audio) switch (mesg) {
											case "loadwithscreen":
												if (_this3.hasSource()) {
													var lockId = LoadScreen.lock();
													_this3.one("canplaythrough.AudioTrack_loadwithscreen error.AudioTrack_loadwithscreen", (function() {
															jQuery(this)
																.off(".AudioTrack_loadwithscreen"), LoadScreen.unlock(lockId)
														}))
														.load()
												}
												break;
											case "load":
												_this3.load();
												break;
											case "mute":
												_this3._updateAudioMute();
												break;
											case "rate":
												_this3._updateAudioRate();
												break;
											case "stop":
												_this3.stop();
												break;
											case "volume":
												_this3._updateAudioVolume();
												break;
											case "unload":
												_this3.unload()
										} else unsubscribe(_this3)
									})), this._updateAudioMute(), this._updateAudioRate(), this._updateAudioVolume()
							}
						}, {
							key: "_trigger",
							value: function(eventName) {
								jQuery(this.audio)
									.triggerHandler(eventName)
							}
						}, {
							key: "_destroy",
							value: function() {
								unsubscribe(this), this.audio && (jQuery(this.audio)
									.off(), this.unload(), this._error = !0, delete this.audio)
							}
						}, {
							key: "clone",
							value: function() {
								return new AudioTrack(this)
							}
						}, {
							key: "load",
							value: function() {
								var _this4 = this;
								if (this.fadeStop(), this.audio.pause(), !this.audio.hasChildNodes()) {
									if (0 === this.sources.length) return;
									this.sources.forEach((function(srcUri) {
										var source = document.createElement("source");
										source.src = srcUri, _this4.audio.appendChild(source)
									}))
								}
								"auto" !== this.audio.preload && (this.audio.preload = "auto"), this.isLoading() || this.audio.load()
							}
						}, {
							key: "unload",
							value: function() {
								this.fadeStop(), this.stop();
								var audio = this.audio;
								for (audio.preload = "none"; audio.hasChildNodes();) audio.removeChild(audio.firstChild);
								audio.load()
							}
						}, {
							key: "play",
							value: function() {
								var _this5 = this;
								if (!this.hasSource()) return Promise.reject(new Error("none of the candidate sources were acceptable"));
								if (this.isUnloaded()) return Promise.reject(new Error("no sources are loaded"));
								if (this.isFailed()) return Promise.reject(new Error("failed to load any of the sources"));
								"auto" !== this.audio.preload && (this.audio.preload = "auto");
								var namespace = ".AudioTrack_play";
								return _playReturnsPromise() ? this.audio.play() : new Promise((function(resolve, reject) {
									_this5.isPlaying() ? resolve() : (jQuery(_this5.audio)
										.off(namespace)
										.one("error".concat(namespace, " playing")
											.concat(namespace, " timeupdate")
											.concat(namespace), (function(ev) {
												jQuery(_this5)
													.off(namespace), "error" === ev.type ? reject(new Error("unknown audio play error")) : resolve()
											})), _this5.audio.play())
								}))
							}
						}, {
							key: "playWhenAllowed",
							value: function() {
								var _this6 = this;
								this.play()
									.catch((function() {
										var gestures = _gestureEventNames.map((function(name) {
												return "".concat(name, ".AudioTrack_playWhenAllowed")
											}))
											.join(" ");
										jQuery(document)
											.one(gestures, (function() {
												jQuery(document)
													.off(".AudioTrack_playWhenAllowed"), _this6.audio.play()
											}))
									}))
							}
						}, {
							key: "pause",
							value: function() {
								this.audio.pause()
							}
						}, {
							key: "stop",
							value: function() {
								this.audio.pause(), this.time(0), this._trigger(":stopped")
							}
						}, {
							key: "fade",
							value: function(duration, toVol, fromVol) {
								var _this7 = this;
								if ("number" != typeof duration) throw new TypeError("duration parameter must be a number");
								if ("number" != typeof toVol) throw new TypeError("toVolume parameter must be a number");
								if (null != fromVol && "number" != typeof fromVol) throw new TypeError("fromVolume parameter must be a number");
								if (!this.hasSource()) return Promise.reject(new Error("none of the candidate sources were acceptable"));
								if (this.isUnloaded()) return Promise.reject(new Error("no sources are loaded"));
								if (this.isFailed()) return Promise.reject(new Error("failed to load any of the sources"));
								this.fadeStop();
								var from = Math.clamp(null == fromVol ? this.volume() : fromVol, 0, 1),
									to = Math.clamp(toVol, 0, 1);
								return from !== to ? (this.volume(from), jQuery(this.audio)
									.off("timeupdate.AudioTrack_fade")
									.one("timeupdate.AudioTrack_fade", (function() {
										var min, max;
										from < to ? (min = from, max = to) : (min = to, max = from);
										var time = Math.max(duration, 1),
											delta = (to - from) / (time / .025);
										_this7._trigger(":fading"), _this7._faderId = setInterval((function() {
											_this7.isPlaying() ? (_this7.volume(Math.clamp(_this7.volume() + delta, min, max)), Config.audio.pauseOnFadeToZero && 0 === _this7.volume() && _this7.pause(), _this7.volume() === to && (_this7.fadeStop(), _this7._trigger(":faded"))) : _this7.fadeStop()
										}), 25)
									})), this.play()) : void 0
							}
						}, {
							key: "fadeIn",
							value: function(duration, fromVol) {
								return this.fade(duration, 1, fromVol)
							}
						}, {
							key: "fadeOut",
							value: function(duration, fromVol) {
								return this.fade(duration, 0, fromVol)
							}
						}, {
							key: "fadeStop",
							value: function() {
								null !== this._faderId && (clearInterval(this._faderId), this._faderId = null)
							}
						}, {
							key: "loop",
							value: function(_loop) {
								return null == _loop ? this.audio.loop : (this.audio.loop = !!_loop, this)
							}
						}, {
							key: "mute",
							value: function(_mute) {
								return null == _mute ? this._mute : (this._mute = !!_mute, this._updateAudioMute(), this)
							}
						}, {
							key: "_updateAudioMute",
							value: function() {
								this.audio.muted = this._mute || _masterMute
							}
						}, {
							key: "rate",
							value: function(_rate) {
								if (null == _rate) return this._rate;
								if ("number" != typeof _rate) throw new TypeError("rate parameter must be a number");
								return this._rate = Math.clamp(_rate, .2, 5), this._updateAudioRate(), this
							}
						}, {
							key: "_updateAudioRate",
							value: function() {
								this.audio.playbackRate = Math.clamp(this._rate * _masterRate, .2, 5)
							}
						}, {
							key: "time",
							value: function(_time) {
								var _this8 = this;
								if (null == _time) return this.audio.currentTime;
								if ("number" != typeof _time) throw new TypeError("time parameter must be a number");
								return this.hasMetadata() ? this.audio.currentTime = _time : jQuery(this.audio)
									.off("loadedmetadata.AudioTrack_time")
									.one("loadedmetadata.AudioTrack_time", (function() {
										return _this8.audio.currentTime = _time
									})), this
							}
						}, {
							key: "volume",
							value: function(_volume) {
								if (null == _volume) return this._volume;
								if ("number" != typeof _volume) throw new TypeError("volume parameter must be a number");
								return this._volume = Math.clamp(_volume, 0, 1), this._updateAudioVolume(), this
							}
						}, {
							key: "_updateAudioVolume",
							value: function() {
								this.audio.volume = Math.clamp(this._volume * _masterVolume, 0, 1)
							}
						}, {
							key: "duration",
							value: function() {
								return this.audio.duration
							}
						}, {
							key: "remaining",
							value: function() {
								return this.audio.duration - this.audio.currentTime
							}
						}, {
							key: "isFailed",
							value: function() {
								return this._error
							}
						}, {
							key: "isLoading",
							value: function() {
								return this.audio.networkState === HTMLMediaElement.NETWORK_LOADING
							}
						}, {
							key: "isUnloaded",
							value: function() {
								return !this.audio.hasChildNodes()
							}
						}, {
							key: "isUnavailable",
							value: function() {
								return !this.hasSource() || this.isUnloaded() || this.isFailed()
							}
						}, {
							key: "isPlaying",
							value: function() {
								return !this.audio.paused && this.hasSomeData()
							}
						}, {
							key: "isPaused",
							value: function() {
								return this.audio.paused && (this.audio.duration === 1 / 0 || this.audio.currentTime > 0) && !this.audio.ended
							}
						}, {
							key: "isStopped",
							value: function() {
								return this.audio.paused && 0 === this.audio.currentTime
							}
						}, {
							key: "isEnded",
							value: function() {
								return this.audio.ended
							}
						}, {
							key: "isFading",
							value: function() {
								return null !== this._faderId
							}
						}, {
							key: "isSeeking",
							value: function() {
								return this.audio.seeking
							}
						}, {
							key: "hasSource",
							value: function() {
								return this.sources.length > 0
							}
						}, {
							key: "hasNoData",
							value: function() {
								return this.audio.readyState === HTMLMediaElement.HAVE_NOTHING
							}
						}, {
							key: "hasMetadata",
							value: function() {
								return this.audio.readyState >= HTMLMediaElement.HAVE_METADATA
							}
						}, {
							key: "hasSomeData",
							value: function() {
								return this.audio.readyState >= HTMLMediaElement.HAVE_CURRENT_DATA
							}
						}, {
							key: "hasData",
							value: function() {
								return this.audio.readyState === HTMLMediaElement.HAVE_ENOUGH_DATA
							}
						}, {
							key: "on",
							value: function() {
								for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) args[_key5] = arguments[_key5];
								return jQuery.fn.on.apply(jQuery(this.audio), args), this
							}
						}, {
							key: "one",
							value: function() {
								for (var _len6 = arguments.length, args = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) args[_key6] = arguments[_key6];
								return jQuery.fn.one.apply(jQuery(this.audio), args), this
							}
						}, {
							key: "off",
							value: function() {
								for (var _len7 = arguments.length, args = new Array(_len7), _key7 = 0; _key7 < _len7; _key7++) args[_key7] = arguments[_key7];
								return jQuery.fn.off.apply(jQuery(this.audio), args), this
							}
						}]), AudioTrack
					}();
				Object.defineProperties(AudioTrack, {
					formats: {
						value: function() {
							var audio = document.createElement("audio"),
								types = new Map;

							function canPlay(mimeType) {
								return types.has(mimeType) || types.set(mimeType, "" !== audio.canPlayType(mimeType)
									.replace(/^no$/i, "")), types.get(mimeType)
							}
							return Object.assign(Object.create(null), {
								aac: canPlay("audio/aac"),
								caf: canPlay("audio/x-caf") || canPlay("audio/caf"),
								flac: canPlay("audio/x-flac") || canPlay("audio/flac"),
								mp3: canPlay('audio/mpeg; codecs="mp3"') || canPlay("audio/mpeg") || canPlay("audio/mp3") || canPlay("audio/mpa"),
								mpeg: canPlay("audio/mpeg"),
								m4a: canPlay("audio/x-m4a") || canPlay("audio/m4a") || canPlay("audio/aac"),
								mp4: canPlay("audio/x-mp4") || canPlay("audio/mp4") || canPlay("audio/aac"),
								ogg: canPlay("audio/ogg"),
								oga: canPlay("audio/ogg"),
								opus: canPlay('audio/ogg; codecs="opus"') || canPlay("audio/opus"),
								wav: canPlay('audio/wave; codecs="1"') || canPlay('audio/wav; codecs="1"') || canPlay("audio/wave") || canPlay("audio/wav"),
								wave: canPlay('audio/wave; codecs="1"') || canPlay('audio/wav; codecs="1"') || canPlay("audio/wave") || canPlay("audio/wav"),
								weba: canPlay("audio/webm"),
								webm: canPlay("audio/webm")
							})
						}()
					}
				});
				var AudioList = function() {
						function AudioList(obj) {
							if (_classCallCheck(this, AudioList), obj instanceof Array) this._create(obj);
							else {
								if (!(obj instanceof AudioList)) throw new Error("tracks parameter must be either an array, of track objects, or an AudioTrack instance");
								this._copy(obj)
							}
						}
						return _createClass(AudioList, [{
							key: "_create",
							value: function(trackList) {
								var _this9 = this;
								this._finalize(trackList.map((function(trackObj) {
									if ("object" !== _typeof(trackObj)) throw new Error("tracks parameter array members must be objects");
									var own, rate, track, volume;
									if (trackObj instanceof AudioTrack) own = !0, rate = trackObj.rate(), track = trackObj.clone(), volume = trackObj.volume();
									else {
										if (!trackObj.hasOwnProperty("track")) throw new Error('track object missing required "track" property');
										if (!(trackObj.track instanceof AudioTrack)) throw new Error('track object\'s "track" property must be an AudioTrack object');
										own = trackObj.hasOwnProperty("own") && trackObj.own, rate = trackObj.hasOwnProperty("rate") ? trackObj.rate : trackObj.track.rate(), track = trackObj.track, volume = trackObj.hasOwnProperty("volume") ? trackObj.volume : trackObj.track.volume()
									}
									return track.stop(), track.loop(!1), track.mute(!1), track.rate(rate), track.volume(volume), track.on("ended.AudioList", (function() {
										return _this9._onEnd()
									})), {
										own: own,
										track: track,
										volume: volume,
										rate: rate
									}
								})))
							}
						}, {
							key: "_copy",
							value: function(obj) {
								this._finalize(clone(obj.tracks))
							}
						}, {
							key: "_finalize",
							value: function(tracks) {
								Object.defineProperties(this, {
									tracks: {
										configurable: !0,
										value: Object.freeze(tracks)
									},
									queue: {
										configurable: !0,
										value: []
									},
									current: {
										writable: !0,
										value: null
									},
									_rate: {
										writable: !0,
										value: 1
									},
									_volume: {
										writable: !0,
										value: 1
									},
									_mute: {
										writable: !0,
										value: !1
									},
									_loop: {
										writable: !0,
										value: !1
									},
									_shuffle: {
										writable: !0,
										value: !1
									}
								})
							}
						}, {
							key: "_destroy",
							value: function() {
								this.stop(), this.tracks.filter((function(trackObj) {
										return trackObj.own
									}))
									.forEach((function(trackObj) {
										return trackObj.track._destroy()
									})), delete this.tracks, delete this.queue
							}
						}, {
							key: "load",
							value: function() {
								this.tracks.forEach((function(trackObj) {
									return trackObj.track.load()
								}))
							}
						}, {
							key: "unload",
							value: function() {
								this.stop(), this.tracks.forEach((function(trackObj) {
									return trackObj.track.unload()
								}))
							}
						}, {
							key: "play",
							value: function() {
								return null !== this.current && !this.current.track.isUnavailable() && !this.current.track.isEnded() || (0 === this.queue.length && this._fillQueue(), this._next()) ? this.current.track.play() : Promise.reject(new Error("no tracks were available"))
							}
						}, {
							key: "playWhenAllowed",
							value: function() {
								var _this10 = this;
								this.play()
									.catch((function() {
										var gestures = _gestureEventNames.map((function(name) {
												return "".concat(name, ".AudioList_playWhenAllowed")
											}))
											.join(" ");
										jQuery(document)
											.one(gestures, (function() {
												jQuery(document)
													.off(".AudioList_playWhenAllowed"), _this10.play()
											}))
									}))
							}
						}, {
							key: "pause",
							value: function() {
								null !== this.current && this.current.track.pause()
							}
						}, {
							key: "stop",
							value: function() {
								null !== this.current && (this.current.track.stop(), this.current = null), this._drainQueue()
							}
						}, {
							key: "skip",
							value: function() {
								this._next() ? this.current.track.play() : this._loop && this.play()
							}
						}, {
							key: "fade",
							value: function(duration, toVol, fromVol) {
								if ("number" != typeof duration) throw new TypeError("duration parameter must be a number");
								if ("number" != typeof toVol) throw new TypeError("toVolume parameter must be a number");
								if (null != fromVol && "number" != typeof fromVol) throw new TypeError("fromVolume parameter must be a number");
								if (0 === this.queue.length && this._fillQueue(), null !== this.current && !this.current.track.isUnavailable() && !this.current.track.isEnded() || this._next()) {
									var adjFromVol, adjToVol = Math.clamp(toVol, 0, 1) * this.current.volume;
									return null != fromVol && (adjFromVol = Math.clamp(fromVol, 0, 1) * this.current.volume), this._volume = toVol, this.current.track.fade(duration, adjToVol, adjFromVol)
								}
							}
						}, {
							key: "fadeIn",
							value: function(duration, fromVol) {
								return this.fade(duration, 1, fromVol)
							}
						}, {
							key: "fadeOut",
							value: function(duration, fromVol) {
								return this.fade(duration, 0, fromVol)
							}
						}, {
							key: "fadeStop",
							value: function() {
								null !== this.current && this.current.track.fadeStop()
							}
						}, {
							key: "loop",
							value: function(_loop2) {
								return null == _loop2 ? this._loop : (this._loop = !!_loop2, this)
							}
						}, {
							key: "mute",
							value: function(_mute2) {
								return null == _mute2 ? this._mute : (this._mute = !!_mute2, null !== this.current && this.current.track.mute(this._mute), this)
							}
						}, {
							key: "rate",
							value: function(_rate2) {
								if (null == _rate2) return this._rate;
								if ("number" != typeof _rate2) throw new TypeError("rate parameter must be a number");
								return this._rate = Math.clamp(_rate2, .2, 5), null !== this.current && this.current.track.rate(this._rate * this.current.rate), this
							}
						}, {
							key: "shuffle",
							value: function(_shuffle) {
								var _this11 = this;
								if (null == _shuffle) return this._shuffle;
								if (this._shuffle = !!_shuffle, this.queue.length > 0 && (this._fillQueue(), !this._shuffle && null !== this.current && this.queue.length > 1)) {
									var _this$queue, firstIdx = this.queue.findIndex((function(trackObj) {
										return trackObj === _this11.current
									}));
									if (-1 !== firstIdx)(_this$queue = this.queue)
										.push.apply(_this$queue, _toConsumableArray(this.queue.splice(0, firstIdx + 1)))
								}
								return this
							}
						}, {
							key: "volume",
							value: function(_volume2) {
								if (null == _volume2) return this._volume;
								if ("number" != typeof _volume2) throw new TypeError("volume parameter must be a number");
								return this._volume = Math.clamp(_volume2, 0, 1), null !== this.current && this.current.track.volume(this._volume * this.current.volume), this
							}
						}, {
							key: "duration",
							value: function() {
								if (arguments.length > 0) throw new Error("duration takes no parameters");
								return this.tracks.map((function(trackObj) {
										return trackObj.track.duration()
									}))
									.reduce((function(prev, cur) {
										return prev + cur
									}), 0)
							}
						}, {
							key: "remaining",
							value: function() {
								if (arguments.length > 0) throw new Error("remaining takes no parameters");
								var remainingTime = this.queue.map((function(trackObj) {
										return trackObj.track.duration()
									}))
									.reduce((function(prev, cur) {
										return prev + cur
									}), 0);
								return null !== this.current && (remainingTime += this.current.track.remaining()), remainingTime
							}
						}, {
							key: "time",
							value: function() {
								if (arguments.length > 0) throw new Error("time takes no parameters");
								return this.duration() - this.remaining()
							}
						}, {
							key: "isPlaying",
							value: function() {
								return null !== this.current && this.current.track.isPlaying()
							}
						}, {
							key: "isPaused",
							value: function() {
								return null === this.current || this.current.track.isPaused()
							}
						}, {
							key: "isStopped",
							value: function() {
								return 0 === this.queue.length && null === this.current
							}
						}, {
							key: "isEnded",
							value: function() {
								return 0 === this.queue.length && (null === this.current || this.current.track.isEnded())
							}
						}, {
							key: "isFading",
							value: function() {
								return null !== this.current && this.current.track.isFading()
							}
						}, {
							key: "_next",
							value: function() {
								var nextTrack;
								for (null !== this.current && (this.current.track.stop(), this.current = null); nextTrack = this.queue.shift();)
									if (!nextTrack.track.isUnavailable()) {
										this.current = nextTrack;
										break
									} return null !== this.current && (this.current.track.mute(this._mute), this.current.track.rate(this._rate * this.current.rate), this.current.track.volume(this._volume * this.current.volume), this.current.track.loop(!1), !0)
							}
						}, {
							key: "_onEnd",
							value: function() {
								if (0 === this.queue.length) {
									if (!this._loop) return;
									this._fillQueue()
								}
								this._next() && this.current.track.play()
							}
						}, {
							key: "_drainQueue",
							value: function() {
								this.queue.splice(0)
							}
						}, {
							key: "_fillQueue",
							value: function() {
								var _this$queue2;
								this._drainQueue(), (_this$queue2 = this.queue)
									.push.apply(_this$queue2, _toConsumableArray(this.tracks.filter((function(trackObj) {
										return !trackObj.track.isUnavailable()
									})))), 0 !== this.queue.length && this._shuffle && (this.queue.shuffle(), this.queue.length > 1 && this.queue[0] === this.current && this.queue.push(this.queue.shift()))
							}
						}]), AudioList
					}(),
					AudioRunner = function() {
						function AudioRunner(list) {
							if (_classCallCheck(this, AudioRunner), !(list instanceof Set || list instanceof AudioRunner)) throw new TypeError("list parameter must be a Set or a AudioRunner instance");
							Object.defineProperties(this, {
								trackIds: {
									value: new Set(list instanceof AudioRunner ? list.trackIds : list)
								}
							})
						}
						return _createClass(AudioRunner, [{
							key: "load",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.load)
							}
						}, {
							key: "unload",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.unload)
							}
						}, {
							key: "play",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.play)
							}
						}, {
							key: "playWhenAllowed",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.playWhenAllowed)
							}
						}, {
							key: "pause",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.pause)
							}
						}, {
							key: "stop",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.stop)
							}
						}, {
							key: "fade",
							value: function(duration, toVol, fromVol) {
								if (null == duration || null == toVol) throw new Error("fade requires parameters");
								AudioRunner._run(this.trackIds, AudioTrack.prototype.fade, duration, toVol, fromVol)
							}
						}, {
							key: "fadeIn",
							value: function(duration, fromVol) {
								if (null == duration) throw new Error("fadeIn requires a parameter");
								AudioRunner._run(this.trackIds, AudioTrack.prototype.fadeIn, duration, fromVol)
							}
						}, {
							key: "fadeOut",
							value: function(duration, fromVol) {
								if (null == duration) throw new Error("fadeOut requires a parameter");
								AudioRunner._run(this.trackIds, AudioTrack.prototype.fadeOut, duration, fromVol)
							}
						}, {
							key: "fadeStop",
							value: function() {
								AudioRunner._run(this.trackIds, AudioTrack.prototype.fadeStop)
							}
						}, {
							key: "loop",
							value: function(_loop3) {
								if (null == _loop3) throw new Error("loop requires a parameter");
								return AudioRunner._run(this.trackIds, AudioTrack.prototype.loop, _loop3), this
							}
						}, {
							key: "mute",
							value: function(_mute3) {
								if (null == _mute3) throw new Error("mute requires a parameter");
								return AudioRunner._run(this.trackIds, AudioTrack.prototype.mute, _mute3), this
							}
						}, {
							key: "rate",
							value: function(_rate3) {
								if (null == _rate3) throw new Error("rate requires a parameter");
								return AudioRunner._run(this.trackIds, AudioTrack.prototype.rate, _rate3), this
							}
						}, {
							key: "time",
							value: function(_time2) {
								if (null == _time2) throw new Error("time requires a parameter");
								return AudioRunner._run(this.trackIds, AudioTrack.prototype.time, _time2), this
							}
						}, {
							key: "volume",
							value: function(_volume3) {
								if (null == _volume3) throw new Error("volume requires a parameter");
								return AudioRunner._run(this.trackIds, AudioTrack.prototype.volume, _volume3), this
							}
						}, {
							key: "on",
							value: function() {
								for (var _len8 = arguments.length, args = new Array(_len8), _key8 = 0; _key8 < _len8; _key8++) args[_key8] = arguments[_key8];
								return AudioRunner._run.apply(AudioRunner, [this.trackIds, AudioTrack.prototype.on].concat(args)), this
							}
						}, {
							key: "one",
							value: function() {
								for (var _len9 = arguments.length, args = new Array(_len9), _key9 = 0; _key9 < _len9; _key9++) args[_key9] = arguments[_key9];
								return AudioRunner._run.apply(AudioRunner, [this.trackIds, AudioTrack.prototype.one].concat(args)), this
							}
						}, {
							key: "off",
							value: function() {
								for (var _len10 = arguments.length, args = new Array(_len10), _key10 = 0; _key10 < _len10; _key10++) args[_key10] = arguments[_key10];
								return AudioRunner._run.apply(AudioRunner, [this.trackIds, AudioTrack.prototype.off].concat(args)), this
							}
						}], [{
							key: "_run",
							value: function(ids, fn) {
								for (var _len11 = arguments.length, args = new Array(_len11 > 2 ? _len11 - 2 : 0), _key11 = 2; _key11 < _len11; _key11++) args[_key11 - 2] = arguments[_key11];
								ids.forEach((function(id) {
									var track = _tracks.get(id);
									track && fn.apply(track, args)
								}))
							}
						}]), AudioRunner
					}();
				var _runnerParseSelector = function() {
					var notWsRe = /\S/g,
						parenRe = /[()]/g;

					function processNegation(str, startPos) {
						var match;
						if (notWsRe.lastIndex = startPos, null === (match = notWsRe.exec(str)) || "(" !== match[0]) throw new Error('invalid ":not()" syntax: missing parentheticals');
						parenRe.lastIndex = notWsRe.lastIndex;
						for (var start = notWsRe.lastIndex, result = {
							str: "",
							nextMatch: -1
						}, depth = 1; null !== (match = parenRe.exec(str));)
							if ("(" === match[0] ? ++depth : --depth, depth < 1) {
								result.nextMatch = parenRe.lastIndex, result.str = str.slice(start, result.nextMatch - 1);
								break
							} return result
					}
					return function parseSelector(idArg) {
						for (var match, ids = [], idRe = /:?[^\s:()]+/g; null !== (match = idRe.exec(idArg));) {
							var id = match[0];
							if (":not" === id) {
								if (0 === ids.length) throw new Error('invalid negation: no group ID preceded ":not()"');
								var parent = ids[ids.length - 1];
								if (":" !== parent.id[0]) throw new Error('invalid negation of track "'.concat(parent.id, '": only groups may be negated with ":not()"'));
								var negation = processNegation(idArg, idRe.lastIndex);
								if (-1 === negation.nextMatch) throw new Error('unknown error parsing ":not()"');
								idRe.lastIndex = negation.nextMatch, parent.not = parseSelector(negation.str)
							} else ids.push({
								id: id
							})
						}
						return ids
					}
				}();

				function masterMute(mute) {
					if (null == mute) return _masterMute;
					publish("mute", _masterMute = !!mute)
				}

				function unsubscribe(id) {
					_subscribers.delete(id)
				}

				function publish(mesg, data) {
					_subscribers.forEach((function(fn) {
						return fn(mesg, data)
					}))
				}

				function _newTrack(sources) {
					return new AudioTrack(sources.map((function(source) {
						if ("data:" !== source.slice(0, 5) && Story.has(source)) {
							var passage = Story.get(source);
							if (passage.tags.includes("Twine.audio")) return passage.text.trim()
						}
						var match = _formatSpecRe.exec(source);
						return null === match ? source : {
							format: match[1],
							src: match[2]
						}
					})))
				}
				return Object.freeze(Object.defineProperties({}, {
					tracks: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: function() {
									if (arguments.length < 2) {
										var errors = [];
										throw arguments.length < 1 && errors.push("track ID"), arguments.length < 2 && errors.push("sources"), new Error("no ".concat(errors.join(" or "), " specified"))
									}
									var id = String(arguments[0])
										.trim(),
										what = 'track ID "'.concat(id, '"');
									if (_badIdRe.test(id)) throw new Error("invalid ".concat(what, ": track IDs must not contain colons or whitespace"));
									var track, sources = Array.isArray(arguments[1]) ? Array.from(arguments[1]) : Array.from(arguments)
										.slice(1);
									try {
										track = _newTrack(sources)
									} catch (ex) {
										throw new Error("".concat(what, ": error during track initialization: ")
											.concat(ex.message))
									}
									if (Config.debug && !track.hasSource()) throw new Error("".concat(what, ": no supported audio sources found"));
									_tracks.has(id) && _tracks.get(id)
										._destroy(), _tracks.set(id, track)
								}
							},
							delete: {
								value: function(id) {
									return _tracks.has(id) && _tracks.get(id)
										._destroy(), _tracks.delete(id)
								}
							},
							clear: {
								value: function() {
									_tracks.forEach((function(track) {
										return track._destroy()
									})), _tracks.clear()
								}
							},
							has: {
								value: function(id) {
									return _tracks.has(id)
								}
							},
							get: {
								value: function(id) {
									return _tracks.get(id) || null
								}
							}
						}))
					},
					groups: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: function() {
									if (arguments.length < 2) {
										var errors = [];
										throw arguments.length < 1 && errors.push("group ID"), arguments.length < 2 && errors.push("track IDs"), new Error("no ".concat(errors.join(" or "), " specified"))
									}
									var id = String(arguments[0])
										.trim(),
										what = 'group ID "'.concat(id, '"');
									if (":" !== id[0] || _badIdRe.test(id.slice(1))) throw new Error("invalid ".concat(what, ": group IDs must start with a colon and must not contain colons or whitespace"));
									if (_specialIds.includes(id)) throw new Error("cannot clobber special ".concat(what));
									var group, trackIds = Array.isArray(arguments[1]) ? Array.from(arguments[1]) : Array.from(arguments)
										.slice(1);
									try {
										group = new Set(trackIds.map((function(trackId) {
											if (!_tracks.has(trackId)) throw new Error('track "'.concat(trackId, '" does not exist'));
											return trackId
										})))
									} catch (ex) {
										throw new Error("".concat(what, ": error during group initialization: ")
											.concat(ex.message))
									}
									_groups.set(id, Object.freeze(Array.from(group)))
								}
							},
							delete: {
								value: function(id) {
									return _groups.delete(id)
								}
							},
							clear: {
								value: function() {
									_groups.clear()
								}
							},
							has: {
								value: function(id) {
									return _groups.has(id)
								}
							},
							get: {
								value: function(id) {
									return _groups.get(id) || null
								}
							}
						}))
					},
					lists: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: function() {
									if (arguments.length < 2) {
										var errors = [];
										throw arguments.length < 1 && errors.push("list ID"), arguments.length < 2 && errors.push("track IDs"), new Error("no ".concat(errors.join(" or "), " specified"))
									}
									var id = String(arguments[0])
										.trim(),
										what = 'list ID "'.concat(id, '"');
									if (_badIdRe.test(id)) return this.error("invalid ".concat(what, ": list IDs must not contain colons or whitespace"));
									var list, descriptors = Array.isArray(arguments[1]) ? Array.from(arguments[1]) : Array.from(arguments)
										.slice(1);
									try {
										list = new AudioList(descriptors.map((function(desc) {
											if (null === desc) throw new Error("track descriptor must be a string or object (type: null)");
											switch (_typeof(desc)) {
												case "string":
													desc = {
														id: desc
													};
													break;
												case "object":
													if (!desc.hasOwnProperty("id") && !desc.hasOwnProperty("sources")) throw new Error('track descriptor must contain one of either an "id" or a "sources" property');
													if (desc.hasOwnProperty("id") && desc.hasOwnProperty("sources")) throw new Error('track descriptor must contain either an "id" or a "sources" property, not both');
													break;
												default:
													throw new Error("track descriptor must be a string or object (type: ".concat(_typeof(desc), ")"))
											}
											var own, track, volume;
											if (desc.hasOwnProperty("id")) {
												if ("string" != typeof desc.id) throw new Error('"id" property must be a string');
												if (!_tracks.has(desc.id)) throw new Error('track "'.concat(desc.id, '" does not exist'));
												track = _tracks.get(desc.id)
											} else if (desc.hasOwnProperty("sources")) {
												if (!Array.isArray(desc.sources) || 0 === desc.sources.length) throw new Error('"sources" property must be a non-empty array');
												if (desc.hasOwnProperty("own")) throw new Error('"own" property is not allowed with the "sources" property');
												try {
													track = _newTrack(desc.sources), own = !0
												} catch (ex) {
													throw new Error("error during track initialization: ".concat(ex.message))
												}
												if (Config.debug && !track.hasSource()) throw new Error("no supported audio sources found")
											}
											if (desc.hasOwnProperty("own")) {
												if ("boolean" != typeof desc.own) throw new Error('"own" property must be a boolean');
												(own = desc.own) && (track = track.clone())
											}
											if (desc.hasOwnProperty("volume")) {
												if ("number" != typeof desc.volume || Number.isNaN(desc.volume) || !Number.isFinite(desc.volume) || desc.volume < 0) throw new Error('"volume" property must be a non-negative finite number');
												volume = desc.volume
											}
											return {
												own: null != own && own,
												track: track,
												volume: null != volume ? volume : track.volume()
											}
										})))
									} catch (ex) {
										throw new Error("".concat(what, ": error during playlist initialization: ")
											.concat(ex.message))
									}
									_lists.has(id) && _lists.get(id)
										._destroy(), _lists.set(id, list)
								}
							},
							delete: {
								value: function(id) {
									return _lists.has(id) && _lists.get(id)
										._destroy(), _lists.delete(id)
								}
							},
							clear: {
								value: function() {
									_lists.forEach((function(list) {
										return list._destroy()
									})), _lists.clear()
								}
							},
							has: {
								value: function(id) {
									return _lists.has(id)
								}
							},
							get: {
								value: function(id) {
									return _lists.get(id) || null
								}
							}
						}))
					},
					select: {
						value: function() {
							if (0 === arguments.length) throw new Error("no track selector specified");
							var selector = String(arguments[0])
								.trim(),
								trackIds = new Set;
							try {
								var renderIds = function renderIds(idObj) {
										var ids, id = idObj.id;
										switch (id) {
											case ":all":
												ids = allIds;
												break;
											case ":looped":
												ids = allIds.filter((function(id) {
													return _tracks.get(id)
														.loop()
												}));
												break;
											case ":muted":
												ids = allIds.filter((function(id) {
													return _tracks.get(id)
														.mute()
												}));
												break;
											case ":paused":
												ids = allIds.filter((function(id) {
													return _tracks.get(id)
														.isPaused()
												}));
												break;
											case ":playing":
												ids = allIds.filter((function(id) {
													return _tracks.get(id)
														.isPlaying()
												}));
												break;
											default:
												ids = ":" === id[0] ? _groups.get(id) : [id]
										}
										if (idObj.hasOwnProperty("not")) {
											var negated = idObj.not.map((function(idObj) {
													return renderIds(idObj)
												}))
												.flat(1 / 0);
											ids = ids.filter((function(id) {
												return !negated.includes(id)
											}))
										}
										return ids
									},
									allIds = Array.from(_tracks.keys());
								_runnerParseSelector(selector)
									.forEach((function(idObj) {
										return renderIds(idObj)
											.forEach((function(id) {
												if (!_tracks.has(id)) throw new Error('track "'.concat(id, '" does not exist'));
												trackIds.add(id)
											}))
									}))
							} catch (ex) {
								throw new Error("error during runner initialization: ".concat(ex.message))
							}
							return new AudioRunner(trackIds)
						}
					},
					load: {
						value: function() {
							publish("load")
						}
					},
					loadWithScreen: {
						value: function() {
							publish("loadwithscreen")
						}
					},
					mute: {
						value: masterMute
					},
					muteOnHidden: {
						value: function(mute) {
							if (!Visibility.isEnabled()) return !1;
							if (null == mute) return _masterMuteOnHidden;
							var namespace = ".SimpleAudio_masterMuteOnHidden";
							if (_masterMuteOnHidden = !!mute) {
								var visibilityChange = "".concat(Visibility.changeEvent)
									.concat(namespace);
								jQuery(document)
									.off(namespace)
									.on(visibilityChange, (function() {
										return masterMute(Visibility.isHidden())
									})), Visibility.isHidden() && masterMute(!0)
							} else jQuery(document)
								.off(namespace)
						}
					},
					rate: {
						value: function(rate) {
							if (null == rate) return _masterRate;
							if ("number" != typeof rate || Number.isNaN(rate) || !Number.isFinite(rate)) throw new Error("rate must be a finite number");
							publish("rate", _masterRate = Math.clamp(rate, .2, 5))
						}
					},
					stop: {
						value: function() {
							publish("stop")
						}
					},
					unload: {
						value: function() {
							publish("unload")
						}
					},
					volume: {
						value: function(volume) {
							if (null == volume) return _masterVolume;
							if ("number" != typeof volume || Number.isNaN(volume) || !Number.isFinite(volume)) throw new Error("volume must be a finite number");
							publish("volume", _masterVolume = Math.clamp(volume, 0, 1))
						}
					}
				}))
			}(),
			State = function() {
				var _history = [],
					_active = momentCreate(),
					_activeIndex = -1,
					_expired = [],
					_prng = null,
					_tempVariables = {};

				function stateMarshal(noDelta) {
					var stateObj = {
						index: _activeIndex
					};
					return noDelta ? stateObj.history = clone(_history) : stateObj.delta = historyDeltaEncode(_history), _expired.length > 0 && (stateObj.expired = _toConsumableArray(_expired)), null !== _prng && (stateObj.seed = _prng.seed), stateObj
				}

				function stateUnmarshal(stateObj, noDelta) {
					if (null == stateObj) throw new Error("state object is null or undefined");
					if (!stateObj.hasOwnProperty(noDelta ? "history" : "delta") || 0 === stateObj[noDelta ? "history" : "delta"].length) throw new Error("state object has no history or history is empty");
					if (!stateObj.hasOwnProperty("index")) throw new Error("state object has no index");
					if (null !== _prng && !stateObj.hasOwnProperty("seed")) throw new Error("state object has no seed, but PRNG is enabled");
					if (null === _prng && stateObj.hasOwnProperty("seed")) throw new Error("state object has seed, but PRNG is disabled");
					_history = noDelta ? clone(stateObj.history) : historyDeltaDecode(stateObj.delta), _activeIndex = stateObj.index, _expired = stateObj.hasOwnProperty("expired") ? _toConsumableArray(stateObj.expired) : [], stateObj.hasOwnProperty("seed") && (_prng.seed = stateObj.seed), momentActivate(_activeIndex)
				}

				function momentCreate(title, variables) {
					return {
						title: null == title ? "" : String(title),
						variables: null == variables ? {} : clone(variables)
					}
				}

				function momentActivate(moment) {
					if (null == moment) throw new Error("moment activation attempted with null or undefined");
					switch (_typeof(moment)) {
						case "object":
							_active = clone(moment);
							break;
						case "number":
							if (historyIsEmpty()) throw new Error("moment activation attempted with index on empty history");
							if (moment < 0 || moment >= historySize()) throw new RangeError("moment activation attempted with out-of-bounds index; need [0, ".concat(historySize() - 1, "], got ")
								.concat(moment));
							_active = clone(_history[moment]);
							break;
						default:
							throw new TypeError('moment activation attempted with a "'.concat(_typeof(moment), '"; must be an object or valid history stack index'))
					}
					return null !== _prng && (_prng = PRNGWrapper.unmarshal({
						seed: _prng.seed,
						pull: _active.pull
					})), session.set("state", stateMarshal()), jQuery.event.trigger(":historyupdate"), _active
				}

				function historyLength() {
					return _activeIndex + 1
				}

				function historySize() {
					return _history.length
				}

				function historyIsEmpty() {
					return 0 === _history.length
				}

				function historyTop() {
					return _history.length > 0 ? _history[_history.length - 1] : null
				}

				function historyGoTo(index) {
					return !(null == index || index < 0 || index >= historySize() || index === _activeIndex) && (momentActivate(_activeIndex = index), !0)
				}

				function historyDeltaEncode(historyArr) {
					if (!Array.isArray(historyArr)) return null;
					if (0 === historyArr.length) return [];
					for (var delta = [historyArr[0]], i = 1, iend = historyArr.length; i < iend; ++i) delta.push(Diff.diff(historyArr[i - 1], historyArr[i]));
					return delta
				}

				function historyDeltaDecode(delta) {
					if (!Array.isArray(delta)) return null;
					if (0 === delta.length) return [];
					for (var historyArr = [clone(delta[0])], i = 1, iend = delta.length; i < iend; ++i) historyArr.push(Diff.patch(historyArr[i - 1], delta[i]));
					return historyArr
				}

				function prngInit(seed, useEntropy) {
					var scriptSection;
					if (!historyIsEmpty()) throw scriptSection = "the Story JavaScript", new Error("State.prng.init must be called during initialization, within either ".concat(scriptSection, " or the StoryInit special passage"));
					_prng = new PRNGWrapper(seed, useEntropy), _active.pull = _prng.pull
				}

				function metadataDelete(key) {
					if ("string" != typeof key) throw new TypeError("State.metadata.delete key parameter must be a string (received: ".concat(_typeof(key), ")"));
					var store = storage.get("metadata");
					store && store.hasOwnProperty(key) && (1 === Object.keys(store)
						.length ? storage.delete("metadata") : (delete store[key], storage.set("metadata", store)))
				}
				return Object.freeze(Object.defineProperties({}, {
					reset: {
						value: function() {
							session.delete("state"), _history = [], _active = momentCreate(), _activeIndex = -1, _expired = [], _prng = null === _prng ? null : new PRNGWrapper(_prng.seed, !1)
						}
					},
					restore: {
						value: function() {
							if (session.has("state")) {
								var stateObj = session.get("state");
								return null != stateObj && (stateUnmarshal(stateObj), !0)
							}
							return !1
						}
					},
					marshalForSave: {
						value: function() {
							return stateMarshal(!0)
						}
					},
					unmarshalForSave: {
						value: function(stateObj) {
							return stateUnmarshal(stateObj, !0)
						}
					},
					expired: {
						get: function() {
							return _expired
						}
					},
					turns: {
						get: function() {
							return _expired.length + historyLength()
						}
					},
					passages: {
						get: function() {
							return _expired.concat(_history.slice(0, historyLength())
								.map((function(moment) {
									return moment.title
								})))
						}
					},
					hasPlayed: {
						value: function(title) {
							return null != title && "" !== title && (!!_expired.includes(title) || !!_history.slice(0, historyLength())
								.some((function(moment) {
									return moment.title === title
								})))
						}
					},
					active: {
						get: function() {
							return _active
						}
					},
					activeIndex: {
						get: function() {
							return _activeIndex
						}
					},
					passage: {
						get: function() {
							return _active.title
						}
					},
					variables: {
						get: function() {
							return _active.variables
						}
					},
					history: {
						get: function() {
							return _history
						}
					},
					length: {
						get: historyLength
					},
					size: {
						get: historySize
					},
					isEmpty: {
						value: historyIsEmpty
					},
					current: {
						get: function() {
							return _history.length > 0 ? _history[_activeIndex] : null
						}
					},
					top: {
						get: historyTop
					},
					bottom: {
						get: function() {
							return _history.length > 0 ? _history[0] : null
						}
					},
					index: {
						value: function(index) {
							return historyIsEmpty() || index < 0 || index > _activeIndex ? null : _history[index]
						}
					},
					peek: {
						value: function(offset) {
							if (historyIsEmpty()) return null;
							var lengthOffset = 1 + (offset ? Math.abs(offset) : 0);
							return lengthOffset > historyLength() ? null : _history[historyLength() - lengthOffset]
						}
					},
					has: {
						value: function(title) {
							if (historyIsEmpty() || null == title || "" === title) return !1;
							for (var i = _activeIndex; i >= 0; --i)
								if (_history[i].title === title) return !0;
							return !1
						}
					},
					create: {
						value: function(title) {
							for (0, historyLength() < historySize() && _history.splice(historyLength(), historySize() - historyLength()), _history.push(momentCreate(title, _active.variables)), _prng && (historyTop()
								.pull = _prng.pull); historySize() > Config.history.maxStates;) _expired.push(_history.shift()
								.title);
							return momentActivate(_activeIndex = historySize() - 1), historyLength()
						}
					},
					goTo: {
						value: historyGoTo
					},
					go: {
						value: function(offset) {
							return null != offset && 0 !== offset && historyGoTo(_activeIndex + offset)
						}
					},
					deltaEncode: {
						value: historyDeltaEncode
					},
					deltaDecode: {
						value: historyDeltaDecode
					},
					prng: {
						value: Object.freeze(Object.defineProperties({}, {
							init: {
								value: prngInit
							},
							isEnabled: {
								value: function() {
									return null !== _prng
								}
							},
							pull: {
								get: function() {
									return _prng ? _prng.pull : NaN
								}
							},
							seed: {
								get: function() {
									return _prng ? _prng.seed : null
								}
							}
						}))
					},
					random: {
						value: function() {
							return _prng ? _prng.random() : Math.random()
						}
					},
					clearTemporary: {
						value: function() {
							TempVariables = _tempVariables = {}
						}
					},
					temporary: {
						get: function() {
							return _tempVariables
						}
					},
					getVar: {
						value: function(varExpression) {
							try {
								return Scripting.evalTwineScript(varExpression)
							} catch (ex) {}
						}
					},
					setVar: {
						value: function(varExpression, value) {
							try {
								return Scripting.evalTwineScript("".concat(varExpression, " = evalTwineScript$Data$"), null, value), !0
							} catch (ex) {}
							return !1
						}
					},
					metadata: {
						value: Object.freeze(Object.defineProperties({}, {
							clear: {
								value: function() {
									storage.delete("metadata")
								}
							},
							delete: {
								value: metadataDelete
							},
							entries: {
								value: function() {
									var store = storage.get("metadata");
									return store && Object.entries(store)
								}
							},
							get: {
								value: function(key) {
									if ("string" != typeof key) throw new TypeError("State.metadata.get key parameter must be a string (received: ".concat(_typeof(key), ")"));
									var store = storage.get("metadata");
									return store && store.hasOwnProperty(key) ? store[key] : undefined
								}
							},
							has: {
								value: function(key) {
									if ("string" != typeof key) throw new TypeError("State.metadata.has key parameter must be a string (received: ".concat(_typeof(key), ")"));
									var store = storage.get("metadata");
									return store && store.hasOwnProperty(key)
								}
							},
							keys: {
								value: function() {
									var store = storage.get("metadata");
									return store && Object.keys(store)
								}
							},
							set: {
								value: function(key, value) {
									if ("string" != typeof key) throw new TypeError("State.metadata.set key parameter must be a string (received: ".concat(_typeof(key), ")"));
									if (void 0 === value) metadataDelete(key);
									else {
										var store = storage.get("metadata") || {};
										store[key] = value, storage.set("metadata", store)
									}
								}
							},
							size: {
								get: function() {
									var store = storage.get("metadata");
									return store ? Object.keys(store)
										.length : 0
								}
							}
						}))
					},
					initPRNG: {
						value: prngInit
					},
					restart: {
						value: function() {
							return Engine.restart()
						}
					},
					backward: {
						value: function() {
							return Engine.backward()
						}
					},
					forward: {
						value: function() {
							return Engine.forward()
						}
					},
					display: {
						value: function() {
							return Engine.display.apply(Engine, arguments)
						}
					},
					show: {
						value: function() {
							return Engine.show.apply(Engine, arguments)
						}
					},
					play: {
						value: function() {
							return Engine.play.apply(Engine, arguments)
						}
					}
				}))
			}(),
			Scripting = function() {
				function addAccessibleClickHandler(targets, selector, handler, one, namespace) {
					if (arguments.length < 2) throw new Error("addAccessibleClickHandler insufficient number of parameters");
					var fn, opts;
					if ("function" == typeof selector ? (fn = selector, opts = {
						namespace: one,
						one: !!handler
					}) : (fn = handler, opts = {
						namespace: namespace,
						one: !!one,
						selector: selector
					}), "function" != typeof fn) throw new TypeError("addAccessibleClickHandler handler parameter must be a function");
					return jQuery(targets)
						.ariaClick(opts, fn)
				}

				function insertElement(place, type, id, classNames, text, title) {
					var $el = jQuery(document.createElement(type));
					return id && $el.attr("id", id), classNames && $el.addClass(classNames), title && $el.attr("title", title), text && $el.text(text), place && $el.appendTo(place), $el[0]
				}

				function insertText(place, text) {
					jQuery(place)
						.append(document.createTextNode(text))
				}

				function removeChildren(node) {
					jQuery(node)
						.empty()
				}

				function removeElement(node) {
					jQuery(node)
						.remove()
				}

				function fade(el, options) {
					var current, intervalId, direction = "in" === options.fade ? 1 : -1,
						proxy = el.cloneNode(!0);

					function setOpacity(el, opacity) {
						el.style.zoom = 1, el.style.filter = "alpha(opacity=".concat(Math.floor(100 * opacity), ")"), el.style.opacity = opacity
					}
					el.parentNode.replaceChild(proxy, el), "in" === options.fade ? (current = 0, proxy.style.visibility = "visible") : current = 1, setOpacity(proxy, current), intervalId = window.setInterval((function() {
						current += .05 * direction, setOpacity(proxy, Math.easeInOut(current)), (1 === direction && current >= 1 || -1 === direction && current <= 0) && (el.style.visibility = "in" === options.fade ? "visible" : "hidden", proxy.parentNode.replaceChild(el, proxy), proxy = null, window.clearInterval(intervalId), options.onComplete && options.onComplete())
					}), 25)
				}

				function scrollWindowTo(el, incrementBy) {
					var increment = null != incrementBy ? Number(incrementBy) : .1;
					Number.isNaN(increment) || !Number.isFinite(increment) || increment < 0 ? increment = .1 : increment > 1 && (increment = 1);
					var intervalId, start = window.scrollY ? window.scrollY : document.body.scrollTop,
						end = function(el) {
							var posTop = function(el) {
									var curtop = 0;
									for (; el.offsetParent;) curtop += el.offsetTop, el = el.offsetParent;
									return curtop
								}(el),
								posBottom = posTop + el.offsetHeight,
								winTop = window.scrollY ? window.scrollY : document.body.scrollTop,
								winHeight = window.innerHeight ? window.innerHeight : document.body.clientHeight,
								winBottom = winTop + winHeight;
							return posTop >= winTop && posBottom > winBottom && el.offsetHeight < winHeight ? posTop - (winHeight - el.offsetHeight) + 20 : posTop
						}(el),
						distance = Math.abs(start - end),
						direction = start > end ? -1 : 1,
						progress = 0;
					intervalId = window.setInterval((function() {
						progress += increment, window.scroll(0, start + direction * (distance * Math.easeInOut(progress))), progress >= 1 && window.clearInterval(intervalId)
					}), 25)
				}

				function toStringOrDefault(value) {
					return stringFrom(value)
				}

				function either() {
					if (0 !== arguments.length) return Array.prototype.concat.apply([], arguments)
						.random()
				}

				function forget(key) {
					if ("string" != typeof key) throw new TypeError("forget key parameter must be a string (received: ".concat(Util.getType(key), ")"));
					State.metadata.delete(key)
				}

				function hasVisited() {
					if (0 === arguments.length) throw new Error("hasVisited called with insufficient parameters");
					if (State.isEmpty()) return !1;
					for (var needles = Array.prototype.concat.apply([], arguments), played = State.passages, i = 0, iend = needles.length; i < iend; ++i)
						if (!played.includes(needles[i])) return !1;
					return !0
				}

				function lastVisited() {
					if (0 === arguments.length) throw new Error("lastVisited called with insufficient parameters");
					if (State.isEmpty()) return -1;
					for (var needles = Array.prototype.concat.apply([], arguments), played = State.passages, uBound = played.length - 1, turns = State.turns, i = 0, iend = needles.length; i < iend && turns > -1; ++i) {
						var lastIndex = played.lastIndexOf(needles[i]);
						turns = Math.min(turns, -1 === lastIndex ? -1 : uBound - lastIndex)
					}
					return turns
				}

				function memorize(key, value) {
					if ("string" != typeof key) throw new TypeError("memorize key parameter must be a string (received: ".concat(Util.getType(key), ")"));
					State.metadata.set(key, value)
				}

				function passage() {
					return State.passage
				}

				function previous() {
					var passages = State.passages;
					if (arguments.length > 0) {
						var offset = Number(arguments[0]);
						if (!Number.isSafeInteger(offset) || offset < 1) throw new RangeError("previous offset parameter must be a positive integer greater than zero");
						return passages.length > offset ? passages[passages.length - 1 - offset] : ""
					}
					for (var i = passages.length - 2; i >= 0; --i)
						if (passages[i] !== State.passage) return passages[i];
					return ""
				}

				function random() {
					var min, max;
					switch (arguments.length) {
						case 0:
							throw new Error("random called with insufficient parameters");
						case 1:
							min = 0, max = Math.trunc(arguments[0]);
							break;
						default:
							min = Math.trunc(arguments[0]), max = Math.trunc(arguments[1])
					}
					if (!Number.isInteger(min)) throw new Error("random min parameter must be an integer");
					if (!Number.isInteger(max)) throw new Error("random max parameter must be an integer");
					if (min > max) {
						var _ref6 = [max, min];
						min = _ref6[0], max = _ref6[1]
					}
					return Math.floor(State.random() * (max - min + 1)) + min
				}

				function randomFloat() {
					var min, max;
					switch (arguments.length) {
						case 0:
							throw new Error("randomFloat called with insufficient parameters");
						case 1:
							min = 0, max = Number(arguments[0]);
							break;
						default:
							min = Number(arguments[0]), max = Number(arguments[1])
					}
					if (Number.isNaN(min) || !Number.isFinite(min)) throw new Error("randomFloat min parameter must be a number");
					if (Number.isNaN(max) || !Number.isFinite(max)) throw new Error("randomFloat max parameter must be a number");
					if (min > max) {
						var _ref7 = [max, min];
						min = _ref7[0], max = _ref7[1]
					}
					return State.random() * (max - min) + min
				}

				function recall(key, defaultValue) {
					if ("string" != typeof key) throw new TypeError("recall key parameter must be a string (received: ".concat(Util.getType(key), ")"));
					return State.metadata.has(key) ? State.metadata.get(key) : defaultValue
				}

				function tags() {
					if (0 === arguments.length) return Story.get(State.passage)
						.tags.slice(0);
					for (var passages = Array.prototype.concat.apply([], arguments), tags = [], i = 0, iend = passages.length; i < iend; ++i) tags = tags.concat(Story.get(passages[i])
						.tags);
					return tags
				}

				function temporary() {
					return State.temporary
				}

				function time() {
					return null === Engine.lastPlay ? 0 : Util.now() - Engine.lastPlay
				}

				function turns() {
					return State.turns
				}

				function variables() {
					return State.variables
				}

				function visited() {
					if (State.isEmpty()) return 0;
					for (var needles = Array.prototype.concat.apply([], 0 === arguments.length ? [State.passage] : arguments), played = State.passages, count = State.turns, i = 0, iend = needles.length; i < iend && count > 0; ++i) count = Math.min(count, played.count(needles[i]));
					return count
				}

				function visitedTags() {
					if (0 === arguments.length) throw new Error("visitedTags called with insufficient parameters");
					if (State.isEmpty()) return 0;
					for (var needles = Array.prototype.concat.apply([], arguments), nLength = needles.length, played = State.passages, seen = new Map, count = 0, i = 0, iend = played.length; i < iend; ++i) {
						var title = played[i];
						if (seen.has(title)) seen.get(title) && ++count;
						else {
							var _tags2 = Story.get(title)
								.tags;
							if (_tags2.length > 0) {
								for (var found = 0, j = 0; j < nLength; ++j) _tags2.includes(needles[j]) && ++found;
								found === nLength ? (++count, seen.set(title, !0)) : seen.set(title, !1)
							}
						}
					}
					return count
				}
				var _ref8 = function() {
						function slugifyUrl(url) {
							return Util.parseUrl(url)
								.path.replace(/^[^\w]+|[^\w]+$/g, "")
								.replace(/[^\w]+/g, "-")
								.toLocaleLowerCase()
						}

						function addScript(url) {
							return new Promise((function(resolve, reject) {
								jQuery(document.createElement("script"))
									.one("load abort error", (function(ev) {
										jQuery(ev.target)
											.off(), "load" === ev.type ? resolve(ev.target) : reject(new Error('importScripts failed to load the script "'.concat(url, '".')))
									}))
									.appendTo(document.head)
									.attr({
										id: "script-imported-".concat(slugifyUrl(url)),
										type: "text/javascript",
										src: url
									})
							}))
						}

						function addStyle(url) {
							return new Promise((function(resolve, reject) {
								jQuery(document.createElement("link"))
									.one("load abort error", (function(ev) {
										jQuery(ev.target)
											.off(), "load" === ev.type ? resolve(ev.target) : reject(new Error('importStyles failed to load the stylesheet "'.concat(url, '".')))
									}))
									.appendTo(document.head)
									.attr({
										id: "style-imported-".concat(slugifyUrl(url)),
										rel: "stylesheet",
										href: url
									})
							}))
						}

						function sequence(callbacks) {
							return callbacks.reduce((function(seq, fn) {
								return seq.then(fn)
							}), Promise.resolve())
						}
						return {
							importScripts: function() {
								for (var _len12 = arguments.length, urls = new Array(_len12), _key12 = 0; _key12 < _len12; _key12++) urls[_key12] = arguments[_key12];
								return Promise.all(urls.map((function(oneOrSeries) {
									return Array.isArray(oneOrSeries) ? sequence(oneOrSeries.map((function(url) {
										return function() {
											return addScript(url)
										}
									}))) : addScript(oneOrSeries)
								})))
							},
							importStyles: function() {
								for (var _len13 = arguments.length, urls = new Array(_len13), _key13 = 0; _key13 < _len13; _key13++) urls[_key13] = arguments[_key13];
								return Promise.all(urls.map((function(oneOrSeries) {
									return Array.isArray(oneOrSeries) ? sequence(oneOrSeries.map((function(url) {
										return function() {
											return addStyle(url)
										}
									}))) : addStyle(oneOrSeries)
								})))
							}
						}
					}(),
					importScripts = _ref8.importScripts,
					importStyles = _ref8.importStyles,
					parse = function() {
						var tokenTable = Util.toEnum({
								$: "State.variables.",
								_: "State.temporary.",
								to: "=",
								eq: "==",
								neq: "!=",
								is: "===",
								isnot: "!==",
								gt: ">",
								gte: ">=",
								lt: "<",
								lte: "<=",
								and: "&&",
								or: "||",
								not: "!",
								def: '"undefined" !== typeof',
								ndef: '"undefined" === typeof'
							}),
							parseRe = new RegExp(["(?:\"\"|''|``)", '(?:"(?:\\\\.|[^"\\\\])+")', "(?:'(?:\\\\.|[^'\\\\])+')", "(`(?:\\\\.|[^`\\\\])+`)", "(?:[=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}]+)", "([^\"'=+\\-*\\/%<>&\\|\\^~!?:,;\\(\\)\\[\\]{}\\s]+)"].join("|"), "g"),
							notSpaceRe = /\S/,
							varTest = new RegExp("^".concat(Patterns.variable)),
							withColonTestRe = /^\s*:/,
							withNotTestRe = /^\s+not\b/;

						function parse(rawCodeString) {
							if (0 !== parseRe.lastIndex) throw new RangeError("Scripting.parse last index is non-zero at start");
							for (var match, code = rawCodeString; null !== (match = parseRe.exec(code));)
								if (match[1]) {
									var rawTemplate = match[1],
										parsedTemplate = parseTemplate(rawTemplate);
									parsedTemplate !== rawTemplate && (code = code.splice(match.index, rawTemplate.length, parsedTemplate), parseRe.lastIndex += parsedTemplate.length - rawTemplate.length)
								} else if (match[2]) {
								var token = match[2];
								if ("$" === token || "_" === token) continue;
								if (varTest.test(token)) token = token[0];
								else if ("is" === token) {
									var start = parseRe.lastIndex,
										ahead = code.slice(start);
									withNotTestRe.test(ahead) && (code = code.splice(start, ahead.search(notSpaceRe)), token = "isnot")
								} else {
									var _ahead = code.slice(parseRe.lastIndex);
									if (withColonTestRe.test(_ahead)) continue
								}
								tokenTable[token] && (code = code.splice(match.index, token.length, tokenTable[token]), parseRe.lastIndex += tokenTable[token].length - token.length)
							}
							return code
						}
						var templateGroupStartRe = /\$\{/g,
							templateGroupParseRe = new RegExp(["(?:\"\"|'')", '(?:"(?:\\\\.|[^"\\\\])+")', "(?:'(?:\\\\.|[^'\\\\])+')", "(\\{)", "(\\})"].join("|"), "g");

						function parseTemplate(rawTemplateLiteral) {
							if (0 !== templateGroupStartRe.lastIndex) throw new RangeError("Scripting.parse last index is non-zero at start of template literal");
							for (var startMatch, template = rawTemplateLiteral; null !== (startMatch = templateGroupStartRe.exec(template));) {
								var startIdx = startMatch.index + 2,
									endIdx = startIdx,
									depth = 1,
									endMatch = void 0;
								for (templateGroupParseRe.lastIndex = startIdx; null !== (endMatch = templateGroupParseRe.exec(template));)
									if (endMatch[1] ? ++depth : endMatch[2] && --depth, 0 === depth) {
										endIdx = endMatch.index;
										break
									} if (endIdx > startIdx) {
									var parseIndex = parseRe.lastIndex,
										rawGroup = template.slice(startIdx, endIdx);
									parseRe.lastIndex = 0;
									var parsedGroup = parse(rawGroup);
									parseRe.lastIndex = parseIndex, template = template.splice(startIdx, rawGroup.length, parsedGroup), templateGroupStartRe.lastIndex += parsedGroup.length - rawGroup.length
								}
							}
							return template
						}
						return parse
					}();

				function evalJavaScript(code, output, data) {
					return function(code, output, evalJavaScript$Data$) {
						return eval(code)
					}.call(output ? {
						output: output
					} : null, String(code), output, data)
				}

				function evalTwineScript(code, output, data) {
					return function(code, output, evalTwineScript$Data$) {
						return eval(code)
					}.call(output ? {
						output: output
					} : null, parse(String(code)), output, data)
				}
				return Object.freeze(Object.defineProperties({}, {
					parse: {
						value: parse
					},
					evalJavaScript: {
						value: evalJavaScript
					},
					evalTwineScript: {
						value: evalTwineScript
					}
				}))
			}(),
			_ref9 = function() {
				var Lexer = function() {
					function Lexer(source, initialState) {
						if (_classCallCheck(this, Lexer), arguments.length < 2) throw new Error("Lexer constructor called with too few parameters (source:string , initialState:function)");
						Object.defineProperties(this, {
							source: {
								value: source
							},
							initial: {
								value: initialState
							},
							state: {
								writable: !0,
								value: initialState
							},
							start: {
								writable: !0,
								value: 0
							},
							pos: {
								writable: !0,
								value: 0
							},
							depth: {
								writable: !0,
								value: 0
							},
							items: {
								writable: !0,
								value: []
							},
							data: {
								writable: !0,
								value: {}
							}
						})
					}
					return _createClass(Lexer, [{
						key: "reset",
						value: function() {
							this.state = this.initial, this.start = 0, this.pos = 0, this.depth = 0, this.items = [], this.data = {}
						}
					}, {
						key: "run",
						value: function() {
							for (; null !== this.state;) this.state = this.state(this);
							return this.items
						}
					}, {
						key: "nextItem",
						value: function() {
							for (; 0 === this.items.length && null !== this.state;) this.state = this.state(this);
							return this.items.shift()
						}
					}, {
						key: "next",
						value: function() {
							return this.pos >= this.source.length ? -1 : this.source[this.pos++]
						}
					}, {
						key: "peek",
						value: function() {
							return this.pos >= this.source.length ? -1 : this.source[this.pos]
						}
					}, {
						key: "backup",
						value: function(num) {
							this.pos -= num || 1
						}
					}, {
						key: "forward",
						value: function(num) {
							this.pos += num || 1
						}
					}, {
						key: "ignore",
						value: function() {
							this.start = this.pos
						}
					}, {
						key: "accept",
						value: function(valid) {
							var ch = this.next();
							return -1 !== ch && (!!valid.includes(ch) || (this.backup(), !1))
						}
					}, {
						key: "acceptRe",
						value: function(validRe) {
							var ch = this.next();
							return -1 !== ch && (!!validRe.test(ch) || (this.backup(), !1))
						}
					}, {
						key: "acceptRun",
						value: function(valid) {
							for (;;) {
								var ch = this.next();
								if (-1 === ch) return;
								if (!valid.includes(ch)) break
							}
							this.backup()
						}
					}, {
						key: "acceptRunRe",
						value: function(validRe) {
							for (;;) {
								var ch = this.next();
								if (-1 === ch) return;
								if (!validRe.test(ch)) break
							}
							this.backup()
						}
					}, {
						key: "emit",
						value: function(type) {
							this.items.push({
								type: type,
								text: this.source.slice(this.start, this.pos),
								start: this.start,
								pos: this.pos
							}), this.start = this.pos
						}
					}, {
						key: "error",
						value: function(type, message) {
							if (arguments.length < 2) throw new Error("Lexer.prototype.error called with too few parameters (type:number , message:string)");
							return this.items.push({
								type: type,
								message: message,
								text: this.source.slice(this.start, this.pos),
								start: this.start,
								pos: this.pos
							}), null
						}
					}], [{
						key: "enumFromNames",
						value: function(names) {
							var obj = names.reduce((function(obj, name, i) {
								return obj[name] = i, obj
							}), {});
							return Object.freeze(Object.assign(Object.create(null), obj))
						}
					}]), Lexer
				}();
				return {
					EOF: -1,
					Lexer: Lexer
				}
			}(),
			EOF = _ref9.EOF,
			Lexer = _ref9.Lexer,
			Wikifier = function() {
				var _optionsStack, lookaheadRe, idOrClassRe, _callDepth = 0,
					Wikifier = function() {
						function Wikifier(destination, source, options) {
							_classCallCheck(this, Wikifier), Wikifier.Parser.Profile.isEmpty() && Wikifier.Parser.Profile.compile(), Object.defineProperties(this, {
								source: {
									value: String(source)
								},
								options: {
									writable: !0,
									value: Object.assign({
										profile: "all"
									}, options)
								},
								nextMatch: {
									writable: !0,
									value: 0
								},
								output: {
									writable: !0,
									value: null
								},
								_rawArgs: {
									writable: !0,
									value: ""
								}
							}), null == destination ? this.output = document.createDocumentFragment() : destination.jquery ? this.output = destination[0] : this.output = destination;
							try {
								++_callDepth, this.subWikify(this.output), 1 === _callDepth && Config.cleanupWikifierOutput && convertBreaks(this.output)
							} finally {
								--_callDepth
							}
						}
						return _createClass(Wikifier, [{
							key: "subWikify",
							value: function(output, terminator, options) {
								var newOptions, oldOptions, oldOutput = this.output;
								this.output = output, Wikifier.Option.length > 0 && (newOptions = Object.assign(newOptions || {}, Wikifier.Option.options)), null !== options && "object" === _typeof(options) && (newOptions = Object.assign(newOptions || {}, options)), newOptions && (oldOptions = this.options, this.options = Object.assign({}, this.options, newOptions));
								var terminatorMatch, parserMatch, parsersProfile = Wikifier.Parser.Profile.get(this.options.profile),
									terminatorRegExp = terminator ? new RegExp("(?:".concat(terminator, ")"), this.options.ignoreTerminatorCase ? "gim" : "gm") : null;
								do {
									if (parsersProfile.parserRegExp.lastIndex = this.nextMatch, terminatorRegExp && (terminatorRegExp.lastIndex = this.nextMatch), parserMatch = parsersProfile.parserRegExp.exec(this.source), (terminatorMatch = terminatorRegExp ? terminatorRegExp.exec(this.source) : null) && (!parserMatch || terminatorMatch.index <= parserMatch.index)) return terminatorMatch.index > this.nextMatch && this.outputText(this.output, this.nextMatch, terminatorMatch.index), this.matchStart = terminatorMatch.index, this.matchLength = terminatorMatch[0].length, this.matchText = terminatorMatch[0], this.nextMatch = terminatorRegExp.lastIndex, this.output = oldOutput, void(oldOptions && (this.options = oldOptions));
									if (parserMatch) {
										parserMatch.index > this.nextMatch && this.outputText(this.output, this.nextMatch, parserMatch.index), this.matchStart = parserMatch.index, this.matchLength = parserMatch[0].length, this.matchText = parserMatch[0], this.nextMatch = parsersProfile.parserRegExp.lastIndex;
										for (var matchingParser = void 0, i = 1, iend = parserMatch.length; i < iend; ++i)
											if (parserMatch[i]) {
												matchingParser = i - 1;
												break
											} if (parsersProfile.parsers[matchingParser].handler(this), null != TempState.break) break
									}
								} while (terminatorMatch || parserMatch);
								null == TempState.break ? this.nextMatch < this.source.length && (this.outputText(this.output, this.nextMatch, this.source.length), this.nextMatch = this.source.length) : this.output.lastChild && this.output.lastChild.nodeType === Node.ELEMENT_NODE && "BR" === this.output.lastChild.nodeName.toUpperCase() && jQuery(this.output.lastChild)
									.remove(), this.output = oldOutput, oldOptions && (this.options = oldOptions)
							}
						}, {
							key: "outputText",
							value: function(destination, startPos, endPos) {
								jQuery(destination)
									.append(document.createTextNode(this.source.substring(startPos, endPos)))
							}
						}, {
							key: "rawArgs",
							value: function() {
								return this._rawArgs
							}
						}, {
							key: "fullArgs",
							value: function() {
								return Scripting.parse(this._rawArgs)
							}
						}], [{
							key: "wikifyEval",
							value: function(text) {
								var output = document.createDocumentFragment();
								new Wikifier(output, text);
								var errors = output.querySelector(".error");
								if (null !== errors) throw new Error(errors.textContent.replace(errorPrologRegExp, ""));
								return output
							}
						}, {
							key: "createInternalLink",
							value: function(destination, passage, text, callback) {
								var $link = jQuery(document.createElement("a"));
								return null != passage && ($link.attr("data-passage", passage), Story.has(passage) ? ($link.addClass("link-internal"), Config.addVisitedLinkClass && State.hasPlayed(passage) && $link.addClass("link-visited")) : $link.addClass("link-broken"), $link.ariaClick({
									one: !0
								}, (function() {
									"function" == typeof callback && callback(), Engine.play(passage)
								}))), text && $link.append(document.createTextNode(text)), destination && $link.appendTo(destination), $link[0]
							}
						}, {
							key: "createExternalLink",
							value: function(destination, url, text) {
								var $link = jQuery(document.createElement("a"))
									.attr("target", "_blank")
									.addClass("link-external")
									.text(text)
									.appendTo(destination);
								return null != url && $link.attr({
									href: url,
									tabindex: 0
								}), $link[0]
							}
						}, {
							key: "isExternalLink",
							value: function(link) {
								return !Story.has(link) && (new RegExp("^".concat(Patterns.url), "gim")
									.test(link) || /[/.?#]/.test(link))
							}
						}]), Wikifier
					}();
				return Object.defineProperty(Wikifier, "Option", {
					value: (_optionsStack = [], Object.freeze(Object.defineProperties({}, {
						length: {
							get: function() {
								return _optionsStack.length
							}
						},
						options: {
							get: function() {
								return Object.assign.apply(Object, [{}].concat(_toConsumableArray(_optionsStack)))
							}
						},
						clear: {
							value: function() {
								_optionsStack = []
							}
						},
						get: {
							value: function(idx) {
								return _optionsStack[idx]
							}
						},
						pop: {
							value: function() {
								return _optionsStack.pop()
							}
						},
						push: {
							value: function(options) {
								if ("object" !== _typeof(options) || null === options) throw new TypeError("Wikifier.Option.push options parameter must be an object (received: ".concat(Util.getType(options), ")"));
								return _optionsStack.push(options)
							}
						}
					})))
				}), Object.defineProperty(Wikifier, "Parser", {
					value: function() {
						var _profiles, _parsers = [];

						function parsersHas(name) {
							return !!_parsers.find((function(parser) {
								return parser.name === name
							}))
						}
						return Object.freeze(Object.defineProperties({}, {
							parsers: {
								get: function() {
									return _parsers
								}
							},
							add: {
								value: function(parser) {
									if ("object" !== _typeof(parser)) throw new Error("Wikifier.Parser.add parser parameter must be an object");
									if (!parser.hasOwnProperty("name")) throw new Error('parser object missing required "name" property');
									if ("string" != typeof parser.name) throw new Error('parser object "name" property must be a string');
									if (!parser.hasOwnProperty("match")) throw new Error('parser object missing required "match" property');
									if ("string" != typeof parser.match) throw new Error('parser object "match" property must be a string');
									if (!parser.hasOwnProperty("handler")) throw new Error('parser object missing required "handler" property');
									if ("function" != typeof parser.handler) throw new Error('parser object "handler" property must be a function');
									if (parser.hasOwnProperty("profiles") && !Array.isArray(parser.profiles)) throw new Error('parser object "profiles" property must be an array');
									if (parsersHas(parser.name)) throw new Error('cannot clobber existing parser "'.concat(parser.name, '"'));
									_parsers.push(parser)
								}
							},
							delete: {
								value: function(name) {
									var parser = _parsers.find((function(parser) {
										return parser.name === name
									}));
									parser && _parsers.delete(parser)
								}
							},
							isEmpty: {
								value: function() {
									return 0 === _parsers.length
								}
							},
							has: {
								value: parsersHas
							},
							get: {
								value: function(name) {
									return _parsers.find((function(parser) {
										return parser.name === name
									})) || null
								}
							},
							Profile: {
								value: Object.freeze(Object.defineProperties({}, {
									profiles: {
										get: function() {
											return _profiles
										}
									},
									compile: {
										value: function() {
											var all = _parsers,
												core = all.filter((function(parser) {
													return !Array.isArray(parser.profiles) || parser.profiles.includes("core")
												}));
											return _profiles = Object.freeze({
												all: {
													parsers: all,
													parserRegExp: new RegExp(all.map((function(parser) {
															return "(".concat(parser.match, ")")
														}))
														.join("|"), "gm")
												},
												core: {
													parsers: core,
													parserRegExp: new RegExp(core.map((function(parser) {
															return "(".concat(parser.match, ")")
														}))
														.join("|"), "gm")
												}
											})
										}
									},
									isEmpty: {
										value: function() {
											return "object" !== _typeof(_profiles) || 0 === Object.keys(_profiles)
												.length
										}
									},
									has: {
										value: function(profile) {
											return "object" === _typeof(_profiles) && _profiles.hasOwnProperty(profile)
										}
									},
									get: {
										value: function(profile) {
											if ("object" !== _typeof(_profiles) || !_profiles.hasOwnProperty(profile)) throw new Error('nonexistent parser profile "'.concat(profile, '"'));
											return _profiles[profile]
										}
									}
								}))
							}
						}))
					}()
				}), Object.defineProperties(Wikifier, {
					helpers: {
						value: {}
					},
					getValue: {
						value: State.getVar
					},
					setValue: {
						value: State.setVar
					},
					parse: {
						value: Scripting.parse
					},
					evalExpression: {
						value: Scripting.evalTwineScript
					},
					evalStatements: {
						value: Scripting.evalTwineScript
					},
					textPrimitives: {
						value: Patterns
					}
				}), Object.defineProperties(Wikifier.helpers, {
					inlineCss: {
						value: (lookaheadRe = new RegExp(Patterns.inlineCss, "gm"), idOrClassRe = new RegExp("(".concat(Patterns.cssIdOrClassSigil, ")(")
							.concat(Patterns.anyLetter, "+)"), "g"), function(w) {
							var matched, css = {
								classes: [],
								id: "",
								styles: {}
							};
							do {
								lookaheadRe.lastIndex = w.nextMatch;
								var match = lookaheadRe.exec(w.source);
								if (matched = match && match.index === w.nextMatch) {
									if (match[1]) css.styles[Util.fromCssProperty(match[1])] = match[2].trim();
									else if (match[3]) css.styles[Util.fromCssProperty(match[3])] = match[4].trim();
									else if (match[5]) {
										var subMatch = void 0;
										for (idOrClassRe.lastIndex = 0; null !== (subMatch = idOrClassRe.exec(match[5]));) "." === subMatch[1] ? css.classes.push(subMatch[2]) : css.id = subMatch[2]
									}
									w.nextMatch = lookaheadRe.lastIndex
								}
							} while (matched);
							return css
						})
					},
					evalText: {
						value: function(text) {
							var result;
							try {
								switch (_typeof(result = Scripting.evalTwineScript(text))) {
									case "string":
										"" === result.trim() && (result = text);
										break;
									case "number":
										result = String(result);
										break;
									default:
										result = text
								}
							} catch (ex) {
								result = text
							}
							return result
						}
					},
					evalPassageId: {
						value: function(passage) {
							return null == passage || Story.has(passage) ? passage : Wikifier.helpers.evalText(passage)
						}
					},
					hasBlockContext: {
						value: function(nodes) {
							for (var hasGCS = "function" == typeof window.getComputedStyle, i = nodes.length - 1; i >= 0; --i) {
								var node = nodes[i];
								switch (node.nodeType) {
									case Node.ELEMENT_NODE:
										var tagName = node.nodeName.toUpperCase();
										if ("BR" === tagName) return !0;
										var styles = hasGCS ? window.getComputedStyle(node, null) : node.currentStyle;
										if (styles && styles.display) {
											if ("none" === styles.display) continue;
											return "block" === styles.display
										}
										switch (tagName) {
											case "ADDRESS":
											case "ARTICLE":
											case "ASIDE":
											case "BLOCKQUOTE":
											case "CENTER":
											case "DIV":
											case "DL":
											case "FIGURE":
											case "FOOTER":
											case "FORM":
											case "H1":
											case "H2":
											case "H3":
											case "H4":
											case "H5":
											case "H6":
											case "HEADER":
											case "HR":
											case "MAIN":
											case "NAV":
											case "OL":
											case "P":
											case "PRE":
											case "SECTION":
											case "TABLE":
											case "UL":
												return !0
										}
										return !1;
									case Node.COMMENT_NODE:
										continue;
									default:
										return !1
								}
							}
							return !0
						}
					},
					createShadowSetterCallback: {
						value: function() {
							var macroParser = null;

							function getMacroContextShadowView() {
								for (var macro = macroParser || function() {
									if (!macroParser && !(macroParser = Wikifier.Parser.get("macro"))) throw new Error('cannot find "macro" parser');
									return macroParser
								}(), view = new Set, context = macro.context; null !== context; context = context.parent) context._shadows && context._shadows.forEach((function(name) {
									return view.add(name)
								}));
								return _toConsumableArray(view)
							}
							return function(code) {
								var shadowStore = {};
								return getMacroContextShadowView()
									.forEach((function(varName) {
										var varKey = varName.slice(1),
											store = "$" === varName[0] ? State.variables : State.temporary;
										shadowStore[varName] = store[varKey]
									})),
									function() {
										var shadowNames = Object.keys(shadowStore),
											valueCache = shadowNames.length > 0 ? {} : null;
										try {
											return shadowNames.forEach((function(varName) {
												var varKey = varName.slice(1),
													store = "$" === varName[0] ? State.variables : State.temporary;
												store.hasOwnProperty(varKey) && (valueCache[varKey] = store[varKey]), store[varKey] = shadowStore[varName]
											})), Scripting.evalJavaScript(code)
										} finally {
											shadowNames.forEach((function(varName) {
												var varKey = varName.slice(1),
													store = "$" === varName[0] ? State.variables : State.temporary;
												shadowStore[varName] = store[varKey], valueCache.hasOwnProperty(varKey) ? store[varKey] = valueCache[varKey] : delete store[varKey]
											}))
										}
									}
							}
						}()
					},
					parseSquareBracketedMarkup: {
						value: function() {
							var Item = Lexer.enumFromNames(["Error", "DelimLTR", "DelimRTL", "InnerMeta", "ImageMeta", "LinkMeta", "Link", "RightMeta", "Setter", "Source", "Text"]),
								Delim = Lexer.enumFromNames(["None", "LTR", "RTL"]);

							function slurpQuote(lexer, endQuote) {
								loop: for (;;) switch (lexer.next()) {
									case "\\":
										var ch = lexer.next();
										if (ch !== EOF && "\n" !== ch) break;
									case EOF:
									case "\n":
										return EOF;
									case endQuote:
										break loop
								}
								return lexer.pos
							}

							function lexLeftMeta(lexer) {
								if (!lexer.accept("[")) return lexer.error(Item.Error, "malformed square-bracketed markup");
								if (lexer.accept("[")) lexer.data.isLink = !0, lexer.emit(Item.LinkMeta);
								else {
									if (lexer.accept("<>"), !(lexer.accept("Ii") && lexer.accept("Mm") && lexer.accept("Gg") && lexer.accept("["))) return lexer.error(Item.Error, "malformed square-bracketed markup");
									lexer.data.isLink = !1, lexer.emit(Item.ImageMeta)
								}
								return lexer.depth = 2, lexCoreComponents
							}

							function lexCoreComponents(lexer) {
								for (var what = lexer.data.isLink ? "link" : "image", delim = Delim.None;;) switch (lexer.next()) {
									case EOF:
									case "\n":
										return lexer.error(Item.Error, "unterminated ".concat(what, " markup"));
									case '"':
										if (slurpQuote(lexer, '"') === EOF) return lexer.error(Item.Error, "unterminated double quoted string in ".concat(what, " markup"));
										break;
									case "|":
										delim === Delim.None && (delim = Delim.LTR, lexer.backup(), lexer.emit(Item.Text), lexer.forward(), lexer.emit(Item.DelimLTR));
										break;
									case "-":
										delim === Delim.None && ">" === lexer.peek() && (delim = Delim.LTR, lexer.backup(), lexer.emit(Item.Text), lexer.forward(2), lexer.emit(Item.DelimLTR));
										break;
									case "<":
										delim === Delim.None && "-" === lexer.peek() && (delim = Delim.RTL, lexer.backup(), lexer.emit(lexer.data.isLink ? Item.Link : Item.Source), lexer.forward(2), lexer.emit(Item.DelimRTL));
										break;
									case "[":
										++lexer.depth;
										break;
									case "]":
										if (--lexer.depth, 1 === lexer.depth) switch (lexer.peek()) {
											case "[":
												return ++lexer.depth, lexer.backup(), delim === Delim.RTL ? lexer.emit(Item.Text) : lexer.emit(lexer.data.isLink ? Item.Link : Item.Source), lexer.forward(2), lexer.emit(Item.InnerMeta), lexer.data.isLink ? lexSetter : lexImageLink;
											case "]":
												return --lexer.depth, lexer.backup(), delim === Delim.RTL ? lexer.emit(Item.Text) : lexer.emit(lexer.data.isLink ? Item.Link : Item.Source), lexer.forward(2), lexer.emit(Item.RightMeta), null;
											default:
												return lexer.error(Item.Error, "malformed ".concat(what, " markup"))
										}
								}
							}

							function lexImageLink(lexer) {
								for (var what = lexer.data.isLink ? "link" : "image";;) switch (lexer.next()) {
									case EOF:
									case "\n":
										return lexer.error(Item.Error, "unterminated ".concat(what, " markup"));
									case '"':
										if (slurpQuote(lexer, '"') === EOF) return lexer.error(Item.Error, "unterminated double quoted string in ".concat(what, " markup link component"));
										break;
									case "[":
										++lexer.depth;
										break;
									case "]":
										if (--lexer.depth, 1 === lexer.depth) switch (lexer.peek()) {
											case "[":
												return ++lexer.depth, lexer.backup(), lexer.emit(Item.Link), lexer.forward(2), lexer.emit(Item.InnerMeta), lexSetter;
											case "]":
												return --lexer.depth, lexer.backup(), lexer.emit(Item.Link), lexer.forward(2), lexer.emit(Item.RightMeta), null;
											default:
												return lexer.error(Item.Error, "malformed ".concat(what, " markup"))
										}
								}
							}

							function lexSetter(lexer) {
								for (var what = lexer.data.isLink ? "link" : "image";;) switch (lexer.next()) {
									case EOF:
									case "\n":
										return lexer.error(Item.Error, "unterminated ".concat(what, " markup"));
									case '"':
										if (slurpQuote(lexer, '"') === EOF) return lexer.error(Item.Error, "unterminated double quoted string in ".concat(what, " markup setter component"));
										break;
									case "'":
										if (slurpQuote(lexer, "'") === EOF) return lexer.error(Item.Error, "unterminated single quoted string in ".concat(what, " markup setter component"));
										break;
									case "[":
										++lexer.depth;
										break;
									case "]":
										if (--lexer.depth, 1 === lexer.depth) return "]" !== lexer.peek() ? lexer.error(Item.Error, "malformed ".concat(what, " markup")) : (--lexer.depth, lexer.backup(), lexer.emit(Item.Setter), lexer.forward(2), lexer.emit(Item.RightMeta), null)
								}
							}
							return function(w) {
								var lexer = new Lexer(w.source, lexLeftMeta);
								lexer.start = lexer.pos = w.matchStart;
								var markup = {},
									items = lexer.run(),
									last = items.last();
								return last && last.type === Item.Error ? markup.error = last.message : items.forEach((function(item) {
									var text = item.text.trim();
									switch (item.type) {
										case Item.ImageMeta:
											markup.isImage = !0, "<" === text[1] ? markup.align = "left" : ">" === text[1] && (markup.align = "right");
											break;
										case Item.LinkMeta:
											markup.isLink = !0;
											break;
										case Item.Link:
											"~" === text[0] ? (markup.forceInternal = !0, markup.link = text.slice(1)) : markup.link = text;
											break;
										case Item.Setter:
											markup.setter = text;
											break;
										case Item.Source:
											markup.source = text;
											break;
										case Item.Text:
											markup.text = text
									}
								})), markup.pos = lexer.pos, markup
							}
						}()
					}
				}), Wikifier
			}();
		! function() {
			function _verbatimTagHandler(w) {
				this.lookahead.lastIndex = w.matchStart;
				var match = this.lookahead.exec(w.source);
				match && match.index === w.matchStart && (w.nextMatch = this.lookahead.lastIndex, jQuery(document.createDocumentFragment())
					.append(match[1])
					.appendTo(w.output))
			}
			Wikifier.Parser.add({
				name: "quoteByBlock",
				profiles: ["block"],
				match: "^<<<\\n",
				terminator: "^<<<\\n",
				handler: function(w) {
					Wikifier.helpers.hasBlockContext(w.output.childNodes) ? w.subWikify(jQuery(document.createElement("blockquote"))
							.appendTo(w.output)
							.get(0), this.terminator) : jQuery(w.output)
						.append(document.createTextNode(w.matchText))
				}
			}), Wikifier.Parser.add({
				name: "quoteByLine",
				profiles: ["block"],
				match: "^>+",
				lookahead: /^>+/gm,
				terminator: "\\n",
				handler: function(w) {
					if (Wikifier.helpers.hasBlockContext(w.output.childNodes)) {
						var matched, i, destStack = [w.output],
							curLevel = 0,
							newLevel = w.matchLength;
						do {
							if (newLevel > curLevel)
								for (i = curLevel; i < newLevel; ++i) destStack.push(jQuery(document.createElement("blockquote"))
									.appendTo(destStack[destStack.length - 1])
									.get(0));
							else if (newLevel < curLevel)
								for (i = curLevel; i > newLevel; --i) destStack.pop();
							curLevel = newLevel, w.subWikify(destStack[destStack.length - 1], this.terminator), jQuery(document.createElement("br"))
								.appendTo(destStack[destStack.length - 1]), this.lookahead.lastIndex = w.nextMatch;
							var match = this.lookahead.exec(w.source);
							(matched = match && match.index === w.nextMatch) && (newLevel = match[0].length, w.nextMatch += match[0].length)
						} while (matched)
					} else jQuery(w.output)
						.append(document.createTextNode(w.matchText))
				}
			}), Wikifier.Parser.add({
				name: "macro",
				profiles: ["core"],
				match: "<<",
				lookahead: new RegExp("<<(/?".concat(Patterns.macroName, ")(?:\\s*)((?:(?:/\\*[^*]*\\*+(?:[^/*][^*]*\\*+)*/)|(?://.*\\n)|(?:`(?:\\\\.|[^`\\\\])*`)|(?:\"(?:\\\\.|[^\"\\\\])*\")|(?:'(?:\\\\.|[^'\\\\])*')|(?:\\[(?:[<>]?[Ii][Mm][Gg])?\\[[^\\r\\n]*?\\]\\]+)|[^>]|(?:>(?!>)))*)>>"), "gm"),
				working: {
					source: "",
					name: "",
					arguments: "",
					index: 0
				},
				context: null,
				handler: function(w) {
					var matchStart = this.lookahead.lastIndex = w.matchStart;
					if (this.parseTag(w)) {
						var macro, nextMatch = w.nextMatch,
							name = this.working.name,
							rawArgs = this.working.arguments;
						try {
							if (!(macro = Macro.get(name))) {
								if (Macro.tags.has(name)) {
									var tags = Macro.tags.get(name);
									return throwError(w.output, "child tag <<".concat(name, ">> was found outside of a call to its parent macro")
										.concat(1 === tags.length ? "" : "s", " <<")
										.concat(tags.join(">>, <<"), ">>"), w.source.slice(matchStart, w.nextMatch))
								}
								return throwError(w.output, "macro <<".concat(name, ">> does not exist"), w.source.slice(matchStart, w.nextMatch))
							}
							var payload = null;
							if (void 0 !== macro.tags && !(payload = this.parseBody(w, macro))) return w.nextMatch = nextMatch, throwError(w.output, "cannot find a closing tag for macro <<".concat(name, ">>"), "".concat(w.source.slice(matchStart, w.nextMatch), "…"));
							if ("function" != typeof macro.handler) return throwError(w.output, "macro <<".concat(name, ">> handler function ")
								.concat(void 0 === macro.handler ? "does not exist" : "is not a function"), w.source.slice(matchStart, w.nextMatch));
							var args = payload ? payload[0].args : this.createArgs(rawArgs, this.skipArgs(macro, macro.name));
							if (void 0 !== macro._MACRO_API) {
								this.context = new MacroContext({
									macro: macro,
									name: name,
									args: args,
									payload: payload,
									source: w.source.slice(matchStart, w.nextMatch),
									parent: this.context,
									parser: w
								});
								try {
									macro.handler.call(this.context)
								} finally {
									this.context = this.context.parent
								}
							} else {
								var prevRawArgs = w._rawArgs;
								w._rawArgs = rawArgs;
								try {
									macro.handler(w.output, name, args, w, payload)
								} finally {
									w._rawArgs = prevRawArgs
								}
							}
						} catch (ex) {
							return throwError(w.output, "cannot execute ".concat(macro && macro.isWidget ? "widget" : "macro", " <<")
								.concat(name, ">>: ")
								.concat(ex.message), w.source.slice(matchStart, w.nextMatch))
						} finally {
							this.working.source = "", this.working.name = "", this.working.arguments = "", this.working.index = 0
						}
					} else w.outputText(w.output, w.matchStart, w.nextMatch)
				},
				parseTag: function(w) {
					var match = this.lookahead.exec(w.source);
					return !(!match || match.index !== w.matchStart || !match[1]) && (w.nextMatch = this.lookahead.lastIndex, this.working.source = w.source.slice(match.index, this.lookahead.lastIndex), this.working.name = match[1], this.working.arguments = match[2], this.working.index = match.index, !0)
				},
				parseBody: function(w, macro) {
					for (var openTag = this.working.name, closeTag = "/".concat(openTag), closeAlt = "end".concat(openTag), bodyTags = !!Array.isArray(macro.tags) && macro.tags, payload = [], end = -1, opened = 1, curSource = this.working.source, curTag = this.working.name, curArgument = this.working.arguments, contentStart = w.nextMatch; - 1 !== (w.matchStart = w.source.indexOf(this.match, w.nextMatch));)
						if (this.parseTag(w)) {
							var tagSource = this.working.source,
								tagName = this.working.name,
								tagArgs = this.working.arguments,
								tagBegin = this.working.index,
								tagEnd = w.nextMatch,
								hasArgs = "" !== tagArgs.trim();
							switch (tagName) {
								case openTag:
									++opened;
									break;
								case closeAlt:
								case closeTag:
									if (hasArgs) throw w.nextMatch = tagBegin + 2 + tagName.length, new Error('malformed closing tag: "'.concat(tagSource, '"'));
									--opened;
									break;
								default:
									if (hasArgs && (tagName.startsWith("/") || tagName.startsWith("end"))) {
										this.lookahead.lastIndex = w.nextMatch = tagBegin + 2 + tagName.length;
										continue
									}
									if (1 === opened && bodyTags)
										for (var i = 0, iend = bodyTags.length; i < iend; ++i) tagName === bodyTags[i] && (payload.push({
											source: curSource,
											name: curTag,
											arguments: curArgument,
											args: this.createArgs(curArgument, this.skipArgs(macro, curTag)),
											contents: w.source.slice(contentStart, tagBegin)
										}), curSource = tagSource, curTag = tagName, curArgument = tagArgs, contentStart = tagEnd)
							}
							if (0 === opened) {
								payload.push({
									source: curSource,
									name: curTag,
									arguments: curArgument,
									args: this.createArgs(curArgument, this.skipArgs(macro, curTag)),
									contents: w.source.slice(contentStart, tagBegin)
								}), end = tagEnd;
								break
							}
						} else this.lookahead.lastIndex = w.nextMatch = w.matchStart + this.match.length;
					return -1 !== end ? (w.nextMatch = end, payload) : null
				},
				createArgs: function(rawArgsString, skipArgs) {
					var args = skipArgs ? [] : this.parseArgs(rawArgsString);
					return Object.defineProperties(args, {
						raw: {
							value: rawArgsString
						},
						full: {
							value: Scripting.parse(rawArgsString)
						}
					}), args
				},
				skipArgs: function(macro, tagName) {
					if (void 0 !== macro.skipArgs) {
						var sa = macro.skipArgs;
						return "boolean" == typeof sa && sa || Array.isArray(sa) && sa.includes(tagName)
					}
					return void 0 !== macro.skipArg0 && (macro.skipArg0 && macro.name === tagName)
				},
				parseArgs: function() {
					var Item = Lexer.enumFromNames(["Error", "Bareword", "Expression", "String", "SquareBracket"]),
						spaceRe = new RegExp(Patterns.space),
						notSpaceRe = new RegExp(Patterns.notSpace),
						varTest = new RegExp("^".concat(Patterns.variable));

					function slurpQuote(lexer, endQuote) {
						loop: for (;;) switch (lexer.next()) {
							case "\\":
								var ch = lexer.next();
								if (ch !== EOF && "\n" !== ch) break;
							case EOF:
							case "\n":
								return EOF;
							case endQuote:
								break loop
						}
						return lexer.pos
					}

					function lexSpace(lexer) {
						var offset = lexer.source.slice(lexer.pos)
							.search(notSpaceRe);
						if (offset === EOF) return null;
						switch (0 !== offset && (lexer.pos += offset, lexer.ignore()), lexer.next()) {
							case "`":
								return lexExpression;
							case '"':
								return lexDoubleQuote;
							case "'":
								return lexSingleQuote;
							case "[":
								return lexSquareBracket;
							default:
								return lexBareword
						}
					}

					function lexExpression(lexer) {
						return slurpQuote(lexer, "`") === EOF ? lexer.error(Item.Error, "unterminated backquote expression") : (lexer.emit(Item.Expression), lexSpace)
					}

					function lexDoubleQuote(lexer) {
						return slurpQuote(lexer, '"') === EOF ? lexer.error(Item.Error, "unterminated double quoted string") : (lexer.emit(Item.String), lexSpace)
					}

					function lexSingleQuote(lexer) {
						return slurpQuote(lexer, "'") === EOF ? lexer.error(Item.Error, "unterminated single quoted string") : (lexer.emit(Item.String), lexSpace)
					}

					function lexSquareBracket(lexer) {
						var what;
						if (lexer.accept("<>IiMmGg") ? (what = "image", lexer.acceptRun("<>IiMmGg")) : what = "link", !lexer.accept("[")) return lexer.error(Item.Error, "malformed ".concat(what, " markup"));
						lexer.depth = 2;
						loop: for (;;) switch (lexer.next()) {
							case "\\":
								var ch = lexer.next();
								if (ch !== EOF && "\n" !== ch) break;
							case EOF:
							case "\n":
								return lexer.error(Item.Error, "unterminated ".concat(what, " markup"));
							case "[":
								++lexer.depth;
								break;
							case "]":
								if (--lexer.depth, lexer.depth < 0) return lexer.error(Item.Error, "unexpected right square bracket ']'");
								if (1 === lexer.depth) {
									if ("]" === lexer.next()) {
										--lexer.depth;
										break loop
									}
									lexer.backup()
								}
						}
						return lexer.emit(Item.SquareBracket), lexSpace
					}

					function lexBareword(lexer) {
						var offset = lexer.source.slice(lexer.pos)
							.search(spaceRe);
						return lexer.pos = offset === EOF ? lexer.source.length : lexer.pos + offset, lexer.emit(Item.Bareword), offset === EOF ? null : lexSpace
					}
					return function(rawArgsString) {
						var lexer = new Lexer(rawArgsString, lexSpace),
							args = [];
						return lexer.run()
							.forEach((function(item) {
								var arg = item.text;
								switch (item.type) {
									case Item.Error:
										throw new Error('unable to parse macro argument "'.concat(arg, '": ')
											.concat(item.message));
									case Item.Bareword:
										if (varTest.test(arg)) arg = State.getVar(arg);
										else if (/^(?:settings|setup)[.[]/.test(arg)) try {
												arg = Scripting.evalTwineScript(arg)
											} catch (ex) {
												throw new Error('unable to parse macro argument "'.concat(arg, '": ')
													.concat(ex.message))
											} else if ("null" === arg) arg = null;
											else if ("undefined" === arg) arg = undefined;
										else if ("true" === arg) arg = !0;
										else if ("false" === arg) arg = !1;
										else if ("NaN" === arg) arg = NaN;
										else {
											var argAsNum = Number(arg);
											Number.isNaN(argAsNum) || (arg = argAsNum)
										}
										break;
									case Item.Expression:
										if ("" === (arg = arg.slice(1, -1)
											.trim())) arg = undefined;
										else try {
											arg = Scripting.evalTwineScript("(".concat(arg, ")"))
										} catch (ex) {
											throw new Error('unable to parse macro argument expression "'.concat(arg, '": ')
												.concat(ex.message))
										}
										break;
									case Item.String:
										try {
											arg = Scripting.evalJavaScript(arg)
										} catch (ex) {
											throw new Error('unable to parse macro argument string "'.concat(arg, '": ')
												.concat(ex.message))
										}
										break;
									case Item.SquareBracket:
										var markup = Wikifier.helpers.parseSquareBracketedMarkup({
											source: arg,
											matchStart: 0
										});
										if (markup.hasOwnProperty("error")) throw new Error('unable to parse macro argument "'.concat(arg, '": ')
											.concat(markup.error));
										if (markup.pos < arg.length) throw new Error('unable to parse macro argument "'.concat(arg, '": unexpected character(s) "')
											.concat(arg.slice(markup.pos), '" (pos: ')
											.concat(markup.pos, ")"));
										markup.isLink ? ((arg = {
												isLink: !0
											})
											.count = markup.hasOwnProperty("text") ? 2 : 1, arg.link = Wikifier.helpers.evalPassageId(markup.link), arg.text = markup.hasOwnProperty("text") ? Wikifier.helpers.evalText(markup.text) : arg.link, arg.external = !markup.forceInternal && Wikifier.isExternalLink(arg.link), arg.setFn = markup.hasOwnProperty("setter") ? Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)) : null) : markup.isImage && (arg = function(source) {
											var imgObj = {
												source: source,
												isImage: !0
											};
											if ("data:" !== source.slice(0, 5) && Story.has(source)) {
												var passage = Story.get(source);
												passage.tags.includes("Twine.image") && (imgObj.source = passage.text, imgObj.passage = passage.title)
											}
											return imgObj
										}(Wikifier.helpers.evalPassageId(markup.source)), markup.hasOwnProperty("align") && (arg.align = markup.align), markup.hasOwnProperty("text") && (arg.title = Wikifier.helpers.evalText(markup.text)), markup.hasOwnProperty("link") && (arg.link = Wikifier.helpers.evalPassageId(markup.link), arg.external = !markup.forceInternal && Wikifier.isExternalLink(arg.link)), arg.setFn = markup.hasOwnProperty("setter") ? Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)) : null)
								}
								args.push(arg)
							})), args
					}
				}()
			}), Wikifier.Parser.add({
				name: "link",
				profiles: ["core"],
				match: "\\[\\[[^[]",
				handler: function(w) {
					var markup = Wikifier.helpers.parseSquareBracketedMarkup(w);
					if (markup.hasOwnProperty("error")) w.outputText(w.output, w.matchStart, w.nextMatch);
					else {
						w.nextMatch = markup.pos;
						var link = Wikifier.helpers.evalPassageId(markup.link),
							text = markup.hasOwnProperty("text") ? Wikifier.helpers.evalText(markup.text) : link,
							setFn = markup.hasOwnProperty("setter") ? Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)) : null,
							output = (Config.debug ? new DebugView(w.output, "link-markup", "[[link]]", w.source.slice(w.matchStart, w.nextMatch)) : w)
							.output;
						markup.forceInternal || !Wikifier.isExternalLink(link) ? Wikifier.createInternalLink(output, link, text, setFn) : Wikifier.createExternalLink(output, link, text)
					}
				}
			}), Wikifier.Parser.add({
				name: "urlLink",
				profiles: ["core"],
				match: Patterns.url,
				handler: function(w) {
					w.outputText(Wikifier.createExternalLink(w.output, w.matchText), w.matchStart, w.nextMatch)
				}
			}), Wikifier.Parser.add({
				name: "image",
				profiles: ["core"],
				match: "\\[[<>]?[Ii][Mm][Gg]\\[",
				handler: function(w) {
					var markup = Wikifier.helpers.parseSquareBracketedMarkup(w);
					if (markup.hasOwnProperty("error")) w.outputText(w.output, w.matchStart, w.nextMatch);
					else {
						var debugView;
						w.nextMatch = markup.pos, Config.debug && (debugView = new DebugView(w.output, "image-markup", markup.hasOwnProperty("link") ? "[img[][link]]" : "[img[]]", w.source.slice(w.matchStart, w.nextMatch)))
							.modes({
								block: !0
							});
						var source, setFn = markup.hasOwnProperty("setter") ? Wikifier.helpers.createShadowSetterCallback(Scripting.parse(markup.setter)) : null,
							el = (Config.debug ? debugView : w)
							.output;
						if (markup.hasOwnProperty("link")) {
							var link = Wikifier.helpers.evalPassageId(markup.link);
							(el = markup.forceInternal || !Wikifier.isExternalLink(link) ? Wikifier.createInternalLink(el, link, null, setFn) : Wikifier.createExternalLink(el, link))
							.classList.add("link-image")
						}
						if (el = jQuery(document.createElement("img"))
							.appendTo(el)
							.get(0), "data:" !== (source = Wikifier.helpers.evalPassageId(markup.source))
							.slice(0, 5) && Story.has(source)) {
							var passage = Story.get(source);
							passage.tags.includes("Twine.image") && (el.setAttribute("data-passage", passage.title), source = passage.text.trim())
						}
						el.src = source, markup.hasOwnProperty("text") && (el.title = Wikifier.helpers.evalText(markup.text)), markup.hasOwnProperty("align") && (el.align = markup.align)
					}
				}
			}), Wikifier.Parser.add({
				name: "monospacedByBlock",
				profiles: ["block"],
				match: "^\\{\\{\\{\\n",
				lookahead: /^\{\{\{\n((?:^[^\n]*\n)+?)(^\}\}\}$\n?)/gm,
				handler: function(w) {
					this.lookahead.lastIndex = w.matchStart;
					var match = this.lookahead.exec(w.source);
					if (match && match.index === w.matchStart) {
						var pre = jQuery(document.createElement("pre"));
						jQuery(document.createElement("code"))
							.text(match[1])
							.appendTo(pre), pre.appendTo(w.output), w.nextMatch = this.lookahead.lastIndex
					}
				}
			}), Wikifier.Parser.add({
				name: "formatByChar",
				profiles: ["core"],
				match: "''|//|__|\\^\\^|~~|==|\\{\\{\\{",
				handler: function(w) {
					switch (w.matchText) {
						case "''":
							w.subWikify(jQuery(document.createElement("strong"))
								.appendTo(w.output)
								.get(0), "''");
							break;
						case "//":
							w.subWikify(jQuery(document.createElement("em"))
								.appendTo(w.output)
								.get(0), "//");
							break;
						case "__":
							w.subWikify(jQuery(document.createElement("u"))
								.appendTo(w.output)
								.get(0), "__");
							break;
						case "^^":
							w.subWikify(jQuery(document.createElement("sup"))
								.appendTo(w.output)
								.get(0), "\\^\\^");
							break;
						case "~~":
							w.subWikify(jQuery(document.createElement("sub"))
								.appendTo(w.output)
								.get(0), "~~");
							break;
						case "==":
							w.subWikify(jQuery(document.createElement("s"))
								.appendTo(w.output)
								.get(0), "==");
							break;
						case "{{{":
							var lookahead = /\{\{\{((?:.|\n)*?)\}\}\}/gm;
							lookahead.lastIndex = w.matchStart;
							var match = lookahead.exec(w.source);
							match && match.index === w.matchStart && (jQuery(document.createElement("code"))
								.text(match[1])
								.appendTo(w.output), w.nextMatch = lookahead.lastIndex)
					}
				}
			}), Wikifier.Parser.add({
				name: "customStyle",
				profiles: ["core"],
				match: "@@",
				terminator: "@@",
				blockRe: /\s*\n/gm,
				handler: function(w) {
					var css = Wikifier.helpers.inlineCss(w);
					this.blockRe.lastIndex = w.nextMatch;
					var blockMatch = this.blockRe.exec(w.source),
						blockLevel = blockMatch && blockMatch.index === w.nextMatch,
						$el = jQuery(document.createElement(blockLevel ? "div" : "span"))
						.appendTo(w.output);
					0 === css.classes.length && "" === css.id && 0 === Object.keys(css.styles)
						.length ? $el.addClass("marked") : (css.classes.forEach((function(className) {
							return $el.addClass(className)
						})), "" !== css.id && $el.attr("id", css.id), $el.css(css.styles)), blockLevel ? (w.nextMatch += blockMatch[0].length, w.subWikify($el[0], "\\n?".concat(this.terminator))) : w.subWikify($el[0], this.terminator)
				}
			}), Wikifier.Parser.add({
				name: "verbatimText",
				profiles: ["core"],
				match: '"{3}|<[Nn][Oo][Ww][Ii][Kk][Ii]>',
				lookahead: /(?:"{3}((?:.|\n)*?)"{3})|(?:<[Nn][Oo][Ww][Ii][Kk][Ii]>((?:.|\n)*?)<\/[Nn][Oo][Ww][Ii][Kk][Ii]>)/gm,
				handler: function(w) {
					this.lookahead.lastIndex = w.matchStart;
					var match = this.lookahead.exec(w.source);
					match && match.index === w.matchStart && (w.nextMatch = this.lookahead.lastIndex, jQuery(document.createElement("span"))
						.addClass("verbatim")
						.text(match[1] || match[2])
						.appendTo(w.output))
				}
			}), Wikifier.Parser.add({
				name: "horizontalRule",
				profiles: ["core"],
				match: "^----+$\\n?|<[Hh][Rr]\\s*/?>\\n?",
				handler: function(w) {
					jQuery(document.createElement("hr"))
						.appendTo(w.output)
				}
			}), Wikifier.Parser.add({
				name: "emdash",
				profiles: ["core"],
				match: "--",
				handler: function(w) {
					jQuery(document.createTextNode("—"))
						.appendTo(w.output)
				}
			}), Wikifier.Parser.add({
				name: "doubleDollarSign",
				profiles: ["core"],
				match: "\\${2}",
				handler: function(w) {
					jQuery(document.createTextNode("$"))
						.appendTo(w.output)
				}
			}), Wikifier.Parser.add({
				name: "nakedVariable",
				profiles: ["core"],
				match: "".concat(Patterns.variable, "(?:(?:\\.")
					.concat(Patterns.identifier, ")|(?:\\[\\d+\\])|(?:\\[\"(?:\\\\.|[^\"\\\\])+\"\\])|(?:\\['(?:\\\\.|[^'\\\\])+'\\])|(?:\\[")
					.concat(Patterns.variable, "\\]))*"),
				handler: function(w) {
					var result = State.getVar(w.matchText);
					null == result ? jQuery(document.createTextNode(w.matchText))
						.appendTo(w.output) : new Wikifier((Config.debug ? new DebugView(w.output, "variable", w.matchText, w.matchText) : w)
							.output, stringFrom(result))
				}
			}), Wikifier.Parser.add({
				name: "template",
				profiles: ["core"],
				match: "\\?".concat(Patterns.templateName),
				handler: function(w) {
					var name = w.matchText.slice(1),
						template = Template.get(name),
						result = null;
					switch (template instanceof Array && (template = template.random()), _typeof(template)) {
						case "function":
							try {
								result = stringFrom(template.call({
									name: name
								}))
							} catch (ex) {
								return throwError(w.output, "cannot execute function template ?".concat(name, ": ")
									.concat(ex.message), w.source.slice(w.matchStart, w.nextMatch))
							}
							break;
						case "string":
							result = template
					}
					null === result ? jQuery(document.createTextNode(w.matchText))
						.appendTo(w.output) : new Wikifier((Config.debug ? new DebugView(w.output, "template", w.matchText, w.matchText) : w)
							.output, result)
				}
			}), Wikifier.Parser.add({
				name: "heading",
				profiles: ["block"],
				match: "^!{1,6}",
				terminator: "\\n",
				handler: function(w) {
					Wikifier.helpers.hasBlockContext(w.output.childNodes) ? w.subWikify(jQuery(document.createElement("h".concat(w.matchLength)))
							.appendTo(w.output)
							.get(0), this.terminator) : jQuery(w.output)
						.append(document.createTextNode(w.matchText))
				}
			}), Wikifier.Parser.add({
				name: "table",
				profiles: ["block"],
				match: "^\\|(?:[^\\n]*)\\|(?:[fhck]?)$",
				lookahead: /^\|([^\n]*)\|([fhck]?)$/gm,
				rowTerminator: "\\|(?:[cfhk]?)$\\n?",
				cellPattern: "(?:\\|([^\\n\\|]*)\\|)|(\\|[cfhk]?$\\n?)",
				cellTerminator: "(?:\\u0020*)\\|",
				rowTypes: {
					c: "caption",
					f: "tfoot",
					h: "thead",
					"": "tbody"
				},
				handler: function(w) {
					if (Wikifier.helpers.hasBlockContext(w.output.childNodes)) {
						var matched, table = jQuery(document.createElement("table"))
							.appendTo(w.output)
							.get(0),
							prevColumns = [],
							curRowType = null,
							$rowContainer = null,
							rowCount = 0;
						w.nextMatch = w.matchStart;
						do {
							this.lookahead.lastIndex = w.nextMatch;
							var match = this.lookahead.exec(w.source);
							if (matched = match && match.index === w.nextMatch) {
								var nextRowType = match[2];
								"k" === nextRowType ? (table.className = match[1], w.nextMatch += match[0].length + 1) : (nextRowType !== curRowType && (curRowType = nextRowType, $rowContainer = jQuery(document.createElement(this.rowTypes[nextRowType]))
									.appendTo(table)), "c" === curRowType ? ($rowContainer.css("caption-side", 0 === rowCount ? "top" : "bottom"), w.nextMatch += 1, w.subWikify($rowContainer[0], this.rowTerminator)) : this.rowHandler(w, jQuery(document.createElement("tr"))
									.appendTo($rowContainer)
									.get(0), prevColumns), ++rowCount)
							}
						} while (matched)
					} else jQuery(w.output)
						.append(document.createTextNode(w.matchText))
				},
				rowHandler: function(w, rowEl, prevColumns) {
					var matched, _this12 = this,
						cellRe = new RegExp(this.cellPattern, "gm"),
						col = 0,
						curColCount = 1;
					do {
						cellRe.lastIndex = w.nextMatch;
						var cellMatch = cellRe.exec(w.source);
						if (matched = cellMatch && cellMatch.index === w.nextMatch) {
							if ("~" === cellMatch[1]) {
								var last = prevColumns[col];
								last && (++last.rowCount, last.$element.attr("rowspan", last.rowCount)
									.css("vertical-align", "middle")), w.nextMatch = cellMatch.index + cellMatch[0].length - 1
							} else if (">" === cellMatch[1]) ++curColCount, w.nextMatch = cellMatch.index + cellMatch[0].length - 1;
							else {
								if (cellMatch[2]) {
									w.nextMatch = cellMatch.index + cellMatch[0].length;
									break
								}! function() {
									++w.nextMatch;
									for (var css = Wikifier.helpers.inlineCss(w), spaceLeft = !1, spaceRight = !1, $cell = void 0;
										" " === w.source.substr(w.nextMatch, 1);) spaceLeft = !0, ++w.nextMatch;
									"!" === w.source.substr(w.nextMatch, 1) ? ($cell = jQuery(document.createElement("th"))
											.appendTo(rowEl), ++w.nextMatch) : $cell = jQuery(document.createElement("td"))
										.appendTo(rowEl), prevColumns[col] = {
											rowCount: 1,
											$element: $cell
										}, curColCount > 1 && ($cell.attr("colspan", curColCount), curColCount = 1), w.subWikify($cell[0], _this12.cellTerminator), " " === w.matchText.substr(w.matchText.length - 2, 1) && (spaceRight = !0), css.classes.forEach((function(className) {
											return $cell.addClass(className)
										})), "" !== css.id && $cell.attr("id", css.id), spaceLeft && spaceRight ? css.styles["text-align"] = "center" : spaceLeft ? css.styles["text-align"] = "right" : spaceRight && (css.styles["text-align"] = "left"), $cell.css(css.styles), w.nextMatch = w.nextMatch - 1
								}()
							}++col
						}
					} while (matched)
				}
			}), Wikifier.Parser.add({
				name: "list",
				profiles: ["block"],
				match: "^(?:(?:\\*+)|(?:#+))",
				lookahead: /^(?:(\*+)|(#+))/gm,
				terminator: "\\n",
				handler: function(w) {
					if (Wikifier.helpers.hasBlockContext(w.output.childNodes)) {
						w.nextMatch = w.matchStart;
						var matched, i, destStack = [w.output],
							curType = null,
							curLevel = 0;
						do {
							this.lookahead.lastIndex = w.nextMatch;
							var match = this.lookahead.exec(w.source);
							if (matched = match && match.index === w.nextMatch) {
								var newType = match[2] ? "ol" : "ul",
									newLevel = match[0].length;
								if (w.nextMatch += match[0].length, newLevel > curLevel)
									for (i = curLevel; i < newLevel; ++i) destStack.push(jQuery(document.createElement(newType))
										.appendTo(destStack[destStack.length - 1])
										.get(0));
								else if (newLevel < curLevel)
									for (i = curLevel; i > newLevel; --i) destStack.pop();
								else newLevel === curLevel && newType !== curType && (destStack.pop(), destStack.push(jQuery(document.createElement(newType))
									.appendTo(destStack[destStack.length - 1])
									.get(0)));
								curLevel = newLevel, curType = newType, w.subWikify(jQuery(document.createElement("li"))
									.appendTo(destStack[destStack.length - 1])
									.get(0), this.terminator)
							}
						} while (matched)
					} else jQuery(w.output)
						.append(document.createTextNode(w.matchText))
				}
			}), Wikifier.Parser.add({
				name: "commentByBlock",
				profiles: ["core"],
				match: "(?:/(?:%|\\*))|(?:\x3c!--)",
				lookahead: /(?:\/(%|\*)(?:(?:.|\n)*?)\1\/)|(?:<!--(?:(?:.|\n)*?)-->)/gm,
				handler: function(w) {
					this.lookahead.lastIndex = w.matchStart;
					var match = this.lookahead.exec(w.source);
					match && match.index === w.matchStart && (w.nextMatch = this.lookahead.lastIndex)
				}
			}), Wikifier.Parser.add({
				name: "lineContinuation",
				profiles: ["core"],
				match: "\\\\".concat(Patterns.spaceNoTerminator, "*\\n|\\n")
					.concat(Patterns.spaceNoTerminator, "*\\\\|\\n?\\\\")
					.concat(Patterns.spaceNoTerminator, "*$|^")
					.concat(Patterns.spaceNoTerminator, "*\\\\\\n?"),
				handler: function(w) {
					w.nextMatch = w.matchStart + w.matchLength
				}
			}), Wikifier.Parser.add({
				name: "lineBreak",
				profiles: ["core"],
				match: "\\n|<[Bb][Rr]\\s*/?>",
				handler: function(w) {
					w.options.nobr || jQuery(document.createElement("br"))
						.appendTo(w.output)
				}
			}), Wikifier.Parser.add({
				name: "htmlCharacterReference",
				profiles: ["core"],
				match: "(?:(?:&#?[0-9A-Za-z]{2,8};|.)(?:&#?(?:x0*(?:3[0-6][0-9A-Fa-f]|1D[C-Fc-f][0-9A-Fa-f]|20[D-Fd-f][0-9A-Fa-f]|FE2[0-9A-Fa-f])|0*(?:76[89]|7[7-9][0-9]|8[0-7][0-9]|761[6-9]|76[2-7][0-9]|84[0-3][0-9]|844[0-7]|6505[6-9]|6506[0-9]|6507[0-1]));)+|&#?[0-9A-Za-z]{2,8};)",
				handler: function(w) {
					jQuery(document.createDocumentFragment())
						.append(w.matchText)
						.appendTo(w.output)
				}
			}), Wikifier.Parser.add({
				name: "xmlProlog",
				profiles: ["core"],
				match: "<\\?[Xx][Mm][Ll][^>]*\\?>",
				handler: function(w) {
					w.nextMatch = w.matchStart + w.matchLength
				}
			}), Wikifier.Parser.add({
				name: "verbatimHtml",
				profiles: ["core"],
				match: "<[Hh][Tt][Mm][Ll]>",
				lookahead: /<[Hh][Tt][Mm][Ll]>((?:.|\n)*?)<\/[Hh][Tt][Mm][Ll]>/gm,
				handler: _verbatimTagHandler
			}), Wikifier.Parser.add({
				name: "verbatimScriptTag",
				profiles: ["core"],
				match: "<[Ss][Cc][Rr][Ii][Pp][Tt][^>]*>",
				lookahead: /(<[Ss][Cc][Rr][Ii][Pp][Tt]*>(?:.|\n)*?<\/[Ss][Cc][Rr][Ii][Pp][Tt]>)/gm,
				handler: _verbatimTagHandler
			}), Wikifier.Parser.add({
				name: "styleTag",
				profiles: ["core"],
				match: "<[Ss][Tt][Yy][Ll][Ee][^>]*>",
				lookahead: /(<[Ss][Tt][Yy][Ll][Ee]*>)((?:.|\n)*?)(<\/[Ss][Tt][Yy][Ll][Ee]>)/gm,
				imageMarkup: new RegExp(Patterns.cssImage, "g"),
				hasImageMarkup: new RegExp(Patterns.cssImage),
				handler: function(w) {
					this.lookahead.lastIndex = w.matchStart;
					var match = this.lookahead.exec(w.source);
					if (match && match.index === w.matchStart) {
						w.nextMatch = this.lookahead.lastIndex;
						var css = match[2];
						this.hasImageMarkup.test(css) && (this.imageMarkup.lastIndex = 0, css = css.replace(this.imageMarkup, (function(wikiImage) {
								var markup = Wikifier.helpers.parseSquareBracketedMarkup({
									source: wikiImage,
									matchStart: 0
								});
								if (markup.hasOwnProperty("error") || markup.pos < wikiImage.length) return wikiImage;
								var source = markup.source;
								if ("data:" !== source.slice(0, 5) && Story.has(source)) {
									var passage = Story.get(source);
									passage.tags.includes("Twine.image") && (source = passage.text)
								}
								return 'url("'.concat(source.replace(/"/g, "%22"), '")')
							}))), jQuery(document.createDocumentFragment())
							.append(match[1] + css + match[3])
							.appendTo(w.output)
					}
				}
			}), Wikifier.Parser.add({
				name: "svgTag",
				profiles: ["core"],
				match: "<[Ss][Vv][Gg][^>]*>",
				lookahead: /<(\/?)[Ss][Vv][Gg][^>]*>/gm,
				namespace: "http://www.w3.org/2000/svg",
				handler: function(w) {
					var _this13 = this;
					this.lookahead.lastIndex = w.nextMatch;
					for (var match, depth = 1; depth > 0 && null !== (match = this.lookahead.exec(w.source));) depth += "/" === match[1] ? -1 : 1;
					if (0 === depth) {
						w.nextMatch = this.lookahead.lastIndex;
						var svgTag = w.source.slice(w.matchStart, this.lookahead.lastIndex),
							$frag = jQuery(document.createDocumentFragment())
							.append(svgTag);
						$frag.find("a[data-passage],image[data-passage]")
							.each((function(_, el) {
								var tagName = el.tagName.toLowerCase();
								try {
									_this13.processAttributeDirectives(el)
								} catch (ex) {
									return throwError(w.output, "svg|<".concat(tagName, ">: ")
										.concat(ex.message), "".concat(w.matchText, "…"))
								}
								el.hasAttribute("data-passage") && _this13.processDataAttributes(el, tagName)
							})), $frag.appendTo(w.output)
					}
				},
				processAttributeDirectives: function(el) {
					_toConsumableArray(el.attributes)
						.forEach((function(_ref10) {
							var name = _ref10.name,
								value = _ref10.value,
								evalShorthand = "@" === name[0];
							if (evalShorthand || name.startsWith("sc-eval:")) {
								var result, newName = name.slice(evalShorthand ? 1 : 8);
								if ("data-setter" === newName) throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name, '"'));
								try {
									result = Scripting.evalTwineScript(value)
								} catch (ex) {
									throw new Error('bad evaluation from attribute directive "'.concat(name, '": ')
										.concat(ex.message))
								}
								try {
									el.setAttribute(newName, result), el.removeAttribute(name)
								} catch (ex) {
									throw new Error('cannot transform attribute directive "'.concat(name, '" into attribute "')
										.concat(newName, '"'))
								}
							}
						}))
				},
				processDataAttributes: function(el, tagName) {
					var passage = el.getAttribute("data-passage");
					if (null != passage) {
						var evaluated = Wikifier.helpers.evalPassageId(passage);
						if (evaluated !== passage && (passage = evaluated, el.setAttribute("data-passage", evaluated)), "" !== passage)
							if ("image" === tagName) "data:" !== passage.slice(0, 5) && Story.has(passage) && (passage = Story.get(passage))
								.tags.includes("Twine.image") && el.setAttribute("href", passage.text.trim());
							else {
								var setFn, setter = el.getAttribute("data-setter");
								null != setter && "" !== (setter = String(setter)
										.trim()) && (setFn = Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))), Story.has(passage) ? (el.classList.add("link-internal"), Config.addVisitedLinkClass && State.hasPlayed(passage) && el.classList.add("link-visited")) : el.classList.add("link-broken"), jQuery(el)
									.ariaClick({
										one: !0
									}, (function() {
										"function" == typeof setFn && setFn.call(this), Engine.play(passage)
									}))
							}
					}
				}
			}), Wikifier.Parser.add({
				name: "htmlTag",
				profiles: ["core"],
				match: "<".concat(Patterns.htmlTagName, "(?:\\s+[^\\u0000-\\u001F\\u007F-\\u009F\\s\"'>\\/=]+(?:\\s*=\\s*(?:\"[^\"]*?\"|'[^']*?'|[^\\s\"'=<>`]+))?)*\\s*\\/?>"),
				tagRe: new RegExp("^<(".concat(Patterns.htmlTagName, ")")),
				mediaTags: ["audio", "img", "source", "track", "video"],
				nobrTags: ["audio", "colgroup", "datalist", "dl", "figure", "meter", "ol", "optgroup", "picture", "progress", "ruby", "select", "table", "tbody", "tfoot", "thead", "tr", "ul", "video"],
				voidTags: ["area", "base", "br", "col", "embed", "hr", "img", "input", "keygen", "link", "menuitem", "meta", "param", "source", "track", "wbr"],
				handler: function(w) {
					var tagMatch = this.tagRe.exec(w.matchText),
						tag = tagMatch && tagMatch[1],
						tagName = tag && tag.toLowerCase();
					if (tagName) {
						var terminator, terminatorMatch, isVoid = this.voidTags.includes(tagName) || w.matchText.endsWith("/>"),
							isNobr = this.nobrTags.includes(tagName);
						if (!isVoid) {
							terminator = "<\\/".concat(tagName, "\\s*>");
							var terminatorRe = new RegExp(terminator, "gim");
							terminatorRe.lastIndex = w.matchStart, terminatorMatch = terminatorRe.exec(w.source)
						}
						if (!isVoid && !terminatorMatch) return throwError(w.output, "cannot find a closing tag for HTML <".concat(tag, ">"), "".concat(w.matchText, "…"));
						var debugView, output = w.output,
							el = document.createElement(w.output.tagName);
						for (el.innerHTML = w.matchText; el.firstChild;) el = el.firstChild;
						try {
							this.processAttributeDirectives(el)
						} catch (ex) {
							return throwError(w.output, "<".concat(tagName, ">: ")
								.concat(ex.message), "".concat(w.matchText, "…"))
						}
						if (el.hasAttribute("data-passage") && (this.processDataAttributes(el, tagName), Config.debug && ((debugView = new DebugView(w.output, "html-".concat(tagName), tagName, w.matchText))
							.modes({
								block: "img" === tagName,
								nonvoid: terminatorMatch
							}), output = debugView.output)), terminatorMatch) {
							try {
								Wikifier.Option.push({
									nobr: isNobr
								}), w.subWikify(el, terminator, {
									ignoreTerminatorCase: !0
								})
							} finally {
								Wikifier.Option.pop()
							}
							debugView && jQuery(el)
								.find(".debug.block")
								.length > 0 && debugView.modes({
									block: !0
								})
						}
						output.appendChild("track" === tagName ? el.cloneNode(!0) : el)
					}
				},
				processAttributeDirectives: function(el) {
					_toConsumableArray(el.attributes)
						.forEach((function(_ref11) {
							var name = _ref11.name,
								value = _ref11.value,
								evalShorthand = "@" === name[0];
							if (evalShorthand || name.startsWith("sc-eval:")) {
								var result, newName = name.slice(evalShorthand ? 1 : 8);
								if ("data-setter" === newName) throw new Error('evaluation directive is not allowed on the data-setter attribute: "'.concat(name, '"'));
								try {
									result = Scripting.evalTwineScript(value)
								} catch (ex) {
									throw new Error('bad evaluation from attribute directive "'.concat(name, '": ')
										.concat(ex.message))
								}
								try {
									el.setAttribute(newName, result), el.removeAttribute(name)
								} catch (ex) {
									throw new Error('cannot transform attribute directive "'.concat(name, '" into attribute "')
										.concat(newName, '"'))
								}
							}
						}))
				},
				processDataAttributes: function(el, tagName) {
					var passage = el.getAttribute("data-passage");
					if (null != passage) {
						var evaluated = Wikifier.helpers.evalPassageId(passage);
						if (evaluated !== passage && (passage = evaluated, el.setAttribute("data-passage", evaluated)), "" !== passage)
							if (this.mediaTags.includes(tagName)) {
								if ("data:" !== passage.slice(0, 5) && Story.has(passage)) {
									var parentName, twineTag;
									switch (passage = Story.get(passage), tagName) {
										case "audio":
										case "video":
											twineTag = "Twine.".concat(tagName);
											break;
										case "img":
											twineTag = "Twine.image";
											break;
										case "track":
											twineTag = "Twine.vtt";
											break;
										case "source":
											var $parent = $(el)
												.closest("audio,picture,video");
											$parent.length && (parentName = $parent.get(0)
												.tagName.toLowerCase(), twineTag = "Twine.".concat("picture" === parentName ? "image" : parentName))
									}
									passage.tags.includes(twineTag) && (el["picture" === parentName ? "srcset" : "src"] = passage.text.trim())
								}
							} else {
								var setFn, setter = el.getAttribute("data-setter");
								null != setter && "" !== (setter = String(setter)
										.trim()) && (setFn = Wikifier.helpers.createShadowSetterCallback(Scripting.parse(setter))), Story.has(passage) ? (el.classList.add("link-internal"), Config.addVisitedLinkClass && State.hasPlayed(passage) && el.classList.add("link-visited")) : el.classList.add("link-broken"), jQuery(el)
									.ariaClick({
										one: !0
									}, (function() {
										"function" == typeof setFn && setFn.call(this), Engine.play(passage)
									}))
							}
					}
				}
			})
		}();
		var Template = (_templates = new Map, _validNameRe = new RegExp("^(?:".concat(Patterns.templateName, ")$")), _validType = function(template) {
				var templateType = _typeof(template);
				return "function" === templateType || "string" === templateType
			}, Object.freeze(Object.defineProperties({}, {
				add: {
					value: function(name, template) {
						if (!(_validType(template) || template instanceof Array && template.length > 0 && template.every(_validType))) throw new TypeError("invalid template type (".concat(name, "); templates must be: functions, strings, or an array of either"));
						(name instanceof Array ? name : [name])
						.forEach((function(name) {
							if (!_validNameRe.test(name)) throw new Error('invalid template name "'.concat(name, '"'));
							if (_templates.has(name)) throw new Error("cannot clobber existing template ?".concat(name));
							_templates.set(name, template)
						}))
					}
				},
				delete: {
					value: function(name) {
						(name instanceof Array ? name : [name])
						.forEach((function(name) {
							return _templates.delete(name)
						}))
					}
				},
				get: {
					value: function(name) {
						return _templates.has(name) ? _templates.get(name) : null
					}
				},
				has: {
					value: function(name) {
						return _templates.has(name)
					}
				},
				size: {
					get: function() {
						return _templates.size
					}
				}
			}))),
			_templates, _validNameRe, _validType, Macro = function() {
				var _macros = {},
					_tags = {},
					_validNameRe = new RegExp("^(?:".concat(Patterns.macroName, ")$"));

				function macrosHas(name) {
					return _macros.hasOwnProperty(name)
				}

				function tagsRegister(parent, bodyTags) {
					if (!parent) throw new Error("no parent specified");
					for (var endTags = ["/".concat(parent), "end".concat(parent)], allTags = [].concat(endTags, Array.isArray(bodyTags) ? bodyTags : []), i = 0; i < allTags.length; ++i) {
						var tag = allTags[i];
						if (macrosHas(tag)) throw new Error("cannot register tag for an existing macro");
						tagsHas(tag) ? _tags[tag].includes(parent) || (_tags[tag].push(parent), _tags[tag].sort()) : _tags[tag] = [parent]
					}
				}

				function tagsUnregister(parent) {
					if (!parent) throw new Error("no parent specified");
					Object.keys(_tags)
						.forEach((function(tag) {
							var i = _tags[tag].indexOf(parent); - 1 !== i && (1 === _tags[tag].length ? delete _tags[tag] : _tags[tag].splice(i, 1))
						}))
				}

				function tagsHas(name) {
					return _tags.hasOwnProperty(name)
				}
				return Object.freeze(Object.defineProperties({}, {
					add: {
						value: function macrosAdd(name, def) {
							if (Array.isArray(name)) name.forEach((function(name) {
								return macrosAdd(name, def)
							}));
							else {
								if (!_validNameRe.test(name)) throw new Error('invalid macro name "'.concat(name, '"'));
								if (macrosHas(name)) throw new Error("cannot clobber existing macro <<".concat(name, ">>"));
								if (tagsHas(name)) throw new Error("cannot clobber child tag <<".concat(name, ">> of parent macro")
									.concat(1 === _tags[name].length ? "" : "s", " <<")
									.concat(_tags[name].join(">>, <<"), ">>"));
								try {
									if ("object" === _typeof(def)) _macros[name] = Object.assign(Object.create(null), def, {
										_MACRO_API: !0
									});
									else {
										if (!macrosHas(def)) throw new Error("cannot create alias of nonexistent macro <<".concat(def, ">>"));
										_macros[name] = Object.create(_macros[def], {
											_ALIAS_OF: {
												enumerable: !0,
												value: def
											}
										})
									}
									Object.defineProperty(_macros, name, {
										writable: !1
									})
								} catch (ex) {
									throw "TypeError" === ex.name ? new Error("cannot clobber protected macro <<".concat(name, ">>")) : new Error("unknown error when attempting to add macro <<".concat(name, ">>: [")
										.concat(ex.name, "] ")
										.concat(ex.message))
								}
								if (void 0 !== _macros[name].tags)
									if (null == _macros[name].tags) tagsRegister(name);
									else {
										if (!Array.isArray(_macros[name].tags)) throw new Error('bad value for "tags" property of macro <<'.concat(name, ">>"));
										tagsRegister(name, _macros[name].tags)
									}
							}
						}
					},
					delete: {
						value: function macrosDelete(name) {
							if (Array.isArray(name)) name.forEach((function(name) {
								return macrosDelete(name)
							}));
							else if (macrosHas(name)) {
								void 0 !== _macros[name].tags && tagsUnregister(name);
								try {
									Object.defineProperty(_macros, name, {
										writable: !0
									}), delete _macros[name]
								} catch (ex) {
									throw new Error("unknown error removing macro <<".concat(name, ">>: ")
										.concat(ex.message))
								}
							} else if (tagsHas(name)) throw new Error("cannot remove child tag <<".concat(name, ">> of parent macro <<")
								.concat(_tags[name], ">>"))
						}
					},
					isEmpty: {
						value: function() {
							return 0 === Object.keys(_macros)
								.length
						}
					},
					has: {
						value: macrosHas
					},
					get: {
						value: function(name) {
							var macro = null;
							return macrosHas(name) && "function" == typeof _macros[name].handler ? macro = _macros[name] : macros.hasOwnProperty(name) && "function" == typeof macros[name].handler && (macro = macros[name]), macro
						}
					},
					init: {
						value: function() {
							var handler = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : "init";
							Object.keys(_macros)
								.forEach((function(name) {
									"function" == typeof _macros[name][handler] && _macros[name][handler](name)
								})), Object.keys(macros)
								.forEach((function(name) {
									"function" == typeof macros[name][handler] && macros[name][handler](name)
								}))
						}
					},
					tags: {
						value: Object.freeze(Object.defineProperties({}, {
							register: {
								value: tagsRegister
							},
							unregister: {
								value: tagsUnregister
							},
							has: {
								value: tagsHas
							},
							get: {
								value: function(name) {
									return tagsHas(name) ? _tags[name] : null
								}
							}
						}))
					},
					evalStatements: {
						value: function() {
							return Scripting.evalJavaScript.apply(Scripting, arguments)
						}
					}
				}))
			}(),
			MacroContext = function() {
				var MacroContext = function() {
					function MacroContext(contextData) {
						_classCallCheck(this, MacroContext);
						var context = Object.assign({
							parent: null,
							macro: null,
							name: "",
							displayName: "",
							args: null,
							payload: null,
							parser: null,
							source: ""
						}, contextData);
						if (null === context.macro || "" === context.name || null === context.parser) throw new TypeError("context object missing required properties");
						Object.defineProperties(this, {
							self: {
								value: context.macro
							},
							name: {
								value: void 0 === context.macro._ALIAS_OF ? context.name : context.macro._ALIAS_OF
							},
							displayName: {
								value: context.name
							},
							args: {
								value: context.args
							},
							payload: {
								value: context.payload
							},
							source: {
								value: context.source
							},
							parent: {
								value: context.parent
							},
							parser: {
								value: context.parser
							},
							_output: {
								value: context.parser.output
							},
							_shadows: {
								writable: !0,
								value: null
							},
							_debugView: {
								writable: !0,
								value: null
							},
							_debugViewEnabled: {
								writable: !0,
								value: Config.debug
							}
						})
					}
					return _createClass(MacroContext, [{
						key: "output",
						get: function() {
							return this._debugViewEnabled ? this.debugView.output : this._output
						}
					}, {
						key: "shadows",
						get: function() {
							return _toConsumableArray(this._shadows)
						}
					}, {
						key: "shadowView",
						get: function() {
							var view = new Set;
							return this.contextSelectAll((function(ctx) {
									return ctx._shadows
								}))
								.forEach((function(ctx) {
									return ctx._shadows.forEach((function(name) {
										return view.add(name)
									}))
								})), _toConsumableArray(view)
						}
					}, {
						key: "debugView",
						get: function() {
							return this._debugViewEnabled ? null !== this._debugView ? this._debugView : this.createDebugView() : null
						}
					}, {
						key: "contextHas",
						value: function(filter) {
							for (var context = this; null !== (context = context.parent);)
								if (filter(context)) return !0;
							return !1
						}
					}, {
						key: "contextSelect",
						value: function(filter) {
							for (var context = this; null !== (context = context.parent);)
								if (filter(context)) return context;
							return null
						}
					}, {
						key: "contextSelectAll",
						value: function(filter) {
							for (var result = [], context = this; null !== (context = context.parent);) filter(context) && result.push(context);
							return result
						}
					}, {
						key: "addShadow",
						value: function() {
							var _this14 = this;
							this._shadows || (this._shadows = new Set);
							for (var varRe = new RegExp("^".concat(Patterns.variable, "$")), _len14 = arguments.length, names = new Array(_len14), _key14 = 0; _key14 < _len14; _key14++) names[_key14] = arguments[_key14];
							names.flat(1 / 0)
								.forEach((function(name) {
									if ("string" != typeof name) throw new TypeError("variable name must be a string; type: ".concat(_typeof(name)));
									if (!varRe.test(name)) throw new Error('invalid variable name "'.concat(name, '"'));
									_this14._shadows.add(name)
								}))
						}
					}, {
						key: "createShadowWrapper",
						value: function(callback, doneCallback, startCallback) {
							var shadowStore, shadowContext = this;
							return "function" == typeof callback && (shadowStore = {}, this.shadowView.forEach((function(varName) {
									var varKey = varName.slice(1),
										store = "$" === varName[0] ? State.variables : State.temporary;
									shadowStore[varName] = store[varKey]
								}))),
								function() {
									for (var _len15 = arguments.length, args = new Array(_len15), _key15 = 0; _key15 < _len15; _key15++) args[_key15] = arguments[_key15];
									if ("function" == typeof startCallback && startCallback.apply(this, args), "function" == typeof callback) {
										var contextCache, shadowNames = Object.keys(shadowStore),
											valueCache = shadowNames.length > 0 ? {} : null,
											macroParser = Wikifier.Parser.get("macro");
										try {
											shadowNames.forEach((function(varName) {
												var varKey = varName.slice(1),
													store = "$" === varName[0] ? State.variables : State.temporary;
												store.hasOwnProperty(varKey) && (valueCache[varKey] = store[varKey]), store[varKey] = shadowStore[varName]
											})), contextCache = macroParser.context, macroParser.context = shadowContext, callback.apply(this, args)
										} finally {
											contextCache !== undefined && (macroParser.context = contextCache), shadowNames.forEach((function(varName) {
												var varKey = varName.slice(1),
													store = "$" === varName[0] ? State.variables : State.temporary;
												shadowStore[varName] = store[varKey], valueCache.hasOwnProperty(varKey) ? store[varKey] = valueCache[varKey] : delete store[varKey]
											}))
										}
									}
									"function" == typeof doneCallback && doneCallback.apply(this, args)
								}
						}
					}, {
						key: "createDebugView",
						value: function(name, title) {
							return this._debugView = new DebugView(this._output, "macro", name || this.displayName, title || this.source), null !== this.payload && this.payload.length > 0 && this._debugView.modes({
								nonvoid: !0
							}), this._debugViewEnabled = !0, this._debugView
						}
					}, {
						key: "removeDebugView",
						value: function() {
							null !== this._debugView && (this._debugView.remove(), this._debugView = null), this._debugViewEnabled = !1
						}
					}, {
						key: "error",
						value: function(message, source) {
							return throwError(this._output, "<<".concat(this.displayName, ">>: ")
								.concat(message), source || this.source)
						}
					}]), MacroContext
				}();
				return MacroContext
			}();
		! function() {
			if (Macro.add("capture", {
				skipArgs: !0,
				tags: null,
				tsVarRe: new RegExp("(".concat(Patterns.variable, ")"), "g"),
				handler: function() {
					if (0 === this.args.raw.length) return this.error("no story/temporary variable list specified");
					var valueCache = {};
					try {
						for (var match, tsVarRe = this.self.tsVarRe; null !== (match = tsVarRe.exec(this.args.raw));) {
							var varName = match[1],
								varKey = varName.slice(1),
								store = "$" === varName[0] ? State.variables : State.temporary;
							store.hasOwnProperty(varKey) && (valueCache[varKey] = store[varKey]), this.addShadow(varName)
						}
						new Wikifier(this.output, this.payload[0].contents)
					} finally {
						this.shadows.forEach((function(varName) {
							var varKey = varName.slice(1),
								store = "$" === varName[0] ? State.variables : State.temporary;
							valueCache.hasOwnProperty(varKey) ? store[varKey] = valueCache[varKey] : delete store[varKey]
						}))
					}
				}
			}), Macro.add("set", {
				skipArgs: !0,
				handler: function() {
					if (0 === this.args.full.length) return this.error("no expression specified");
					try {
						Scripting.evalJavaScript(this.args.full)
					} catch (ex) {
						return this.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
					}
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("unset", {
				skipArgs: !0,
				jsVarRe: new RegExp("State\\.(variables|temporary)\\.(".concat(Patterns.identifier, ")"), "g"),
				handler: function() {
					if (0 === this.args.full.length) return this.error("no story/temporary variable list specified");
					for (var match, jsVarRe = this.self.jsVarRe; null !== (match = jsVarRe.exec(this.args.full));) {
						var store = State[match[1]],
							name = match[2];
						store.hasOwnProperty(name) && delete store[name]
					}
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("remember", {
				skipArgs: !0,
				jsVarRe: new RegExp("State\\.variables\\.(".concat(Patterns.identifier, ")"), "g"),
				handler: function() {
					if (0 === this.args.full.length) return this.error("no expression specified");
					try {
						Scripting.evalJavaScript(this.args.full)
					} catch (ex) {
						return this.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
					}
					for (var match, remember = storage.get("remember") || {}, jsVarRe = this.self.jsVarRe; null !== (match = jsVarRe.exec(this.args.full));) {
						var name = match[1];
						remember[name] = State.variables[name]
					}
					if (!storage.set("remember", remember)) return this.error("unknown error, cannot remember: ".concat(this.args.raw));
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				},
				init: function() {
					var remember = storage.get("remember");
					remember && Object.keys(remember)
						.forEach((function(name) {
							return State.variables[name] = remember[name]
						}))
				}
			}), Macro.add("forget", {
				skipArgs: !0,
				jsVarRe: new RegExp("State\\.variables\\.(".concat(Patterns.identifier, ")"), "g"),
				handler: function() {
					if (0 === this.args.full.length) return this.error("no story variable list specified");
					for (var match, remember = storage.get("remember"), jsVarRe = this.self.jsVarRe, needStore = !1; null !== (match = jsVarRe.exec(this.args.full));) {
						var name = match[1];
						State.variables.hasOwnProperty(name) && delete State.variables[name], remember && remember.hasOwnProperty(name) && (needStore = !0, delete remember[name])
					}
					if (needStore)
						if (0 === Object.keys(remember)
							.length) {
							if (!storage.delete("remember")) return this.error("unknown error, cannot update remember store")
						} else if (!storage.set("remember", remember)) return this.error("unknown error, cannot update remember store");
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("run", "set"), Macro.add("script", {
				skipArgs: !0,
				tags: null,
				handler: function() {
					var output = document.createDocumentFragment();
					try {
						Scripting.evalJavaScript(this.payload[0].contents, output)
					} catch (ex) {
						return this.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
					}
					Config.debug && this.createDebugView(), output.hasChildNodes() && this.output.appendChild(output)
				}
			}), Macro.add("include", {
				handler: function() {
					return 0 === this.args.length ? this.error("no passage specified") : (passage = "object" === _typeof(this.args[0]) ? this.args[0].link : this.args[0], Story.has(passage) ? (Config.debug && this.debugView.modes({
							block: !0
						}), passage = Story.get(passage), void(this.args[1] ? jQuery(document.createElement(this.args[1]))
							.addClass("".concat(passage.domId, " macro-")
								.concat(this.name))
							.attr("data-passage", passage.title)
							.appendTo(this.output) : jQuery(this.output))
						.wiki(passage.processText())) : this.error('passage "'.concat(passage, '" does not exist')));
					var passage
				}
			}), Macro.add("nobr", {
				skipArgs: !0,
				tags: null,
				handler: function() {
					new Wikifier(this.output, this.payload[0].contents.replace(/^\n+|\n+$/g, "")
						.replace(/\n+/g, " "))
				}
			}), Macro.add(["print", "=", "-"], {
				skipArgs: !0,
				handler: function() {
					if (0 === this.args.full.length) return this.error("no expression specified");
					try {
						var result = stringFrom(Scripting.evalJavaScript(this.args.full));
						null !== result && new Wikifier(this.output, "-" === this.name ? Util.escape(result) : result)
					} catch (ex) {
						return this.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
					}
				}
			}), Macro.add("silently", {
				skipArgs: !0,
				tags: null,
				handler: function() {
					var frag = document.createDocumentFragment();
					if (new Wikifier(frag, this.payload[0].contents.trim()), Config.debug) this.debugView.modes({
						block: !0,
						hidden: !0
					}), this.output.appendChild(frag);
					else {
						var errList = _toConsumableArray(frag.querySelectorAll(".error"))
							.map((function(errEl) {
								return errEl.textContent
							}));
						if (errList.length > 0) return this.error("error".concat(1 === errList.length ? "" : "s", " within contents (")
							.concat(errList.join("; "), ")"))
					}
				}
			}), Macro.add("type", {
				isAsync: !0,
				tags: null,
				typeId: 0,
				handler: function() {
					if (0 === this.args.length) return this.error("no speed specified");
					var cursor, speed = Util.fromCssTime(this.args[0]);
					if (speed < 0) return this.error("speed time value must be non-negative (received: ".concat(this.args[0], ")"));
					for (var elClass = "", elId = "", elTag = "div", skipKey = Config.macros.typeSkipKey, start = 400, options = this.args.slice(1); options.length > 0;) {
						var option = options.shift();
						switch (option) {
							case "class":
								if (0 === options.length) return this.error("class option missing required class name(s)");
								if ("" === (elClass = options.shift())) throw new Error('class option class name(s) must be non-empty (received: "")');
								break;
							case "element":
								if (0 === options.length) return this.error("element option missing required element tag name");
								if ("" === (elTag = options.shift())) throw new Error('element option tag name must be non-empty (received: "")');
								break;
							case "id":
								if (0 === options.length) return this.error("id option missing required ID");
								if ("" === (elId = options.shift())) throw new Error('id option ID must be non-empty (received: "")');
								break;
							case "keep":
								cursor = "keep";
								break;
							case "none":
								cursor = "none";
								break;
							case "skipkey":
								if (0 === options.length) return this.error("skipkey option missing required key value");
								if ("" === (skipKey = options.shift())) throw new Error('skipkey option key value must be non-empty (received: "")');
								break;
							case "start":
								if (0 === options.length) return this.error("start option missing required time value");
								var value = options.shift();
								if ((start = Util.fromCssTime(value)) < 0) throw new Error("start option time value must be non-negative (received: ".concat(value, ")"));
								break;
							default:
								return this.error("unknown option: ".concat(option))
						}
					}
					var contents = this.payload[0].contents;
					if ("" !== contents.trim()) {
						Config.debug && this.debugView.modes({
							block: !0
						});
						var className = "macro-".concat(this.name),
							namespace = ".".concat(className),
							$target = jQuery(document.createElement(elTag))
							.addClass("".concat(className, " ")
								.concat(className, "-target"))
							.appendTo(this.output);
						TempState.macroTypeQueue || (TempState.macroTypeQueue = [], $(document)
							.off(namespace)
							.one(":passageinit".concat(namespace), (function() {
								return $(document)
									.off(namespace)
							})));
						var startTyping = 0 === TempState.macroTypeQueue.length,
							selfId = ++this.self.typeId;
						TempState.macroTypeQueue.push({
							id: selfId,
							handler: function() {
								var $wrapper = jQuery(document.createElement(elTag))
									.addClass(className);
								elId && $wrapper.attr("id", elId), elClass && $wrapper.addClass(elClass), new Wikifier($wrapper, contents);
								var passage = State.passage,
									turn = State.turns;
								if (!Config.macros.typeVisitedPassages && State.passages.slice(0, -1)
									.some((function(title) {
										return title === passage
									})) || $wrapper.find(".error")
									.length > 0) return $target.replaceWith($wrapper), TempState.macroTypeQueue.shift(), void(TempState.macroTypeQueue.length > 0 && TempState.macroTypeQueue.first()
									.handler());
								var typer = new NodeTyper({
									targetNode: $wrapper.get(0),
									classNames: "none" === cursor ? null : "".concat(className, "-cursor")
								});
								$target.replaceWith($wrapper);
								var keydownAndNS = "keydown".concat(namespace),
									typingStopAndNS = "".concat(":typingstop")
									.concat(namespace);
								$(document)
									.off(keydownAndNS)
									.on(keydownAndNS, (function(ev) {
										Util.scrubEventKey(ev.key) !== skipKey || ev.target !== document.body && ev.target !== document.documentElement || (ev.preventDefault(), $(document)
											.off(keydownAndNS), typer.finish())
									}))
									.one(typingStopAndNS, (function() {
										TempState.macroTypeQueue && (0 === TempState.macroTypeQueue.length ? jQuery.event.trigger(":typingcomplete") : TempState.macroTypeQueue.first()
											.handler())
									}));
								var typeNode = function() {
									var typeNodeMember = function(typeIntervalId) {
										State.passage === passage && State.turns === turn && typer.type() || (typeIntervalId && clearInterval(typeIntervalId), TempState.macroTypeQueue && TempState.macroTypeQueue.length > 0 && TempState.macroTypeQueue.first()
											.id === selfId && TempState.macroTypeQueue.shift(), $wrapper.trigger(":typingstop"), $wrapper.addClass("".concat(className, "-done")), "keep" === cursor && $wrapper.addClass("".concat(className, "-cursor")))
									};
									$wrapper.trigger(":typingstart"), typeNodeMember();
									var typeNodeMemberId = setInterval((function() {
										return typeNodeMember(typeNodeMemberId)
									}), speed)
								};
								start ? setTimeout(typeNode, start) : typeNode()
							}
						}), startTyping && (Engine.isPlaying() ? $(document)
							.one(":passageend".concat(namespace), (function() {
								return TempState.macroTypeQueue.first()
									.handler()
							})) : TempState.macroTypeQueue.first()
							.handler())
					}
				}
			}), Macro.add("display", "include"), Macro.add("if", {
				skipArgs: !0,
				tags: ["elseif", "else"],
				elseifWsRe: /^\s*if\b/i,
				ifAssignRe: /[^!=&^|<>*/%+-]=[^=>]/,
				handler: function() {
					var i;
					try {
						var len = this.payload.length,
							elseifWsRe = this.self.elseifWsRe,
							ifAssignRe = this.self.ifAssignRe;
						for (i = 0; i < len; ++i)
							if ("else" === this.payload[i].name) {
								if (this.payload[i].args.raw.length > 0) return elseifWsRe.test(this.payload[i].args.raw) ? this.error('whitespace is not allowed between the "else" and "if" in <<elseif>> clause'.concat(i > 0 ? " (#" + i + ")" : "")) : this.error("<<else>> does not accept a conditional expression (perhaps you meant to use <<elseif>>), invalid: ".concat(this.payload[i].args.raw));
								if (i + 1 !== len) return this.error("<<else>> must be the final clause")
							} else {
								if (0 === this.payload[i].args.full.length) return this.error("no conditional expression specified for <<".concat(this.payload[i].name, ">> clause")
									.concat(i > 0 ? " (#" + i + ")" : ""));
								if (Config.macros.ifAssignmentError && ifAssignRe.test(this.payload[i].args.full)) return this.error("assignment operator found within <<".concat(this.payload[i].name, ">> clause")
									.concat(i > 0 ? " (#" + i + ")" : "", " (perhaps you meant to use an equality operator: ==, ===, eq, is), invalid: ")
									.concat(this.payload[i].args.raw))
							} var evalJavaScript = Scripting.evalJavaScript,
							success = !1;
						for (i = 0; i < len; ++i) {
							if (Config.debug && this.createDebugView(this.payload[i].name, this.payload[i].source)
								.modes({
									nonvoid: !1
								}), "else" === this.payload[i].name || evalJavaScript(this.payload[i].args.full)) {
								success = !0, new Wikifier(this.output, this.payload[i].contents);
								break
							}
							Config.debug && this.debugView.modes({
								hidden: !0,
								invalid: !0
							})
						}
						if (Config.debug) {
							for (++i; i < len; ++i) this.createDebugView(this.payload[i].name, this.payload[i].source)
								.modes({
									nonvoid: !1,
									hidden: !0,
									invalid: !0
								});
							this.createDebugView("/".concat(this.name), "<</".concat(this.name, ">>"))
								.modes({
									nonvoid: !1,
									hidden: !success,
									invalid: !success
								})
						}
					} catch (ex) {
						return this.error("bad conditional expression in <<".concat(0 === i ? "if" : "elseif", ">> clause")
							.concat(i > 0 ? " (#" + i + ")" : "", ": ")
							.concat("object" === _typeof(ex) ? ex.message : ex))
					}
				}
			}), Macro.add("switch", {
				skipArgs: ["switch"],
				tags: ["case", "default"],
				handler: function() {
					if (0 === this.args.full.length) return this.error("no expression specified");
					var i, result, len = this.payload.length;
					if (1 === len) return this.error("no cases specified");
					for (i = 1; i < len; ++i)
						if ("default" === this.payload[i].name) {
							if (this.payload[i].args.length > 0) return this.error("<<default>> does not accept values, invalid: ".concat(this.payload[i].args.raw));
							if (i + 1 !== len) return this.error("<<default>> must be the final case")
						} else if (0 === this.payload[i].args.length) return this.error("no value(s) specified for <<".concat(this.payload[i].name, ">> (#")
						.concat(i, ")"));
					try {
						result = Scripting.evalJavaScript(this.args.full)
					} catch (ex) {
						return this.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
					}
					var debugView = this.debugView,
						success = !1;
					for (Config.debug && debugView.modes({
						nonvoid: !1,
						hidden: !0
					}), i = 1; i < len; ++i) {
						if (Config.debug && this.createDebugView(this.payload[i].name, this.payload[i].source)
							.modes({
								nonvoid: !1
							}), "default" === this.payload[i].name || this.payload[i].args.some((function(val) {
								return val === result
							}))) {
							success = !0, new Wikifier(this.output, this.payload[i].contents);
							break
						}
						Config.debug && this.debugView.modes({
							hidden: !0,
							invalid: !0
						})
					}
					if (Config.debug) {
						for (++i; i < len; ++i) this.createDebugView(this.payload[i].name, this.payload[i].source)
							.modes({
								nonvoid: !1,
								hidden: !0,
								invalid: !0
							});
						debugView.modes({
								nonvoid: !1,
								hidden: !0,
								invalid: !success
							}), this.createDebugView("/".concat(this.name), "<</".concat(this.name, ">>"))
							.modes({
								nonvoid: !1,
								hidden: !0,
								invalid: !success
							})
					}
				}
			}), Macro.add("for", {
				skipArgs: !0,
				tags: null,
				hasRangeRe: new RegExp("^\\S".concat(Patterns.anyChar, "*?\\s+range\\s+\\S")
					.concat(Patterns.anyChar, "*?$")),
				rangeRe: new RegExp("^(?:State\\.(variables|temporary)\\.(".concat(Patterns.identifier, ")\\s*,\\s*)?State\\.(variables|temporary)\\.(")
					.concat(Patterns.identifier, ")\\s+range\\s+(\\S")
					.concat(Patterns.anyChar, "*?)$")),
				threePartRe: /^([^;]*?)\s*;\s*([^;]*?)\s*;\s*([^;]*?)$/,
				forInRe: /^\S+\s+in\s+\S+/i,
				forOfRe: /^\S+\s+of\s+\S+/i,
				handler: function() {
					var argsStr = this.args.full.trim(),
						payload = this.payload[0].contents.replace(/\n$/, "");
					if (0 === argsStr.length) this.self.handleFor.call(this, payload, null, !0, null);
					else if (this.self.hasRangeRe.test(argsStr)) {
						var parts = argsStr.match(this.self.rangeRe);
						if (null === parts) return this.error("invalid range form syntax, format: [index ,] value range collection");
						this.self.handleForRange.call(this, payload, {
							type: parts[1],
							name: parts[2]
						}, {
							type: parts[3],
							name: parts[4]
						}, parts[5])
					} else {
						var init, condition, post;
						if (-1 === argsStr.indexOf(";")) {
							if (this.self.forInRe.test(argsStr)) return this.error("invalid syntax, for…in is not supported; see: for…range");
							if (this.self.forOfRe.test(argsStr)) return this.error("invalid syntax, for…of is not supported; see: for…range");
							condition = argsStr
						} else {
							var _parts = argsStr.match(this.self.threePartRe);
							if (null === _parts) return this.error("invalid 3-part conditional form syntax, format: [init] ; [condition] ; [post]");
							init = _parts[1], condition = _parts[2].trim(), post = _parts[3], 0 === condition.length && (condition = !0)
						}
						this.self.handleFor.call(this, payload, init, condition, post)
					}
				},
				handleFor: function(payload, init, condition, post) {
					var evalJavaScript = Scripting.evalJavaScript,
						first = !0,
						safety = Config.macros.maxLoopIterations;
					Config.debug && this.debugView.modes({
						block: !0
					});
					try {
						if (TempState.break = null, init) try {
							evalJavaScript(init)
						} catch (ex) {
							return this.error("bad init expression: ".concat("object" === _typeof(ex) ? ex.message : ex))
						}
						for (; evalJavaScript(condition);) {
							if (--safety < 0) return this.error("exceeded configured maximum loop iterations (".concat(Config.macros.maxLoopIterations, ")"));
							if (new Wikifier(this.output, first ? payload.replace(/^\n/, "") : payload), first && (first = !1), null != TempState.break)
								if (1 === TempState.break) TempState.break = null;
								else if (2 === TempState.break) {
								TempState.break = null;
								break
							}
							if (post) try {
								evalJavaScript(post)
							} catch (ex) {
								return this.error("bad post expression: ".concat("object" === _typeof(ex) ? ex.message : ex))
							}
						}
					} catch (ex) {
						return this.error("bad conditional expression: ".concat("object" === _typeof(ex) ? ex.message : ex))
					} finally {
						TempState.break = null
					}
				},
				handleForRange: function(payload, indexVar, valueVar, rangeExp) {
					var rangeList, first = !0;
					try {
						rangeList = this.self.toRangeList(rangeExp)
					} catch (ex) {
						return this.error(ex.message)
					}
					Config.debug && this.debugView.modes({
						block: !0
					});
					try {
						TempState.break = null;
						for (var i = 0; i < rangeList.length; ++i)
							if (indexVar.name && (State[indexVar.type][indexVar.name] = rangeList[i][0]), State[valueVar.type][valueVar.name] = rangeList[i][1], new Wikifier(this.output, first ? payload.replace(/^\n/, "") : payload), first && (first = !1), null != TempState.break)
								if (1 === TempState.break) TempState.break = null;
								else if (2 === TempState.break) {
							TempState.break = null;
							break
						}
					} catch (ex) {
						return this.error("object" === _typeof(ex) ? ex.message : ex)
					} finally {
						TempState.break = null
					}
				},
				toRangeList: function(rangeExp) {
					var value, list, evalJavaScript = Scripting.evalJavaScript;
					try {
						value = evalJavaScript("{" === rangeExp[0] ? "(".concat(rangeExp, ")") : rangeExp)
					} catch (ex) {
						if ("object" !== _typeof(ex)) throw new Error("bad range expression: ".concat(ex));
						throw ex.message = "bad range expression: ".concat(ex.message), ex
					}
					switch (_typeof(value)) {
						case "string":
							list = [];
							for (var i = 0; i < value.length;) {
								var obj = Util.charAndPosAt(value, i);
								list.push([i, obj.char]), i = 1 + obj.end
							}
							break;
						case "object":
							if (Array.isArray(value)) list = value.map((function(val, i) {
								return [i, val]
							}));
							else if (value instanceof Set) list = _toConsumableArray(value)
								.map((function(val, i) {
									return [i, val]
								}));
							else if (value instanceof Map) list = _toConsumableArray(value.entries());
							else {
								if ("Object" !== Util.toStringTag(value)) throw new Error("unsupported range expression type: ".concat(Util.toStringTag(value)));
								list = Object.keys(value)
									.map((function(key) {
										return [key, value[key]]
									}))
							}
							break;
						default:
							throw new Error("unsupported range expression type: ".concat(_typeof(value)))
					}
					return list
				}
			}), Macro.add(["break", "continue"], {
				skipArgs: !0,
				handler: function() {
					if (!this.contextHas((function(ctx) {
						return "for" === ctx.name
					}))) return this.error("must only be used in conjunction with its parent macro <<for>>");
					TempState.break = "continue" === this.name ? 1 : 2, Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add(["button", "link"], {
				isAsync: !0,
				tags: null,
				handler: function() {
					var _this15 = this;
					if (0 === this.args.length) return this.error("no ".concat("button" === this.name ? "button" : "link", " text specified"));
					var passage, $link = jQuery(document.createElement("button" === this.name ? "button" : "a"));
					if ("object" === _typeof(this.args[0]))
						if (this.args[0].isImage) {
							var $image = jQuery(document.createElement("img"))
								.attr("src", this.args[0].source)
								.appendTo($link);
							$link.addClass("link-image"), this.args[0].hasOwnProperty("passage") && $image.attr("data-passage", this.args[0].passage), this.args[0].hasOwnProperty("title") && $image.attr("title", this.args[0].title), this.args[0].hasOwnProperty("align") && $image.attr("align", this.args[0].align), passage = this.args[0].link
						} else $link.append(document.createTextNode(this.args[0].text)), passage = this.args[0].link;
					else $link.wikiWithOptions({
						profile: "core"
					}, this.args[0]), passage = this.args.length > 1 ? this.args[1] : undefined;
					null != passage ? ($link.attr("data-passage", passage), Story.has(passage) ? ($link.addClass("link-internal"), Config.addVisitedLinkClass && State.hasPlayed(passage) && $link.addClass("link-visited")) : $link.addClass("link-broken")) : $link.addClass("link-internal"), $link.addClass("macro-".concat(this.name))
						.ariaClick({
							namespace: ".macros",
							role: null != passage ? "link" : "button",
							one: null != passage
						}, this.createShadowWrapper("" !== this.payload[0].contents ? function() {
							return Wikifier.wikifyEval(_this15.payload[0].contents.trim())
						} : null, null != passage ? function() {
							return Engine.play(passage)
						} : null))
						.appendTo(this.output)
				}
			}), Macro.add("checkbox", {
				isAsync: !0,
				handler: function() {
					if (this.args.length < 3) {
						var errors = [];
						return this.args.length < 1 && errors.push("variable name"), this.args.length < 2 && errors.push("unchecked value"), this.args.length < 3 && errors.push("checked value"), this.error("no ".concat(errors.join(" or "), " specified"))
					}
					if ("string" != typeof this.args[0]) return this.error("variable name argument is not a string");
					var varName = this.args[0].trim();
					if ("$" !== varName[0] && "_" !== varName[0]) return this.error('variable name "'.concat(this.args[0], '" is missing its sigil ($ or _)'));
					var varId = Util.slugify(varName),
						uncheckValue = this.args[1],
						checkValue = this.args[2],
						el = document.createElement("input");
					switch (jQuery(el)
						.attr({
							id: "".concat(this.name, "-")
								.concat(varId),
							name: "".concat(this.name, "-")
								.concat(varId),
							type: "checkbox",
							tabindex: 0
						})
						.addClass("macro-".concat(this.name))
						.on("change.macros", this.createShadowWrapper((function() {
							State.setVar(varName, this.checked ? checkValue : uncheckValue)
						})))
						.appendTo(this.output), this.args[3]) {
						case "autocheck":
							State.getVar(varName) === checkValue ? el.checked = !0 : State.setVar(varName, uncheckValue);
							break;
						case "checked":
							el.checked = !0, State.setVar(varName, checkValue);
							break;
						default:
							State.setVar(varName, uncheckValue)
					}
				}
			}), Macro.add(["cycle", "listbox"], {
				isAsync: !0,
				skipArgs: ["optionsfrom"],
				tags: ["option", "optionsfrom"],
				handler: function() {
					var _this16 = this;
					if (0 === this.args.length) return this.error("no variable name specified");
					if ("string" != typeof this.args[0]) return this.error("variable name argument is not a string");
					var varName = this.args[0].trim();
					if ("$" !== varName[0] && "_" !== varName[0]) return this.error('variable name "'.concat(this.args[0], '" is missing its sigil ($ or _)'));
					var varId = Util.slugify(varName),
						len = this.payload.length;
					if (1 === len) return this.error("no options specified");
					for (var config = {
						autoselect: !1,
						once: !1
					}, i = 1; i < this.args.length; ++i) {
						var arg = this.args[i];
						switch (arg) {
							case "once":
								config.once = !0;
								break;
							case "autoselect":
								config.autoselect = !0;
								break;
							default:
								return this.error("unknown argument: ".concat(arg))
						}
					}
					for (var options = [], tagCount = {
						option: 0,
						optionsfrom: 0
					}, selectedIdx = -1, _i5 = 1; _i5 < len; ++_i5) {
						var payload = this.payload[_i5];
						if ("option" === payload.name) {
							if (++tagCount.option, 0 === payload.args.length) return this.error("no arguments specified for <<".concat(payload.name, ">> (#")
								.concat(tagCount.option, ")"));
							var option = {
									label: String(payload.args[0])
								},
								isSelected = !1;
							switch (payload.args.length) {
								case 1:
									option.value = payload.args[0];
									break;
								case 2:
									"selected" === payload.args[1] ? (option.value = payload.args[0], isSelected = !0) : option.value = payload.args[1];
									break;
								default:
									option.value = payload.args[1], "selected" === payload.args[2] && (isSelected = !0)
							}
							if (options.push(option), isSelected) {
								if (config.autoselect) return this.error("cannot specify both the autoselect and selected keywords");
								if (-1 !== selectedIdx) return this.error("multiple selected keywords specified for <<".concat(payload.name, ">> (#")
									.concat(selectedIdx + 1, " & #")
									.concat(tagCount.option, ")"));
								selectedIdx = options.length - 1
							}
						} else {
							var _ret = function() {
								if (++tagCount.optionsfrom, 0 === payload.args.full.length) return {
									v: _this16.error("no expression specified for <<".concat(payload.name, ">> (#")
										.concat(tagCount.optionsfrom, ")"))
								};
								var result = void 0;
								try {
									var exp = payload.args.full;
									result = Scripting.evalJavaScript("{" === exp[0] ? "(".concat(exp, ")") : exp)
								} catch (ex) {
									return {
										v: _this16.error("bad evaluation: ".concat("object" === _typeof(ex) ? ex.message : ex))
									}
								}
								if ("object" !== _typeof(result) || null === result) return {
									v: _this16.error("expression must yield a supported collection or generic object (type: ".concat(null === result ? "null" : _typeof(result), ")"))
								};
								if (result instanceof Array || result instanceof Set) result.forEach((function(val) {
									return options.push({
										label: String(val),
										value: val
									})
								}));
								else if (result instanceof Map) result.forEach((function(val, key) {
									return options.push({
										label: String(key),
										value: val
									})
								}));
								else {
									var oType = Util.toStringTag(result);
									if ("Object" !== oType) return {
										v: _this16.error("expression must yield a supported collection or generic object (object type: ".concat(oType, ")"))
									};
									Object.keys(result)
										.forEach((function(key) {
											return options.push({
												label: key,
												value: result[key]
											})
										}))
								}
							}();
							if ("object" === _typeof(_ret)) return _ret.v
						}
					}
					if (-1 === selectedIdx)
						if (config.autoselect) {
							var sameValueZero = Util.sameValueZero,
								curValue = State.getVar(varName),
								curValueIdx = options.findIndex((function(opt) {
									return sameValueZero(opt.value, curValue)
								}));
							selectedIdx = -1 === curValueIdx ? 0 : curValueIdx
						} else selectedIdx = 0;
					if ("cycle" === this.name) {
						var lastIdx = options.length - 1;
						if (config.once && selectedIdx === lastIdx) jQuery(this.output)
							.wikiWithOptions({
								profile: "core"
							}, options[selectedIdx].label);
						else {
							var cycleIdx = selectedIdx;
							jQuery(document.createElement("a"))
								.wikiWithOptions({
									profile: "core"
								}, options[selectedIdx].label)
								.attr("id", "".concat(this.name, "-")
									.concat(varId))
								.addClass("macro-".concat(this.name))
								.ariaClick({
									namespace: ".macros",
									role: "button"
								}, this.createShadowWrapper((function() {
									var $this = $(this);
									cycleIdx = (cycleIdx + 1) % options.length, State.setVar(varName, options[cycleIdx].value), $this.empty()
										.wikiWithOptions({
											profile: "core"
										}, options[cycleIdx].label), config.once && cycleIdx === lastIdx && $this.off()
										.contents()
										.unwrap()
								})))
								.appendTo(this.output)
						}
					} else {
						var $select = jQuery(document.createElement("select"));
						options.forEach((function(opt, i) {
								jQuery(document.createElement("option"))
									.val(i)
									.text(opt.label)
									.appendTo($select)
							})), $select.attr({
								id: "".concat(this.name, "-")
									.concat(varId),
								name: "".concat(this.name, "-")
									.concat(varId),
								tabindex: 0
							})
							.addClass("macro-".concat(this.name))
							.val(selectedIdx)
							.on("change.macros", this.createShadowWrapper((function() {
								State.setVar(varName, options[Number(this.value)].value)
							})))
							.appendTo(this.output)
					}
					State.setVar(varName, options[selectedIdx].value)
				}
			}), Macro.add(["linkappend", "linkprepend", "linkreplace"], {
				isAsync: !0,
				tags: null,
				t8nRe: /^(?:transition|t8n)$/,
				handler: function() {
					var _this17 = this;
					if (0 === this.args.length) return this.error("no link text specified");
					var $link = jQuery(document.createElement("a")),
						$insert = jQuery(document.createElement("span")),
						transition = this.args.length > 1 && this.self.t8nRe.test(this.args[1]);
					$link.wikiWithOptions({
							profile: "core"
						}, this.args[0])
						.addClass("link-internal macro-".concat(this.name))
						.ariaClick({
							namespace: ".macros",
							one: !0
						}, this.createShadowWrapper((function() {
							if ("linkreplace" === _this17.name ? $link.remove() : $link.wrap('<span class="macro-'.concat(_this17.name, '"></span>'))
								.replaceWith((function() {
									return $link.html()
								})), "" !== _this17.payload[0].contents) {
								var frag = document.createDocumentFragment();
								new Wikifier(frag, _this17.payload[0].contents), $insert.append(frag)
							}
							transition && setTimeout((function() {
								return $insert.removeClass("macro-".concat(_this17.name, "-in"))
							}), Engine.minDomActionDelay)
						})))
						.appendTo(this.output), $insert.addClass("macro-".concat(this.name, "-insert")), transition && $insert.addClass("macro-".concat(this.name, "-in")), "linkprepend" === this.name ? $insert.insertBefore($link) : $insert.insertAfter($link)
				}
			}), Macro.add(["numberbox", "textbox"], {
				isAsync: !0,
				handler: function() {
					if (this.args.length < 2) {
						var errors = [];
						return this.args.length < 1 && errors.push("variable name"), this.args.length < 2 && errors.push("default value"), this.error("no ".concat(errors.join(" or "), " specified"))
					}
					if ("string" != typeof this.args[0]) return this.error("variable name argument is not a string");
					var varName = this.args[0].trim();
					if ("$" !== varName[0] && "_" !== varName[0]) return this.error('variable name "'.concat(this.args[0], '" is missing its sigil ($ or _)'));
					Config.debug && this.debugView.modes({
						block: !0
					});
					var asNumber = "numberbox" === this.name,
						defaultValue = asNumber ? Number(this.args[1]) : this.args[1];
					if (asNumber && Number.isNaN(defaultValue)) return this.error('default value "'.concat(this.args[1], '" is neither a number nor can it be parsed into a number'));
					var passage, varId = Util.slugify(varName),
						el = document.createElement("input"),
						autofocus = !1;
					this.args.length > 3 ? (passage = this.args[2], autofocus = "autofocus" === this.args[3]) : this.args.length > 2 && ("autofocus" === this.args[2] ? autofocus = !0 : passage = this.args[2]), "object" === _typeof(passage) && (passage = passage.link), jQuery(el)
						.attr({
							id: "".concat(this.name, "-")
								.concat(varId),
							name: "".concat(this.name, "-")
								.concat(varId),
							type: asNumber ? "number" : "text",
							inputmode: asNumber ? "decimal" : "text",
							tabindex: 0
						})
						.addClass("macro-".concat(this.name))
						.on("change.macros", this.createShadowWrapper((function() {
							State.setVar(varName, asNumber ? Number(this.value) : this.value)
						})))
						.on("keypress.macros", this.createShadowWrapper((function(ev) {
							13 === ev.which && (ev.preventDefault(), State.setVar(varName, asNumber ? Number(this.value) : this.value), null != passage && Engine.play(passage))
						})))
						.appendTo(this.output), asNumber && (el.step = "any"), State.setVar(varName, defaultValue), el.value = defaultValue, autofocus && (el.setAttribute("autofocus", "autofocus"), postdisplay["#autofocus:".concat(el.id)] = function(task) {
							delete postdisplay[task], setTimeout((function() {
								return el.focus()
							}), Engine.minDomActionDelay)
						})
				}
			}), Macro.add("radiobutton", {
				isAsync: !0,
				handler: function() {
					if (this.args.length < 2) {
						var errors = [];
						return this.args.length < 1 && errors.push("variable name"), this.args.length < 2 && errors.push("checked value"), this.error("no ".concat(errors.join(" or "), " specified"))
					}
					if ("string" != typeof this.args[0]) return this.error("variable name argument is not a string");
					var varName = this.args[0].trim();
					if ("$" !== varName[0] && "_" !== varName[0]) return this.error('variable name "'.concat(this.args[0], '" is missing its sigil ($ or _)'));
					var varId = Util.slugify(varName),
						checkValue = this.args[1],
						el = document.createElement("input");
					switch (TempState.hasOwnProperty(this.name) || (TempState[this.name] = {}), TempState[this.name].hasOwnProperty(varId) || (TempState[this.name][varId] = 0), jQuery(el)
						.attr({
							id: "".concat(this.name, "-")
								.concat(varId, "-")
								.concat(TempState[this.name][varId]++),
							name: "".concat(this.name, "-")
								.concat(varId),
							type: "radio",
							tabindex: 0
						})
						.addClass("macro-".concat(this.name))
						.on("change.macros", this.createShadowWrapper((function() {
							this.checked && State.setVar(varName, checkValue)
						})))
						.appendTo(this.output), this.args[2]) {
						case "autocheck":
							State.getVar(varName) === checkValue && (el.checked = !0);
							break;
						case "checked":
							el.checked = !0, State.setVar(varName, checkValue)
					}
				}
			}), Macro.add("textarea", {
				isAsync: !0,
				handler: function() {
					if (this.args.length < 2) {
						var errors = [];
						return this.args.length < 1 && errors.push("variable name"), this.args.length < 2 && errors.push("default value"), this.error("no ".concat(errors.join(" or "), " specified"))
					}
					if ("string" != typeof this.args[0]) return this.error("variable name argument is not a string");
					var varName = this.args[0].trim();
					if ("$" !== varName[0] && "_" !== varName[0]) return this.error('variable name "'.concat(this.args[0], '" is missing its sigil ($ or _)'));
					Config.debug && this.debugView.modes({
						block: !0
					});
					var varId = Util.slugify(varName),
						defaultValue = this.args[1],
						autofocus = "autofocus" === this.args[2],
						el = document.createElement("textarea");
					jQuery(el)
						.attr({
							id: "".concat(this.name, "-")
								.concat(varId),
							name: "".concat(this.name, "-")
								.concat(varId),
							rows: 4,
							tabindex: 0
						})
						.addClass("macro-".concat(this.name))
						.on("change.macros", this.createShadowWrapper((function() {
							State.setVar(varName, this.value)
						})))
						.appendTo(this.output), State.setVar(varName, defaultValue), el.textContent = defaultValue, autofocus && (el.setAttribute("autofocus", "autofocus"), postdisplay["#autofocus:".concat(el.id)] = function(task) {
							delete postdisplay[task], setTimeout((function() {
								return el.focus()
							}), Engine.minDomActionDelay)
						})
				}
			}), Macro.add("click", "link"), Macro.add("actions", {
				handler: function() {
					for (var $list = jQuery(document.createElement("ul"))
						.addClass(this.name)
						.appendTo(this.output), i = 0; i < this.args.length; ++i) {
						var passage = void 0,
							text = void 0,
							$image = void 0,
							setFn = void 0;
						if ("object" === _typeof(this.args[i]) ? this.args[i].isImage ? ($image = jQuery(document.createElement("img"))
							.attr("src", this.args[i].source), this.args[i].hasOwnProperty("passage") && $image.attr("data-passage", this.args[i].passage), this.args[i].hasOwnProperty("title") && $image.attr("title", this.args[i].title), this.args[i].hasOwnProperty("align") && $image.attr("align", this.args[i].align), passage = this.args[i].link, setFn = this.args[i].setFn) : (text = this.args[i].text, passage = this.args[i].link, setFn = this.args[i].setFn) : text = passage = this.args[i], !(State.variables.hasOwnProperty("#actions") && State.variables["#actions"].hasOwnProperty(passage) && State.variables["#actions"][passage])) {
							var $link = jQuery(Wikifier.createInternalLink(jQuery(document.createElement("li"))
									.appendTo($list), passage, null,
									function(passage, fn) {
										return function() {
											State.variables.hasOwnProperty("#actions") || (State.variables["#actions"] = {}), State.variables["#actions"][passage] = !0, "function" == typeof fn && fn()
										}
									}(passage, setFn)))
								.addClass("macro-".concat(this.name))
								.append($image || document.createTextNode(text));
							$image && $link.addClass("link-image")
						}
					}
				}
			}), Macro.add(["back", "return"], {
				handler: function() {
					if (this.args.length > 1) return this.error("too many arguments specified, check the documentation for details");
					var passage, text, $image, $link, momentIndex = -1;
					if (1 === this.args.length && ("object" === _typeof(this.args[0]) ? this.args[0].isImage ? ($image = jQuery(document.createElement("img"))
						.attr("src", this.args[0].source), this.args[0].hasOwnProperty("passage") && $image.attr("data-passage", this.args[0].passage), this.args[0].hasOwnProperty("title") && $image.attr("title", this.args[0].title), this.args[0].hasOwnProperty("align") && $image.attr("align", this.args[0].align), this.args[0].hasOwnProperty("link") && (passage = this.args[0].link)) : (1 === this.args[0].count || (text = this.args[0].text), passage = this.args[0].link) : 1 === this.args.length && (text = this.args[0])), null == passage) {
						for (var i = State.length - 2; i >= 0; --i)
							if (State.history[i].title !== State.passage) {
								momentIndex = i, passage = State.history[i].title;
								break
							} if (null == passage && "return" === this.name)
							for (var _i6 = State.expired.length - 1; _i6 >= 0; --_i6)
								if (State.expired[_i6] !== State.passage) {
									passage = State.expired[_i6];
									break
								}
					} else {
						if (!Story.has(passage)) return this.error('passage "'.concat(passage, '" does not exist'));
						if ("back" === this.name) {
							for (var _i7 = State.length - 2; _i7 >= 0; --_i7)
								if (State.history[_i7].title === passage) {
									momentIndex = _i7;
									break
								} if (-1 === momentIndex) return this.error('cannot find passage "'.concat(passage, '" in the current story history'))
						}
					}
					if (null == passage) return this.error("cannot find passage");
					"back" !== this.name || -1 !== momentIndex ? ($link = jQuery(document.createElement("a"))
							.addClass("link-internal")
							.ariaClick({
								one: !0
							}, "return" === this.name ? function() {
								return Engine.play(passage)
							} : function() {
								return Engine.goTo(momentIndex)
							}), $image && $link.addClass("link-image")) : $link = jQuery(document.createElement("span"))
						.addClass("link-disabled"), $link.addClass("macro-".concat(this.name))
						.append($image || document.createTextNode(text || L10n.get("macro".concat(this.name.toUpperFirst(), "Text"))))
						.appendTo(this.output)
				}
			}), Macro.add("choice", {
				handler: function() {
					if (0 === this.args.length) return this.error("no passage specified");
					var passage, text, $image, setFn, $link, choiceId = State.passage;
					if (1 === this.args.length ? "object" === _typeof(this.args[0]) ? this.args[0].isImage ? ($image = jQuery(document.createElement("img"))
						.attr("src", this.args[0].source), this.args[0].hasOwnProperty("passage") && $image.attr("data-passage", this.args[0].passage), this.args[0].hasOwnProperty("title") && $image.attr("title", this.args[0].title), this.args[0].hasOwnProperty("align") && $image.attr("align", this.args[0].align), passage = this.args[0].link, setFn = this.args[0].setFn) : (text = this.args[0].text, passage = this.args[0].link, setFn = this.args[0].setFn) : text = passage = this.args[0] : (passage = this.args[0], text = this.args[1]), State.variables.hasOwnProperty("#choice") && State.variables["#choice"].hasOwnProperty(choiceId) && State.variables["#choice"][choiceId]) return $link = jQuery(document.createElement("span"))
						.addClass("link-disabled macro-".concat(this.name))
						.attr("tabindex", -1)
						.append($image || document.createTextNode(text))
						.appendTo(this.output), void($image && $link.addClass("link-image"));
					$link = jQuery(Wikifier.createInternalLink(this.output, passage, null, (function() {
							State.variables.hasOwnProperty("#choice") || (State.variables["#choice"] = {}), State.variables["#choice"][choiceId] = !0, "function" == typeof setFn && setFn()
						})))
						.addClass("macro-".concat(this.name))
						.append($image || document.createTextNode(text)), $image && $link.addClass("link-image")
				}
			}), Macro.add(["addclass", "toggleclass"], {
				handler: function() {
					if (this.args.length < 2) {
						var errors = [];
						return this.args.length < 1 && errors.push("selector"), this.args.length < 2 && errors.push("class names"), this.error("no ".concat(errors.join(" or "), " specified"))
					}
					var $targets = jQuery(this.args[0]);
					if (0 === $targets.length) return this.error('no elements matched the selector "'.concat(this.args[0], '"'));
					switch (this.name) {
						case "addclass":
							$targets.addClass(this.args[1].trim());
							break;
						case "toggleclass":
							$targets.toggleClass(this.args[1].trim())
					}
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("removeclass", {
				handler: function() {
					if (0 === this.args.length) return this.error("no selector specified");
					var $targets = jQuery(this.args[0]);
					if (0 === $targets.length) return this.error('no elements matched the selector "'.concat(this.args[0], '"'));
					this.args.length > 1 ? $targets.removeClass(this.args[1].trim()) : $targets.removeClass(), Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("copy", {
				handler: function() {
					if (0 === this.args.length) return this.error("no selector specified");
					var $targets = jQuery(this.args[0]);
					if (0 === $targets.length) return this.error('no elements matched the selector "'.concat(this.args[0], '"'));
					jQuery(this.output)
						.append($targets.html()), Config.debug && this.debugView.modes({
							hidden: !0
						})
				}
			}), Macro.add(["append", "prepend", "replace"], {
				tags: null,
				t8nRe: /^(?:transition|t8n)$/,
				handler: function() {
					var _this18 = this;
					if (0 === this.args.length) return this.error("no selector specified");
					var $insert, $targets = jQuery(this.args[0]);
					if (0 === $targets.length) return this.error('no elements matched the selector "'.concat(this.args[0], '"'));
					if ("" !== this.payload[0].contents) switch (this.args.length > 1 && this.self.t8nRe.test(this.args[1]) ? (($insert = jQuery(document.createElement("span")))
						.addClass("macro-".concat(this.name, "-insert macro-")
							.concat(this.name, "-in")), setTimeout((function() {
							return $insert.removeClass("macro-".concat(_this18.name, "-in"))
						}), Engine.minDomActionDelay)) : $insert = jQuery(document.createDocumentFragment()), $insert.wiki(this.payload[0].contents), this.name) {
						case "replace":
							$targets.empty();
						case "append":
							$targets.append($insert);
							break;
						case "prepend":
							$targets.prepend($insert)
					} else "replace" === this.name && $targets.empty();
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("remove", {
				handler: function() {
					if (0 === this.args.length) return this.error("no selector specified");
					var $targets = jQuery(this.args[0]);
					if (0 === $targets.length) return this.error('no elements matched the selector "'.concat(this.args[0], '"'));
					$targets.remove(), Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Has.audio) {
				var errorOnePlaybackAction = function(cur, prev) {
					return 'only one playback action allowed per invocation, "'.concat(cur, '" cannot be combined with "')
						.concat(prev, '"')
				};
				Macro.add("audio", {
					handler: function() {
						if (this.args.length < 2) {
							var errors = [];
							return this.args.length < 1 && errors.push("track and/or group IDs"), this.args.length < 2 && errors.push("actions"), this.error("no ".concat(errors.join(" or "), " specified"))
						}
						var selected;
						try {
							selected = SimpleAudio.select(this.args[0])
						} catch (ex) {
							return this.error(ex.message)
						}
						for (var action, fadeTo, loop, mute, passage, time, volume, args = this.args.slice(1), fadeOver = 5; args.length > 0;) {
							var arg = args.shift(),
								raw = void 0;
							switch (arg) {
								case "load":
								case "pause":
								case "play":
								case "stop":
								case "unload":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = arg;
									break;
								case "fadein":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = "fade", fadeTo = 1;
									break;
								case "fadeout":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = "fade", fadeTo = 0;
									break;
								case "fadeto":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									if (0 === args.length) return this.error("fadeto missing required level value");
									if (action = "fade", raw = args.shift(), fadeTo = Number.parseFloat(raw), Number.isNaN(fadeTo) || !Number.isFinite(fadeTo)) return this.error("cannot parse fadeto: ".concat(raw));
									break;
								case "fadeoverto":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									if (args.length < 2) {
										var _errors = [];
										return args.length < 1 && _errors.push("seconds"), args.length < 2 && _errors.push("level"), this.error("fadeoverto missing required ".concat(_errors.join(" and "), " value")
											.concat(_errors.length > 1 ? "s" : ""))
									}
									if (action = "fade", raw = args.shift(), fadeOver = Number.parseFloat(raw), Number.isNaN(fadeOver) || !Number.isFinite(fadeOver)) return this.error("cannot parse fadeoverto: ".concat(raw));
									if (raw = args.shift(), fadeTo = Number.parseFloat(raw), Number.isNaN(fadeTo) || !Number.isFinite(fadeTo)) return this.error("cannot parse fadeoverto: ".concat(raw));
									break;
								case "volume":
									if (0 === args.length) return this.error("volume missing required level value");
									if (raw = args.shift(), volume = Number.parseFloat(raw), Number.isNaN(volume) || !Number.isFinite(volume)) return this.error("cannot parse volume: ".concat(raw));
									break;
								case "mute":
								case "unmute":
									mute = "mute" === arg;
									break;
								case "time":
									if (0 === args.length) return this.error("time missing required seconds value");
									if (raw = args.shift(), time = Number.parseFloat(raw), Number.isNaN(time) || !Number.isFinite(time)) return this.error("cannot parse time: ".concat(raw));
									break;
								case "loop":
								case "unloop":
									loop = "loop" === arg;
									break;
								case "goto":
									if (0 === args.length) return this.error("goto missing required passage title");
									if (raw = args.shift(), passage = "object" === _typeof(raw) ? raw.link : raw, !Story.has(passage)) return this.error('passage "'.concat(passage, '" does not exist'));
									break;
								default:
									return this.error("unknown action: ".concat(arg))
							}
						}
						try {
							if (null != volume && selected.volume(volume), null != time && selected.time(time), null != mute && selected.mute(mute), null != loop && selected.loop(loop), null != passage) {
								var nsEnded = "ended.macros.macro-".concat(this.name, "_goto");
								selected.off(nsEnded)
									.one(nsEnded, (function() {
										selected.off(nsEnded), Engine.play(passage)
									}))
							}
							switch (action) {
								case "fade":
									selected.fade(fadeOver, fadeTo);
									break;
								case "load":
									selected.load();
									break;
								case "pause":
									selected.pause();
									break;
								case "play":
									selected.playWhenAllowed();
									break;
								case "stop":
									selected.stop();
									break;
								case "unload":
									selected.unload()
							}
							Config.debug && this.debugView.modes({
								hidden: !0
							})
						} catch (ex) {
							return this.error("error executing action: ".concat(ex.message))
						}
					}
				}), Macro.add("cacheaudio", {
					handler: function() {
						var _this19 = this;
						if (this.args.length < 2) {
							var errors = [];
							return this.args.length < 1 && errors.push("track ID"), this.args.length < 2 && errors.push("sources"), this.error("no ".concat(errors.join(" or "), " specified"))
						}
						var id = String(this.args[0])
							.trim(),
							oldFmtRe = /^format:\s*([\w-]+)\s*;\s*/i;
						try {
							SimpleAudio.tracks.add(id, this.args.slice(1)
								.map((function(source) {
									if (oldFmtRe.test(source)) {
										if (Config.debug) return _this19.error('track ID "'.concat(id, '": format specifier migration required, "format:formatId;" → "formatId|"'));
										source = source.replace(oldFmtRe, "$1|")
									}
									return source
								})))
						} catch (ex) {
							return this.error(ex.message)
						}
						if (Config.debug && !SimpleAudio.tracks.get(id)
							.hasSource()) return this.error('track ID "'.concat(id, '": no supported audio sources found'));
						Config.debug && this.debugView.modes({
							hidden: !0
						})
					}
				}), Macro.add("createaudiogroup", {
					tags: ["track"],
					handler: function() {
						if (0 === this.args.length) return this.error("no group ID specified");
						if (1 === this.payload.length) return this.error("no tracks defined via <<track>>");
						Config.debug && this.debugView.modes({
							nonvoid: !1,
							hidden: !0
						});
						for (var groupId = String(this.args[0])
							.trim(), trackIds = [], i = 1, len = this.payload.length; i < len; ++i) {
							if (this.payload[i].args.length < 1) return this.error("no track ID specified");
							trackIds.push(String(this.payload[i].args[0])
									.trim()), Config.debug && this.createDebugView(this.payload[i].name, this.payload[i].source)
								.modes({
									nonvoid: !1,
									hidden: !0
								})
						}
						try {
							SimpleAudio.groups.add(groupId, trackIds)
						} catch (ex) {
							return this.error(ex.message)
						}
						Config.debug && this.createDebugView("/".concat(this.name), "<</".concat(this.name, ">>"))
							.modes({
								nonvoid: !1,
								hidden: !0
							})
					}
				}), Macro.add("createplaylist", {
					tags: ["track"],
					handler: function() {
						if (0 === this.args.length) return this.error("no list ID specified");
						if (1 === this.payload.length) return this.error("no tracks defined via <<track>>");
						var playlist = Macro.get("playlist");
						if (null !== playlist.from && "createplaylist" !== playlist.from) return this.error("a playlist has already been defined with <<setplaylist>>");
						Config.debug && this.debugView.modes({
							nonvoid: !1,
							hidden: !0
						});
						for (var listId = String(this.args[0])
							.trim(), trackObjs = [], i = 1, len = this.payload.length; i < len; ++i) {
							if (0 === this.payload[i].args.length) return this.error("no track ID specified");
							for (var trackObj = {
								id: String(this.payload[i].args[0])
									.trim()
							}, args = this.payload[i].args.slice(1); args.length > 0;) {
								var arg = args.shift(),
									raw = void 0,
									parsed = void 0;
								switch (arg) {
									case "copy":
									case "own":
										trackObj.own = !0;
										break;
									case "rate":
										args.length > 0 && args.shift();
										break;
									case "volume":
										if (0 === args.length) return this.error("volume missing required level value");
										if (raw = args.shift(), parsed = Number.parseFloat(raw), Number.isNaN(parsed) || !Number.isFinite(parsed)) return this.error("cannot parse volume: ".concat(raw));
										trackObj.volume = parsed;
										break;
									default:
										return this.error("unknown action: ".concat(arg))
								}
							}
							trackObjs.push(trackObj), Config.debug && this.createDebugView(this.payload[i].name, this.payload[i].source)
								.modes({
									nonvoid: !1,
									hidden: !0
								})
						}
						try {
							SimpleAudio.lists.add(listId, trackObjs)
						} catch (ex) {
							return this.error(ex.message)
						}
						null === playlist.from && (playlist.from = "createplaylist"), Config.debug && this.createDebugView("/".concat(this.name), "<</".concat(this.name, ">>"))
							.modes({
								nonvoid: !1,
								hidden: !0
							})
					}
				}), Macro.add("masteraudio", {
					handler: function() {
						if (0 === this.args.length) return this.error("no actions specified");
						for (var action, mute, muteOnHide, volume, args = this.args.slice(0); args.length > 0;) {
							var arg = args.shift(),
								raw = void 0;
							switch (arg) {
								case "load":
								case "stop":
								case "unload":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = arg;
									break;
								case "mute":
								case "unmute":
									mute = "mute" === arg;
									break;
								case "muteonhide":
								case "nomuteonhide":
									muteOnHide = "muteonhide" === arg;
									break;
								case "volume":
									if (0 === args.length) return this.error("volume missing required level value");
									if (raw = args.shift(), volume = Number.parseFloat(raw), Number.isNaN(volume) || !Number.isFinite(volume)) return this.error("cannot parse volume: ".concat(raw));
									break;
								default:
									return this.error("unknown action: ".concat(arg))
							}
						}
						try {
							switch (null != mute && SimpleAudio.mute(mute), null != muteOnHide && SimpleAudio.muteOnHidden(muteOnHide), null != volume && SimpleAudio.volume(volume), action) {
								case "load":
									SimpleAudio.load();
									break;
								case "stop":
									SimpleAudio.stop();
									break;
								case "unload":
									SimpleAudio.unload()
							}
							Config.debug && this.debugView.modes({
								hidden: !0
							})
						} catch (ex) {
							return this.error("error executing action: ".concat(ex.message))
						}
					}
				}), Macro.add("playlist", {
					from: null,
					handler: function() {
						var list, args, action, from = this.self.from;
						if (null === from) return this.error("no playlists have been created");
						if ("createplaylist" === from) {
							if (this.args.length < 2) {
								var errors = [];
								return this.args.length < 1 && errors.push("list ID"), this.args.length < 2 && errors.push("actions"), this.error("no ".concat(errors.join(" or "), " specified"))
							}
							var id = String(this.args[0])
								.trim();
							if (!SimpleAudio.lists.has(id)) return this.error('playlist "'.concat(id, '" does not exist'));
							list = SimpleAudio.lists.get(id), args = this.args.slice(1)
						} else {
							if (0 === this.args.length) return this.error("no actions specified");
							list = SimpleAudio.lists.get("setplaylist"), args = this.args.slice(0)
						}
						for (var fadeTo, loop, mute, shuffle, volume, fadeOver = 5; args.length > 0;) {
							var arg = args.shift(),
								raw = void 0;
							switch (arg) {
								case "load":
								case "pause":
								case "play":
								case "skip":
								case "stop":
								case "unload":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = arg;
									break;
								case "fadein":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = "fade", fadeTo = 1;
									break;
								case "fadeout":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									action = "fade", fadeTo = 0;
									break;
								case "fadeto":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									if (0 === args.length) return this.error("fadeto missing required level value");
									if (action = "fade", raw = args.shift(), fadeTo = Number.parseFloat(raw), Number.isNaN(fadeTo) || !Number.isFinite(fadeTo)) return this.error("cannot parse fadeto: ".concat(raw));
									break;
								case "fadeoverto":
									if (action) return this.error(errorOnePlaybackAction(arg, action));
									if (args.length < 2) {
										var _errors2 = [];
										return args.length < 1 && _errors2.push("seconds"), args.length < 2 && _errors2.push("level"), this.error("fadeoverto missing required ".concat(_errors2.join(" and "), " value")
											.concat(_errors2.length > 1 ? "s" : ""))
									}
									if (action = "fade", raw = args.shift(), fadeOver = Number.parseFloat(raw), Number.isNaN(fadeOver) || !Number.isFinite(fadeOver)) return this.error("cannot parse fadeoverto: ".concat(raw));
									if (raw = args.shift(), fadeTo = Number.parseFloat(raw), Number.isNaN(fadeTo) || !Number.isFinite(fadeTo)) return this.error("cannot parse fadeoverto: ".concat(raw));
									break;
								case "volume":
									if (0 === args.length) return this.error("volume missing required level value");
									if (raw = args.shift(), volume = Number.parseFloat(raw), Number.isNaN(volume) || !Number.isFinite(volume)) return this.error("cannot parse volume: ".concat(raw));
									break;
								case "mute":
								case "unmute":
									mute = "mute" === arg;
									break;
								case "loop":
								case "unloop":
									loop = "loop" === arg;
									break;
								case "shuffle":
								case "unshuffle":
									shuffle = "shuffle" === arg;
									break;
								default:
									return this.error("unknown action: ".concat(arg))
							}
						}
						try {
							switch (null != volume && list.volume(volume), null != mute && list.mute(mute), null != loop && list.loop(loop), null != shuffle && list.shuffle(shuffle), action) {
								case "fade":
									list.fade(fadeOver, fadeTo);
									break;
								case "load":
									list.load();
									break;
								case "pause":
									list.pause();
									break;
								case "play":
									list.playWhenAllowed();
									break;
								case "skip":
									list.skip();
									break;
								case "stop":
									list.stop();
									break;
								case "unload":
									list.unload()
							}
							Config.debug && this.debugView.modes({
								hidden: !0
							})
						} catch (ex) {
							return this.error("error executing action: ".concat(ex.message))
						}
					}
				}), Macro.add("removeaudiogroup", {
					handler: function() {
						if (0 === this.args.length) return this.error("no group ID specified");
						var id = String(this.args[0])
							.trim();
						if (!SimpleAudio.groups.has(id)) return this.error('group "'.concat(id, '" does not exist'));
						SimpleAudio.groups.delete(id), Config.debug && this.debugView.modes({
							hidden: !0
						})
					}
				}), Macro.add("removeplaylist", {
					handler: function() {
						if (0 === this.args.length) return this.error("no list ID specified");
						var id = String(this.args[0])
							.trim();
						if (!SimpleAudio.lists.has(id)) return this.error('playlist "'.concat(id, '" does not exist'));
						SimpleAudio.lists.delete(id), Config.debug && this.debugView.modes({
							hidden: !0
						})
					}
				}), Macro.add("waitforaudio", {
					skipArgs: !0,
					handler: function() {
						SimpleAudio.loadWithScreen()
					}
				}), Macro.add("setplaylist", {
					handler: function() {
						if (0 === this.args.length) return this.error("no track ID(s) specified");
						var playlist = Macro.get("playlist");
						if (null !== playlist.from && "setplaylist" !== playlist.from) return this.error("playlists have already been defined with <<createplaylist>>");
						try {
							SimpleAudio.lists.add("setplaylist", this.args.slice(0))
						} catch (ex) {
							return this.error(ex.message)
						}
						null === playlist.from && (playlist.from = "setplaylist"), Config.debug && this.debugView.modes({
							hidden: !0
						})
					}
				}), Macro.add("stopallaudio", {
					skipArgs: !0,
					handler: function() {
						SimpleAudio.select(":all")
							.stop(), Config.debug && this.debugView.modes({
								hidden: !0
							})
					}
				})
			} else Macro.add(["audio", "cacheaudio", "createaudiogroup", "createplaylist", "masteraudio", "playlist", "removeaudiogroup", "removeplaylist", "waitforaudio", "setplaylist", "stopallaudio"], {
				skipArgs: !0,
				handler: function() {
					Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			});
			Macro.add("done", {
				skipArgs: !0,
				tags: null,
				handler: function() {
					var contents = this.payload[0].contents.trim();
					"" !== contents && setTimeout(this.createShadowWrapper((function() {
						return $.wiki(contents)
					})), Engine.minDomActionDelay)
				}
			}), Macro.add("goto", {
				handler: function() {
					return 0 === this.args.length ? this.error("no passage specified") : (passage = "object" === _typeof(this.args[0]) ? this.args[0].link : this.args[0], Story.has(passage) ? void setTimeout((function() {
						return Engine.play(passage)
					}), Engine.minDomActionDelay) : this.error('passage "'.concat(passage, '" does not exist')));
					var passage
				}
			}), Macro.add("repeat", {
				isAsync: !0,
				tags: null,
				timers: new Set,
				t8nRe: /^(?:transition|t8n)$/,
				handler: function() {
					var delay, _this20 = this;
					if (0 === this.args.length) return this.error("no time value specified");
					try {
						delay = Math.max(Engine.minDomActionDelay, Util.fromCssTime(this.args[0]))
					} catch (ex) {
						return this.error(ex.message)
					}
					Config.debug && this.debugView.modes({
						block: !0
					});
					var transition = this.args.length > 1 && this.self.t8nRe.test(this.args[1]),
						$wrapper = jQuery(document.createElement("span"))
						.addClass("macro-".concat(this.name))
						.appendTo(this.output);
					this.self.registerInterval(this.createShadowWrapper((function() {
						var frag = document.createDocumentFragment();
						new Wikifier(frag, _this20.payload[0].contents);
						var $output = $wrapper;
						transition && ($output = jQuery(document.createElement("span"))
							.addClass("macro-repeat-insert macro-repeat-in")
							.appendTo($output)), $output.append(frag), transition && setTimeout((function() {
							return $output.removeClass("macro-repeat-in")
						}), Engine.minDomActionDelay)
					})), delay)
				},
				registerInterval: function(callback, delay) {
					var _this21 = this;
					if ("function" != typeof callback) throw new TypeError("callback parameter must be a function");
					var passage = State.passage,
						turn = State.turns,
						timers = this.timers,
						timerId = null;
					timerId = setInterval((function() {
						if (State.passage !== passage || State.turns !== turn) return clearInterval(timerId), void timers.delete(timerId);
						var timerIdCache;
						try {
							TempState.break = null, TempState.hasOwnProperty("repeatTimerId") && (timerIdCache = TempState.repeatTimerId), TempState.repeatTimerId = timerId, callback.call(_this21)
						} finally {
							void 0 !== timerIdCache ? TempState.repeatTimerId = timerIdCache : delete TempState.repeatTimerId, TempState.break = null
						}
					}), delay), timers.add(timerId), prehistory.hasOwnProperty("#repeat-timers-cleanup") || (prehistory["#repeat-timers-cleanup"] = function(task) {
						delete prehistory[task], timers.forEach((function(timerId) {
							return clearInterval(timerId)
						})), timers.clear()
					})
				}
			}), Macro.add("stop", {
				skipArgs: !0,
				handler: function() {
					if (!TempState.hasOwnProperty("repeatTimerId")) return this.error("must only be used in conjunction with its parent macro <<repeat>>");
					var timers = Macro.get("repeat")
						.timers,
						timerId = TempState.repeatTimerId;
					clearInterval(timerId), timers.delete(timerId), TempState.break = 2, Config.debug && this.debugView.modes({
						hidden: !0
					})
				}
			}), Macro.add("timed", {
				isAsync: !0,
				tags: ["next"],
				timers: new Set,
				t8nRe: /^(?:transition|t8n)$/,
				handler: function() {
					if (0 === this.args.length) return this.error("no time value specified in <<timed>>");
					var i, items = [];
					try {
						items.push({
							name: this.name,
							source: this.source,
							delay: Math.max(Engine.minDomActionDelay, Util.fromCssTime(this.args[0])),
							content: this.payload[0].contents
						})
					} catch (ex) {
						return this.error("".concat(ex.message, " in <<timed>>"))
					}
					if (this.payload.length > 1) try {
						var len;
						for (i = 1, len = this.payload.length; i < len; ++i) items.push({
							name: this.payload[i].name,
							source: this.payload[i].source,
							delay: 0 === this.payload[i].args.length ? items[items.length - 1].delay : Math.max(Engine.minDomActionDelay, Util.fromCssTime(this.payload[i].args[0])),
							content: this.payload[i].contents
						})
					} catch (ex) {
						return this.error("".concat(ex.message, " in <<next>> (#")
							.concat(i, ")"))
					}
					Config.debug && this.debugView.modes({
						block: !0
					});
					var transition = this.args.length > 1 && this.self.t8nRe.test(this.args[1]),
						$wrapper = jQuery(document.createElement("span"))
						.addClass("macro-".concat(this.name))
						.appendTo(this.output);
					this.self.registerTimeout(this.createShadowWrapper((function(item) {
						var frag = document.createDocumentFragment();
						new Wikifier(frag, item.content);
						var $output = $wrapper;
						Config.debug && "next" === item.name && ($output = jQuery(new DebugView($output[0], "macro", item.name, item.source)
							.output)), transition && ($output = jQuery(document.createElement("span"))
							.addClass("macro-timed-insert macro-timed-in")
							.appendTo($output)), $output.append(frag), transition && setTimeout((function() {
							return $output.removeClass("macro-timed-in")
						}), Engine.minDomActionDelay)
					})), items)
				},
				registerTimeout: function(callback, items) {
					if ("function" != typeof callback) throw new TypeError("callback parameter must be a function");
					var passage = State.passage,
						turn = State.turns,
						timers = this.timers,
						timerId = null,
						nextItem = items.shift();
					timerId = setTimeout((function worker() {
						if (timers.delete(timerId), State.passage === passage && State.turns === turn) {
							var curItem = nextItem;
							null != (nextItem = items.shift()) && (timerId = setTimeout(worker, nextItem.delay), timers.add(timerId)), callback.call(this, curItem)
						}
					}), nextItem.delay), timers.add(timerId), prehistory.hasOwnProperty("#timed-timers-cleanup") || (prehistory["#timed-timers-cleanup"] = function(task) {
						delete prehistory[task], timers.forEach((function(timerId) {
							return clearTimeout(timerId)
						})), timers.clear()
					})
				}
			}), Macro.add("widget", {
				tags: null,
				handler: function() {
					if (0 === this.args.length) return this.error("no widget name specified");
					var widgetCode, widgetName = this.args[0],
						isNonVoid = this.args.length > 1 && "container" === this.args[1];
					if (Macro.has(widgetName)) {
						if (!Macro.get(widgetName)
							.isWidget) return this.error('cannot clobber existing macro "'.concat(widgetName, '"'));
						Macro.delete(widgetName)
					}
					try {
						var widgetDef = {
							isWidget: !0,
							handler: (widgetCode = this.payload[0].contents, function() {
								var shadowStore = {};
								State.temporary.hasOwnProperty("args") && (shadowStore._args = State.temporary.args), State.temporary.args = _toConsumableArray(this.args), State.temporary.args.raw = this.args.raw, State.temporary.args.full = this.args.full, this.addShadow("_args"), isNonVoid && (State.temporary.hasOwnProperty("contents") && (shadowStore._contents = State.temporary.contents), State.temporary.contents = this.payload[0].contents, this.addShadow("_contents")), State.variables.hasOwnProperty("args") && (shadowStore.$args = State.variables.args), State.variables.args = State.temporary.args, this.addShadow("$args");
								try {
									var resFrag = document.createDocumentFragment(),
										errList = [];
									if (new Wikifier(resFrag, widgetCode), Array.from(resFrag.querySelectorAll(".error"))
										.forEach((function(errEl) {
											errList.push(errEl.textContent)
										})), 0 !== errList.length) return this.error("error".concat(errList.length > 1 ? "s" : "", " within widget code (")
										.concat(errList.join("; "), ")"));
									this.output.appendChild(resFrag)
								} catch (ex) {
									return this.error("cannot execute widget: ".concat(ex.message))
								} finally {
									shadowStore.hasOwnProperty("_args") ? State.temporary.args = shadowStore._args : delete State.temporary.args, isNonVoid && (shadowStore.hasOwnProperty("_contents") ? State.temporary.contents = shadowStore._contents : delete State.temporary.contents), shadowStore.hasOwnProperty("$args") ? State.variables.args = shadowStore.$args : delete State.variables.args
								}
							})
						};
						isNonVoid && (widgetDef.tags = []), Macro.add(widgetName, widgetDef), Config.debug && this.debugView.modes({
							hidden: !0
						})
					} catch (ex) {
						return this.error('cannot create widget macro "'.concat(widgetName, '": ')
							.concat(ex.message))
					}
				}
			})
		}();
		var Dialog = function() {
				var _$overlay = null,
					_$dialog = null,
					_$dialogTitle = null,
					_$dialogBody = null,
					_lastActive = null,
					_scrollbarWidth = 0,
					_dialogObserver = null;

				function dialogClose(ev) {
					return _$dialogBody.trigger(":dialogclosing"), jQuery(document)
						.off(".dialog-close"), _dialogObserver ? (_dialogObserver.disconnect(), _dialogObserver = null) : _$dialogBody.off(".dialog-resize"), jQuery(window)
						.off(".dialog-resize"), _$dialog.removeClass("open")
						.css({
							left: "",
							right: "",
							top: "",
							bottom: ""
						}), jQuery("#ui-bar,#story")
						.find("[tabindex=-2]")
						.removeAttr("aria-hidden")
						.attr("tabindex", 0), jQuery("body>[tabindex=-3]")
						.removeAttr("aria-hidden")
						.removeAttr("tabindex"), _$overlay.removeClass("open"), jQuery(document.documentElement)
						.removeAttr("data-dialog"), _$dialogTitle.empty(), _$dialogBody.empty()
						.removeClass(), null !== _lastActive && (jQuery(_lastActive)
							.focus(), _lastActive = null), ev && ev.data && "function" == typeof ev.data.closeFn && ev.data.closeFn(ev), _$dialogBody.trigger(":dialogclose"), _$dialogBody.trigger(":dialogclosed"), Dialog
				}

				function dialogIsOpen(classNames) {
					return _$dialog.hasClass("open") && (!classNames || classNames.splitOrEmpty(/\s+/)
						.every((function(cn) {
							return _$dialogBody.hasClass(cn)
						})))
				}

				function dialogOpen(options, closeFn) {
					_$dialogBody.trigger(":dialogopening");
					var top = jQuery.extend({
							top: 50
						}, options)
						.top;
					return dialogIsOpen() || (_lastActive = safeActiveElement()), jQuery(document.documentElement)
						.attr("data-dialog", "open"), _$overlay.addClass("open"), null !== _$dialogBody[0].querySelector("img") && _$dialogBody.imagesLoaded()
						.always((function() {
							return _resizeHandler({
								data: {
									top: top
								}
							})
						})), jQuery("body>:not(script,#store-area,tw-storydata,#ui-bar,#ui-overlay,#ui-dialog)")
						.attr("tabindex", -3)
						.attr("aria-hidden", !0), jQuery("#ui-bar,#story")
						.find("[tabindex]:not([tabindex^=-])")
						.attr("tabindex", -2)
						.attr("aria-hidden", !0), _$dialog.css(_calcPosition(top))
						.addClass("open")
						.focus(), jQuery(window)
						.on("resize.dialog-resize", null, {
							top: top
						}, jQuery.throttle(40, _resizeHandler)), Has.mutationObserver ? (_dialogObserver = new MutationObserver((function(mutations) {
							for (var i = 0; i < mutations.length; ++i)
								if ("childList" === mutations[i].type) {
									_resizeHandler({
										data: {
											top: top
										}
									});
									break
								}
						})))
						.observe(_$dialogBody[0], {
							childList: !0,
							subtree: !0
						}) : _$dialogBody.on("DOMNodeInserted.dialog-resize DOMNodeRemoved.dialog-resize", null, {
							top: top
						}, jQuery.throttle(40, _resizeHandler)), jQuery(document)
						.one("click.dialog-close", ".ui-close", {
							closeFn: closeFn
						}, (function(ev) {
							dialogClose(ev)
						}))
						.one("keypress.dialog-close", ".ui-close", (function(ev) {
							13 !== ev.which && 32 !== ev.which || jQuery(this)
								.trigger("click")
						})), _$dialogBody.trigger(":dialogopen"), _$dialogBody.trigger(":dialogopened"), Dialog
				}

				function _calcPosition(topPos) {
					var top = null != topPos ? topPos : 50,
						$parent = jQuery(window),
						dialogPos = {
							left: "",
							right: "",
							top: "",
							bottom: ""
						};
					_$dialog.css(dialogPos);
					var horzSpace = $parent.width() - _$dialog.outerWidth(!0) - 1,
						vertSpace = $parent.height() - _$dialog.outerHeight(!0) - 1;
					return horzSpace <= 32 + _scrollbarWidth && (vertSpace -= _scrollbarWidth), vertSpace <= 32 + _scrollbarWidth && (horzSpace -= _scrollbarWidth), dialogPos.left = dialogPos.right = horzSpace <= 32 ? 16 : horzSpace / 2 >> 0, dialogPos.top = vertSpace <= 32 ? dialogPos.bottom = 16 : vertSpace / 2 > top ? top : dialogPos.bottom = vertSpace / 2 >> 0, Object.keys(dialogPos)
						.forEach((function(key) {
							"" !== dialogPos[key] && (dialogPos[key] += "px")
						})), dialogPos
				}

				function _resizeHandler(ev) {
					var top = ev && ev.data && void 0 !== ev.data.top ? ev.data.top : 50;
					"block" === _$dialog.css("display") && (_$dialog.css({
						display: "none"
					}), _$dialog.css(jQuery.extend({
						display: ""
					}, _calcPosition(top))))
				}
				return Object.freeze(Object.defineProperties({}, {
					append: {
						value: function() {
							var _$dialogBody2;
							return (_$dialogBody2 = _$dialogBody)
								.append.apply(_$dialogBody2, arguments), Dialog
						}
					},
					body: {
						value: function() {
							return _$dialogBody.get(0)
						}
					},
					close: {
						value: dialogClose
					},
					init: {
						value: function() {
							{
								_scrollbarWidth = function() {
									var scrollbarWidth;
									try {
										var inner = document.createElement("p"),
											outer = document.createElement("div");
										inner.style.width = "100%", inner.style.height = "200px", outer.style.position = "absolute", outer.style.left = "0px", outer.style.top = "0px", outer.style.width = "100px", outer.style.height = "100px", outer.style.visibility = "hidden", outer.style.overflow = "hidden", outer.appendChild(inner), document.body.appendChild(outer);
										var w1 = inner.offsetWidth;
										outer.style.overflow = "auto";
										var w2 = inner.offsetWidth;
										w1 === w2 && (w2 = outer.clientWidth), document.body.removeChild(outer), scrollbarWidth = w1 - w2
									} catch (ex) {}
									return scrollbarWidth || 17
								}();
								var $elems = jQuery(document.createDocumentFragment())
									.append('<div id="ui-overlay" class="ui-close"></div><div id="ui-dialog" tabindex="0" role="dialog" aria-labelledby="ui-dialog-title"><div id="ui-dialog-titlebar"><h1 id="ui-dialog-title"></h1>' + '<button id="ui-dialog-close" class="ui-close" tabindex="0" aria-label="'.concat(L10n.get("close"), '"></button>') + '</div><div id="ui-dialog-body"></div></div>');
								_$overlay = jQuery($elems.find("#ui-overlay").get(0)), 
								_$dialog = jQuery($elems.find("#ui-dialog").get(0)), 
								_$dialogTitle = jQuery($elems.find("#ui-dialog-title").get(0)), 
								_$dialogBody = jQuery($elems.find("#ui-dialog-body").get(0)), 
								$elems.insertBefore("body>script#script-sugarcube")
							}
						}
					},
					isOpen: {
						value: dialogIsOpen
					},
					open: {
						value: dialogOpen
					},
					resize: {
						value: function(data) {
							return _resizeHandler("object" === _typeof(data) ? {
								data: data
							} : undefined)
						}
					},
					setup: {
						value: function(title, classNames) {
							return _$dialogBody.empty()
								.removeClass(), null != classNames && _$dialogBody.addClass(classNames), _$dialogTitle.empty()
								.append((null != title ? String(title) : "") || " "), _$dialogBody.get(0)
						}
					},
					wiki: {
						value: function() {
							var _$dialogBody3;
							return (_$dialogBody3 = _$dialogBody)
								.wiki.apply(_$dialogBody3, arguments), Dialog
						}
					},
					addClickHandler: {
						value: function(targets, options, startFn, doneFn, closeFn) {
							return jQuery(targets)
								.ariaClick((function(ev) {
									ev.preventDefault(), "function" == typeof startFn && startFn(ev), dialogOpen(options, closeFn), "function" == typeof doneFn && doneFn(ev)
								}))
						}
					}
				}))
			}(),
			Engine = function() {
				var States = Util.toEnum({
						Idle: "idle",
						Playing: "playing",
						Rendering: "rendering"
					}),
					_initDebugViews = [],
					_state = States.Idle,
					_lastPlay = null,
					_outlinePatch = null,
					_updating = null;

				function engineGo(offset) {
					var succeded = State.go(offset);
					return succeded && engineShow(), succeded
				}

				function engineShow() {
					return enginePlay(State.passage, !0)
				}

				function enginePlay(title, noHistory) {
					var passageReadyOutput, passageDoneOutput, passageTitle = title;
					if (_state = States.Playing, TempState = {}, State.clearTemporary(), "function" == typeof Config.navigation.override) try {
						var overrideTitle = Config.navigation.override(passageTitle);
						overrideTitle && (passageTitle = overrideTitle)
					} catch (ex) {}
					var passage = Story.get(passageTitle);
					if (jQuery.event.trigger({
							type: ":passageinit",
							passage: passage
						}), Object.keys(prehistory)
						.forEach((function(task) {
							"function" == typeof prehistory[task] && prehistory[task].call(passage, task)
						})), noHistory || State.create(passage.title), document.body.className && (document.body.className = ""), _lastPlay = Util.now(), Object.keys(predisplay)
						.forEach((function(task) {
							"function" == typeof predisplay[task] && predisplay[task].call(passage, task)
						})), Story.has("PassageReady")) try {
						passageReadyOutput = Wikifier.wikifyEval(Story.get("PassageReady")
							.text)
					} catch (ex) {
						console.error(ex), Alert.error("PassageReady", ex.message)
					}
					_state = States.Rendering;
					var dataTags = passage.tags.length > 0 ? passage.tags.join(" ") : null,
						passageEl = document.createElement("div");
					jQuery(passageEl)
						.attr({
							id: passage.domId,
							"data-passage": passage.title,
							"data-tags": dataTags
						})
						.addClass("passage ".concat(passage.className)), jQuery(document.body)
						.attr("data-tags", dataTags)
						.addClass(passage.className), jQuery(document.documentElement)
						.attr("data-tags", dataTags), jQuery.event.trigger({
							type: ":passagestart",
							content: passageEl,
							passage: passage
						}), Object.keys(prerender)
						.forEach((function(task) {
							"function" == typeof prerender[task] && prerender[task].call(passage, passageEl, task)
						})), Story.has("PassageHeader") && new Wikifier(passageEl, Story.get("PassageHeader")
							.processText()), passageEl.appendChild(passage.render()), Story.has("PassageFooter") && new Wikifier(passageEl, Story.get("PassageFooter")
							.processText()), jQuery.event.trigger({
							type: ":passagerender",
							content: passageEl,
							passage: passage
						}), Object.keys(postrender)
						.forEach((function(task) {
							"function" == typeof postrender[task] && postrender[task].call(passage, passageEl, task)
						}));
					var debugView, containerEl = document.getElementById("passages");
					if (containerEl.hasChildNodes() && ("number" == typeof Config.passages.transitionOut || "string" == typeof Config.passages.transitionOut && "" !== Config.passages.transitionOut && Has.transitionEndEvent ? _toConsumableArray(containerEl.childNodes)
							.forEach((function(outgoing) {
								var $outgoing = jQuery(outgoing);
								if (outgoing.nodeType === Node.ELEMENT_NODE && $outgoing.hasClass("passage")) {
									if ($outgoing.hasClass("passage-out")) return;
									$outgoing.attr({
											id: "out-".concat($outgoing.attr("id")),
											"aria-live": "off"
										})
										.addClass("passage-out"), "string" == typeof Config.passages.transitionOut ? $outgoing.on(Has.transitionEndEvent, (function(ev) {
											ev.propertyName === Config.passages.transitionOut && $outgoing.remove()
										})) : setTimeout((function() {
											return $outgoing.remove()
										}), Math.max(40, Config.passages.transitionOut))
								} else $outgoing.remove()
							})) : jQuery(containerEl)
							.empty()), jQuery(passageEl)
						.addClass("passage-in")
						.appendTo(containerEl), setTimeout((function() {
							return jQuery(passageEl)
								.removeClass("passage-in")
						}), 40), Story.has("StoryDisplayTitle") ? null === _updating && Config.ui.updateStoryElements || setDisplayTitle(Story.get("StoryDisplayTitle")
							.processText()) : Config.passages.displayTitles && passage.title !== Config.passages.start && (document.title = "".concat(passage.title, " | ")
							.concat(Story.title)), window.scroll(0, 0), _state = States.Playing, Story.has("PassageDone")) try {
						passageDoneOutput = Wikifier.wikifyEval(Story.get("PassageDone")
							.text)
					} catch (ex) {
						console.error(ex), Alert.error("PassageDone", ex.message)
					}(jQuery.event.trigger({
							type: ":passagedisplay",
							content: passageEl,
							passage: passage
						}), Object.keys(postdisplay)
						.forEach((function(task) {
							"function" == typeof postdisplay[task] && postdisplay[task].call(passage, task)
						})), null !== _updating ? _updating.forEach((function(pair) {
							jQuery(pair.element)
								.empty(), new Wikifier(pair.element, Story.get(pair.passage)
									.processText()
									.trim())
						})) : Config.ui.updateStoryElements && UIBar.update(), Config.debug) && (null != passageReadyOutput && ((debugView = new DebugView(document.createDocumentFragment(), "special", "PassageReady", "PassageReady"))
							.modes({
								hidden: !0
							}), debugView.append(passageReadyOutput), jQuery(passageEl)
							.prepend(debugView.output)), null != passageDoneOutput && ((debugView = new DebugView(document.createDocumentFragment(), "special", "PassageDone", "PassageDone"))
							.modes({
								hidden: !0
							}), debugView.append(passageDoneOutput), jQuery(passageEl)
							.append(debugView.output)), 1 === State.turns && _initDebugViews.length > 0 && jQuery(passageEl)
						.prepend(_initDebugViews));
					switch (jQuery("#story")
						.find("a[href]:not(.link-external)")
						.addClass("link-external")
						.end()
						.find("a,link,button,input,select,textarea")
						.not("[tabindex]")
						.attr("tabindex", 0), _typeof(Config.saves.autosave)) {
						case "boolean":
							Config.saves.autosave && Save.autosave.save();
							break;
						case "object":
							passage.tags.some((function(tag) {
								return Config.saves.autosave.includes(tag)
							})) && Save.autosave.save();
							break;
						case "function":
							Config.saves.autosave() && Save.autosave.save()
					}
					return jQuery.event.trigger({
						type: ":passageend",
						content: passageEl,
						passage: passage
					}), _state = States.Idle, _lastPlay = Util.now(), passageEl
				}

				function _hideOutlines() {
					_outlinePatch.set("*:focus{outline:none;}")
				}
				return Object.freeze(Object.defineProperties({}, {
					States: {
						value: States
					},
					minDomActionDelay: {
						value: 40
					},
					init: {
						value: function() {
							var _lastOutlineEvent;
							jQuery("#init-no-js,#init-lacking")
								.remove(),
								function() {
									var $elems = jQuery(document.createDocumentFragment()),
										markup = Story.has("StoryInterface") && Story.get("StoryInterface")
										.text.trim();
									if (markup) {
										UIBar.destroy(), jQuery(document.head)
											.find("#style-core-display")
											.remove(), $elems.append(markup);
										var $passages = $elems.find("#passages");
										if (0 === $passages.length) throw new Error('no element with ID "passages" found within "StoryInterface" special passage');
										$passages.empty()
											.not("[aria-live]")
											.attr("aria-live", "polite")
											.end(), $elems.find("[data-init-passage]")
											.each((function(i, el) {
												if ("passages" === el.id) throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(), ' id="passages"> must not contain a "data-init-passage" content attribute'));
												var passage = el.getAttribute("data-init-passage")
													.trim();
												if (el.hasAttribute("data-passage")) throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(), ' data-init-passage="')
													.concat(passage, '"> must not contain a "data-passage" content attribute'));
												if (null !== el.firstElementChild) throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(), ' data-init-passage="')
													.concat(passage, '"> contains child elements'));
												Story.has(passage) && jQuery(el)
													.empty()
													.wiki(Story.get(passage)
														.processText()
														.trim())
											}));
										var updating = [];
										$elems.find("[data-passage]")
											.each((function(i, el) {
												if ("passages" === el.id) throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(), ' id="passages"> must not contain a "data-passage" content attribute'));
												var passage = el.getAttribute("data-passage")
													.trim();
												if (null !== el.firstElementChild) throw new Error('"StoryInterface" element <'.concat(el.nodeName.toLowerCase(), ' data-passage="')
													.concat(passage, '"> contains child elements'));
												Story.has(passage) && updating.push({
													passage: passage,
													element: el
												})
											})), updating.length > 0 && (_updating = updating), Config.ui.updateStoryElements = !1
									} else $elems.append('<div id="story" role="main"><div id="passages" aria-live="polite"></div></div>');
									$elems.insertBefore("body>script#script-sugarcube")
								}(), _outlinePatch = new StyleWrapper(jQuery(document.createElement("style"))
									.attr({
										id: "style-aria-outlines",
										type: "text/css"
									})
									.appendTo(document.head)
									.get(0)), _hideOutlines(), jQuery(document)
								.on("mousedown.aria-outlines keydown.aria-outlines", (function(ev) {
									ev.type !== _lastOutlineEvent && (_lastOutlineEvent = ev.type, "keydown" === ev.type ? _outlinePatch.clear() : _hideOutlines())
								}))
						}
					},
					start: {
						value: function() {
							if (Story.getAllInit()
								.forEach((function(passage) {
									try {
										var debugBuffer = Wikifier.wikifyEval(passage.text);
										if (Config.debug) {
											var debugView = new DebugView(document.createDocumentFragment(), "special", "".concat(passage.title, " [init-tagged]"), "".concat(passage.title, " [init-tagged]"));
											debugView.modes({
												hidden: !0
											}), debugView.append(debugBuffer), _initDebugViews.push(debugView.output)
										}
									} catch (ex) {
										console.error(ex), Alert.error("".concat(passage.title, " [init-tagged]"), "object" === _typeof(ex) ? ex.message : ex)
									}
								})), Story.has("StoryInit")) try {
								var debugBuffer = Wikifier.wikifyEval(Story.get("StoryInit")
									.text);
								if (Config.debug) {
									var debugView = new DebugView(document.createDocumentFragment(), "special", "StoryInit", "StoryInit");
									debugView.modes({
										hidden: !0
									}), debugView.append(debugBuffer), _initDebugViews.push(debugView.output)
								}
							} catch (ex) {
								console.error(ex), Alert.error("StoryInit", "object" === _typeof(ex) ? ex.message : ex)
							}
							if (null == Config.passages.start) throw new Error("starting passage not selected");
							if (!Story.has(Config.passages.start)) throw new Error('starting passage ("'.concat(Config.passages.start, '") not found'));
							if (jQuery(document.documentElement)
								.focus(), State.restore()) engineShow();
							else {
								var loadStart = !0;
								switch (_typeof(Config.saves.autoload)) {
									case "boolean":
										Config.saves.autoload && Save.autosave.ok() && Save.autosave.has() && (loadStart = !Save.autosave.load());
										break;
									case "string":
										"prompt" === Config.saves.autoload && Save.autosave.ok() && Save.autosave.has() && (loadStart = !1, UI.buildAutoload(), Dialog.open());
										break;
									case "function":
										Save.autosave.ok() && Save.autosave.has() && Config.saves.autoload() && (loadStart = !Save.autosave.load())
								}
								loadStart && enginePlay(Config.passages.start)
							}
						}
					},
					restart: {
						value: function() {
							LoadScreen.show(), window.scroll(0, 0), State.reset(), jQuery.event.trigger(":enginerestart"), window.location.reload()
						}
					},
					state: {
						get: function() {
							return _state
						}
					},
					isIdle: {
						value: function() {
							return _state === States.Idle
						}
					},
					isPlaying: {
						value: function() {
							return _state !== States.Idle
						}
					},
					isRendering: {
						value: function() {
							return _state === States.Rendering
						}
					},
					lastPlay: {
						get: function() {
							return _lastPlay
						}
					},
					goTo: {
						value: function(idx) {
							var succeded = State.goTo(idx);
							return succeded && engineShow(), succeded
						}
					},
					go: {
						value: engineGo
					},
					backward: {
						value: function() {
							return engineGo(-1)
						}
					},
					forward: {
						value: function() {
							return engineGo(1)
						}
					},
					show: {
						value: engineShow
					},
					play: {
						value: enginePlay
					},
					display: {
						value: function(title, link, option) {
							var noHistory = !1;
							switch (option) {
								case undefined:
									break;
								case "replace":
								case "back":
									noHistory = !0;
									break;
								default:
									throw new Error('Engine.display option parameter called with obsolete value "'.concat(option, '"; please notify the developer'))
							}
							enginePlay(title, noHistory)
						}
					}
				}))
			}(),
			Passage = (_tagsToSkip = /^(?:debug|nobr|passage|widget|twine\..*)$/i, function() {
				function Passage(title, el) {
					var _this22 = this;
					_classCallCheck(this, Passage), Object.defineProperties(this, {
						title: {
							value: Util.unescape(title)
						},
						element: {
							value: el || null
						},
						tags: {
							value: Object.freeze(el && el.hasAttribute("tags") ? Array.from(new Set(el.getAttribute("tags")
								.trim()
								.splitOrEmpty(/\s+/))) : [])
						},
						_excerpt: {
							writable: !0,
							value: null
						}
					}), Object.defineProperties(this, {
						domId: {
							value: "passage-".concat(Util.slugify(this.title))
						},
						classes: {
							value: Object.freeze(0 === this.tags.length ? [] : _this22.tags.filter((function(tag) {
									return !_tagsToSkip.test(tag)
								}))
								.map((function(tag) {
									return Util.slugify(tag)
								})))
						}
					})
				}
				return _createClass(Passage, [{
					key: "className",
					get: function() {
						return this.classes.join(" ")
					}
				}, {
					key: "text",
					get: function() {
						if (null == this.element) {
							var passage = Util.escapeMarkup(this.title),
								mesg = "".concat(L10n.get("errorTitle"), ": ")
								.concat(L10n.get("errorNonexistentPassage", {
									passage: passage
								}));
							return '<div class="error-view"><span class="error">'.concat(mesg, "</span></div>")
						}
						return this.element.textContent.replace(/\r/g, "")
					}
				}, {
					key: "description",
					value: function() {
						var descriptions = Config.passages.descriptions;
						switch (_typeof(descriptions)) {
							case "boolean":
								if (descriptions) return this.title;
								break;
							case "object":
								if (descriptions.hasOwnProperty(this.title)) return descriptions[this.title];
								break;
							case "function":
								var result = descriptions.call(this);
								if (result) return result
						}
						return null === this._excerpt && (this._excerpt = Passage.getExcerptFromText(this.text)), this._excerpt
					}
				}, {
					key: "processText",
					value: function() {
						if (null == this.element) return this.text;
						if (this.tags.includes("Twine.image")) return "[img[".concat(this.text, "]]");
						var processed = this.text;
						return Config.passages.onProcess && (processed = Config.passages.onProcess.call(null, {
							title: this.title,
							tags: this.tags,
							text: processed
						})), (Config.passages.nobr || this.tags.includes("nobr")) && (processed = processed.replace(/^\n+|\n+$/g, "")
							.replace(/\n+/g, " ")), processed
					}
				}, {
					key: "render",
					value: function(options) {
						var frag = document.createDocumentFragment();
						return new Wikifier(frag, this.processText(), options), this._excerpt = Passage.getExcerptFromNode(frag), frag
					}
				}], [{
					key: "getExcerptFromNode",
					value: function(node, count) {
						if (!node.hasChildNodes()) return "";
						var excerpt = node.textContent.trim();
						if ("" !== excerpt) {
							var excerptRe = new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count > 0 ? count - 1 : 7, "})"));
							excerpt = excerpt.replace(/\s+/g, " ")
								.match(excerptRe)
						}
						return excerpt ? "".concat(excerpt[1], "…") : "…"
					}
				}, {
					key: "getExcerptFromText",
					value: function(text, count) {
						if ("" === text) return "";
						var excerptRe = new RegExp("(\\S+(?:\\s+\\S+){0,".concat(count > 0 ? count - 1 : 7, "})")),
							excerpt = text.replace(/<<.*?>>/g, " ")
							.replace(/<.*?>/g, " ")
							.trim()
							.replace(/^\s*\|.*\|.*?$/gm, "")
							.replace(/\[[<>]?img\[[^\]]*\]\]/g, "")
							.replace(/\[\[([^|\]]*?)(?:(?:\||->|<-)[^\]]*)?\]\]/g, "$1")
							.replace(/^\s*!+(.*?)$/gm, "$1")
							.replace(/'{2}|\/{2}|_{2}|@{2}/g, "")
							.trim()
							.replace(/\s+/g, " ")
							.match(excerptRe);
						return excerpt ? "".concat(excerpt[1], "…") : "…"
					}
				}]), Passage
			}()),
			_tagsToSkip, Save = function() {
				var Type = Util.toEnum({
						Autosave: "autosave",
						Disk: "disk",
						Serialize: "serialize",
						Slot: "slot"
					}),
					_slotsUBound = -1,
					_onLoadHandlers = new Set,
					_onSaveHandlers = new Set;

				function savesObjGet() {
					var saves = storage.get("saves");
					return null === saves ? {
						autosave: null,
						slots: _appendSlots([], Config.saves.slots)
					} : saves
				}

				function savesObjClear() {
					return storage.delete("saves"), !0
				}

				function autosaveOk() {
					return "cookie" !== storage.name && void 0 !== Config.saves.autosave
				}

				function slotsOk() {
					return "cookie" !== storage.name && -1 !== _slotsUBound
				}

				function slotsCount() {
					if (!slotsOk()) return 0;
					for (var saves = savesObjGet(), count = 0, i = 0, iend = saves.slots.length; i < iend; ++i) null !== saves.slots[i] && ++count;
					return count
				}

				function _appendSlots(array, num) {
					for (var i = 0; i < num; ++i) array.push(null);
					return array
				}

				function _savesObjIsEmpty(saves) {
					for (var slots = saves.slots, isSlotsEmpty = !0, i = 0, iend = slots.length; i < iend; ++i)
						if (null !== slots[i]) {
							isSlotsEmpty = !1;
							break
						} return null === saves.autosave && isSlotsEmpty
				}

				function _savesObjSave(saves) {
					return _savesObjIsEmpty(saves) ? (storage.delete("saves"), !0) : storage.set("saves", saves)
				}

				function _savesObjUpdate(saveObj) {
					if (null == saveObj || "object" !== _typeof(saveObj)) return !1;
					var updated = !1;
					return saveObj.hasOwnProperty("state") && saveObj.state.hasOwnProperty("delta") && saveObj.state.hasOwnProperty("index") || (saveObj.hasOwnProperty("data") ? (delete saveObj.mode, saveObj.state = {
						delta: State.deltaEncode(saveObj.data)
					}, delete saveObj.data) : saveObj.state.hasOwnProperty("delta") ? saveObj.state.hasOwnProperty("index") || delete saveObj.state.mode : (delete saveObj.state.mode, saveObj.state.delta = State.deltaEncode(saveObj.state.history), delete saveObj.state.history), saveObj.state.index = saveObj.state.delta.length - 1, updated = !0), saveObj.state.hasOwnProperty("rseed") && (saveObj.state.seed = saveObj.state.rseed, delete saveObj.state.rseed, saveObj.state.delta.forEach((function(_, i, delta) {
						delta[i].hasOwnProperty("rcount") && (delta[i].pull = delta[i].rcount, delete delta[i].rcount)
					})), updated = !0), (saveObj.state.hasOwnProperty("expired") && "number" == typeof saveObj.state.expired || saveObj.state.hasOwnProperty("unique") || saveObj.state.hasOwnProperty("last")) && (saveObj.state.hasOwnProperty("expired") && "number" == typeof saveObj.state.expired && delete saveObj.state.expired, (saveObj.state.hasOwnProperty("unique") || saveObj.state.hasOwnProperty("last")) && (saveObj.state.expired = [], saveObj.state.hasOwnProperty("unique") && (saveObj.state.expired.push(saveObj.state.unique), delete saveObj.state.unique), saveObj.state.hasOwnProperty("last") && (saveObj.state.expired.push(saveObj.state.last), delete saveObj.state.last)), updated = !0), updated
				}

				function _marshal(supplemental, details) {
					if (null != supplemental && "object" !== _typeof(supplemental)) throw new Error("supplemental parameter must be an object");
					var saveObj = Object.assign({}, supplemental, {
						id: Config.saves.id,
						state: State.marshalForSave()
					});
					return Config.saves.version && (saveObj.version = Config.saves.version), _onSaveHandlers.forEach((function(fn) {
						return fn(saveObj, details)
					})), saveObj.state.delta = State.deltaEncode(saveObj.state.history), delete saveObj.state.history, saveObj
				}

				function _unmarshal(saveObj) {
					try {
						if (_savesObjUpdate(saveObj), !saveObj || !saveObj.hasOwnProperty("id") || !saveObj.hasOwnProperty("state")) throw new Error(L10n.get("errorSaveMissingData"));
						if (saveObj.state.history = State.deltaDecode(saveObj.state.delta), delete saveObj.state.delta, _onLoadHandlers.forEach((function(fn) {
							return fn(saveObj)
						})), saveObj.id !== Config.saves.id) throw new Error(L10n.get("errorSaveIdMismatch"));
						State.unmarshalForSave(saveObj.state), Engine.show()
					} catch (ex) {
						return UI.alert("".concat(ex.message.toUpperFirst(), ".</p><p>")
							.concat(L10n.get("aborting"), ".")), !1
					}
					return !0
				}
				return Object.freeze(Object.defineProperties({}, {
					init: {
						value: function() {
							if ("cookie" === storage.name) return savesObjClear(), Config.saves.autoload = undefined, Config.saves.autosave = undefined, Config.saves.slots = 0, !1;
							var saves = savesObjGet(),
								updated = !1;
							Array.isArray(saves) && (saves = {
								autosave: null,
								slots: saves
							}, updated = !0), Config.saves.slots !== saves.slots.length && (Config.saves.slots < saves.slots.length ? (saves.slots.reverse(), saves.slots = saves.slots.filter((function(val) {
								return !(null === val && this.count > 0) || (--this.count, !1)
							}), {
								count: saves.slots.length - Config.saves.slots
							}), saves.slots.reverse()) : Config.saves.slots > saves.slots.length && _appendSlots(saves.slots, Config.saves.slots - saves.slots.length), updated = !0), _savesObjUpdate(saves.autosave) && (updated = !0);
							for (var i = 0; i < saves.slots.length; ++i) _savesObjUpdate(saves.slots[i]) && (updated = !0);
							return _savesObjIsEmpty(saves) && (storage.delete("saves"), updated = !1), updated && _savesObjSave(saves), _slotsUBound = saves.slots.length - 1, !0
						}
					},
					get: {
						value: savesObjGet
					},
					clear: {
						value: savesObjClear
					},
					ok: {
						value: function() {
							return autosaveOk() || slotsOk()
						}
					},
					autosave: {
						value: Object.freeze(Object.defineProperties({}, {
							ok: {
								value: autosaveOk
							},
							has: {
								value: function() {
									return null !== savesObjGet()
										.autosave
								}
							},
							get: {
								value: function() {
									return savesObjGet()
										.autosave
								}
							},
							load: {
								value: function() {
									var saves = savesObjGet();
									return null !== saves.autosave && _unmarshal(saves.autosave)
								}
							},
							save: {
								value: function(title, metadata) {
									if ("function" == typeof Config.saves.isAllowed && !Config.saves.isAllowed()) return !1;
									var saves = savesObjGet(),
										supplemental = {
											title: title || Story.get(State.passage)
												.description(),
											date: Date.now()
										};
									return null != metadata && (supplemental.metadata = metadata), saves.autosave = _marshal(supplemental, {
										type: Type.Autosave
									}), _savesObjSave(saves)
								}
							},
							delete: {
								value: function() {
									var saves = savesObjGet();
									return saves.autosave = null, _savesObjSave(saves)
								}
							}
						}))
					},
					slots: {
						value: Object.freeze(Object.defineProperties({}, {
							ok: {
								value: slotsOk
							},
							length: {
								get: function() {
									return _slotsUBound + 1
								}
							},
							isEmpty: {
								value: function() {
									return 0 === slotsCount()
								}
							},
							count: {
								value: slotsCount
							},
							has: {
								value: function(slot) {
									if (slot < 0 || slot > _slotsUBound) return !1;
									var saves = savesObjGet();
									return !(slot >= saves.slots.length || null === saves.slots[slot])
								}
							},
							get: {
								value: function(slot) {
									if (slot < 0 || slot > _slotsUBound) return null;
									var saves = savesObjGet();
									return slot >= saves.slots.length ? null : saves.slots[slot]
								}
							},
							load: {
								value: function(slot) {
									if (slot < 0 || slot > _slotsUBound) return !1;
									var saves = savesObjGet();
									return !(slot >= saves.slots.length || null === saves.slots[slot]) && _unmarshal(saves.slots[slot])
								}
							},
							save: {
								value: function(slot, title, metadata) {
									if ("function" == typeof Config.saves.isAllowed && !Config.saves.isAllowed()) return Dialog.isOpen() ? $(document)
										.one(":dialogclosed", (function() {
											return UI.alert(L10n.get("savesDisallowed"))
										})) : UI.alert(L10n.get("savesDisallowed")), !1;
									if (slot < 0 || slot > _slotsUBound) return !1;
									var saves = savesObjGet();
									if (slot >= saves.slots.length) return !1;
									var supplemental = {
										title: title || Story.get(State.passage)
											.description(),
										date: Date.now()
									};
									return null != metadata && (supplemental.metadata = metadata), saves.slots[slot] = _marshal(supplemental, {
										type: Type.Slot
									}), _savesObjSave(saves)
								}
							},
							delete: {
								value: function(slot) {
									if (slot < 0 || slot > _slotsUBound) return !1;
									var saves = savesObjGet();
									return !(slot >= saves.slots.length) && (saves.slots[slot] = null, _savesObjSave(saves))
								}
							}
						}))
					},
					export: {
						value: function(filename, metadata) {
							if ("function" != typeof Config.saves.isAllowed || Config.saves.isAllowed()) {
								var str, now, MM, DD, hh, mm, ss, baseName = null == filename ? Story.domId : (str = filename, Util.sanitizeFilename(str)
										.replace(/[_\s\u2013\u2014-]+/g, "-")),
									saveName = "".concat(baseName, "-")
									.concat((now = new Date, MM = now.getMonth() + 1, DD = now.getDate(), hh = now.getHours(), mm = now.getMinutes(), ss = now.getSeconds(), MM < 10 && (MM = "0".concat(MM)), DD < 10 && (DD = "0".concat(DD)), hh < 10 && (hh = "0".concat(hh)), mm < 10 && (mm = "0".concat(mm)), ss < 10 && (ss = "0".concat(ss)), "".concat(now.getFullYear())
										.concat(MM)
										.concat(DD, "-")
										.concat(hh)
										.concat(mm)
										.concat(ss)), ".save"),
									supplemental = null == metadata ? {} : {
										metadata: metadata
									},
									saveObj = LZString.compressToBase64(JSON.stringify(_marshal(supplemental, {
										type: Type.Disk
									})));
								saveAs(new Blob([saveObj], {
									type: "text/plain;charset=UTF-8"
								}), saveName)
							} else Dialog.isOpen() ? $(document)
								.one(":dialogclosed", (function() {
									return UI.alert(L10n.get("savesDisallowed"))
								})) : UI.alert(L10n.get("savesDisallowed"))
						}
					},
					import: {
						value: function(event) {
							var file = event.target.files[0],
								reader = new FileReader;
							jQuery(reader)
								.one("loadend", (function() {
									if (reader.error) {
										var ex = reader.error;
										UI.alert("".concat(L10n.get("errorSaveDiskLoadFailed")
												.toUpperFirst(), " (")
											.concat(ex.name, ": ")
											.concat(ex.message, ").</p><p>")
											.concat(L10n.get("aborting"), "."))
									} else {
										var saveObj;
										try {
											saveObj = JSON.parse(/\.json$/i.test(file.name) || /^\{/.test(reader.result) ? reader.result : LZString.decompressFromBase64(reader.result))
										} catch (ex) {}
										_unmarshal(saveObj)
									}
								})), reader.readAsText(file)
						}
					},
					serialize: {
						value: function(metadata) {
							if ("function" == typeof Config.saves.isAllowed && !Config.saves.isAllowed()) return Dialog.isOpen() ? $(document)
								.one(":dialogclosed", (function() {
									return UI.alert(L10n.get("savesDisallowed"))
								})) : UI.alert(L10n.get("savesDisallowed")), null;
							var supplemental = null == metadata ? {} : {
								metadata: metadata
							};
							return LZString.compressToBase64(JSON.stringify(_marshal(supplemental, {
								type: Type.Serialize
							})))
						}
					},
					deserialize: {
						value: function(base64Str) {
							var saveObj;
							try {
								saveObj = JSON.parse(LZString.decompressFromBase64(base64Str))
							} catch (ex) {}
							return _unmarshal(saveObj) ? saveObj.metadata : null
						}
					},
					onLoad: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: function(handler) {
									var valueType = Util.getType(handler);
									if ("function" !== valueType) throw new TypeError("Save.onLoad.add handler parameter must be a function (received: ".concat(valueType, ")"));
									_onLoadHandlers.add(handler)
								}
							},
							clear: {
								value: function() {
									_onLoadHandlers.clear()
								}
							},
							delete: {
								value: function(handler) {
									return _onLoadHandlers.delete(handler)
								}
							},
							size: {
								get: function() {
									return _onLoadHandlers.size
								}
							}
						}))
					},
					onSave: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: function(handler) {
									var valueType = Util.getType(handler);
									if ("function" !== valueType) throw new TypeError("Save.onSave.add handler parameter must be a function (received: ".concat(valueType, ")"));
									_onSaveHandlers.add(handler)
								}
							},
							clear: {
								value: function() {
									_onSaveHandlers.clear()
								}
							},
							delete: {
								value: function(handler) {
									return _onSaveHandlers.delete(handler)
								}
							},
							size: {
								get: function() {
									return _onSaveHandlers.size
								}
							}
						}))
					}
				}))
			}(),
			Setting = function() {
				var Types = Util.toEnum({
						Header: 0,
						Toggle: 1,
						List: 2,
						Range: 3
					}),
					_definitions = [];

				function settingsCreate() {
					return Object.create(null)
				}

				function settingsSave() {
					var savedSettings = settingsCreate();
					return Object.keys(settings)
						.length > 0 && _definitions.filter((function(def) {
							return def.type !== Types.Header && settings[def.name] !== def.default
						}))
						.forEach((function(def) {
							return savedSettings[def.name] = settings[def.name]
						})), 0 === Object.keys(savedSettings)
						.length ? (storage.delete("settings"), !0) : storage.set("settings", savedSettings)
				}

				function settingsLoad() {
					var defaultSettings = settingsCreate(),
						loadedSettings = storage.get("settings") || settingsCreate();
					_definitions.filter((function(def) {
							return def.type !== Types.Header
						}))
						.forEach((function(def) {
							return defaultSettings[def.name] = def.default
						})), window.SugarCube.settings = settings = Object.assign(defaultSettings, loadedSettings)
				}

				function settingsClear() {
					return window.SugarCube.settings = settings = settingsCreate(), storage.delete("settings"), !0
				}

				function definitionsAdd(type, name, def) {
					if (arguments.length < 3) {
						var errors = [];
						throw arguments.length < 1 && errors.push("type"), arguments.length < 2 && errors.push("name"), arguments.length < 3 && errors.push("definition"), new Error("missing parameters, no ".concat(errors.join(" or "), " specified"))
					}
					if ("object" !== _typeof(def)) throw new TypeError("definition parameter must be an object");
					if (definitionsHas(name)) throw new Error('cannot clobber existing setting "'.concat(name, '"'));
					var str, pos, definition = {
						type: type,
						name: name,
						label: "string" == typeof def.label ? def.label.trim() : ""
					};
					if ("string" == typeof def.desc) {
						var desc = def.desc.trim();
						"" !== desc && (definition.desc = desc)
					}
					switch (type) {
						case Types.Header:
							break;
						case Types.Toggle:
							definition.default = !!def.default;
							break;
						case Types.List:
							if (!def.hasOwnProperty("list")) throw new Error("no list specified");
							if (!Array.isArray(def.list)) throw new TypeError("list must be an array");
							if (0 === def.list.length) throw new Error("list must not be empty");
							if (definition.list = Object.freeze(def.list), null == def.default) definition.default = def.list[0];
							else {
								var defaultIndex = def.list.indexOf(def.default);
								if (-1 === defaultIndex) throw new Error("list does not contain default");
								definition.default = def.list[defaultIndex]
							}
							break;
						case Types.Range:
							if (!def.hasOwnProperty("min")) throw new Error("no min specified");
							if ("number" != typeof def.min || Number.isNaN(def.min) || !Number.isFinite(def.min)) throw new TypeError("min must be a finite number");
							if (!def.hasOwnProperty("max")) throw new Error("no max specified");
							if ("number" != typeof def.max || Number.isNaN(def.max) || !Number.isFinite(def.max)) throw new TypeError("max must be a finite number");
							if (!def.hasOwnProperty("step")) throw new Error("no step specified");
							if ("number" != typeof def.step || Number.isNaN(def.step) || !Number.isFinite(def.step) || def.step <= 0) throw new TypeError("step must be a finite number greater than zero");
							var stepValidate = function(value) {
									if (fracDigits > 0) {
										var ma = Number("".concat(def.min, "e")
												.concat(fracDigits)),
											sa = Number("".concat(def.step, "e")
												.concat(fracDigits)),
											_va = Number("".concat(value, "e")
												.concat(fracDigits)) - ma;
										return Number("".concat(_va - _va % sa + ma, "e-")
											.concat(fracDigits))
									}
									var va = value - def.min;
									return va - va % def.step + def.min
								},
								fracDigits = (str = String(def.step), -1 === (pos = str.lastIndexOf(".")) ? 0 : str.length - pos - 1);
							if (stepValidate(def.max) !== def.max) throw new RangeError("max (".concat(def.max, ") is not a multiple of the step (")
								.concat(def.step, ") plus the min (")
								.concat(def.min, ")"));
							if (definition.max = def.max, definition.min = def.min, definition.step = def.step, null == def.default) definition.default = def.max;
							else {
								if ("number" != typeof def.default || Number.isNaN(def.default) || !Number.isFinite(def.default)) throw new TypeError("default must be a finite number");
								if (def.default < def.min) throw new RangeError("default (".concat(def.default, ") is less than min (")
									.concat(def.min, ")"));
								if (def.default > def.max) throw new RangeError("default (".concat(def.default, ") is greater than max (")
									.concat(def.max, ")"));
								definition.default = def.default
							}
							break;
						default:
							throw new Error("unknown Setting type: ".concat(type))
					}
					"function" == typeof def.onInit && (definition.onInit = Object.freeze(def.onInit)), "function" == typeof def.onChange && (definition.onChange = Object.freeze(def.onChange)), _definitions.push(Object.freeze(definition))
				}

				function definitionsHas(name) {
					return _definitions.some((function(definition) {
						return definition.name === name
					}))
				}

				function definitionsGet(name) {
					return _definitions.find((function(definition) {
						return definition.name === name
					}))
				}
				return Object.freeze(Object.defineProperties({}, {
					Types: {
						value: Types
					},
					init: {
						value: function() {
							if (storage.has("options")) {
								var old = storage.get("options");
								null !== old && (window.SugarCube.settings = settings = Object.assign(settingsCreate(), old)), settingsSave(), storage.delete("options")
							}
							settingsLoad(), _definitions.forEach((function(def) {
								if (def.hasOwnProperty("onInit")) {
									var thisArg = {
										name: def.name,
										value: settings[def.name],
										default: def.default
									};
									def.hasOwnProperty("list") && (thisArg.list = def.list), def.onInit.call(thisArg)
								}
							}))
						}
					},
					create: {
						value: settingsCreate
					},
					save: {
						value: settingsSave
					},
					load: {
						value: settingsLoad
					},
					clear: {
						value: settingsClear
					},
					reset: {
						value: function(name) {
							if (0 === arguments.length) settingsClear(), settingsLoad();
							else {
								if (null == name || !definitionsHas(name)) throw new Error('nonexistent setting "'.concat(name, '"'));
								var def = definitionsGet(name);
								def.type !== Types.Header && (settings[name] = def.default)
							}
							return settingsSave()
						}
					},
					forEach: {
						value: function(callback, thisArg) {
							_definitions.forEach(callback, thisArg)
						}
					},
					add: {
						value: definitionsAdd
					},
					addHeader: {
						value: function(name, desc) {
							definitionsAdd(Types.Header, name, {
								desc: desc
							})
						}
					},
					addToggle: {
						value: function() {
							for (var _len16 = arguments.length, args = new Array(_len16), _key16 = 0; _key16 < _len16; _key16++) args[_key16] = arguments[_key16];
							definitionsAdd.apply(void 0, [Types.Toggle].concat(args))
						}
					},
					addList: {
						value: function() {
							for (var _len17 = arguments.length, args = new Array(_len17), _key17 = 0; _key17 < _len17; _key17++) args[_key17] = arguments[_key17];
							definitionsAdd.apply(void 0, [Types.List].concat(args))
						}
					},
					addRange: {
						value: function() {
							for (var _len18 = arguments.length, args = new Array(_len18), _key18 = 0; _key18 < _len18; _key18++) args[_key18] = arguments[_key18];
							definitionsAdd.apply(void 0, [Types.Range].concat(args))
						}
					},
					isEmpty: {
						value: function() {
							return 0 === _definitions.length
						}
					},
					has: {
						value: definitionsHas
					},
					get: {
						value: definitionsGet
					},
					delete: {
						value: function definitionsDelete(name) {
							definitionsHas(name) && delete settings[name];
							for (var i = 0; i < _definitions.length; ++i)
								if (_definitions[i].name === name) {
									_definitions.splice(i, 1), definitionsDelete(name);
									break
								}
						}
					}
				}))
			}(),
			Story = function() {
				var _passages = {},
					_inits = [],
					_scripts = [],
					_styles = [],
					_widgets = [],
					_title = "",
					_ifId = "",
					_domId = "";

				function _storySetTitle(rawTitle) {
					if (null == rawTitle) throw new Error("story title must not be null or undefined");
					var title = Util.unescape(String(rawTitle))
						.trim();
					if ("" === title) throw new Error("story title must not be empty or consist solely of whitespace");
					if (document.title = _title = title, "" === (_domId = Util.slugify(_title)))
						if ("" !== _ifId) _domId = _ifId;
						else
							for (var i = 0, len = _title.length; i < len; ++i) {
								var _Util$charAndPosAt2 = Util.charAndPosAt(_title, i),
									char = _Util$charAndPosAt2.char,
									start = _Util$charAndPosAt2.start,
									end = _Util$charAndPosAt2.end;
								_domId += char.codePointAt(0)
									.toString(16), i += end - start
							}
				}
				return Object.freeze(Object.defineProperties({}, {
					load: {
						value: function() {
							var validationCodeTags = ["init", "widget"],
								validationNoCodeTagPassages = ["PassageDone", "PassageFooter", "PassageHeader", "PassageReady", "StoryAuthor", "StoryBanner", "StoryCaption", "StoryInit", "StoryMenu", "StoryShare", "StorySubtitle"];

							function validateStartingPassage(passage) {
								if (passage.tags.includesAny(validationCodeTags)) throw new Error('starting passage "'.concat(passage.title, '" contains special tags; invalid: "')
									.concat(passage.tags.filter((function(tag) {
											return validationCodeTags.includes(tag)
										}))
										.sort()
										.join('", "'), '"'))
							}

							function validateSpecialPassages(passage) {
								if (validationNoCodeTagPassages.includes(passage.title)) {
									for (var _len19 = arguments.length, tags = new Array(_len19 > 1 ? _len19 - 1 : 0), _key19 = 1; _key19 < _len19; _key19++) tags[_key19 - 1] = arguments[_key19];
									throw new Error('special passage "'.concat(passage.title, '" contains special tags; invalid: "')
										.concat(tags.sort()
											.join('", "'), '"'))
								}
								var codeTags = [].concat(validationCodeTags),
									foundTags = [];
								if (passage.tags.forEach((function(tag) {
									codeTags.includes(tag) && foundTags.push.apply(foundTags, _toConsumableArray(codeTags.delete(tag)))
								})), foundTags.length > 1) throw new Error('passage "'.concat(passage.title, '" contains multiple special tags; invalid: "')
									.concat(foundTags.sort()
										.join('", "'), '"'))
							}
							var $storydata = jQuery("tw-storydata"),
								startNode = $storydata.attr("startnode") || "";
							Config.passages.start = null, Config.debug = /\bdebug\b/.test($storydata.attr("options")), $storydata.children("style")
								.each((function(i) {
									_styles.push(new Passage("tw-user-style-".concat(i), this))
								})), $storydata.children("script")
								.each((function(i) {
									_scripts.push(new Passage("tw-user-script-".concat(i), this))
								})), $storydata.children('tw-passagedata:not([tags~="Twine.private"],[tags~="annotation"])')
								.each((function() {
									var $this = jQuery(this),
										pid = $this.attr("pid") || "",
										passage = new Passage($this.attr("name"), this);
									pid === startNode && "" !== startNode ? (Config.passages.start = passage.title, validateStartingPassage(passage), _passages[passage.title] = passage) : passage.tags.includes("init") ? (validateSpecialPassages(passage, "init"), _inits.push(passage)) : passage.tags.includes("widget") ? (validateSpecialPassages(passage, "widget"), _widgets.push(passage)) : _passages[passage.title] = passage
								})), _ifId = $storydata.attr("ifid"), _storySetTitle("Type Help"), Config.saves.id = Story.domId
						}
					},
					init: {
						value: function() {
							var storyStyle;
							storyStyle = document.createElement("style"), new StyleWrapper(storyStyle)
								.add(_styles.map((function(style) {
										return style.text.trim()
									}))
									.join("\n")), jQuery(storyStyle)
								.appendTo(document.head)
								.attr({
									id: "style-story",
									type: "text/css"
								});
							for (var i = 0; i < _scripts.length; ++i) try {
								Scripting.evalJavaScript(_scripts[i].text)
							} catch (ex) {
								console.error(ex), Alert.error(_scripts[i].title, "object" === _typeof(ex) ? ex.message : ex)
							}
							for (var _i8 = 0; _i8 < _widgets.length; ++_i8) try {
								Wikifier.wikifyEval(_widgets[_i8].processText())
							} catch (ex) {
								console.error(ex), Alert.error(_widgets[_i8].title, "object" === _typeof(ex) ? ex.message : ex)
							}
						}
					},
					title: {
						get: function() {
							return _title
						}
					},
					domId: {
						get: function() {
							return _domId
						}
					},
					ifId: {
						get: function() {
							return _ifId
						}
					},
					add: {
						value: function(passage) {
							if (!(passage instanceof Passage)) throw new TypeError("Story.add passage parameter must be an instance of Passage");
							var title = passage.title;
							return !_passages.hasOwnProperty(title) && (_passages[title] = passage, !0)
						}
					},
					has: {
						value: function(title) {
							var type = _typeof(title);
							switch (type) {
								case "number":
								case "string":
									return _passages.hasOwnProperty(String(title));
								case "undefined":
									break;
								case "object":
									type = null === title ? "null" : "an object";
									break;
								default:
									type = "a ".concat(type)
							}
							throw new TypeError("Story.has title parameter cannot be ".concat(type))
						}
					},
					get: {
						value: function(title) {
							var type = _typeof(title);
							switch (type) {
								case "number":
								case "string":
									var id = String(title);
									return _passages.hasOwnProperty(id) ? _passages[id] : new Passage(id || "(unknown)");
								case "undefined":
									break;
								case "object":
									type = null === title ? "null" : "an object";
									break;
								default:
									type = "a ".concat(type)
							}
							throw new TypeError("Story.get title parameter cannot be ".concat(type))
						}
					},
					getAllInit: {
						value: function() {
							return Object.freeze(Array.from(_inits))
						}
					},
					getAllRegular: {
						value: function() {
							return Object.freeze(Object.assign({}, _passages))
						}
					},
					getAllScript: {
						value: function() {
							return Object.freeze(Array.from(_scripts))
						}
					},
					getAllStylesheet: {
						value: function() {
							return Object.freeze(Array.from(_styles))
						}
					},
					getAllWidget: {
						value: function() {
							return Object.freeze(Array.from(_widgets))
						}
					},
					lookup: {
						value: function(key, value) {
							var sortKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : "title",
								results = [];
							return Object.keys(_passages)
								.forEach((function(name) {
									var passage = _passages[name];
									"object" === _typeof(passage[key]) && null !== passage[key] ? passage[key] instanceof Array && passage[key].some((function(m) {
										return Util.sameValueZero(m, value)
									})) && results.push(passage) : Util.sameValueZero(passage[key], value) && results.push(passage)
								})), results.sort((function(a, b) {
									return a[sortKey] == b[sortKey] ? 0 : a[sortKey] < b[sortKey] ? -1 : 1
								})), results
						}
					},
					lookupWith: {
						value: function(predicate) {
							var sortKey = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : "title";
							if ("function" != typeof predicate) throw new TypeError("Story.lookupWith predicate parameter must be a function");
							var results = [];
							return Object.keys(_passages)
								.forEach((function(name) {
									var passage = _passages[name];
									predicate(passage) && results.push(passage)
								})), results.sort((function(a, b) {
									return a[sortKey] == b[sortKey] ? 0 : a[sortKey] < b[sortKey] ? -1 : 1
								})), results
						}
					}
				}))
			}(),
			UI = function() {
				function uiAssembleLinkList(passage, listEl) {
					var list = listEl,
						debugState = Config.debug,
						cleanState = Config.cleanupWikifierOutput;
					Config.debug = !1, Config.cleanupWikifierOutput = !1;
					try {
						null == list && (list = document.createElement("ul"));
						var frag = document.createDocumentFragment();
						new Wikifier(frag, Story.get(passage)
							.processText()
							.trim());
						var errors = _toConsumableArray(frag.querySelectorAll(".error"))
							.map((function(errEl) {
								return errEl.textContent.replace(errorPrologRegExp, "")
							}));
						if (errors.length > 0) throw new Error(errors.join("; "));
						for (; frag.hasChildNodes();) {
							var node = frag.firstChild;
							if (node.nodeType === Node.ELEMENT_NODE && "A" === node.nodeName.toUpperCase()) {
								var li = document.createElement("li");
								list.appendChild(li), li.appendChild(node)
							} else frag.removeChild(node)
						}
					} finally {
						Config.cleanupWikifierOutput = cleanState, Config.debug = debugState
					}
					return list
				}

				function uiOpenAlert(message) {
					jQuery(Dialog.setup(L10n.get("alertTitle"), "alert"))
						.append("<p>".concat(message, '</p><ul class="buttons">') + '<li><button id="alert-ok" class="ui-close">'.concat(L10n.get(["alertOk", "ok"]), "</button></li>") + "</ul>");
					for (var _len20 = arguments.length, args = new Array(_len20 > 1 ? _len20 - 1 : 0), _key20 = 1; _key20 < _len20; _key20++) args[_key20 - 1] = arguments[_key20];
					Dialog.open.apply(Dialog, args)
				}

				function uiBuildAutoload() {
					return jQuery(Dialog.setup(L10n.get("autoloadTitle"), "autoload"))
						.append("<p>".concat(L10n.get("autoloadPrompt"), '</p><ul class="buttons">') + '<li><button id="autoload-ok" class="ui-close">'.concat(L10n.get(["autoloadOk", "ok"]), "</button></li>") + '<li><button id="autoload-cancel" class="ui-close">'.concat(L10n.get(["autoloadCancel", "cancel"]), "</button></li>") + "</ul>"), jQuery(document)
						.one("click.autoload", ".ui-close", (function(ev) {
							var isAutoloadOk = "autoload-ok" === ev.target.id;
							jQuery(document)
								.one(":dialogclosed", (function() {
									isAutoloadOk && Save.autosave.load() || Engine.play(Config.passages.start)
								}))
						})), !0
				}

				function uiBuildJumpto() {
					var list = document.createElement("ul");
					jQuery(Dialog.setup(L10n.get("jumptoTitle"), "jumpto list"))
						.append(list);
					for (var expired = State.expired.length, i = State.size - 1; i >= 0; --i)
						if (i !== State.activeIndex) {
							var passage = Story.get(State.history[i].title);
							passage && passage.tags.includes("bookmark") && jQuery(document.createElement("li"))
								.append(jQuery(document.createElement("a"))
									.ariaClick({
										one: !0
									}, function(idx) {
										return function() {
											return jQuery(document)
												.one(":dialogclosed", (function() {
													return Engine.goTo(idx)
												}))
										}
									}(i))
									.addClass("ui-close")
									.text("".concat(L10n.get("jumptoTurn"), " ")
										.concat(expired + i + 1, ": ")
										.concat(passage.description())))
								.appendTo(list)
						} list.hasChildNodes() || jQuery(list)
						.append("<li><a><em>".concat(L10n.get("jumptoUnavailable"), "</em></a></li>"))
				}

				function uiBuildRestart() {
					return jQuery(Dialog.setup(L10n.get("restartTitle"), "restart"))
						.append("<p>".concat(L10n.get("restartPrompt"), '</p><ul class="buttons">') + '<li><button id="restart-ok">'.concat(L10n.get(["restartOk", "ok"]), "</button></li>") + '<li><button id="restart-cancel" class="ui-close">'.concat(L10n.get(["restartCancel", "cancel"]), "</button></li>") + "</ul>")
						.find("#restart-ok")
						.ariaClick({
							one: !0
						}, (function() {
							jQuery(document)
								.one(":dialogclosed", (function() {
									return Engine.restart()
								})), Dialog.close()
						})), !0
				}

				function uiBuildSaves() {
					var savesAllowed = "function" != typeof Config.saves.isAllowed || Config.saves.isAllowed();

					function createActionItem(bId, bClass, bText, bAction) {
						var $btn = jQuery(document.createElement("button"))
							.attr("id", "saves-".concat(bId))
							.html(bText);
						return bClass && $btn.addClass(bClass), bAction ? $btn.ariaClick(bAction) : $btn.ariaDisabled(!0), jQuery(document.createElement("li"))
							.append($btn)
					}
					var $dialogBody = jQuery(Dialog.setup(L10n.get("savesTitle"), "saves")),
						savesOk = Save.ok(),
						fileOk = Has.fileAPI && (Config.saves.tryDiskOnMobile || !Browser.isMobile.any());
					if (savesOk && $dialogBody.append(function() {
						function createButton(bId, bClass, bText, bSlot, bAction) {
							var $btn = jQuery(document.createElement("button"))
								.attr("id", "saves-".concat(bId, "-")
									.concat(bSlot))
								.addClass(bId)
								.html(bText);
							return bClass && $btn.addClass(bClass), bAction ? "auto" === bSlot ? $btn.ariaClick({
								label: "".concat(bText, " ")
									.concat(L10n.get("savesLabelAuto"))
							}, (function() {
								return bAction()
							})) : $btn.ariaClick({
								label: "".concat(bText, " ")
									.concat(L10n.get("savesLabelSlot"), " ")
									.concat(bSlot + 1)
							}, (function() {
								return bAction(bSlot)
							})) : $btn.ariaDisabled(!0), $btn
						}
						var saves = Save.get(),
							$tbody = jQuery(document.createElement("tbody"));
						if (Save.autosave.ok()) {
							var $tdSlot = jQuery(document.createElement("td")),
								$tdLoad = jQuery(document.createElement("td")),
								$tdDesc = jQuery(document.createElement("td")),
								$tdDele = jQuery(document.createElement("td"));
							jQuery(document.createElement("b"))
								.attr({
									title: L10n.get("savesLabelAuto"),
									"aria-label": L10n.get("savesLabelAuto")
								})
								.text("A")
								.appendTo($tdSlot), saves.autosave ? ($tdLoad.append(createButton("load", "ui-close", L10n.get("savesLabelLoad"), "auto", (function() {
										jQuery(document)
											.one(":dialogclosed", (function() {
												return Save.autosave.load()
											}))
									}))), jQuery(document.createElement("div"))
									.text(saves.autosave.title)
									.appendTo($tdDesc), jQuery(document.createElement("div"))
									.addClass("datestamp")
									.html(saves.autosave.date ? "".concat(new Date(saves.autosave.date)
										.toLocaleString()) : "<em>".concat(L10n.get("savesUnknownDate"), "</em>"))
									.appendTo($tdDesc), $tdDele.append(createButton("delete", null, L10n.get("savesLabelDelete"), "auto", (function() {
										Save.autosave.delete(), uiBuildSaves()
									})))) : ($tdLoad.append(createButton("load", null, L10n.get("savesLabelLoad"), "auto")), $tdDesc.addClass("empty")
									.text("•  •  •"), $tdDele.append(createButton("delete", null, L10n.get("savesLabelDelete"), "auto"))), jQuery(document.createElement("tr"))
								.append($tdSlot)
								.append($tdLoad)
								.append($tdDesc)
								.append($tdDele)
								.appendTo($tbody)
						}
						for (var i = 0, iend = saves.slots.length; i < iend; ++i) {
							var _$tdSlot = jQuery(document.createElement("td")),
								_$tdLoad = jQuery(document.createElement("td")),
								_$tdDesc = jQuery(document.createElement("td")),
								_$tdDele = jQuery(document.createElement("td"));
							_$tdSlot.append(document.createTextNode(i + 1)), saves.slots[i] ? (_$tdLoad.append(createButton("load", "ui-close", L10n.get("savesLabelLoad"), i, (function(slot) {
										jQuery(document)
											.one(":dialogclosed", (function() {
												return Save.slots.load(slot)
											}))
									}))), jQuery(document.createElement("div"))
									.text(saves.slots[i].title)
									.appendTo(_$tdDesc), jQuery(document.createElement("div"))
									.addClass("datestamp")
									.html(saves.slots[i].date ? "".concat(new Date(saves.slots[i].date)
										.toLocaleString()) : "<em>".concat(L10n.get("savesUnknownDate"), "</em>"))
									.appendTo(_$tdDesc), _$tdDele.append(createButton("delete", null, L10n.get("savesLabelDelete"), i, (function(slot) {
										Save.slots.delete(slot), uiBuildSaves()
									})))) : (_$tdLoad.append(createButton("save", "ui-close", L10n.get("savesLabelSave"), i, savesAllowed ? Save.slots.save : null)), _$tdDesc.addClass("empty")
									.text("•  •  •"), _$tdDele.append(createButton("delete", null, L10n.get("savesLabelDelete"), i))), jQuery(document.createElement("tr"))
								.append(_$tdSlot)
								.append(_$tdLoad)
								.append(_$tdDesc)
								.append(_$tdDele)
								.appendTo($tbody)
						}
						return jQuery(document.createElement("table"))
							.attr("id", "saves-list")
							.append($tbody)
					}()), savesOk || fileOk) {
						var $btnBar = jQuery(document.createElement("ul"))
							.addClass("buttons")
							.appendTo($dialogBody);
						return fileOk && ($btnBar.append(createActionItem("export", "ui-close", L10n.get("savesLabelExport"), savesAllowed ? function() {
								return Save.export()
							} : null)), $btnBar.append(createActionItem("import", null, L10n.get("savesLabelImport"), (function() {
								return $dialogBody.find("#saves-import-file")
									.trigger("click")
							}))), jQuery(document.createElement("input"))
							.css({
								display: "block",
								visibility: "hidden",
								position: "fixed",
								left: "-9999px",
								top: "-9999px",
								width: "1px",
								height: "1px"
							})
							.attr({
								type: "file",
								id: "saves-import-file",
								tabindex: -1,
								"aria-hidden": !0
							})
							.on("change", (function(ev) {
								jQuery(document)
									.one(":dialogclosed", (function() {
										return Save.import(ev)
									})), Dialog.close()
							}))
							.appendTo($dialogBody)), savesOk && $btnBar.append(createActionItem("clear", null, L10n.get("savesLabelClear"), Save.autosave.has() || !Save.slots.isEmpty() ? function() {
							Save.clear(), uiBuildSaves()
						} : null)), !0
					}
					return uiOpenAlert(L10n.get("savesIncapable")), !1
				}

				function uiBuildSettings() {
					var $dialogBody = jQuery(Dialog.setup(L10n.get("settingsTitle"), "settings"));
					return Setting.forEach((function(control) {
							if (control.type === Setting.Types.Header) {
								var _name = control.name,
									_id = Util.slugify(_name),
									$header = jQuery(document.createElement("div")),
									$heading = jQuery(document.createElement("h2"));
								return $header.attr("id", "header-body-".concat(_id))
									.append($heading)
									.appendTo($dialogBody), $heading.attr("id", "header-heading-".concat(_id))
									.wiki(_name), void(control.desc && jQuery(document.createElement("p"))
										.attr("id", "header-desc-".concat(_id))
										.wiki(control.desc)
										.appendTo($header))
							}
							var $control, name = control.name,
								id = Util.slugify(name),
								$setting = jQuery(document.createElement("div")),
								$label = jQuery(document.createElement("label")),
								$controlBox = jQuery(document.createElement("div"));
							switch (jQuery(document.createElement("div"))
								.append($label)
								.append($controlBox)
								.appendTo($setting), control.desc && jQuery(document.createElement("p"))
								.attr("id", "setting-desc-".concat(id))
								.wiki(control.desc)
								.appendTo($setting), $label.attr({
									id: "setting-label-".concat(id),
									for: "setting-control-".concat(id)
								})
								.wiki(control.label), null == settings[name] && (settings[name] = control.default), control.type) {
								case Setting.Types.Toggle:
									$control = jQuery(document.createElement("button")), settings[name] ? $control.addClass("enabled")
										.text(L10n.get("settingsOn")) : $control.text(L10n.get("settingsOff")), $control.ariaClick((function() {
											settings[name] ? (jQuery(this)
												.removeClass("enabled")
												.text(L10n.get("settingsOff")), settings[name] = !1) : (jQuery(this)
												.addClass("enabled")
												.text(L10n.get("settingsOn")), settings[name] = !0), Setting.save(), control.hasOwnProperty("onChange") && control.onChange.call({
												name: name,
												value: settings[name],
												default: control.default
											})
										}));
									break;
								case Setting.Types.List:
									$control = jQuery(document.createElement("select"));
									for (var i = 0, iend = control.list.length; i < iend; ++i) jQuery(document.createElement("option"))
										.val(i)
										.text(control.list[i])
										.appendTo($control);
									$control.val(control.list.indexOf(settings[name]))
										.attr("tabindex", 0)
										.on("change", (function() {
											settings[name] = control.list[Number(this.value)], Setting.save(), control.hasOwnProperty("onChange") && control.onChange.call({
												name: name,
												value: settings[name],
												default: control.default,
												list: control.list
											})
										}));
									break;
								case Setting.Types.Range:
									($control = jQuery(document.createElement("input")))
									.attr({
											type: "range",
											min: control.min,
											max: control.max,
											step: control.step,
											value: settings[name],
											tabindex: 0
										})
										.on("change input", (function() {
											settings[name] = Number(this.value), Setting.save(), control.hasOwnProperty("onChange") && control.onChange.call({
												name: name,
												value: settings[name],
												default: control.default,
												min: control.min,
												max: control.max,
												step: control.step
											})
										}))
										.on("keypress", (function(ev) {
											13 === ev.which && (ev.preventDefault(), $control.trigger("change"))
										}))
							}
							$control.attr("id", "setting-control-".concat(id))
								.appendTo($controlBox), $setting.attr("id", "setting-body-".concat(id))
								.appendTo($dialogBody)
						})), $dialogBody.append('<ul class="buttons">' + '<li><button id="settings-ok" class="ui-close">'.concat(L10n.get(["settingsOk", "ok"]), "</button></li>") + '<li><button id="settings-reset">'.concat(L10n.get("settingsReset"), "</button></li>") + "</ul>")
						.find("#settings-reset")
						.ariaClick({
							one: !0
						}, (function() {
							jQuery(document)
								.one(":dialogclosed", (function() {
									Setting.reset(), window.location.reload()
								})), Dialog.close()
						})), !0
				}

				function uiBuildShare() {
					try {
						jQuery(Dialog.setup(L10n.get("shareTitle"), "share list"))
							.append(uiAssembleLinkList("StoryShare"))
					} catch (ex) {
						return console.error(ex), Alert.error("StoryShare", ex.message), !1
					}
					return !0
				}
				return Object.freeze(Object.defineProperties({}, {
					assembleLinkList: {
						value: uiAssembleLinkList
					},
					alert: {
						value: uiOpenAlert
					},
					jumpto: {
						value: function() {
							uiBuildJumpto(), Dialog.open.apply(Dialog, arguments)
						}
					},
					restart: {
						value: function() {
							uiBuildRestart(), Dialog.open.apply(Dialog, arguments)
						}
					},
					saves: {
						value: function() {
							uiBuildSaves(), Dialog.open.apply(Dialog, arguments)
						}
					},
					settings: {
						value: function() {
							uiBuildSettings(), Dialog.open.apply(Dialog, arguments)
						}
					},
					share: {
						value: function() {
							uiBuildShare(), Dialog.open.apply(Dialog, arguments)
						}
					},
					buildAutoload: {
						value: uiBuildAutoload
					},
					buildJumpto: {
						value: uiBuildJumpto
					},
					buildRestart: {
						value: uiBuildRestart
					},
					buildSaves: {
						value: uiBuildSaves
					},
					buildSettings: {
						value: uiBuildSettings
					},
					buildShare: {
						value: uiBuildShare
					},
					stow: {
						value: function() {
							return UIBar.stow()
						}
					},
					unstow: {
						value: function() {
							return UIBar.unstow()
						}
					},
					setStoryElements: {
						value: function() {
							return UIBar.update()
						}
					},
					isOpen: {
						value: function() {
							return Dialog.isOpen.apply(Dialog, arguments)
						}
					},
					body: {
						value: function() {
							return Dialog.body()
						}
					},
					setup: {
						value: function() {
							return Dialog.setup.apply(Dialog, arguments)
						}
					},
					addClickHandler: {
						value: function() {
							return Dialog.addClickHandler.apply(Dialog, arguments)
						}
					},
					open: {
						value: function() {
							return Dialog.open.apply(Dialog, arguments)
						}
					},
					close: {
						value: function() {
							return Dialog.close.apply(Dialog, arguments)
						}
					},
					resize: {
						value: function() {
							return Dialog.resize()
						}
					},
					buildDialogAutoload: {
						value: uiBuildAutoload
					},
					buildDialogJumpto: {
						value: uiBuildJumpto
					},
					buildDialogRestart: {
						value: uiBuildRestart
					},
					buildDialogSaves: {
						value: uiBuildSaves
					},
					buildDialogSettings: {
						value: uiBuildSettings
					},
					buildDialogShare: {
						value: uiBuildShare
					},
					buildLinkListFromPassage: {
						value: uiAssembleLinkList
					}
				}))
			}(),
			UIBar = function() {
				var _$uiBar = null;

				function uiBarStow(noAnimation) {
					var $story;
					_$uiBar && !_$uiBar.hasClass("stowed") && (noAnimation && (($story = jQuery("#story"))
						.addClass("no-transition"), _$uiBar.addClass("no-transition")), _$uiBar.addClass("stowed"), noAnimation && setTimeout((function() {
						$story.removeClass("no-transition"), _$uiBar.removeClass("no-transition")
					}), Engine.minDomActionDelay));
					return this
				}

				function uiBarUpdate() {
					if (Story.has("StoryDisplayTitle") && setDisplayTitle(Story.get("StoryDisplayTitle")
						.processText()), _$uiBar) {
						setPageElement("story-banner", "StoryBanner"), setPageElement("story-subtitle", "StorySubtitle"), setPageElement("story-author", "StoryAuthor"), setPageElement("story-caption", "StoryCaption");
						var menuStory = document.getElementById("menu-story");
						if (null !== menuStory && (jQuery(menuStory)
							.empty(), Story.has("StoryMenu"))) try {
							UI.assembleLinkList("StoryMenu", menuStory)
						} catch (ex) {
							console.error(ex), Alert.error("StoryMenu", ex.message)
						}
					}
				}
				return Object.freeze(Object.defineProperties({}, {
					destroy: {
						value: function() {
							_$uiBar && (_$uiBar.hide(), jQuery(document)
								.off(".ui-bar"), jQuery(document.head)
								.find("#style-ui-bar")
								.remove(), _$uiBar.remove(), _$uiBar = null)
						}
					},
					hide: {
						value: function() {
							return _$uiBar && _$uiBar.hide(), this
						}
					},
					init: {
						value: function() {
							if (!document.getElementById("ui-bar")) {
								var toggleLabel, backwardLabel, jumptoLabel, forwardLabel, $backward, $forward, $elems = (toggleLabel = L10n.get("uiBarToggle"), backwardLabel = L10n.get("uiBarBackward"), jumptoLabel = L10n.get("uiBarJumpto"), forwardLabel = L10n.get("uiBarForward"), jQuery(document.createDocumentFragment())
									.append('<div id="ui-bar" aria-live="polite"><div id="ui-bar-tray">' + '<button id="ui-bar-toggle" tabindex="0" title="'.concat(toggleLabel, '" aria-label="')
										.concat(toggleLabel, '"></button>') + '<div id="ui-bar-history">' + '<button id="history-backward" tabindex="0" title="'.concat(backwardLabel, '" aria-label="')
										.concat(backwardLabel, '"></button>') + '<button id="history-jumpto" tabindex="0" title="'.concat(jumptoLabel, '" aria-label="')
										.concat(jumptoLabel, '"></button>') + '<button id="history-forward" tabindex="0" title="'.concat(forwardLabel, '" aria-label="')
										.concat(forwardLabel, '"></button>') + '</div></div><div id="ui-bar-body"><header id="title" role="banner"><div id="story-banner"></div><h1 id="story-title"></h1><div id="story-subtitle"></div><div id="story-title-separator"></div><p id="story-author"></p></header><div id="story-caption"></div><nav id="menu" role="navigation"><ul id="menu-story"></ul><ul id="menu-core">' + '<li id="menu-item-saves"><a tabindex="0">'.concat(L10n.get("savesTitle"), "</a></li>") + '<li id="menu-item-settings"><a tabindex="0">'.concat(L10n.get("settingsTitle"), "</a></li>") + '<li id="menu-item-restart"><a tabindex="0">'.concat(L10n.get("restartTitle"), "</a></li>") + '<li id="menu-item-share"><a tabindex="0">'.concat(L10n.get("shareTitle"), "</a></li>") + "</ul></nav></div></div>"));
								_$uiBar = jQuery($elems.find("#ui-bar")
										.get(0)), $elems.insertBefore("body>script#script-sugarcube"), jQuery(document)
									.on(":historyupdate.ui-bar", ($backward = jQuery("#history-backward"), $forward = jQuery("#history-forward"), function() {
										$backward.ariaDisabled(State.length < 2), $forward.ariaDisabled(State.length === State.size)
									}))
							}
						}
					},
					isHidden: {
						value: function() {
							return _$uiBar && "none" === _$uiBar.css("display")
						}
					},
					isStowed: {
						value: function() {
							return _$uiBar && _$uiBar.hasClass("stowed")
						}
					},
					show: {
						value: function() {
							return _$uiBar && _$uiBar.show(), this
						}
					},
					start: {
						value: function() {
							_$uiBar && (("boolean" == typeof Config.ui.stowBarInitially ? Config.ui.stowBarInitially : jQuery(window)
									.width() <= Config.ui.stowBarInitially) && uiBarStow(!0), jQuery("#ui-bar-toggle")
								.ariaClick({
									label: L10n.get("uiBarToggle")
								}, (function() {
									return _$uiBar.toggleClass("stowed")
								})), Config.history.controls ? (jQuery("#history-backward")
									.ariaDisabled(State.length < 2)
									.ariaClick({
										label: L10n.get("uiBarBackward")
									}, (function() {
										return Engine.backward()
									})), Story.lookup("tags", "bookmark")
									.length > 0 ? jQuery("#history-jumpto")
									.ariaClick({
										label: L10n.get("uiBarJumpto")
									}, (function() {
										return UI.jumpto()
									})) : jQuery("#history-jumpto")
									.remove(), jQuery("#history-forward")
									.ariaDisabled(State.length === State.size)
									.ariaClick({
										label: L10n.get("uiBarForward")
									}, (function() {
										return Engine.forward()
									}))) : jQuery("#ui-bar-history")
								.remove(), Story.has("StoryDisplayTitle") ? setDisplayTitle(Story.get("StoryDisplayTitle")
									.processText()) : jQuery("#story-title")
								.text(Story.title), Story.has("StoryCaption") || jQuery("#story-caption")
								.remove(), Story.has("StoryMenu") || jQuery("#menu-story")
								.remove(), Config.ui.updateStoryElements || uiBarUpdate(), jQuery("#menu-item-saves a")
								.ariaClick({
									role: "button"
								}, (function(ev) {
									ev.preventDefault(), UI.buildSaves(), Dialog.open()
								}))
								.text(L10n.get("savesTitle")), Setting.isEmpty() ? jQuery("#menu-item-settings")
								.remove() : jQuery("#menu-item-settings a")
								.ariaClick({
									role: "button"
								}, (function(ev) {
									ev.preventDefault(), UI.buildSettings(), Dialog.open()
								}))
								.text(L10n.get("settingsTitle")), jQuery("#menu-item-restart a")
								.ariaClick({
									role: "button"
								}, (function(ev) {
									ev.preventDefault(), UI.buildRestart(), Dialog.open()
								}))
								.text(L10n.get("restartTitle")), Story.has("StoryShare") ? jQuery("#menu-item-share a")
								.ariaClick({
									role: "button"
								}, (function(ev) {
									ev.preventDefault(), UI.buildShare(), Dialog.open()
								}))
								.text(L10n.get("shareTitle")) : jQuery("#menu-item-share")
								.remove())
						}
					},
					stow: {
						value: uiBarStow
					},
					unstow: {
						value: function(noAnimation) {
							var $story;
							return _$uiBar && _$uiBar.hasClass("stowed") && (noAnimation && (($story = jQuery("#story"))
								.addClass("no-transition"), _$uiBar.addClass("no-transition")), _$uiBar.removeClass("stowed"), noAnimation && setTimeout((function() {
								$story.removeClass("no-transition"), _$uiBar.removeClass("no-transition")
							}), Engine.minDomActionDelay)), this
						}
					},
					update: {
						value: uiBarUpdate
					},
					setStoryElements: {
						value: uiBarUpdate
					}
				}))
			}(),
			DebugBar = function() {
				var _variableRe = new RegExp("^".concat(Patterns.variable, "$")),
					_numericKeyRe = /^\d+$/,
					_watchList = [],
					_$debugBar = null,
					_$watchBody = null,
					_$watchList = null,
					_$turnSelect = null,
					_stowed = !0;

				function debugBarStow() {
					_$debugBar.css("right", "-".concat(_$debugBar.outerWidth(), "px")), _stowed = !0, _updateSession()
				}

				function debugBarUnstow() {
					_$debugBar.css("right", 0), _stowed = !1, _updateSession()
				}

				function debugBarToggle() {
					_stowed ? debugBarUnstow() : debugBarStow()
				}

				function debugBarWatchAdd(varName) {
					_variableRe.test(varName) && (_watchList.pushUnique(varName), _watchList.sort(), _updateWatchBody(), _updateWatchList(), _updateSession())
				}

				function debugBarWatchAddAll() {
					Object.keys(State.variables)
						.map((function(name) {
							return _watchList.pushUnique("$".concat(name))
						})), Object.keys(State.temporary)
						.map((function(name) {
							return _watchList.pushUnique("_".concat(name))
						})), _watchList.sort(), _updateWatchBody(), _updateWatchList(), _updateSession()
				}

				function debugBarWatchClear() {
					for (var i = _watchList.length - 1; i >= 0; --i) _watchList.pop();
					_updateWatchBody(), _updateWatchList(), _updateSession()
				}

				function debugBarWatchDelete(varName) {
					_watchList.delete(varName), _updateWatchBody(), _updateWatchList(), _updateSession()
				}

				function debugBarWatchDisable() {
					_debugBarWatchDisableNoUpdate(), _updateSession()
				}

				function debugBarWatchEnable() {
					_debugBarWatchEnableNoUpdate(), _updateSession()
				}

				function debugBarWatchIsEnabled() {
					return !_$watchBody.attr("hidden")
				}

				function debugBarWatchToggle() {
					_$watchBody.attr("hidden") ? debugBarWatchEnable() : debugBarWatchDisable()
				}

				function _debugBarWatchDisableNoUpdate() {
					_$watchBody.attr({
						"aria-hidden": !0,
						hidden: "hidden"
					})
				}

				function _debugBarWatchEnableNoUpdate() {
					_$watchBody.removeAttr("aria-hidden hidden")
				}

				function _clearSession() {
					session.delete("debugState")
				}

				function _hasSession() {
					return session.has("debugState")
				}

				function _updateSession() {
					session.set("debugState", {
						stowed: _stowed,
						watchList: _watchList,
						watchEnabled: debugBarWatchIsEnabled(),
						viewsEnabled: DebugView.isEnabled()
					})
				}

				function _updateWatchBody() {
					if (0 !== _watchList.length) {
						for (var delLabel = L10n.get("debugBarDeleteWatch"), $table = jQuery(document.createElement("table")), $tbody = jQuery(document.createElement("tbody")), _loop4 = function(i, len) {
							var varName = _watchList[i],
								varKey = varName.slice(1),
								store = "$" === varName[0] ? State.variables : State.temporary,
								$row = jQuery(document.createElement("tr")),
								$delBtn = jQuery(document.createElement("button")),
								$code = jQuery(document.createElement("code"));
							$delBtn.addClass("watch-delete")
								.attr("data-name", varName)
								.ariaClick({
									one: !0,
									label: delLabel
								}, (function() {
									return debugBarWatchDelete(varName)
								})), $code.text(_toWatchString(store[varKey])), jQuery(document.createElement("td"))
								.append($delBtn)
								.appendTo($row), jQuery(document.createElement("td"))
								.text(varName)
								.appendTo($row), jQuery(document.createElement("td"))
								.append($code)
								.appendTo($row), $row.appendTo($tbody)
						}, i = 0, len = _watchList.length; i < len; ++i) _loop4(i);
						$table.append($tbody), _$watchBody.empty()
							.append($table)
					} else _$watchBody.empty()
						.append("<div>".concat(L10n.get("debugBarNoWatches"), "</div>"))
				}

				function _updateWatchList() {
					var svn = Object.keys(State.variables),
						tvn = Object.keys(State.temporary);
					if (0 !== svn.length || 0 !== tvn.length) {
						var names = [].concat(_toConsumableArray(svn.map((function(name) {
								return "$".concat(name)
							}))), _toConsumableArray(tvn.map((function(name) {
								return "_".concat(name)
							}))))
							.sort(),
							options = document.createDocumentFragment();
						names.delete(_watchList);
						for (var i = 0, len = names.length; i < len; ++i) jQuery(document.createElement("option"))
							.val(names[i])
							.appendTo(options);
						_$watchList.empty()
							.append(options)
					} else _$watchList.empty()
				}

				function _updateTurnSelect() {
					for (var histLen = State.size, expLen = State.expired.length, options = document.createDocumentFragment(), i = 0; i < histLen; ++i) jQuery(document.createElement("option"))
						.val(i)
						.text("".concat(expLen + i + 1, ". ")
							.concat(Util.escape(State.history[i].title)))
						.appendTo(options);
					_$turnSelect.empty()
						.ariaDisabled(histLen < 2)
						.append(options)
						.val(State.activeIndex)
				}

				function _toWatchString(value) {
					if (null === value) return "null";
					switch (_typeof(value)) {
						case "number":
							if (Number.isNaN(value)) return "NaN";
							if (!Number.isFinite(value)) return "Infinity";
						case "boolean":
						case "symbol":
						case "undefined":
							return String(value);
						case "string":
							return JSON.stringify(value);
						case "function":
							return "Function"
					}
					var objType = Util.toStringTag(value);
					if ("Date" === objType) return "Date {".concat(value.toLocaleString(), "}");
					if ("RegExp" === objType) return "RegExp ".concat(value.toString());
					var result = [];
					if (value instanceof Array || value instanceof Set) {
						for (var list = value instanceof Array ? value : Array.from(value), i = 0, len = list.length; i < len; ++i) result.push(list.hasOwnProperty(i) ? _toWatchString(list[i]) : "<empty>");
						return Object.keys(list)
							.filter((function(key) {
								return !_numericKeyRe.test(key)
							}))
							.forEach((function(key) {
								return result.push("".concat(_toWatchString(key), ": ")
									.concat(_toWatchString(list[key])))
							})), "".concat(objType, "(")
							.concat(list.length, ") [")
							.concat(result.join(", "), "]")
					}
					return value instanceof Map ? (value.forEach((function(val, key) {
							return result.push("".concat(_toWatchString(key), " → ")
								.concat(_toWatchString(val)))
						})), "".concat(objType, "(")
						.concat(value.size, ") {")
						.concat(result.join(", "), "}")) : (Object.keys(value)
						.forEach((function(key) {
							return result.push("".concat(_toWatchString(key), ": ")
								.concat(_toWatchString(value[key])))
						})), "".concat(objType, " {")
						.concat(result.join(", "), "}"))
				}
				return Object.freeze(Object.defineProperties({}, {
					init: {
						value: function() {
							var barToggleLabel = L10n.get("debugBarToggle"),
								watchAddLabel = L10n.get("debugBarAddWatch"),
								watchAllLabel = L10n.get("debugBarWatchAll"),
								watchNoneLabel = L10n.get("debugBarWatchNone"),
								watchToggleLabel = L10n.get("debugBarWatchToggle"),
								viewsToggleLabel = L10n.get("debugBarViewsToggle");
							jQuery(document.createDocumentFragment())
								.append('<div id="debug-bar"><div id="debug-bar-watch">' + "<div>".concat(L10n.get("debugBarNoWatches"), "</div>>") + "</div><div>" + '<button id="debug-bar-watch-toggle" tabindex="0" title="'.concat(watchToggleLabel, '" aria-label="')
									.concat(watchToggleLabel, '">')
									.concat(L10n.get("debugBarLabelWatch"), "</button>") + '<label id="debug-bar-watch-label" for="debug-bar-watch-input">'.concat(L10n.get("debugBarLabelAdd"), "</label>") + '<input id="debug-bar-watch-input" name="debug-bar-watch-input" type="text" list="debug-bar-watch-list" tabindex="0"><datalist id="debug-bar-watch-list" aria-hidden="true" hidden="hidden"></datalist>' + '<button id="debug-bar-watch-add" tabindex="0" title="'.concat(watchAddLabel, '" aria-label="')
									.concat(watchAddLabel, '"></button>') + '<button id="debug-bar-watch-all" tabindex="0" title="'.concat(watchAllLabel, '" aria-label="')
									.concat(watchAllLabel, '"></button>') + '<button id="debug-bar-watch-none" tabindex="0" title="'.concat(watchNoneLabel, '" aria-label="')
									.concat(watchNoneLabel, '"></button>') + "</div><div>" + '<button id="debug-bar-views-toggle" tabindex="0" title="'.concat(viewsToggleLabel, '" aria-label="')
									.concat(viewsToggleLabel, '">')
									.concat(L10n.get("debugBarLabelViews"), "</button>") + '<label id="debug-bar-turn-label" for="debug-bar-turn-select">'.concat(L10n.get("debugBarLabelTurn"), "</label>") + '<select id="debug-bar-turn-select" tabindex="0"></select></div>' + '<button id="debug-bar-toggle" tabindex="0" title="'.concat(barToggleLabel, '" aria-label="')
									.concat(barToggleLabel, '"></button>') + '</div><div id="debug-bar-hint"></div>')
								.appendTo("body"), _$debugBar = jQuery("#debug-bar"), _$watchBody = jQuery(_$debugBar.find("#debug-bar-watch")
									.get(0)), _$watchList = jQuery(_$debugBar.find("#debug-bar-watch-list")
									.get(0)), _$turnSelect = jQuery(_$debugBar.find("#debug-bar-turn-select")
									.get(0));
							var $barToggle = jQuery(_$debugBar.find("#debug-bar-toggle")
									.get(0)),
								$watchToggle = jQuery(_$debugBar.find("#debug-bar-watch-toggle")
									.get(0)),
								$watchInput = jQuery(_$debugBar.find("#debug-bar-watch-input")
									.get(0)),
								$watchAdd = jQuery(_$debugBar.find("#debug-bar-watch-add")
									.get(0)),
								$watchAll = jQuery(_$debugBar.find("#debug-bar-watch-all")
									.get(0)),
								$watchNone = jQuery(_$debugBar.find("#debug-bar-watch-none")
									.get(0)),
								$viewsToggle = jQuery(_$debugBar.find("#debug-bar-views-toggle")
									.get(0));
							$barToggle.ariaClick(debugBarToggle), $watchToggle.ariaClick(debugBarWatchToggle), $watchInput.on(":addwatch", (function() {
									debugBarWatchAdd(this.value.trim()), this.value = ""
								}))
								.on("keypress", (function(ev) {
									13 === ev.which && (ev.preventDefault(), $watchInput.trigger(":addwatch"))
								})), $watchAdd.ariaClick((function() {
									return $watchInput.trigger(":addwatch")
								})), $watchAll.ariaClick(debugBarWatchAddAll), $watchNone.ariaClick(debugBarWatchClear), _$turnSelect.on("change", (function() {
									Engine.goTo(Number(this.value))
								})), $viewsToggle.ariaClick((function() {
									DebugView.toggle(), _updateSession()
								})), jQuery(document)
								.on(":historyupdate.debug-bar", _updateTurnSelect)
								.on(":passageend.debug-bar", (function() {
									_updateWatchBody(), _updateWatchList()
								}))
								.on(":enginerestart.debug-bar", _clearSession), _hasSession() || DebugView.enable()
						}
					},
					isStowed: {
						value: function() {
							return _stowed
						}
					},
					start: {
						value: function() {
							(function() {
								if (!_hasSession()) return !1;
								var debugState = session.get("debugState");
								_stowed = debugState.stowed, _watchList.push.apply(_watchList, _toConsumableArray(debugState.watchList)), debugState.watchEnabled ? _debugBarWatchEnableNoUpdate() : _debugBarWatchDisableNoUpdate();
								debugState.viewsEnabled ? DebugView.enable() : DebugView.disable()
							})(), _stowed ? debugBarStow() : debugBarUnstow(), _updateTurnSelect(), _updateWatchBody(), _updateWatchList()
						}
					},
					stow: {
						value: debugBarStow
					},
					toggle: {
						value: debugBarToggle
					},
					unstow: {
						value: debugBarUnstow
					},
					watch: {
						value: Object.freeze(Object.defineProperties({}, {
							add: {
								value: debugBarWatchAdd
							},
							all: {
								value: debugBarWatchAddAll
							},
							clear: {
								value: debugBarWatchClear
							},
							delete: {
								value: debugBarWatchDelete
							},
							disable: {
								value: debugBarWatchDisable
							},
							enable: {
								value: debugBarWatchEnable
							},
							isEnabled: {
								value: debugBarWatchIsEnabled
							},
							toggle: {
								value: debugBarWatchToggle
							}
						}))
					}
				}))
			}(),
			LoadScreen = function() {
				var _locks = new Set,
					_autoId = 0;

				function loadScreenHide() {
					jQuery(document.documentElement)
						.removeAttr("data-init")
				}

				function loadScreenShow() {
					jQuery(document.documentElement)
						.attr("data-init", "loading")
				}
				return Object.freeze(Object.defineProperties({}, {
					init: {
						value: function() {
							jQuery(document)
								.on("readystatechange.SugarCube", (function() {
									_locks.size > 0 || ("complete" === document.readyState ? "loading" === jQuery(document.documentElement)
										.attr("data-init") && (Config.loadDelay > 0 ? setTimeout((function() {
											0 === _locks.size && loadScreenHide()
										}), Math.max(Engine.minDomActionDelay, Config.loadDelay)) : loadScreenHide()) : loadScreenShow())
								}))
						}
					},
					clear: {
						value: function() {
							jQuery(document)
								.off("readystatechange.SugarCube"), _locks.clear(), loadScreenHide()
						}
					},
					hide: {
						value: loadScreenHide
					},
					show: {
						value: loadScreenShow
					},
					lock: {
						value: function() {
							return ++_autoId, _locks.add(_autoId), loadScreenShow(), _autoId
						}
					},
					unlock: {
						value: function(id) {
							if (null == id) throw new Error("LoadScreen.unlock called with a null or undefined ID");
							_locks.has(id) && _locks.delete(id), 0 === _locks.size && jQuery(document)
								.trigger("readystatechange")
						}
					}
				}))
			}(),
			version = Object.freeze({
				title: "SugarCube",
				major: 2,
				minor: 36,
				patch: 1,
				prerelease: null,
				build: 9717,
				date: new Date("2021-12-22T05:37:33.467Z"),
				extensions: {},
				toString: function() {
					var prerelease = this.prerelease ? "-".concat(this.prerelease) : "";
					return "".concat(this.major, ".")
						.concat(this.minor, ".")
						.concat(this.patch)
						.concat(prerelease, "+")
						.concat(this.build)
				},
				short: function() {
					var prerelease = this.prerelease ? "-".concat(this.prerelease) : "";
					return "".concat(this.title, " (v")
						.concat(this.major, ".")
						.concat(this.minor, ".")
						.concat(this.patch)
						.concat(prerelease, ")")
				},
				long: function() {
					return "".concat(this.title, " v")
						.concat(this.toString(), " (")
						.concat(this.date.toUTCString(), ")")
				}
			}),
			TempState = {},
			macros = {},
			postdisplay = {},
			postrender = {},
			predisplay = {},
			prehistory = {},
			prerender = {},
			session = null,
			settings = {},
			setup = {},
			storage = null,
			browser = Browser,
			config = Config,
			has = Has,
			History = State,
			state = State,
			tale = Story,
			TempVariables = State.temporary;
		window.SugarCube = {}, jQuery((function() {
			try {
				var lockId = LoadScreen.lock();
				LoadScreen.init(), document.normalize && document.normalize(), Story.load(), storage = SimpleStore.create(Story.domId, !0), session = SimpleStore.create(Story.domId, !1), Dialog.init(), UIBar.init(), Engine.init(), Story.init(), L10n.init(), session.has("rcWarn") || "cookie" !== storage.name || (session.set("rcWarn", 1), window.alert(L10n.get("warningNoWebStorage"))), Save.init(), Setting.init(), Macro.init(), Engine.start(), Config.debug && DebugBar.init();
				var $window = $(window),
					vprCheckId = setInterval((function() {
						$window.width() && (clearInterval(vprCheckId), UIBar.start(), Config.debug && DebugBar.start(), jQuery.event.trigger({
							type: ":storyready"
						}), setTimeout((function() {
							return LoadScreen.unlock(lockId)
						}), 2 * Engine.minDomActionDelay))
					}), Engine.minDomActionDelay);
				Object.defineProperty(window, "SugarCube", {
					value: Object.seal(Object.assign(Object.create(null), {
						Browser: Browser,
						Config: Config,
						Dialog: Dialog,
						Engine: Engine,
						Fullscreen: Fullscreen,
						Has: Has,
						L10n: L10n,
						Macro: Macro,
						Passage: Passage,
						Save: Save,
						Scripting: Scripting,
						Setting: Setting,
						SimpleAudio: SimpleAudio,
						State: State,
						Story: Story,
						UI: UI,
						UIBar: UIBar,
						DebugBar: DebugBar,
						Util: Util,
						Visibility: Visibility,
						Wikifier: Wikifier,
						session: session,
						settings: settings,
						setup: setup,
						storage: storage,
						version: version
					}))
				})
			} catch (ex) {
				return console.error(ex), LoadScreen.clear(), Alert.fatal(null, ex.message, ex)
			}
		}))
	})(window, window.document, jQuery);
}
	</script>


</body></html>